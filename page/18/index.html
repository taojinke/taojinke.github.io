
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/18/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/23337b7/" title="Memcached 1.4.24 发布，集中式缓存系统 -" itemprop="url">Memcached 1.4.24 发布，集中式缓存系统 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:36.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://www.oschina.net/news/61534/oschina-opensource-collection-plan-for-it-companies" target="_blank" rel="external">&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x7684; IT &#x516C;&#x53F8;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x6574;&#x7406;&#x8BA1;&#x5212;&#x4ECB;&#x7ECD;</a></p>
<p>Memcached 1.4.24 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x662F; Memcached 1.4.23 &#x7248;&#x672C;&#x7684; bug &#x4FEE;&#x590D;&#x7248;&#x672C;&#xFF0C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="http://www.memcached.org/files/memcached-1.4.24.tar.gz" target="_blank" rel="external">http://www.memcached.org/files/memcached-1.4.24.tar.gz</a> &#x3002; </p>
<p>&#x66F4;&#x591A;&#x6539;&#x8FDB;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://code.google.com/p/memcached/wiki/ReleaseNotes1424" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a> &#x3002; </p>
<p>memcached&#x662F;&#x4E00;&#x5957;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x5FEB;&#x53D6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F53;&#x521D;&#x662F;Danga Interactive&#x4E3A;&#x4E86;LiveJournal&#x6240;&#x53D1;&#x5C55;&#x7684;&#xFF0C;&#x4F46;&#x76EE;&#x524D;&#x88AB;&#x8BB8;&#x591A;&#x8F6F;&#x4EF6;&#xFF08;&#x5982;MediaWiki&#xFF09;&#x6240;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x5957;&#x5F00;&#x653E;&#x6E90;&#x4EE3;&#x7801;&#x8F6F;&#x4EF6;&#xFF0C;&#x4EE5;BSD license&#x6388;&#x6743;&#x91CA;&#x51FA;&#x3002; </p>
<p>memcached&#x7F3A;&#x4E4F;&#x8BA4;&#x8BC1;&#x4EE5;&#x53CA;&#x5B89;&#x5168;&#x7BA1;&#x5236;&#xFF0C;&#x8FD9;&#x4EE3;&#x8868;&#x5E94;&#x8BE5;&#x5C06;memcached&#x670D;&#x52A1;&#x5668;&#x653E;&#x7F6E;&#x5728;&#x9632;&#x706B;&#x5899;&#x540E;&#x3002;</p>
<p>memcached &#x7684;API&#x4F7F;&#x7528;&#x4E09;&#x5341;&#x4E8C;&#x4F4D;&#x5143;&#x7684;&#x5FAA;&#x73AF;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#xFF08;CRC-32&#xFF09;&#x8BA1;&#x7B97;&#x952E;&#x503C;&#x540E;&#xFF0C;&#x5C06;&#x8D44;&#x6599;&#x5206;&#x6563;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x5F53;&#x8868;&#x683C;&#x6EE1;&#x4E86;&#x4EE5;&#x540E;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x65B0;&#x589E;&#x7684;&#x8D44;&#x6599;&#x4F1A;&#x4EE5;LRU&#x673A;&#x5236;&#x66FF;&#x6362;&#x6389;&#x3002; &#x7531;&#x4E8E;memcached&#x901A;&#x5E38;&#x53EA;&#x662F;&#x5F53;&#x4F5C;&#x5FEB;&#x53D6;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;memcached&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5F0F;&#x5728;&#x5199;&#x56DE;&#x8F83;&#x6162;&#x7684;&#x7CFB;&#x7EDF;&#x65F6;&#xFF08;&#x50CF;&#x662F;&#x540E;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF09;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x7A0B;&#x5F0F;&#x7801;&#x66F4;&#x65B0; memcached&#x5185;&#x7684;&#x8D44;&#x6599;&#x3002;</p>
<p>memcached&#x5177;&#x6709;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x5305;&#xFF0C;&#x5305;&#x62EC;&#xFF1A;Perl/PHP/JAVA/C/Python/Ruby/C#/MySQL/</p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x5305;&#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x662F;&#xFFFD;&#xFFFD;&#xFFFD; <a href="http://code.google.com/p/memcached/wiki/Clients" target="_blank" rel="external">http://code.google.com/p/memcached/wiki/Clients</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/232e244/" title="IT 工程师文化碎碎念 -" itemprop="url">IT 工程师文化碎碎念 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:36.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5728;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x9119;&#x4EBA;&#x5C06;&#x7ED9;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x4E0B;&#x6211;&#x4E2A;&#x4EBA;&#x5BF9;&#x4E8E;IT&#x5DE5;&#x7A0B;&#x5E08;&#x4E8B;&#x52A1;&#x89C4;&#x5212;&#x4E0A;&#x7684;&#x4E00;&#x4E9B;&#x4F53;&#x609F;&#x611F;&#x53D7;&#xFF0C;&#x6B22;&#x8FCE;&#x62CD;&#x7816;&#x3002;</p>
<h4 id="&#x9879;&#x76EE;_+_&#x4EFB;&#x52A1;&#x9A71;&#x52A8;&#x5236;">&#x9879;&#x76EE; + &#x4EFB;&#x52A1;&#x9A71;&#x52A8;&#x5236;</h4><p>&#x4EE5;&#x8FD0;&#x7EF4;&#xFF08;&#x5F00;&#x53D1;&#xFF09;&#x4EBA;&#x5458;&#x7684;&#x89C6;&#x89D2;&#x6765;&#x770B;&#xFF0C;&#x6240;&#x6709;&#x5DE5;&#x4F5C;&#x4E0A;&#x7684;&#x4E8B;&#x52A1;&#x53EF;&#x4EE5;&#x5212;&#x5206;&#x4E3A;&#x4E24;&#x5927;&#x7C7B;&#xFF1A;Project &amp; Ticket.</p>
<p>&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x9879;&#x76EE;&#x5C31;&#x662F;&#x4E00;&#x4E9B;&#x8BA1;&#x5212;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;&#x96C6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;&#x7C7B;&#x4F3C;&#x722C;&#x866B;&#x5E94;&#x7528;&#x8FD9;&#x6837;&#x7684;&#x7814;&#x53D1;&#x9879;&#x76EE;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x50CF;Memcached&#x8FD0;&#x7EF4;&#x8FD9;&#x6837;&#x7684;&#x8FD0;&#x7EF4;&#x9879;&#x76EE;&#x3002;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x610F;&#x5473;&#x7740;&#x5F88;&#x591A;&#x7684;&#x65E5;&#x5E38;&#x4E8B;&#x52A1;&#xFF0C;&#x4E5F;&#x662F;&#x65E5;&#x5E38;&#x5DE5;&#x4F5C;&#x4E2D;&#x6700;&#x82B1;&#x65F6;&#x95F4;&#x7684;&#x3002;</p>
<p>&#x5DE5;&#x5355;&#xFF08;&#x53EF;&#x4EE5;&#x662F;&#x903B;&#x8F91;&#x62BD;&#x8C61;&#x5C42;&#x9762;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6BD4;&#x5982;&#x67D0;&#x7528;&#x6237;&#x7684;&#x4E00;&#x4E2A;&#x9700;&#x6C42;&#xFF09;&#x5219;&#x662F;&#x4E00;&#x4E9B;&#x6765;&#x81EA;&#x5404;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6211;&#x4EEC;&#x652F;&#x6301;&#x7684;&#x9879;&#x76EE;&#x96C6;&#x80FD;&#x591F;&#x6EE1;&#x8DB3;&#x6240;&#x6709;&#x7528;&#x6237;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x63A5;&#x53D7;&#x4ED6;&#x4EEC;&#x7684;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x9700;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x76F8;&#x5E94;&#x7684;&#x8BC4;&#x4F30; &amp; &#x8DDF;&#x8FDB;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x5B9E;&#x5728;&#x60F3;&#x4E0D;&#x5230;&#x66F4;&#x591A;&#x53EF;&#x4EE5;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x4E86; :)</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5DE5;&#x4F5C;&#x4E0A;&#x7684;&#x4E8B;&#x60C5;&#x4E5F;&#x8BB8;&#x4F1A;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<ul>
<li>&#x722C;&#x866B;&#x9879;&#x76EE;&#x5F00;&#x53D1;&#xFF1B;</li>
<li>&#x722C;&#x866B;&#x9879;&#x76EE;&#x8FD0;&#x7EF4;&#xFF1B;</li>
<li>Memcached &#x8C03;&#x4F18;&#xFF1B;</li>
<li>&#x8001;&#x5927;&#x8981;&#x6C42;&#x6536;&#x96C6;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684;&#x67D0;&#x4E9B;&#x53C2;&#x6570;&#x6307;&#x6807;&#x6C47;&#x603B;&#x6210;&#x62A5;&#x8868;&#x7ED9;&#x4ED6;&#x770B;&#x4E00;&#x4E0B;&#x3002;</li>
</ul>
<p>&#x90A3;&#x4E48;&#xFF0C;Project + Ticket&#x80FD;&#x5426;&#x518D;&#x7EC6;&#x5316;&#x62BD;&#x8C61;&#x4E00;&#x4E0B;&#x5462;? &#x6211;&#x60F3;&#xFF0C;&#x5B83;&#x5F53;&#x7136;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x9879;&#x76EE;&#x548C;&#x5DE5;&#x5355;&#x7684;&#x6240;&#x8C13;&#x201C;&#x9700;&#x6C42;&#x201D;&#xFF0C;&#x6BD4;&#x5982;&#x67D0;&#x5E94;&#x7528;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#x3001;&#x8FD0;&#x7EF4;&#x624B;&#x4E0A;&#x4E00;&#x4E9B;&#x5E94;&#x7528;&#x7684;&#x6539;&#x9020;&#x8C03;&#x4F18;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x7528;&#x6237;&#x7684;&#x7279;&#x6B8A;&#x9700;&#x6C42;&#xFF08;&#x5373;&#x4E2A;&#x6027;&#x5316;&#x7684;ticket&#xFF09;&#x7EDF;&#x4E00;&#x62BD;&#x8C61;&#x6210;&#x201C;&#x4EFB;&#x52A1;&#x201D;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x5F88;&#x660E;&#x4E86;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x4E8B;&#x60C5;&#x7684;&#x89C4;&#x5212;&#x6700;&#x540E;&#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x6210;&#x8FD9;&#x6837;&#xFF1A;</p>
<ul>
<li>&#xFF08;&#x722C;&#x866B;&#x9879;&#x76EE;&#x5F00;&#x53D1;&#xFF09;&#x4E3A;&#x67D0;&#x4E1A;&#x52A1;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4FEE;&#x6539;&#x722C;&#x866B;&#x4EE3;&#x7801;&#x6293;&#x53D6;&#x903B;&#x8F91;&#xFF1B;</li>
<li>&#xFF08;&#x722C;&#x866B;&#x9879;&#x76EE;&#x8FD0;&#x7EF4;&#xFF09;&#x4E3A;&#x67D0;&#x4E9B;&#x722C;&#x866B;&#x5BA2;&#x6237;&#x7AEF;&#x673A;&#x5668;&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7684;&#x5305;&#x5E76;&#x505A;&#x914D;&#x7F6E;&#xFF1B;</li>
<li>&#xFF08;Memcached&#x8FD0;&#x7EF4;&#xFF09;&#x4E3A;Memcached&#x673A;&#x5668;&#x8C03;&#x6574;Linux&#x5185;&#x6838;&#x53C2;&#x6570;&#x548C;swap&#x8BBE;&#x7F6E;&#xFF1B;</li>
<li>&#xFF08;&#x989D;&#x5916;ticket&#xFF09;&#x6536;&#x96C6;&#x673A;&#x5668;&#x53C2;&#x6570;&#x6307;&#x6807;&#xFF0C;&#x6C47;&#x603B;&#x62A5;&#x8868;&#xFF1B;</li>
</ul>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x4E9B;&#x4EC0;&#x4E48;&#x4E8B;&#x60C5;&#x3002; Ps. &#x5370;&#x8C61;&#x7B14;&#x8BB0;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;APP&#xFF0C;&#x4E5F;&#x8BB8;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x5B83;&#x505A;&#x8F7D;&#x4F53; :)</p>
<h4 id="&#x603B;&#x7ED3;&#x548C;&#x56DE;&#x987E;">&#x603B;&#x7ED3;&#x548C;&#x56DE;&#x987E;</h4><p>&#x65E2;&#x7136;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6E05;&#x695A;&#x7684;&#x77E5;&#x9053;&#x4E86;&#x81EA;&#x5DF1;&#x6240;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x7136;&#x5F97;&#x9700;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x505A;&#x56DE;&#x987E;&#x548C;&#x603B;&#x7ED3;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4; Memcached &#x8FD0;&#x7EF4; &#x8FD9;&#x6574;&#x4E2A;&#x7684;&#x9879;&#x76EE;&#x96C6;&#x8017;&#x8D39;&#x4E86;&#x81EA;&#x8EAB;&#x5F88;&#x591A;&#x7CBE;&#x529B;&#xFF0C;&#x90A3;&#x4E48;&#x6216;&#x8BB8;&#x5E94;&#x8BE5;&#x95EE;&#x81EA;&#x5DF1;&#x51E0;&#x4E2A;&#x95EE;&#x9898;&#xFF1A; </p>
<ul>
<li>&#x662F;&#x5426;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x90FD;&#x662F;&#x6709;&#x4EF7;&#x503C;&#x7684;&#x5462;?</li>
</ul>
<p>&#x5F53;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E9B;&#x603B;&#x7ED3;&#x548C;&#x56DE;&#x987E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9996;&#x5148;&#x5F97;&#x5224;&#x65AD;&#x505A;&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#x7684; &#x6536;&#x76CA; &#x662F;&#x5426;&#x8FBE;&#x5230;&#x9884;&#x671F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x662F;&#x5426;&#x5728;&#x505A;&#x4E00;&#x4E9B;&#x672C;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5462;? &#x6BD4;&#x5982;&#x4E00;&#x4E9B;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x672C;&#x6765;&#x53EF;&#x4EE5;&#x4EA4;&#x7ED9;crontab&#x4E4B;&#x7C7B;&#x7684;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;&#x6765;&#x505A;&#xFF0C;&#x81EA;&#x5DF1;&#x53BB;&#x624B;&#x5DE5;&#x505A;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x4FBF;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4EF7;&#x503C;&#xFF0C;&#x53C8;&#x6BD4;&#x5982;&#x5236;&#x9020;&#x51FA;&#x4E00;&#x4E9B;&#x6CA1;&#x6709;&#x4EBA;&#x6D88;&#x8D39;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6CA1;&#x6709;&#x4EF7;&#x503C;&#x7684;&#x3002; </p>
<p>&#x5728;&#x6211;&#x770B;&#x6765;&#xFF0C;&#x8BC4;&#x5224;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x662F;&#x5426;&#x505A;&#x7684;&#x6709;&#x4EF7;&#x503C;&#xFF0C;&#x9996;&#x5148;&#x4E00;&#x70B9;&#xFF0C;&#x5982;&#x679C;&#x8DDF;&#x8001;&#x5927;&#x6C47;&#x62A5;&#x8BF4;&#xFF0C;&#x6211;&#x6B63;&#x5728;&#x505A;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#xFF0C;&#x8001;&#x5927;&#x4F1A;&#x4E0D;&#x4F1A;&#x8BA4;&#x53EF;? &#x5176;&#x6B21;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x505A;&#x5B8C;&#x4E86;&#xFF0C;&#x662F;&#x5426;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E9B;&#x79EF;&#x6781;&#x7684;&#x53D8;&#x5316;? &#x6700;&#x540E;&#xFF0C;&#x82B1;&#x8D39;&#x5728;&#x8FD9;&#x4E2A;&#x4EFB;&#x52A1;&#x4E0A;&#x7684;&#x65F6;&#x95F4;&#x4E0E;&#x5B9E;&#x9645;&#x7684;&#x6536;&#x76CA;&#x662F;&#x5426;&#x6210;&#x6BD4;&#x4F8B;?</p>
<p>&#x5728;&#x7406;&#x6E05;&#x8FD9;&#x4E9B;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5B8C;&#x6210; &#x4EFB;&#x52A1; &#x7684;&#x6548;&#x7387;&#x53CA;&#x83B7;&#x53D6;&#x7684;&#x6536;&#x76CA;&#x4E5F;&#x8BB8;&#x4F1A;&#x66F4;&#x9AD8;&#x3002; </p>
<ul>
<li>&#x662F;&#x5426;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5B58;&#x5728; &gt; 10&#x6B21;&#x7684;&#x91CD;&#x590D;&#x5462;?</li>
</ul>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x88AB;&#x91CD;&#x590D;&#x7684;&#x64CD;&#x4F5C;&#x8D85;&#x8FC7;10&#x6B21;&#x4EE5;&#x4E0A;&#x800C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6539;&#x8FDB;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5F97;&#x8B66;&#x9192;&#x4E86;&#xFF0C;&#x662F;&#x5426;&#x8FD9;&#x4E2A;&#x4EFB;&#x52A1;&#x8FD8;&#x503C;&#x5F97;&#x7EE7;&#x7EED;&#x8FD9;&#x6837;&#x7684;&#x91CD;&#x590D;&#x52B3;&#x52A8;&#x5462;?</p>
<p>IT &#x754C;&#x8FD1;&#x51E0;&#x5E74;&#x63D0;&#x51FA;&#x7684;xx&#x81EA;&#x52A8;&#x5316;&#x6B63;&#x662F;&#x6E90;&#x4E8E;&#x5BF9;&#x91CD;&#x590D;&#x52B3;&#x52A8;&#x7684;&#x6DF1;&#x5165;&#x6539;&#x9020;&#x3002;&#x65E0;&#x8BBA;&#x662F;&#x534A;&#x81EA;&#x52A8;&#x5316;&#xFF0C;&#x8FD8;&#x662F;&#x5168;&#x81EA;&#x52A8;&#x5316;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x9700;&#x6C42;&#x9A71;&#x52A8;&#x4FBF;&#x662F;&#x201C;&#x5B83;&#x5B9E;&#x5728;&#x88AB;&#x91CD;&#x590D;&#x592A;&#x591A;&#x6B21;&#x6570;&#x4E86;&#x201D;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#xFF0C;&#x672C;&#x4EBA;&#x603B;&#x7ED3;&#x4E3A;&#xFF1A; &#x6807;&#x51C6;&#x5316; &amp; &#x6D41;&#x7A0B;&#x5316; &#x3002; </p>
<p>&#x4EE5;&#x722C;&#x866B;&#x81EA;&#x52A8;&#x6293;&#x53D6;&#x7F51;&#x9875;&#x6570;&#x636E;&#x4E3A;&#x4F8B;&#xFF0C;&#x5982;&#x679C;HTML&#x7684;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x4E0D;&#x662F;&#x89C4;&#x6574;&#x7684;XML&#x683C;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x6293;&#x53D6;&#x7684;&#x76EE;&#x6807;&#x6E90;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x6B63;&#x5219;&#x5339;&#x914D;&#x7684;&#x65B9;&#x5F0F;&#x5F88;&#x597D;&#x7684;&#x6293;&#x53D6;&#x51FA;&#x5B9E;&#x9645;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x722C;&#x866B;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x6293;&#x53D6;&#x4FBF;&#x6C38;&#x8FDC;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x68A6;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684; &#x6807;&#x51C6;&#x5316; &#xFF0C;&#x4F60;&#x9996;&#x5148;&#x5F97;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E2A;&#x4EFB;&#x52A1;&#x662F;&#x975E;&#x5E38;&#x6807;&#x51C6;&#x7684;&#x5E76;&#x4E14;&#x80FD;&#x5F88;&#x597D;&#x88AB;&#x62C6;&#x89E3;&#x7684;&#x3002; </p>
<p>&#x800C; &#x6D41;&#x7A0B;&#x5316; &#x5219;&#x662F;&#x6307;&#x8FD9;&#x4E2A;&#x91CD;&#x590D;&#x5B8C;&#x6210;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x672C;&#x8EAB;&#x662F;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x56FA;&#x5B9A;&#x7684;&#x6D41;&#x7A0B;&#x6216;&#x8005;&#x5DE5;&#x5E8F;&#x53BB;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5B83;&#x7684;&#x89E3;&#x9898;&#x903B;&#x8F91;&#x662F;&#x975E;&#x5E38;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5018;&#x82E5;&#x65E0;&#x6CD5;&#x8FBE;&#x6210;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x4E5F;&#x662F;&#x5F88;&#x96BE;&#x63A8;&#x52A8;&#x7684;&#x3002; </p>
<p>&#x5176;&#x5B9E;&#x5982;&#x679C;&#x80FD;&#x591F;&#x505A;&#x5230; &#x534A;&#x81EA;&#x52A8;&#x5316; &#xFF0C;&#x76F8;&#x4FE1;&#x4E5F;&#x662F;&#x6709;&#x5DE8;&#x5927;&#x4EF7;&#x503C;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0D;&#x518D;&#x5173;&#x5FC3;&#x5177;&#x4F53;&#x7684;&#x6280;&#x672F;&#x7EC6;&#x8282;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6309;&#x7167;&#x9700;&#x6C42;&#xFF0C;&#x5728;Web&#x4E0A;&#x70B9;&#x51E0;&#x4E2A;&#x6309;&#x94AE;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#xFF0C;&#x518D;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5F00;&#x653E;Web&#x5DE5;&#x5177;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x66B4;&#x9732;&#x7ED9;&#x6700;&#x7EC8;&#x7684;&#x9700;&#x6C42;&#x7528;&#x6237;&#xFF0C;&#x8BA9;&#x4ED6;&#x4EEC; &#x81EA;&#x52A9;&#x670D;&#x52A1; &#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x89E3;&#x653E;&#x53CC;&#x624B;&#x7684;&#x76EE;&#x7684;&#x3002; </p>
<h4 id="&#x79EF;&#x6781;&#x4E86;&#x89E3;&#x884C;&#x4E1A;&#x53D8;&#x5316;">&#x79EF;&#x6781;&#x4E86;&#x89E3;&#x884C;&#x4E1A;&#x53D8;&#x5316;</h4><p>IT &#x884C;&#x4E1A;&#x65E5;&#x65B0;&#x6708;&#x5F02;&#xFF0C;&#x6BCF;&#x5206;&#x6BCF;&#x79D2;&#x90FD;&#x5728;&#x53D1;&#x751F;&#x5DE8;&#x5927;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x5173;&#x6CE8;&#x5230;&#x8FD9;&#x4E9B;&#xFF0C;&#x90A3;&#x53EF;&#x80FD;&#x4F1A;&#x91CD;&#x590D;&#x9020;&#x4E00;&#x4E9B;&#x8F6E;&#x5B50;&#xFF0C;&#x4E25;&#x91CD;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x65F6;&#x4EE3;&#x6240;&#x629B;&#x5F03;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x5F53;&#x5F00;&#x6E90;&#x754C;&#x5DF2;&#x7ECF;&#x8BDE;&#x751F;&#x4E86;Linux&#x7CFB;&#x7EDF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x9020;&#x4E00;&#x4E2A;OS&#x4FBF;&#x662F;&#x611A;&#x8822;&#x4E4B;&#x4E3E;&#x4E86;&#x3002;&#x53C8;&#x6216;&#x8005;&#xFF0C;&#x5F53;&#x4E1A;&#x754C;&#x51FA;&#x73B0;&#x79CD;&#x7C7B;&#x7E41;&#x591A;&#x7684;&#x5F00;&#x53D1;&#x8BED;&#x8A00;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x56FA;&#x6267;&#x7684;&#x4F7F;&#x7528;&#x7740;&#x5355;&#x4E00;&#x8BED;&#x8A00;&#x505A;&#x5F00;&#x53D1;&#x4FBF;&#x53C8;&#x662F;&#x663E;&#x5F97;&#x8FC7;&#x65F6;&#x4E86;&#x3002;</p>
<p>&#x65F6;&#x65F6;&#x523B;&#x523B;&#x7684;&#x5173;&#x6CE8;&#x81EA;&#x8EAB;&#x6240;&#x5728;&#x7684;&#x884C;&#x4E1A;&#x7684;&#x53D8;&#x9769;&#xFF0C;&#x5173;&#x6CE8;Github&#x3001;InfoQ&#x3001;51CTO&#x7B49;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x7AD9;&#x70B9;&#x7684;&#x8D44;&#x8BAF;&#x4EE5;&#x53CA;&#x65B0;&#x5174;&#x6280;&#x672F;&#xFF0C;&#x65E0;&#x7591;&#x4F1A;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x4F5C;&#x6709;&#x5F88;&#x5927;&#x7684;&#x52A9;&#x529B;&#x3002;&#x503C;&#x5F97;&#x4E00;&#x63D0;&#x7684;&#x662F;&#xFF0C;&#x5F53;&#x4F60;&#x4ECE;&#x4E8B;&#x67D0;&#x9879;&#x804C;&#x4E1A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x878D;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x804C;&#x4E1A;&#x7684;&#x5708;&#x5B50;&#x4E5F;&#x662F;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x8FD0;&#x7EF4;&#x559C;&#x6B22;&#x52A0;&#x4E00;&#x4E9B;QQ&#x7FA4;&#xFF0C;&#x559C;&#x6B22;&#x53C2;&#x4E0E;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x5206;&#x4EAB;&#xFF0C;&#x559C;&#x6B22;&#x53C2;&#x52A0;QCon&#x4EE5;&#x53CA;&#x901B; <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0CCcQFjAB&amp;url=http%3A%2F%2Fbbs.linuxtone.org%2F&amp;ei=xXomVfuGBomqoQTZk4KIDw&amp;usg=AFQjCNEqhLo9k3D7DeA3MQYOIr_bLjBZIQ&amp;sig2=xO1PyvM3VUv6-HiEkqpdVg" target="_blank" rel="external">Linux Tone</a> &#xFF0C;&#x591A;&#x548C;&#x4E1A;&#x754C;&#x7684;&#x540C;&#x50DA;&#x6C9F;&#x901A;&#x4EA4;&#x6D41;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x81EA;&#x5DF1;&#x66F4;&#x591A;&#x7684;&#x7075;&#x611F;&#x548C;&#x673A;&#x4F1A;&#xFF08;&#x6BD4;&#x5982;&#x8DF3;&#x69FD;~&#xFF09;&#xFF01; </p>
<p>&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x4EE5;&#x4E0A;&#x4EC5;&#x4EC5;&#x662F;&#x9119;&#x4EBA;&#x7684;&#x4E00;&#x4E9B;&#x4E2A;&#x4EBA;&#x611F;&#x53D7;&#xFF0C;&#x4E0D;&#x559C;&#x52FF;&#x55B7;~</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/操作系统/">操作系统</a><a href="/tags/运维技术/">运维技术</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/232b170/" title="用Varnish和Memcached给WordPress网站提速 -" itemprop="url">用Varnish和Memcached给WordPress网站提速 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:36.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><img src="http://taojinke.github.io/img/20150703/232a059.gif" alt=""></p>
<p>Varnish&#x662F;&#x4E00;&#x6B3E;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x7F13;&#x5B58;&#x52A0;&#x901F;&#x5668;&#xFF0C;Varnish&#x628A;&#x6570;&#x636E;&#x5B58;&#x653E;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x5185;&#x5B58;&#x53EF;&#x4EE5;&#x6781;&#x5927;&#x7684;&#x63D0;&#x9AD8;PHP&#x9875;&#x9762;&#x6267;&#x884C;&#x901F;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;0&#xFF5E;60&#x79D2;&#x7684;&#x7CBE;&#x786E;&#x7F13;&#x5B58;&#x65F6;&#x95F4;&#xFF0C;32&#x4F4D;&#x7684;&#x673A;&#x5668;&#x652F;&#x6301;&#x7684;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x6700;&#x5927;&#x4E3A;2 GB&#x3002;</p>
<p>Varnish&#x91C7;&#x7528;VCL&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x800C;&#x4E14;&#x5177;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#xFF0C;&#x5982;top&#x3001;stat&#x3001;admin&#x3001;lis&#xFF0C;&#x7BA1;&#x7406;&#x65B9;&#x5F0F;&#x6BD4;&#x8F83;&#x7075;&#x6D3B;&#x3002;Varnish&#x7684;&#x72B6;&#x6001;&#x673A;&#x8BBE;&#x8BA1;&#x4E0D;&#x4EC5;&#x5DE7;&#x5999;&#xFF0C;&#x7ED3;&#x6784;&#x4E5F;&#x5F88;&#x6E05;&#x6670;&#xFF0C;&#x5229;&#x7528;&#x4E8C;&#x53C9;&#x5806;&#x7BA1;&#x7406;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#xFF0C;&#x5373;&#x53EF;&#x8FBE;&#x5230;&#x968F;&#x65F6;&#x5220;&#x9664;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<p>Memcached&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x5BF9;&#x8C61;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x8FC7;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x548C;&#x5BF9;&#x8C61;&#x6765;&#x51CF;&#x5C11;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x52A8;&#x6001;&#x3001;&#x6570;&#x636E;&#x5E93;&#x9A71;&#x52A8;&#x7F51;&#x7AD9;&#x7684;&#x901F;&#x5EA6;&#x3002;Memcached&#x5BF9;&#x4E8E;&#x51CF;&#x5C11;MysqL&#x6570;&#x636E;&#x67E5;&#x8BE2;&#x538B;&#x529B;&#x975E;&#x5E38;&#x6709;&#x5E2E;&#x52A9;&#x3002;</p>
<p>&#x7531;&#x4E8E;Varnish&#x91C7;&#x7528;&#x4E86;Visual Page Cache&#x6280;&#x672F;&#xFF0C;&#x6240;&#x6709;&#x7F13;&#x5B58;&#x7684;&#x6570;&#x636E;&#x90FD;&#x76F4;&#x63A5;&#x4ECE;&#x5185;&#x5B58;&#x8BFB;&#x53D6;&#xFF0C;&#x800C;Squid&#x4ECE;&#x786C;&#x76D8;&#x8BFB;&#x53D6;&#x7F13;&#x5B58;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;Varnish&#x5728;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x65B9;&#x9762;&#x4F1A;&#x66F4;&#x5FEB;&#x4E00;&#x4E9B;&#x3002;&#x4F46;&#x662F;Varnish&#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;CPU&#x3001;I/O&#x548C;&#x5185;&#x5B58;&#x7B49;&#x8D44;&#x6E90;&#x7684;&#x5F00;&#x9500;&#x9AD8;&#x4E8E;Squid&#x3002;</p>
<p>&#x76EE;&#x524D;Varnish3.0&#x7248;&#x672C;&#x89E3;&#x51B3;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x540E;Varnish&#x7F13;&#x5B58;&#x6D88;&#x5931;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E0A;&#x6709;&#x4E86;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x5347;&#x3002;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x5C31;&#x6765;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#x5229;&#x7528;Varnish&#x548C;Memcached&#x7F13;&#x5B58;&#x6765;&#x7ED9;Wordpress&#x52A0;&#x901F;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x7528;&#x5230;&#x5185;&#x5B58;&#xFF0C;&#x6240;&#x4EE5;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x90A3;&#x4E9B;&#x5927;&#x5185;&#x5B58;&#x7684;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<p>&#x7528;Varnish&#x548C;Memcached&#x7F13;&#x5B58;&#x7ED9;Wordpress&#x7F51;&#x7AD9;&#x63D0;&#x901F;-&#x5185;&#x5B58;&#x7EA7;&#x52A0;&#x901F;</p>
<p>&#x4E00;&#x3001;Varnish&#x5B89;&#x88C5;&#x65B9;&#x6CD5;</p>
<p>1&#x3001;Varnish&#x5B98;&#x7F51;&#xFF1A;</p>
<p>&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#xFF1A;<a href="https://www.varnish-cache.org/" target="_blank" rel="external">https://www.varnish-cache.org/</a></p>
<p>2&#x3001;&#x5BF9;&#x4E8E;Centos 5&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x5B89;&#x88C5;&#xFF1A;</p>
<p>rpm —nosignature -i <a href="http://repo.varnish-cache.org/redhat/varnish-3.0/el5/noarch/varnish-release/varnish-release-3.0-1.el5.centos.noarch.rpm" target="_blank" rel="external">http://repo.varnish-cache.org/redhat/varnish-3.0/el5/noarch/varnish-release/varnish-release-3.0-1.el5.centos.noarch.rpm</a></p>
<p>yum install varnish</p>
<p>3&#x3001;&#x5BF9;&#x4E8E;&#x662F;Centos 6&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x5B89;&#x88C5;&#xFF1A;</p>
<p>rpm —nosignature -i <a href="http://repo.varnish-cache.org/redhat/varnish-3.0/el6/noarch/varnish-release/varnish-release-3.0-1.el6.noarch.rpm" target="_blank" rel="external">http://repo.varnish-cache.org/redhat/varnish-3.0/el6/noarch/varnish-release/varnish-release-3.0-1.el6.noarch.rpm</a></p>
<p>yum install varnish</p>
<p><img src="http://taojinke.github.io/img/20150703/232a2ca.gif" alt=""></p>
<p><strong><a href="http://taojinke.github.io/img/20150703/232a2ca.gif">1</a> &#xA0;[2]&#xA0;[3]&#xA0;[4]&#xA0;[5]&#xA0;[6]&#xA0;[7]&#xA0;&#xA0;&#x4E0B;&#x4E00;&#x9875;</strong></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/Varnish/">Varnish</a><a href="/tags/WordPress/">WordPress</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/2328a60/" title="Repcached实现Memcached主从复制功能 -" itemprop="url">Repcached实现Memcached主从复制功能 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:36.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Repcached&#x4ECB;&#x7ECD;</p>
<p>Repchched&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href="http://repcached.sourceforge.net/" target="_blank" rel="external">http://repcached.sourceforge.net/</a></p>
<p>&#x5173;&#x4E8E;repcached</p>
<p>&#x201C;repcached&#x201D;&#x662F;&#x4E00;&#x4E2A;&#x8865;&#x4E01;&#x96C6;&#x5408;&#xFF0C;&#x5B83;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x590D;&#x5236;&#x529F;&#x80FD;&#x5230;memcached 1.2.x&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x76EE;&#x7684;</p>
<ul>
<li>&#x5B9E;&#x73B0;&#x5197;&#x4F59;memcached&#x7CFB;&#x7EDF;&#x3002;<br>&#xA0;<br>&#x4E3B;&#x8981;&#x529F;&#x80FD;</li>
<li>&#x591A;&#x4E3B;&#x590D;&#x5236;&#x3002;</li>
<li>&#x5F02;&#x6B65;&#x6570;&#x636E;&#x590D;&#x5236;&#x3002;</li>
<li>&#x652F;&#x6301;&#x6240;&#x6709;&#x7684;memcached&#x547D;&#x4EE4;&#xFF08;set, add, delete, incr/decr, flush_all, cas&#xFF09;&#x3002;</li>
</ul>
<p>Memcached 1.4.x&#x7684;Repcached&#x8865;&#x4E01;</p>
<p>&#x5730;&#x5740;&#xFF1A;<a href="http://mdounin.ru/" target="_blank" rel="external">http://mdounin.ru/</a></p>
<p>&#x6700;&#x65B0;&#x8865;&#x4E01;&#xFF1A;<a href="http://mdounin.ru/files/repcached-2.3.1-1.4.13.patch.gz" target="_blank" rel="external">http://mdounin.ru/files/repcached-2.3.1-1.4.13.patch.gz</a></p>
<p>&#x5DE5;&#x4F5C;&#x539F;&#x7406;</p>
<p>repcached&#x5B9E;&#x73B0;&#x4E86;memcached&#x590D;&#x5236;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5355;master&#x5355;slave&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x4F46;master/slave&#x90FD;&#x662F;&#x53EF;&#x8BFB;&#x5199;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x540C;&#x6B65;&#xFF0C;&#x5982;&#x679C;master&#x574F;&#x6389;slave&#x4FA6;&#x6D4B;&#x5230;&#x8FDE;&#x63A5;&#x65AD;&#x4E86;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;listen&#x800C;&#x6210;&#x4E3A;master&#xFF0C;&#x8FD9;&#x65F6;&#x574F;&#x6389;&#x7684;master&#x53EA;&#x80FD;&#x542F;&#x7528;&#x4E3A;slave&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x4E92;&#x6362;&#x89D2;&#x8272;&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x6301;&#x590D;&#x5236;&#x529F;&#x80FD;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;master&#x6CA1;&#x6709;&#x62A2;&#x5360;&#x529F;&#x80FD;&#xFF1B;&#x800C;&#x5982;&#x679C;slave&#x574F;&#x6389;&#xFF0C;master&#x4E5F;&#x4F1A;&#x4FA6;&#x6D4B;&#x5230;&#x8FDE;&#x63A5;&#x65AD;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x91CD;&#x65B0;listen&#x7B49;&#x5F85;&#x65B0;&#x7684;slave&#x52A0;&#x5165;&#x3002;</p>
<p>&#x5E94;&#x7528;&#x573A;&#x666F;</p>
<p>&#x7528;memcached&#x505A;session&#x5171;&#x4EAB;&#x6216;&#x5176;&#x5B83;&#x670D;&#x52A1;&#x65F6;&#x4F1A;&#x5B58;&#x5728;memcached&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#xFF0C;&#x5982;&#x679C;memcached&#x5B95;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#x65E0;&#x6CD5;&#x767B;&#x9646;(session)&#x3002;</p>
<p>&#x57FA;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x91C7;&#x7528;repcached&#x505A;memcached&#x7684;&#x4E3B;&#x4ECE;&#x5197;&#x4F59;&#x3002;</p>
<p>Repcached&#x4E0B;&#x8F7D;&#x5730;&#x5740;</p>
<p><a href="http://sourceforge.net/projects/repcached/files/repcached/" target="_blank" rel="external">http://sourceforge.net/projects/repcached/files/repcached/</a></p>
<p>Repcached&#x5B89;&#x88C5;&#x65B9;&#x5F0F;</p>
<p>Repcached&#x6709;&#x4E24;&#x79CD;&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p>1.&#x8865;&#x4E01;&#x7248;&#x672C;&#x5B89;&#x88C5;&#xA0;</p>
<p>&#x5148;&#x5B89;&#x88C5;&#x76F8;&#x5E94;&#x7248;&#x672C;&#x7684;memcached&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5E94;&#x7248;&#x672C;&#x7684;Repcached&#x8865;&#x4E01;&#x3002;</p>
<p>2.&#x6574;&#x5408;&#x7248;&#x672C;&#x5B89;&#x88C5;&#xA0;</p>
<p>&#x76F4;&#x63A5;&#x5B89;&#x88C5;&#x6574;&#x5408;&#x7248;&#x672C;&#x7684;memcached</p>
<p>&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;&#x8865;&#x4E01;&#x7248;&#x672C;&#x5B89;&#x88C5;</p>
<ol>
<li>&#x5B89;&#x88C5;Memcache&#xFF0C;&#x76F8;&#x5173;&#x5B89;&#x88C5;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x53C2;&#x89C1;&#x535A;&#x6587;&#xFF1A;&#xA0;</li>
</ol>
<p><a href="http://ultrasql.blog.51cto.com/9591438/1632179" target="_blank" rel="external">http://ultrasql.blog.51cto.com/9591438/1632179</a></p>
<ol>
<li>&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x7684;repcached&#x7248;&#x672C;&#x8865;&#x4E01;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#xFF1A;&#xA0;</li>
</ol>
<p>&#x5047;&#x8BBE;&#x5B89;&#x88C5;&#x7684;memcahced&#x7248;&#x672C;&#x4E3A;1.2.8&#xFF0C;&#x4E0B;&#x8F7D;&#x9488;&#x5BF9;&#x8BE5;&#x7248;&#x672C;&#x6700;&#x65B0;&#x7684;&#x8865;&#x4E01;:&#xA0; &#xA0;</p>
<p>wget <a href="http://softlayer-dal.dl.sourceforge.net/project/repcached/repcached/2.2.1-1.2.8/repcached-2.2.1-1.2.8.patch.gz" target="_blank" rel="external">http://softlayer-dal.dl.sourceforge.net/project/repcached/repcached/2.2.1-1.2.8/repcached-2.2.1-1.2.8.patch.gz</a></p>
<p>gzip -cd ../repcached-2.2.1-1.2.8.patch.gz | patch -p1&#xA0; &#xA0;</p>
<p>./configure —enable-replication&#xA0; &#xA0;</p>
<p>make &amp;&amp; make install</p>
<p>&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;&#x6574;&#x5408;&#x7248;&#x672C;&#x5B89;&#x88C5;1. &#x5B89;&#x88C5;libevent&#xFF1A;&#xA0; </p>
<p>cd /tmp</p>
<p>wget <a href="http://downloads.sourceforge.net/levent/libevent-2.0.22-stable.tar.gz&amp;#xA0" target="_blank" rel="external">http://downloads.sourceforge.net/levent/libevent-2.0.22-stable.tar.gz&amp;#xA0</a>; &#xA0;</p>
<p>tar zxvf libevent-2.0.22-stable.tar.gz&#xA0; &#xA0;</p>
<p>cd libevent-2.0.22-stable&#xA0; &#xA0;</p>
<p>./configure —prefix=/usr/local/lib&#xA0; &#xA0;</p>
<p>make &amp;&amp; make install</p>
<ol>
<li>&#x5C06;libevent&#x7684;&#x5E93;&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5230;&#x52A8;&#x6001;&#x5E93;&#x4E2D;&#xFF1A;</li>
</ol>
<p>vi /etc/ld.so.conf</p>
<p>&#x5728;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x884C;&#xFF1A;</p>
<p>/usr/local/lib //&#x6B64;&#x5904;&#x4E3A;&#x8981;&#x6DFB;&#x52A0;&#x7684;libevent&#x5E93;&#x76EE;&#x5F55;&#xA0; &#xA0;</p>
<p>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x52A8;&#x6001;lib&#x5E93;&#xA0; &#xA0;</p>
<p>ldconfig</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x65E0;&#x6B64;&#x6B65;&#x9AA4;&#xFF0C;&#x5728;&#x542F;&#x52A8;memcached&#x65F6;&#xFF0C;&#x4F1A;&#x63D0;&#x793A;&#x770B;&#x4E0D;&#x5230;libevent&#x7684;&#x5E93;&#x6587;&#x4EF6;&#x3002;</p>
<ol>
<li>&#x6D4B;&#x8BD5;libevent&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF1A;</li>
</ol>
<p>ls -al /usr/lib | grep libevent-</p>
<ol>
<li>&#x521B;&#x5EFA;&#x542F;&#x52A8;&#x5E10;&#x53F7;&#xFF1A;</li>
</ol>
<p>groupadd memcacheduseradd -g memcached memcached </p>
<ol>
<li>&#x521B;&#x5EFA;PID&#x8FDB;&#x7A0B;&#x76EE;&#x5F55;&#x5E76;&#x4FEE;&#x6539;&#x6240;&#x6709;&#x8005;&#xFF1A;</li>
</ol>
<p>mkdir /var/run/memcachedchown -R memcached.memcached /var/run/memcached </p>
<ol>
<li>&#x5B89;&#x88C5;&#x6574;&#x5408;memcached-repcached&#x5305;&#xFF1A;</li>
</ol>
<p>cd /tmp</p>
<p>wget <a href="http://softlayer-dal.dl.sourceforge.net/project/repcached/repcached/2.2.1-1.2.8/memcached-1.2.8-repcached-2.2.1.tar.gz&amp;#xA0" target="_blank" rel="external">http://softlayer-dal.dl.sourceforge.net/project/repcached/repcached/2.2.1-1.2.8/memcached-1.2.8-repcached-2.2.1.tar.gz&amp;#xA0</a>; &#xA0;</p>
<p>cp memcached-1.2.8-repcached-2.2.1.tar.gz /usr/local&#xA0; &#xA0;</p>
<p>cd /usr/local&#xA0; &#xA0;</p>
<p>tar zxvf memcached-1.2.8-repcached-2.2.1.tar.gz&#xA0; &#xA0;</p>
<p>mv memcached-1.2.8-repcached-2.2.1 memcached&#xA0; &#xA0;</p>
<p>cd memcached&#xA0; &#xA0;</p>
<p>./configure —prefix=/usr/local/memcached —with-libevent=/usr/local/lib —enable-replication —enable-64bit</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x9ED8;&#x8BA4;memcached&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x53EA;&#x652F;&#x6301;&#x5230;2G&#x5185;&#x5B58;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x5927;&#x5185;&#x5B58;&#x652F;&#x6301;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x6253;&#x5F00;64&#x4F4D;&#x652F;&#x6301;&#xFF0C;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x53C2;&#x6570;&#xFF1A;—enable-64bit </p>
<p>make &amp;&amp; make install</p>
<p>&#x63D0;&#x793A;&#x7F16;&#x8BD1;&#x51FA;&#x9519;&#xFF1A;</p>
<p>make all-recursive</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85883.htm" target="_blank" rel="external">1</a>: Entering directory `/usr/local/memcached&apos;&#xA0; &#xA0;</p>
<p>Making all in doc&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: Entering directory `/usr/local/memcached/doc&apos;&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: Nothing to be done for `all&apos;.&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: Leaving directory `/usr/local/memcached/doc&apos;&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: Entering directory `/usr/local/memcached&apos;&#xA0; &#xA0;</p>
<p>gcc -DHAVE_CONFIG_H -I. -DNDEBUG -m64 -g -O2 -MT memcached-memcached.o -MD&#xA0; &#xA0; &#xA0;</p>
<p>MP -MF .deps/memcached-memcached.Tpo -c -o memcached-memcached.o `test -f&#xA0; &#xA0; &#xA0;</p>
<p>memcached.c&apos; || echo &apos;./&apos;`memcached.c&#xA0; &#xA0;</p>
<p>memcached.c: In function &#x2018;add_iov&#x2019;:&#xA0; &#xA0;</p>
<p>memcached.c:697: error: &#x2018;IOV_MAX&#x2019; undeclared (first use in this function)&#xA0; &#xA0;</p>
<p>memcached.c:697: error: (Each undeclared identifier is reported only once&#xA0; &#xA0;</p>
<p>memcached.c:697: error: for each function it appears in.)&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: <em>*</em> [memcached-memcached.o] Error 1&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">2</a>: Leaving directory `/usr/local/memcached&apos;&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85883.htm" target="_blank" rel="external">1</a>: <em>*</em> [all-recursive] Error 1&#xA0; &#xA0;</p>
<p>make<a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85883.htm" target="_blank" rel="external">1</a>: Leaving directory `/usr/local/memcached&apos;&#xA0; &#xA0;</p>
<p>make: <em>*</em> [all] Error 2</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<p>vi memcached.c</p>
<p>&#x5C06;&#x4E0B;&#x9762;&#x7684;&#x51E0;&#x884C;</p>
<p>/<em> FreeBSD 4.x doesn&apos;t have IOV_MAX exposed. </em>/</p>
<h1 id="ifndef_IOV_MAX&#xA0;_&#xA0;">ifndef IOV_MAX&#xA0; &#xA0;</h1><h1 id="if_defined(FreeBSD)_||_defined(APPLE)&#xA0;_&#xA0;">if defined(<strong>FreeBSD</strong>) || defined(<strong>APPLE</strong>)&#xA0; &#xA0;</h1><h1 id="define_IOV_MAX_1024&#xA0;_&#xA0;">define IOV_MAX 1024&#xA0; &#xA0;</h1><h1 id="endif&#xA0;_&#xA0;">endif&#xA0; &#xA0;</h1><h1 id="endif">endif</h1><p>&#x4FEE;&#x6539;&#x4E3A;</p>
<p>/<em> FreeBSD 4.x doesn&apos;t have IOV_MAX exposed. </em>/</p>
<h1 id="ifndef_IOV_MAX&#xA0;_&#xA0;-1">ifndef IOV_MAX&#xA0; &#xA0;</h1><h1 id="define_IOV_MAX_1024&#xA0;_&#xA0;-1">define IOV_MAX 1024&#xA0; &#xA0;</h1><h1 id="endif-1">endif</h1><p>&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x548C;&#x5B89;&#x88C5;&#xFF1A;</p>
<p>make &amp;&amp; make install</p>
<p>&#x67E5;&#x770B;&#x5E2E;&#x52A9;&#xFF1A;</p>
<p>./bin/memcached -h</p>
<p>memcached 1.2.8</p>
<p>repcached 2.2.1&#xA0; &#xA0;</p>
<p>-p &lt;num&gt; TCP port number to listen on (default: 11211)&#xA0; &#xA0;</p>
<p>-U &lt;num&gt; UDP port number to listen on (default: 11211, 0 is off)&#xA0; &#xA0;</p>
<p>-s &lt;file&gt; unix socket path to listen on (disables network support)&#xA0; &#xA0;</p>
<p>-a &lt;mask&gt; access mask for unix socket, in octal (default 0700)&#xA0; &#xA0;</p>
<p>-l &lt;ip_addr&gt; interface to listen on, default is INDRR_ANY&#xA0; &#xA0;</p>
<p>-d run as a daemon&#xA0; &#xA0;</p>
<p>-r maximize core file limit&#xA0; &#xA0;</p>
<p>-u &lt;username&gt; assume identity of &lt;username&gt; (only when run as root)&#xA0; &#xA0;</p>
<p>-m &lt;num&gt; max memory to use for items in megabytes, default is 64 MB&#xA0; &#xA0;</p>
<p>-M return error on memory exhausted (rather than removing items)&#xA0; &#xA0;</p>
<p>-c &lt;num&gt; max simultaneous connections, default is 1024&#xA0; &#xA0;</p>
<p>-k lock down all paged memory. Note that there is a&#xA0; &#xA0;</p>
<p>limit on how much memory you may lock. Trying to&#xA0; &#xA0;</p>
<p>allocate more than that would fail, so be sure you&#xA0; &#xA0;</p>
<p>set the limit correctly for the user you started&#xA0; &#xA0;</p>
<p>the daemon with (not for -u &lt;username&gt; user;&#xA0; &#xA0;</p>
<p>under sh this is done with &apos;ulimit -S -l NUM_KB&apos;).&#xA0; &#xA0;</p>
<p>-v verbose (print errors/warnings while in event loop)&#xA0; &#xA0;</p>
<p>-vv very verbose (also print client commands/reponses)&#xA0; &#xA0;</p>
<p>-h print this help and exit&#xA0; &#xA0;</p>
<p>-i print memcached and libevent license&#xA0; &#xA0;</p>
<p>-P &lt;file&gt; save PID in &lt;file&gt;, only used with -d option&#xA0; &#xA0;</p>
<p>-f &lt;factor&gt; chunk size growth factor, default 1.25&#xA0; &#xA0;</p>
<p>-n &lt;bytes&gt; minimum space allocated for key+value+flags, default 48&#xA0; &#xA0;</p>
<p>-R Maximum number of requests per event&#xA0; &#xA0;</p>
<p>limits the number of requests process for a given con nection&#xA0; &#xA0;</p>
<p>to prevent starvation. default 20&#xA0; &#xA0;</p>
<p>-b Set the backlog queue limit (default 1024)&#xA0; &#xA0;</p>
<p>-x &lt;ip_addr&gt; hostname or IP address of peer repcached&#xA0; &#xA0;</p>
<p>-X &lt;num:num&gt; TCP port number for replication. &lt;listen:connect&gt; (default: 11212)</p>
<p>&#x4FEE;&#x6539;memcached&#x76EE;&#x5F55;&#x6240;&#x6709;&#x8005;&#xFF1A;</p>
<p>cd ..chown -R memcached.memcached memcached </p>
<p>&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;</p>
<p>&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>-x &#x8BBE;&#x7F6E;&#x4ECE;&#x54EA;&#x4E2A;IP&#x4E0A;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#x3002;</p>
<p>-X &#x6307;&#x5B9A;&#x6570;&#x636E;&#x540C;&#x6B65;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>
<p>Memcached&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x662F;11211&#xFF0C;&#x9ED8;&#x8BA4;&#x540C;&#x6B65;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x662F;11212&#x3002;</p>
<p>&#x542F;&#x52A8;Master&#xFF1A;</p>
<p>/usr/local/memcached/bin/memcached -d -m 100 -l 192.168.11.51 -p 11211 -u memcached -c 1024 -x 192.168.11.52 -X 11212 -P /var/run/memcached/memcached-rep.pid</p>
<p>&#x67E5;&#x770B;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#xFF1A;netstat -tupln | grep memcached </p>
<p>tcp 0 0 192.168.11.51:11211 0.0.0.0:* LISTEN 18634/memcached</p>
<p>tcp 0 0 192.168.11.51:11212 0.0.0.0:* LISTEN 18634/memcached</p>
<p>udp 0 0 192.168.11.51:11211 0.0.0.0:* 18634/memcached</p>
<p>&#x542F;&#x52A8;Slave&#xFF1A;</p>
<p>/usr/local/memcached/bin/memcached -d -m 100 -l 192.168.11.52 -p 11211 -u memcached -c 1024 -x 192.168.11.51 -X 11212 -P /var/run/memcached/memcached-rep.pid</p>
<p>&#x8BF4;&#x660E;&#xFF1A;-x 192.168.11.51&#x7528;&#x4E8E;&#x540C;&#x6B65;&#x7684;Master&#x7684;IP&#x5730;&#x5740;&#x3002;</p>
<p>&#x67E5;&#x770B;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#xFF1A;</p>
<p>netstat -tupln | grep memcached</p>
<p>tcp 0 0 192.168.11.52:11211 0.0.0.0:<em> LISTEN 24262/memcachedudp 0 0 192.168.11.52:11211 0.0.0.0:</em> 24262/memcached </p>
<p>&#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x540C;&#x6B65;</p>
<p>&#x5728;Master&#x521B;&#x5EFA;&#x6570;&#x636E;&#xFF1A;[root@test01 bin]# telnet 192.168.11.51 11211 </p>
<p>Trying 192.168.11.51…</p>
<p>Connected to 192.168.11.51.</p>
<p>Escape character is &apos;^]&apos;.</p>
<p>get key1</p>
<p>END</p>
<p>set key1 0 0 2</p>
<p>aa</p>
<p>STORED</p>
<p>quit</p>
<p>Connection closed by foreign host.</p>
<p>&#x5728;Slave&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF1A;[root@test02 bin]# telnet 192.168.11.52 11211 </p>
<p>Trying 192.168.11.52…</p>
<p>Connected to 192.168.11.52.</p>
<p>Escape character is &apos;^]&apos;.</p>
<p>get key1</p>
<p>END</p>
<p>get key1</p>
<p>VALUE key1 0 2</p>
<p>aa</p>
<p>END</p>
<p>quit</p>
<p>Connection closed by foreign host.</p>
<p>&#x5728;Slave&#x521B;&#x5EFA;&#x6570;&#x636E;&#xFF1A;</p>
<p>[root@test02 bin]# telnet 192.168.11.52 11211</p>
<p>Trying 192.168.11.52…</p>
<p>Connected to 192.168.11.52.</p>
<p>Escape character is &apos;^]&apos;.</p>
<p>get key2</p>
<p>END</p>
<p>set key2 0 0 3</p>
<p>b</p>
<p>STORED</p>
<p>get key2</p>
<p>VALUE key2 0 3</p>
<p>b</p>
<p>END</p>
<p>quit</p>
<p>Connection closed by foreign host.</p>
<p>&#x5728;Master&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF1A;</p>
<p>[root@test01 bin]# telnet 192.168.11.51 11211</p>
<p>Trying 192.168.11.51…</p>
<p>Connected to 192.168.11.51.</p>
<p>Escape character is &apos;^]&apos;.</p>
<p>get key2</p>
<p>VALUE key2 0 3</p>
<p>b</p>
<p>END</p>
<p>quit</p>
<p>Connection closed by foreign host.</p>
<p>Memcached&#x9AD8;&#x53EF;&#x7528; </p>
<p>&#x542F;&#x52A8;Master&#x548C;Slave&#x65F6;&#x4E0D;&#x8981;&#x52A0;-l&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x76D1;&#x542C;&#x5730;&#x5740;&#xFF0C;&#x5426;&#x5219;keepalived&#x65E0;&#x6CD5;&#x76D1;&#x542C;VIP&#x7684;&#x5730;&#x5740;&#x3002;&#x7136;&#x540E;&#x914D;&#x7F6E;&#x4E0A;keepalived&#x5C31;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x9AD8;&#x53EF;&#x7528;&#x4E86;&#x3002; </p>
<p>Memcached &#x5B89;&#x88C5;&#x53CA;&#x542F;&#x52A8;&#x811A;&#x672C; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-07/87641.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-07/87641.htm</a></p>
<p>PHP&#x4E2D;&#x4F7F;&#x7528;Memcached&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85883.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-06/85883.htm</a></p>
<p>Ubuntu&#x4E0B;&#x5B89;&#x88C5;Memcached&#x53CA;&#x547D;&#x4EE4;&#x89E3;&#x91CA; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-06/85832.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-06/85832.htm</a></p>
<p>Memcached&#x7684;&#x5B89;&#x88C5;&#x548C;&#x5E94;&#x7528; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-08/89165.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-08/89165.htm</a></p>
<p>&#x4F7F;&#x7528;Nginx+Memcached&#x7684;&#x5C0F;&#x56FE;&#x7247;&#x5B58;&#x50A8;&#x65B9;&#x6848; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2013-11/92390.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-11/92390.htm</a></p>
<p>Memcached&#x4F7F;&#x7528;&#x5165;&#x95E8; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2011-12/49516p2.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2011-12/49516p2.htm</a></p>
<p> <strong>Memcached &#x7684;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</strong> &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p> Memcached &#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740; &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p> <strong>&#x672C;&#x6587;&#x6C38;&#x4E45;&#x66F4;&#x65B0;&#x94FE;&#x63A5;&#x5730;&#x5740;</strong> &#xFF1A; <a href="http://www.linuxidc.com/Linux/2015-04/../../Linux/2015-04/116330.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2015-04/116330.htm</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fc8640/" title="在windows系统下安装memcached -" itemprop="url">在windows系统下安装memcached -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Memcached &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x5BF9;&#x8C61;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x52A8;&#x6001;Web&#x5E94;&#x7528;&#x4EE5;&#x51CF;&#x8F7B;&#x6570;&#x636E;&#x5E93;&#x8D1F;&#x8F7D;&#x3002;&#x5B83;&#x901A;&#x8FC7;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x548C;&#x5BF9;&#x8C61;&#x6765;&#x51CF;&#x5C11;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x52A8;&#x6001;&#x3001;&#x6570;&#x636E;&#x5E93;&#x9A71;&#x52A8;&#x7F51;&#x7AD9;&#x7684;&#x901F;&#x5EA6;&#x3002;Memcached&#x57FA;&#x4E8E;&#x201C;Key=&gt;Value&#x201D;&#x65B9;&#x5F0F;&#x7EC4;&#x7EC7;&#x6570;&#x636E;&#xFF0C;&#x57FA;&#x4E8E;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x5B8C;&#x6210;&#x670D;&#x52A1;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;memcached&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x662F;&#x6613;&#x5931;&#x7684;&#xFF0C;&#x5F53;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#xFF0C;&#x6216;&#x8005;memcached&#x8FDB;&#x7A0B;&#x4E2D;&#x6B62;&#xFF0C;&#x6570;&#x636E;&#x4FBF;&#x4F1A;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;memcached&#x4E0D;&#x80FD;&#x7528;&#x6765;&#x6301;&#x4E45;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x4E00;&#x4E0B;&#x5728;windows&#x7CFB;&#x7EDF;&#x4E0B;&#x5982;&#x4F55;&#x5B89;&#x88C5;memcached</p>
<p>&#xFF08;1&#xFF09;&#x5B89;&#x88C5;memcache&#x9996;&#x5148;&#x4F60;&#x5F97;&#x4E0B;&#x8F7D;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;memcached &#x7684;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x548C;php&#x6240;&#x9700;&#x8981;&#x7684; pecl &#x6269;&#x5C55; php_memcache.dll &#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x662F;&#x4ECB;&#x7ECD;&#x5728; windows &#x4E0B;&#x9762;&#x5B89;&#x88C5; memcached &#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x662F; memcached.exe &#x6587;&#x4EF6;&#x3002; memcached.exe &#x5177;&#x4F53;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x4E3A;&#xFF1A; <a href="http://code.jellycan.com/files/memcached-1.2.6-win32-bin.zip" target="_blank" rel="external">http://code.jellycan.com/files/memcached-1.2.6-win32-bin.zip</a> &#xFF0C;&#x81F3;&#x4E8E; php_memcache.dll&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1;&#x53BB;&#x767E;&#x5EA6;&#x641C;&#x5427;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x4E00;&#x5B9A;&#x8981;&#x548C;&#x81EA;&#x5DF1;&#x7684;php&#x7248;&#x672C;&#x76F8;&#x540C;&#x3002; </p>
<p>&#xFF08;2&#xFF09;&#x4EE5;&#x4E0A;&#x6240;&#x9700;&#x5DE5;&#x5177;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#xFF0C;&#x90A3;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5B89;&#x88C5;&#x5E76;&#x8C03;&#x8BD5;&#x4E86;&#x3002;&#x9996;&#x5148;&#x5B89;&#x88C5; memcache&#x3002;</p>
<p>&#x5C06;&#x4E0B;&#x8F7D;&#x7684; memcache &#x6587;&#x4EF6;&#x5305;&#x89E3;&#x538B;&#x653E;&#x67D0;&#x4E2A;&#x76D8;&#xFFFD;&#xFFFD;&#xFFFD;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#x5728;c:\memcached</p>
<p>&#x5728;&#x7EC8;&#x7AEF;&#xFF08;&#x5373;cmd&#x547D;&#x4EE4;&#x754C;&#x9762;&#xFF09;&#x4E0B;&#x8F93;&#x5165; &quot;c:\memcached\memcached.exe -d install&quot; &#x5B89;&#x88C5;</p>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4F60;&#x53EF;&#x80FD;&#x4E0D;&#x77E5;&#x9053;&#x4F60;&#x5B89;&#x88C5;&#x7684; memcache &#x4F7F;&#x7528;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x7AEF;&#x53E3;&#xFF0C;&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4FEE;&#x6539;&#x6CE8;&#x518C;&#x8868;&#x5C06;&#x7AEF;&#x53E3;&#x4FEE;&#x6539;&#x4E3A;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x6253;&#x5F00;&#x6CE8;&#x518C;&#x8868;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x627E;&#x5230; HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\memcached Server &#x4E0B;&#x9762;&#x627E;&#x5230;&#x4E00;&#x4E2A; ImagePath &#x7684;&#x5B57;&#x7B26;&#x4E32;&#x9879;&#xFF0C;&#x53CC;&#x51FB;&#x8BE5;&#x4E32;&#xFF0C;&#x5728;&#x8BE5;&#x9879;&#x76EE;&#x503C;&#x540E;&#x9762;&#x8FFD;&#x52A0;&#x5199;&#x5165; -l 127.0.0.1 -m 45 -p 51321 &#xFF08;&#x8FD9;&#x91CC;&#x7684;&#x610F;&#x601D;&#x5373;&#x8BBF;&#x95EE;ip&#x4E3A;&#xFF1A;127.0.0.1 &#x4F7F;&#x7528;45M&#x5185;&#x5B58;&#xFF0C;51321&#x4E3A;&#x7AEF;&#x53E3;&#xFF09;&#xFF0C;&#x4FEE;&#x6539;&#x5B8C;&#x6BD5;&#x5173;&#x95ED;&#x6CE8;&#x518C;&#x8868;&#x7F16;&#x8F91;&#x5668;&#x3002;</p>
<p>&#x63A5;&#x7740;&#x547D;&#x4EE4;&#x754C;&#x9762;&#x91CC;&#x8F93;&#x5165;&#xFF1A;&quot;c:\memcached\memcached.exe -d start&quot; &#x542F;&#x52A8; memcache &#x670D;&#x52A1;&#x6216;&#x8005;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x670D;&#x52A1;&#x9879;&#x91CC;&#x9762;&#x627E;&#x5230;memcached&#x670D;&#x52A1;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x64CD;&#x4F5C;&#x5B8C;&#x6BD5;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x68C0;&#x6D4B;&#x4E00;&#x4E0B;&#x7F13;&#x5B58;&#x670D;&#x52A1; memcache &#x662F;&#x5426;&#x6210;&#x529F;&#x5B89;&#x88C5;&#x5E76;&#x8FD0;&#x884C;&#x4E86;&#x3002;&#x7EE7;&#x7EED;&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;&#xFF1A;&quot;telnet 127.0.0.1 51321&quot;&#xFF0C;&#x8F93;&#x5165;&#x5B8C;&#x6BD5;&#x53EF;&#x80FD;&#x4EC0;&#x4E48;&#x53CD;&#x5E94;&#xFF0C;&#x63A5;&#x7740;&#x8F93;&#x5165; stats &#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E00;&#x5806;&#x7C7B;&#x4F3C;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x770B;&#x61C2;&#x6216;&#x770B;&#x4E0D;&#x61C2;&#x7684;&#x82F1;&#x6587;&#xFF0C;&#x5C31;&#x8BF4;&#x660E; memcache &#x670D;&#x52A1;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x5B89;&#x88C5;&#x5E76;&#x8FD0;&#x884C;&#x4E86;&#x3002;</p>
<pre><code><span class="label">STAT</span> pid <span class="number">5636</span>
<span class="label">STAT</span> uptime <span class="number">936</span>
<span class="label">STAT</span> time <span class="number">1344915126</span>
<span class="label">STAT</span> version <span class="number">1</span>.<span class="number">2</span>.<span class="number">6</span>
<span class="label">STAT</span> pointer_size <span class="number">32</span>
<span class="label">STAT</span> curr_items <span class="number">0</span>
<span class="label">STAT</span> total_items <span class="number">0</span>
<span class="label">STAT</span> <span class="keyword">bytes </span><span class="number">0</span>
<span class="label">STAT</span> curr_connections <span class="number">2</span>
<span class="label">STAT</span> total_connections <span class="number">3</span>
<span class="label">STAT</span> connection_structures <span class="number">3</span>
<span class="label">STAT</span> cmd_get <span class="number">0</span>
<span class="label">STAT</span> cmd_set <span class="number">0</span>
<span class="label">STAT</span> get_hits <span class="number">0</span>
<span class="label">STAT</span> get_misses <span class="number">0</span>
<span class="label">STAT</span> evictions <span class="number">0</span>
<span class="label">STAT</span> <span class="keyword">bytes_read </span><span class="number">19</span>
<span class="label">STAT</span> <span class="keyword">bytes_written </span><span class="number">7</span>
<span class="label">STAT</span> limit_maxbytes <span class="number">67108864</span>
<span class="label">STAT</span> threads <span class="number">1</span>
<span class="label">END</span>
</code></pre><p><strong>[1] &#xA0;[2]&#xA0;&#xA0;&#x4E0B;&#x4E00;&#x9875;</strong></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/Windows/">Windows</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fd164b/" title="分布式系统中异步处理的优化 -" itemprop="url">分布式系统中异步处理的优化 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="&#x5355;&#x673A;&#x65F6;&#x4EE3;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;_&#x5341;&#x4E94;&#x5E74;&#x524D;&#x5199;&#x8F6F;&#x4EF6;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;Client&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;DB_Server&#xFF0C;&#x6216;&#x8005;&#x591A;&#x4E2A;Client&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;DB_Server&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;Client&#x6267;&#x884C;&#x5404;&#x81EA;&#x7684;&#x670D;&#x52A1;&#x3002;&#x5F53;&#x65F6;&#x7684;&#x8BA8;&#x8BBA;&#x5F88;&#x591A;&#x662F;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x8981;&#x5199;&#x5728;Client&#x7AEF;&#x8FD8;&#x662F;&#x5199;&#x5728;DB_Server&#x7AEF;&#xFF0C;&#x6D41;&#x884C;&#x7684;&#x601D;&#x8DEF;&#x6709;&#x4E24;&#x79CD;&#xFF1A;"><strong>&#x5355;&#x673A;&#x65F6;&#x4EE3;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;</strong> &#x5341;&#x4E94;&#x5E74;&#x524D;&#x5199;&#x8F6F;&#x4EF6;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;Client&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;DB Server&#xFF0C;&#x6216;&#x8005;&#x591A;&#x4E2A;Client&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;DB Server&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;Client&#x6267;&#x884C;&#x5404;&#x81EA;&#x7684;&#x670D;&#x52A1;&#x3002;&#x5F53;&#x65F6;&#x7684;&#x8BA8;&#x8BBA;&#x5F88;&#x591A;&#x662F;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x8981;&#x5199;&#x5728;Client&#x7AEF;&#x8FD8;&#x662F;&#x5199;&#x5728;DB Server&#x7AEF;&#xFF0C;&#x6D41;&#x884C;&#x7684;&#x601D;&#x8DEF;&#x6709;&#x4E24;&#x79CD;&#xFF1A;</h3><p>&#x628A;DB Server&#x5199;&#x5F97;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x6BD4;&#x5982;Oracle&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;Client&#x7AEF;&#x5219;&#x5199;&#x5F97;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x6709;&#x8C03;&#x7528;&#x8FD4;&#x56DE;DB&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x6709;&#x7B80;&#x5355;&#x7684;&#x8868;&#xFF0C;&#x800C;Client&#x5199;&#x5F97;&#x590D;&#x6742;&#x3002;&#x5F88;&#x591A;&#x521B;&#x4E1A;&#x516C;&#x53F8;&#x4F1A;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x5BF9;SQL&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x719F;&#x6089;PHP&#x3002;&#x65E9;&#x671F;Facebook&#x5C31;&#x662F;&#x5178;&#x578B;&#x7684;&#x4EE3;&#x8868; </p>
<h3 id="&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;_&#x5355;&#x673A;&#x65F6;&#x4EE3;&#x968F;&#x7740;&#x4E24;&#x4E2A;&#x8D8B;&#x52BF;&#x800C;&#x9010;&#x6E10;&#x6210;&#x4E3A;&#x5386;&#x53F2;&#x3002;&#x4E00;&#x4E2A;&#x8D8B;&#x52BF;&#x662F;&#x968F;&#x7740;&#x4E92;&#x8054;&#x7F51;&#x7684;&#x6D41;&#x884C;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x4EBA;&#x5F00;&#x59CB;&#x4E0A;&#x7F51;&#x4F7F;&#x7528;Web&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x7528;&#x6237;&#x589E;&#x957F;&#x901F;&#x5EA6;&#x662F;&#x975E;&#x5E38;&#x5FEB;&#x7684;&#xFF0C;&#x7ED3;&#x679C;&#x9020;&#x6210;&#x4E00;&#x53F0;DB_Server&#x65E0;&#x6CD5;&#x50A8;&#x5B58;&#x4E0B;&#x6240;&#x6709;&#x7528;&#x6237;&#x7684;&#x6570;&#x636E;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x8D8B;&#x52BF;&#x662F;&#x8BA1;&#x7B97;&#x673A;&#x80FD;&#x529B;&#x8D8A;&#x6765;&#x8D8A;&#x5F3A;&#xFF0C;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x9488;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x4E5F;&#x53D8;&#x591A;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;Facebook&#x4E0D;&#x4EC5;&#x8981;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x8FD8;&#x6709;&#x4ED6;&#x7684;&#x5173;&#x7CFB;&#x94FE;&#x4FE1;&#x606F;&#xFF0C;&#x4ED6;&#x7684;&#x4F7F;&#x7528;&#x4E60;&#x60EF;&#x3001;&#x70B9;&#x51FB;&#x4E60;&#x60EF;&#x7B49;&#xFF0C;&#x5C31;&#x9020;&#x6210;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFFFD;&#xFFFD;&#xFFFD;&#x6570;&#x636E;&#x91CF;&#x4E5F;&#x5927;&#x5927;&#x589E;&#x52A0;&#xFF0C;&#x4EC5;&#x4EC5;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;DB_Server&#x5C31;&#x51C6;&#x5907;&#x597D;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x53D8;&#x6210;&#x4E86;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x4E8B;&#x60C5;&#x3002;">&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42; &#x5355;&#x673A;&#x65F6;&#x4EE3;&#x968F;&#x7740;&#x4E24;&#x4E2A;&#x8D8B;&#x52BF;&#x800C;&#x9010;&#x6E10;&#x6210;&#x4E3A;&#x5386;&#x53F2;&#x3002;&#x4E00;&#x4E2A;&#x8D8B;&#x52BF;&#x662F;&#x968F;&#x7740;&#x4E92;&#x8054;&#x7F51;&#x7684;&#x6D41;&#x884C;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x4EBA;&#x5F00;&#x59CB;&#x4E0A;&#x7F51;&#x4F7F;&#x7528;Web&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x7528;&#x6237;&#x589E;&#x957F;&#x901F;&#x5EA6;&#x662F;&#x975E;&#x5E38;&#x5FEB;&#x7684;&#xFF0C;&#x7ED3;&#x679C;&#x9020;&#x6210;&#x4E00;&#x53F0;DB Server&#x65E0;&#x6CD5;&#x50A8;&#x5B58;&#x4E0B;&#x6240;&#x6709;&#x7528;&#x6237;&#x7684;&#x6570;&#x636E;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x8D8B;&#x52BF;&#x662F;&#x8BA1;&#x7B97;&#x673A;&#x80FD;&#x529B;&#x8D8A;&#x6765;&#x8D8A;&#x5F3A;&#xFF0C;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x9488;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x4E5F;&#x53D8;&#x591A;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;Facebook&#x4E0D;&#x4EC5;&#x8981;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x8FD8;&#x6709;&#x4ED6;&#x7684;&#x5173;&#x7CFB;&#x94FE;&#x4FE1;&#x606F;&#xFF0C;&#x4ED6;&#x7684;&#x4F7F;&#x7528;&#x4E60;&#x60EF;&#x3001;&#x70B9;&#x51FB;&#x4E60;&#x60EF;&#x7B49;&#xFF0C;&#x5C31;&#x9020;&#x6210;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFFFD;&#xFFFD;&#xFFFD;&#x6570;&#x636E;&#x91CF;&#x4E5F;&#x5927;&#x5927;&#x589E;&#x52A0;&#xFF0C;&#x4EC5;&#x4EC5;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;DB Server&#x5C31;&#x51C6;&#x5907;&#x597D;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x53D8;&#x6210;&#x4E86;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x4E8B;&#x60C5;&#x3002;</h3><p>&#x8FD9;&#x5C31;&#x5E26;&#x6765;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x9488;&#x5BF9;&#x591A;&#x4E2A;DB Server&#x7684;&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x600E;&#x4E48;&#x5199;&#xFF1F;</p>
<h4 id="&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E5F;&#x6709;&#x4E24;&#x4E2A;&#x601D;&#x8DEF;&#xFF1A;">&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E5F;&#x6709;&#x4E24;&#x4E2A;&#x601D;&#x8DEF;&#xFF1A;</h4><p>&#x4E32;&#x884C;&#x540C;&#x6B65;&#x3002;&#x5148;query DB1&#xFF0C;&#x8FD4;&#x56DE;res1&#xFF0C;&#x518D;&#x4F7F;&#x7528;res1&#x505A;&#x53E6;&#x4E00;&#x4E2A;DB&#x7684;query&#xFF0C;&#x8FD4;&#x56DE;res2&#x3002;&#x8FD9;&#x662F;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;Query&#x4F9D;&#x8D56;&#x7B2C;&#x4E00;&#x4E2A;Query&#x7ED3;&#x679C;&#x7684;&#x60C5;&#x51B5;</p>
<p>&#x5E76;&#x884C;&#x540C;&#x6B65;&#x3002;&#x9488;&#x5BF9;DB1&#x7684;query&#x8DDF;&#x9488;&#x5BF9;DB2&#x7684;query&#x540C;&#x6B65;&#x8FDB;&#x884C;&#x3002;&#x8FD9;&#x662F;&#x4E24;&#x4E2A;Query&#x4E4B;&#x95F4;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#x3002;Facebook&#x65E9;&#x671F;&#x4E13;&#x95E8;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x5E76;&#x884C;&#x5904;&#x7406;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x6CD5;&#x662F; ExecParallelQuery(conn1,Query1,conn2,Query2)</p>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x6BD4;&#x4EE5;&#x524D;&#x7684;&#x4EE3;&#x7801;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD8;&#x662F;&#x80FD;&#x5B9E;&#x73B0;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x9700;&#x6C42;&#x3002;&#x4F46;&#x8FD9;&#x65F6;&#x5019;&#x5E26;&#x6765;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;&#x7B49;&#x5F85;&#x3002;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x7684;&#x52A0;&#x8F7D;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x540C;&#x7684;&#x51FD;&#x6570;&#x53EF;&#x80FD;&#x662F;&#x7531;&#x4E0D;&#x540C;&#x7684;&#x56E2;&#x961F;&#x5199;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x83B7;&#x53D6;&#x670B;&#x53CB;&#x5173;&#x7CFB;&#x7684;&#x51FD;&#x6570;getFriends&#x628A;&#x81EA;&#x5DF1;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x7528;&#x540C;&#x6B65;&#x7684;&#x65B9;&#x5F0F;&#x83B7;&#x53D6;&#x4E86;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7B2C;&#x4E09;&#x65B9;&#x5F00;&#x53D1;&#x8005;&#x8FC7;&#x6765;&#xFF0C;&#x5219;&#x4E0D;&#x4EC5;&#x8981;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x5C31;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x524D;&#x9762;&#x8FD9;&#x4E2A;getFriends&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E86;&#x7ED3;&#x679C;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x5F00;&#x59CB;&#x6267;&#x884C;&#xFF0C;&#x5C31;&#x5F88;&#x6162;&#x4E86;&#x3002;</p>
<p>&#x8981;&#x5982;&#x4F55;&#x505A;&#x5230;&#x5E76;&#x884C;&#x5904;&#x7406;&#x5728;&#x4EE3;&#x7801;&#x5C42;&#x9762;&#x5F88;&#x76F4;&#x89C2;&#xFF0C;&#x5728;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;&#x53C8;&#x597D;&#x5462;&#xFF1F;</p>
<p>&#x5F02;&#x6B65;&#x7684;&#x5904;&#x7406;&#x601D;&#x8DEF;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x6765;&#x7684;&#x3002;</p>
<p>&#x6240;&#x8C13;&#x5F02;&#x6B65;&#x5C31;&#x662F;&#xFF0C;&#x6211;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x77E5;&#x9053;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x54EA;&#x51E0;&#x4E2A;DB Server&#xFF0C;&#x4F46;&#x6211;&#x5148;&#x4E0D;&#x7740;&#x6025;&#x53BB;&#x8BBF;&#x95EE;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#xFF0C;&#x7B49;&#x7B49;&#x770B;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x662F;&#x4E0D;&#x662F;&#x4E5F;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;DB&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#xFF0C;&#x5F85;&#x4F1A;&#x513F;&#x518D;&#x4E00;&#x8D77;&#x53BB;&#x8BBF;&#x95EE;&#x3002;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x7684;&#x6307;&#x4EE4;&#x6BD4;&#x5982;&#x8BF4;&#x662F; conn.asyncExec(Query) &#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x7ACB;&#x523B;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;Future&#x5BF9;&#x8C61;&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x201C;&#x5F85;&#x4F1A;&#x513F;&#x518D;&#x53BB;&#x6267;&#x884C;&#x201D;&#x3002;&#x5982;&#x679C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x8FD4;&#x56DE;&#x8FD9;&#x79CD;Future&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E9B;Future&#x5BF9;&#x8C61;&#x6765;&#x5224;&#x65AD;&#x54EA;&#x4E9B;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x54EA;&#x4E9B;&#x8BF7;&#x6C42;&#x6709;&#x4F9D;&#x8D56;&#x9700;&#x8981;&#x4E32;&#x884C;&#x5904;&#x7406;&#x4E86;&#x3002;&#x5982;&#x6B64;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x56E2;&#x961F;&#x5199;&#x51FA;&#x6765;&#x7684;&#x51FD;&#x6570;&#x5C31;&#x4E0D;&#x7528;&#x4E00;&#x4E2A;&#x7B49;&#x4E00;&#x4E2A;&#xFF0C;&#x800C;&#x662F;&#x53EF;&#x4EE5;&#x5728;&#x66F4;&#x9AD8;&#x5C42;&#x9762;&#x4E0A;&#x4E92;&#x76F8;&#x5408;&#x4F5C;&#x3002;</p>
<p>&#x7136;&#x800C;&#x8FD9;&#x53C8;&#x5E26;&#x6765;&#x4E86;&#xFFFD;&#xFFFD;&#xFFFD;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x7684;&#x5199;&#x6CD5;&#x662F;&#x5177;&#x6709;&#x4F20;&#x67D3;&#x6027;&#x7684;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4E2D;&#x6709;&#x7684;&#x51FD;&#x6570;&#x5199;&#x7684;&#x5F02;&#x6B65;&#xFF0C;&#x6709;&#x7684;&#x51FD;&#x6570;&#x6CA1;&#x5199;&#x5F02;&#x6B65;&#xFF0C;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x6709;&#x7684;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E86;Future Object&#xFF0C;&#x6709;&#x7684;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E86;&#x6570;&#x503C;&#xFF0C;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x6267;&#x884C;&#x3002;&#x8981;&#x5B9E;&#x73B0;&#x5F02;&#x6B65;&#xFF0C;&#x9700;&#x8981;&#x5173;&#x8054;&#x7684;&#x6240;&#x6709;&#x51FD;&#x6570;&#x90FD;&#x7528;&#x5F02;&#x6B65;&#x7684;&#x5199;&#x6CD5;&#x8FD4;&#x56DE;Future Object&#x624D;&#x53EF;&#x4EE5;&#x3002;</p>
<p>&#x6240;&#x4EE5;Facebook&#x5728;&#x8F6C;&#x5411;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#x975E;&#x5E38;&#x75DB;&#x82E6;&#x7684;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x505A;&#x4E86;&#x5C40;&#x90E8;&#x4FEE;&#x6539;&#xFF0C;&#x518D;&#x4FEE;&#x6539;&#x8C03;&#x7528;&#x4E86;&#x5C40;&#x90E8;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x6709;&#x8C03;&#x7528;&#x7684;&#x8C03;&#x7528;&#x90FD;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x6700;&#x540E;&#x5168;&#x90E8;&#x6539;&#x6210;&#x4E86;&#x5F02;&#x6B65;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x8C03;&#x7528;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;IO&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x8981;&#x6539;&#x3002;&#x6BCF;&#x4E00;&#x4E2A;DB Query&#x90FD;&#x62C6;&#x5206;&#x6210;&#x4E24;&#x6B65;&#xFF0C;&#x4E00;&#x4E2A;set request&#xFF0C;&#x4E00;&#x4E2A;receive response&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x521B;&#x4E1A;&#x56E2;&#x961F;&#x7684;&#x8BDD;&#xFF0C;&#x6700;&#x597D;&#x662F;&#x7B2C;&#x4E00;&#x5929;&#x5C31;&#x7528;&#x6B63;&#x786E;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x8FD9;&#x4E48;&#x75DB;&#x82E6;&#x3002;</p>
<p>&#x6240;&#x6709;&#x51FD;&#x6570;&#x6539;&#x5199;&#x540E;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6267;&#x884C;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;Future Object&#x3002;&#x90A3;&#x4E48;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x8FD9;&#x4E9B;Future Object&#x5F62;&#x6210;&#x4E00;&#x68F5;&#x4F9D;&#x8D56;&#x6811;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x597D;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;</p>
<p><a href="http://webphpdo-images.stor.sinaapp.com/uploads/2015/04/future_obj_tree.jpg" target="_blank" rel="external"><img src="http://taojinke.github.io/img/20150703/1fd0052.jpg" alt=""></a></p>
<p>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x7684;&#x4F18;&#x5316; &#x8FD9;&#x91CC;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x4E00;&#x4E2A;Future&#x5BF9;&#x8C61;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;Future&#x5BF9;&#x8C61;&#x6709;&#x4E24;&#x79CD;&#x72B6;&#x6001;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x7B49;&#x5F85;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5B8C;&#x6210;&#x6267;&#x884C;&#x3002;&#x540C;&#x7EA7;&#x7684;&#x8282;&#x70B9;&#x662F;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x6267;&#x884C;&#xFF1B;&#x4E0A;&#x4E0B;&#x8282;&#x70B9;&#x662F;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x4E0B;&#x5C42;&#x518D;&#x6267;&#x884C;&#x4E0A;&#x5C42;&#x3002;</p>
<p>&#x6811;&#x7ED3;&#x6784;&#x5F62;&#x6210;&#x540E;&#xFF0C;&#x4ECE;&#x4E0B;&#x5230;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x76F4;&#x5230;&#x6700;&#x4E0A;&#x9762;&#x7684;top parent&#x8282;&#x70B9;&#x88AB;&#x6267;&#x884C;&#x8FDB;&#x5165;&#x5B8C;&#x6210;&#x6267;&#x884C;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x662F;&#x5B8C;&#x6210;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x52A0;&#x8F7D;&#x5B8C;&#x6BD5;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x4E4B;&#x540E;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x610F;&#x601D;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;PHP&#x8FD9;&#x4E2A;&#x8BED;&#x8A00;&#x5DF2;&#x7ECF;&#x8DDF;&#x4EE5;&#x524D;&#x4E0D;&#x540C;&#x4E86;&#xFF0C;&#x4E0D;&#x518D;&#x662F;&#x4E00;&#x4E0A;&#x6765;&#x5C31;&#x662F;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E0A;&#x6765;&#x5148;lazy&#x4E00;&#x4E0B;&#xFF0C;&#x770B;&#x6E05;&#x695A;&#x6240;&#x6709;&#x7684;Query&#x4E4B;&#x540E;&#x518D;&#x6267;&#x884C;&#x3002;</p>
<h3 id="&#x5F02;&#x6B65;&#x5904;&#x7406;&#x8FD8;&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;_&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x4F3C;&#x4E4E;&#x5DF2;&#x7ECF;&#x662F;&#x8DB3;&#x591F;&#x597D;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x8FD8;&#x6709;&#x95EE;&#x9898;&#x3002;&#x770B;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;">&#x5F02;&#x6B65;&#x5904;&#x7406;&#x8FD8;&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898; &#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x4F3C;&#x4E4E;&#x5DF2;&#x7ECF;&#x662F;&#x8DB3;&#x591F;&#x597D;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x8FD8;&#x6709;&#x95EE;&#x9898;&#x3002;&#x770B;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;</h3><p>&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6709;&#x4E24;&#x4E2A;&#x67E5;&#x8BE2;&#x9700;&#x6C42;&#x3002;&#x4E00;&#x4E2A;&#x662F;&#x67E5;&#x8BE2;&#x4F60;&#x5728;&#x6DD8;&#x5B9D;&#x4E0A;&#x4E70;&#x8FC7;&#x4E1C;&#x897F;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x67E5;&#x8BE2;&#x4F60;&#x5728;&#x6DD8;&#x5B9D;&#x4E0A;&#x4E70;&#x8FC7;&#x4FDD;&#x65F6;&#x6377;&#x7684;&#x670B;&#x53CB;&#x3002;&#x5E38;&#x7406;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5148;&#x60F3;&#x5230;&#x67E5;&#x8BE2;&#x4F60;&#x5728;&#x6DD8;&#x5B9D;&#x4E0A;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x53E6;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x6837;&#xFF1A;</p>
<p>IdList friends = waitFor(getFriends(myId));<br>yield return getTaoBaoBuyers(friends);&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4FDD;&#x65F6;&#x6377;&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x662F;&#x4E0D;&#x5BF9;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6DD8;&#x5B9D;&#x4E0A;&#x4E70;&#x4FDD;&#x65F6;&#x6377;&#x7684;&#x4EBA;&#x662F;&#x5F88;&#x5C11;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x4E00;&#x4E24;&#x4E2A;&#xFF0C;&#x800C;&#x6DD8;&#x5B9D;&#x4E0A;&#x7684;&#x597D;&#x53CB;&#x6570;&#x53EF;&#x80FD;&#x6709;&#x4E0A;&#x767E;&#x3002;&#x56E0;&#x6B64;&#x4FDD;&#x65F6;&#x6377;&#x7684;&#x67E5;&#x8BE2;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x4E2A;&#x6B21;&#x5E8F;&#x6BD4;&#x8F83;&#x4F18;&#x5316;&#xFF1A;</p>
<p>IdList buyers = waitFor(getPorscheBuyer());<br>yield return getFriends(buyers);&#x8FD9;&#x4E2A;&#x6B21;&#x5E8F;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x51B3;&#x5B9A;&#xFF1F;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x5E94;&#x8BE5;&#x5728;&#x5199;&#x7A0B;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x51B3;&#x5B9A;&#xFF0C;&#x56E0;&#x4E3A;&#x5199;&#x7A0B;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x662F;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x6709;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x7684;&#x2014;&#x2014;&#x7F16;&#x8F91;&#x5668;&#x53EA;&#x80FD;&#x4E00;&#x884C;&#x4E00;&#x884C;&#x7684;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x673A;&#x5668;&#x6267;&#x884C;&#x5374;&#x65E0;&#x9700;&#x7BA1;&#x8FD9;&#x4E2A;&#x3002;&#x6240;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#x5E94;&#x8BE5;&#x662F;&#x5728;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x4E4B;&#x524D;&#x518D;&#x52A0;&#x5165;&#x4E00;&#x4E2A;phase&#x3002;</p>
<p>&#x5176;&#x5B9E;&#x4F20;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x7684;cardinality&#xFF08;&#x57FA;&#x6570;&#xFF09;&#x529F;&#x80FD;&#x5DF2;&#x7ECF;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x4F60;&#x5728;DB query&#x91CC;&#x9762;&#x4F7F;&#x7528; INNER JOIN &#x8FD9;&#x4E2A;&#x6307;&#x4EE4;&#xFF0C;&#x5176;&#x5B9E;DB&#x5DF2;&#x7ECF;&#x80FD;&#x591F;&#x9884;&#x5224;&#x54EA;&#x4E00;&#x4E2A;&#x8868;&#x7ED9;&#x51FA;&#x7684;row&#x4F1A;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x4ECE;&#x800C;&#x4EE5;&#x66F4;&#x4F18;&#x5316;&#x7684;&#x6B21;&#x5E8F;&#x53BB;&#x6267;&#x884C;&#x3002;&#x4F46;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7528;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;PHP&#xFF0C;Java&#xFF0C;Python&#x8FD8;&#x662F;C/C++&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8003;&#x8651;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x6709;&#x4EBA;&#x4F1A;&#x5F00;&#x5F88;&#x591A;&#x7EBF;&#x7A0B;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x8FD9;&#x4E0D;&#x662F;&#x6700;&#x4F73;&#x65B9;&#x6848;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;Linux&#x7CFB;&#x7EDF;&#x91CC;&#xFF0C;&#x4F60;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x8981;&#x662F;&#x4E0A;&#x4E86;200-300&#xFF0C;&#x5C31;&#x4F1A;&#x6709;&#x5F88;&#x5927;&#x7684;overhead&#x3002;</p>
<p>&#x4EE3;&#x7801;&#x6267;&#x884C;&#x7684;&#x6B21;&#x5E8F;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x3002;&#x53E6;&#x5916;&#x6700;&#x8FD1;&#x51E0;&#x5E74;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x6D41;&#x884C;&#x7684;&#x4F18;&#x5316;&#x601D;&#x8DEF;&#xFF0C;&#x5C31;&#x662F;&#x4E0A;memcache&#x3002;&#x6211;&#x4EEC;&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x770B;&#x5230;&#x7A0B;&#x5E8F;&#x5458;&#x628A;&#x4ED6;&#x81EA;&#x5DF1;&#x7684;&#x51FD;&#x6570;&#x653E;&#x8FDB;&#x4E86;memcache&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x4F9D;&#x8D56;&#x6811;&#x7684;&#x4E2D;&#x95F4;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x6211;&#x5C31;&#x95EE;&#x4ED6;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x628A;&#x4ED6;&#x8FD9;&#x4E2A;Class&#x653E;&#x5165;memcache&#xFF0C;&#x4ED6;&#x53EF;&#x80FD;&#x4F1A;&#x8BF4;&#xFF0C;&#x4ED6;&#x89C9;&#x5F97;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x548C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;child&#x88AB;&#x8C03;&#x7528;&#x7684;&#x6B21;&#x6570;&#x591A;&#x3002;&#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x7406;&#x60F3;&#x7684;&#x3002;&#x4F60;&#x4ECA;&#x5929;&#x89C9;&#x5F97;&#x8FD9;&#x4E2A;Class&#x88AB;&#x8C03;&#x7528;&#x7684;&#x591A;&#xFF0C;&#x53EF;&#x4EE5;&#x653E;&#x8FDB;memcache&#xFF0C;&#x4F46;&#x660E;&#x5929;&#x662F;&#x4E0D;&#x662F;&#x4F1A;&#x6709;&#x66F4;&#x91CD;&#x8981;&#x7684;Class&#x4F1A;&#x66F4;&#x503C;&#x5F97;&#x653E;&#x8FDB;memcache&#xFF0C;&#x4E8E;&#x662F;&#x4F60;&#x53C8;&#x8981;&#x628A;memcache&#x7684;&#x8D44;&#x6E90;&#x8BA9;&#x7ED9;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;Class&#xFF1F;&#x5982;&#x679C;&#x4F60;&#x653E;&#x5165;memcache&#x7684;Class&#x5E76;&#x4E0D;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x771F;&#x6B63;&#x4F18;&#x5316;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x88AB;&#x62FF;&#x8D70;&#x4E86;&#x3002;</p>
<h4 id="&#x5982;&#x4F55;&#x8BA9;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x66F4;&#x597D;&#xFF1F;">&#x5982;&#x4F55;&#x8BA9;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x66F4;&#x597D;&#xFF1F;</h4><p>&#x54EA;&#x4E2A;query&#x5148;&#x6267;&#x884C;&#xFF0C;&#x54EA;&#x4E2A;query&#x540E;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x662F;&#x5728;&#x7F16;&#x7801;&#x9636;&#x6BB5;&#x6765;&#x505A;&#x7684;&#x3002;&#x54EA;&#x4E2A;Class&#x8BE5;&#x8FDB;memcache&#xFF0C;&#x54EA;&#x4E2A;Class&#x8BE5;&#x51FA;memcache&#xFF0C;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x5728;&#x7F16;&#x7801;&#x9636;&#x6BB5;&#x6765;&#x505A;&#x3002;&#x5E94;&#x8BE5;&#x6709;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x4E13;&#x95E8;&#x8FDB;&#x884C;&#x8FD9;&#x79CD;&#x8C03;&#x5EA6;&#x5DE5;&#x4F5C;&#xFF0C;&#x7136;&#x800C;&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x8FD8;&#x6CA1;&#x6709;&#x516C;&#x53F8;&#x80FD;&#x591F;&#x505A;&#x5230;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;&#x8BED;&#x8A00;&#x3002;</p>
<p>&#x5F02;&#x6B65;&#x5904;&#x7406;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x600E;&#x6837;&#x505A;&#x6709;&#x66F4;&#x597D;&#x7684;&#x4F18;&#x5316;&#x4F5C;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x601D;&#x8003;&#x3002;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x80FD;&#x591F;&#x628A;&#x8BA1;&#x7B97;&#x673A;&#x5F53;&#x4F5C;&#x79D1;&#x5B66;&#x53BB;&#x601D;&#x8003;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x5DE5;&#x7A0B;&#x5E94;&#x7528;&#x3002;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x770B;&#x5341;&#x51E0;&#x5E74;&#x524D;&#xFF0C;&#x5BF9;&#x5355;&#x673A;&#x662F;&#x975E;&#x5E38;&#x4E86;&#x89E3;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x672A;&#x6765;&#x8FC7;&#x4E86;&#x4E94;&#x5E74;&#x5341;&#x5E74;&#x518D;&#x56DE;&#x6765;&#x770B;&#xFF0C;&#x53EF;&#x80FD;&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E5F;&#x4F1A;&#x4E86;&#x89E3;&#x7684;&#x6BD4;&#x73B0;&#x5728;&#x66F4;&#x591A;&#x5F88;&#x591A;&#xFF0C;&#x53EF;&#x80FD;&#x7ED9;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5199;&#x7A0B;&#x5E8F;&#x4E5F;&#x4F1A;&#x53D8;&#x5F97;&#x8DDF;&#x7ED9;&#x5355;&#x673A;&#x5199;&#x7A0B;&#x5E8F;&#x4E00;&#x6837;&#x7B80;&#x5355;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x66F4;&#x5408;&#x9002;&#x7684;&#x5DE5;&#x5177;&#x8BED;&#x8A00;&#x53BB;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x8FD9;&#x79CD;&#x5F02;&#x6B65;&#x7684;&#x4FBF;&#x5229;&#x3002;&#x662F;&#x4E0D;&#x662F;&#x4F1A;&#x6709;Haskell&#x90A3;&#x6837;lazy&#x7684;&#x65B9;&#x5F0F;&#x4ECE;&#x7CFB;&#x7EDF;&#x5C42;&#x9762;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1F;&#x5E0C;&#x671B;&#x8DDF;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x601D;&#x8003;&#x63A2;&#x8BA8;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/分布式系统/">分布式系统</a><a href="/tags/数据库/">数据库</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fd5f89/" title="MicroPHP 2.3.2 发布，微型 PHP 框架 -" itemprop="url">MicroPHP 2.3.2 发布，微型 PHP 框架 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://city.oschina.net/xian/event/234718" target="_blank" rel="external">5&#x6708;23&#x65E5; &#x897F;&#x5B89; OSC &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#x5566;&#xFF0C;&#x5B58;&#x50A8;&#x3001;&#x865A;&#x62DF;&#x673A;&#x3001;Docker &#x7B49;&#x5E72;&#x8D27;&#x5206;&#x4EAB;</a></p>
<p>MicroPHP 2.3.1 &#x53D1;&#x5E03;&#x4E86;&#xFF0C;&#x6539;&#x8FDB;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#xFF1A;</p>
<p>&#x4FEE;&#x590D;&#x4E86;&#xFF1A;</p>
<p>1.apache&#x4F2A;&#x9759;&#x6001;&#x652F;&#x6301;&#x95EE;&#x9898;,&#x65B0;&#x7248;apache&#x5728;.htaccess&#x4E2D;&#x5F00;&#x542F;&#x4E86;&#x4F2A;&#x9759;&#x6001;&#x5728;&#x4E4B;&#x540E;&#xFF0C;</p>
<p>$_SERVER&#x91CC;&#x9762;&#x7684;PATH_INFO&#x53D8;&#x91CF;&#x53D8;&#x4E86;&#x540D;&#x5B57;&#x4E3A;&#xFF1A;REDIRECT_PATH_INFO</p>
<p>&#x5347;&#x7EA7;&#x63D0;&#x793A;&#xFF1A;</p>
<p> &#x65E0;      MicroPHP&#x662F;&#x4E00;&#x4E2A;&#x514D;&#x8D39;&#x3001;&#x5F00;&#x6E90;&#x3001;&#x654F;&#x6377;&#x7684;MVC&#x6A21;&#x5F0F;&#x7684;PHP&#x5F00;&#x53D1;&#x6846;&#x67B6;&#x3002;&#x5B83;&#x6613;&#x62D3;&#x5C55;&#x800C;&#x4E0D;&#x5931;&#x7075;&#x6D3B;&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5BF9;&#x5E94;&#x5927;&#x4E2D;&#x5C0F;&#x578B;&#x9879;&#x76EE;&#x3002;MicroPHP&#x6CA1;&#x6709;&#x5927;&#x800C;&#x5168;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x7ED9;&#x4F60;&#x6700;&#x9700;&#x8981;&#x7684;&#x5E95;&#x5C42;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x7ED9;&#x4F60;&#x65E0;&#x9650;&#x7684;&#x7075;&#x6D3B;&#x62D3;&#x5C55;&#x80FD;&#x529B;&#x3002;&#x5176;&#x5B83;&#x6846;&#x67B6;&#x90FD;&#x6709;&#x7684;&#x57FA;&#x672C;&#x7279;&#x6027;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x7F57;&#x5217;&#x3002;<br>    &#x8BF4;&#x4E00;&#x4E0B;MicroPHP&#x7684;&#x7279;&#x6027;&#xFF1A;</p>
<pre><code><span class="number">1.</span> <span class="subst">&amp;</span><span class="variable">#x6574</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x6846</span>;<span class="subst">&amp;</span><span class="variable">#x67B6</span>;<span class="subst">&amp;</span><span class="variable">#x6838</span>;<span class="subst">&amp;</span><span class="variable">#x5FC3</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;MicroPHP<span class="built_in">.</span>php<span class="subst">&amp;</span><span class="variable">#xFF08</span>;<span class="subst">&amp;</span><span class="variable">#x538B</span>;<span class="subst">&amp;</span><span class="variable">#x7F29</span>;<span class="subst">&amp;</span><span class="variable">#x540E</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;MicroPHP<span class="built_in">.</span><span class="keyword">min</span><span class="built_in">.</span>php<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="number">140</span>KB<span class="subst">&amp;</span><span class="variable">#x5DE6</span>;<span class="subst">&amp;</span><span class="variable">#x53F3</span>;<span class="subst">&amp;</span><span class="variable">#xFF09</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>; 
<span class="number">2.</span> <span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x53E3</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;index<span class="built_in">.</span>php<span class="subst">&amp;</span><span class="variable">#x4E5F</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;<span class="subst">&amp;</span><span class="variable">#x6574</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x914D</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x53E3</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x53E3</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x81EA</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;<span class="subst">&amp;</span><span class="variable">#x4E49</span>;<span class="subst">&amp;</span><span class="variable">#x591A</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x53E3</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x8FBE</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x540C</span>;<span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x5171</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x4E4B</span>;<span class="subst">&amp;</span><span class="variable">#x95F4</span>;<span class="subst">&amp;</span><span class="variable">#x968F</span>;<span class="subst">&amp;</span><span class="variable">#x610F</span>;<span class="subst">&amp;</span><span class="variable">#x5171</span>;<span class="subst">&amp;</span><span class="variable">#x4EAB</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x3001</span>;<span class="subst">&amp;</span><span class="variable">#x5E2E</span>;<span class="subst">&amp;</span><span class="variable">#x52A9</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x5F55</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x6846</span>;<span class="subst">&amp;</span><span class="variable">#x67B6</span>;<span class="subst">&amp;</span><span class="variable">#x6838</span>;<span class="subst">&amp;</span><span class="variable">#x5FC3</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x91C7</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x96F6</span>;<span class="subst">&amp;</span><span class="variable">#x4FB5</span>;<span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#x7F16</span>;<span class="subst">&amp;</span><span class="variable">#x5199</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x6574</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x6846</span>;<span class="subst">&amp;</span><span class="variable">#x67B6</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x8FD0</span>;<span class="subst">&amp;</span><span class="variable">#x884C</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x4F9D</span>;<span class="subst">&amp;</span><span class="variable">#x8D56</span>;<span class="subst">&amp;</span><span class="variable">#x4EFB</span>;<span class="subst">&amp;</span><span class="variable">#x4F55</span>;<span class="subst">&amp;</span><span class="variable">#x5916</span>;<span class="subst">&amp;</span><span class="variable">#x90E8</span>;<span class="subst">&amp;</span><span class="variable">#x53D8</span>;<span class="subst">&amp;</span><span class="variable">#x91CF</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x521D</span>;<span class="subst">&amp;</span><span class="variable">#x59CB</span>;<span class="subst">&amp;</span><span class="variable">#x5316</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x65F6</span>;<span class="subst">&amp;</span><span class="variable">#x5019</span>;<span class="subst">&amp;</span><span class="variable">#x53EA</span>;<span class="subst">&amp;</span><span class="variable">#x8981</span>;<span class="subst">&amp;</span><span class="variable">#x901A</span>;<span class="subst">&amp;</span><span class="variable">#x8FC7</span>;MpRouter<span class="tag">::setConfig</span>(<span class="variable">$system</span>)<span class="subst">&amp;</span><span class="variable">#x6CE8</span>;<span class="subst">&amp;</span><span class="variable">#x5165</span>;<span class="subst">&amp;</span><span class="variable">#x914D</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7136</span>;<span class="subst">&amp;</span><span class="variable">#x540E</span>;MpRouter<span class="tag">::loadClass</span>()<span class="subst">&amp;</span><span class="variable">#x6267</span>;<span class="subst">&amp;</span><span class="variable">#x884C</span>;<span class="subst">&amp;</span><span class="variable">#x5373</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
<span class="number">3.</span> <span class="subst">&amp;</span><span class="variable">#x72EC</span>;<span class="subst">&amp;</span><span class="variable">#x7279</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x63D2</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
<span class="number">4.</span> <span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x63A7</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#x5668</span>;<span class="subst">&amp;</span><span class="variable">#x3001</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x578B</span>;<span class="subst">&amp;</span><span class="variable">#x3001</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x3001</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#x5404</span>;<span class="subst">&amp;</span><span class="variable">#x79CD</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5939</span>;<span class="subst">&amp;</span><span class="variable">#x5B8C</span>;<span class="subst">&amp;</span><span class="variable">#x5168</span>;<span class="subst">&amp;</span><span class="variable">#x81EA</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;<span class="subst">&amp;</span><span class="variable">#x4E49</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x4EC0</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x5EFA</span>;<span class="subst">&amp;</span><span class="variable">#x7ACB</span>;<span class="subst">&amp;</span><span class="variable">#x4EC0</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5939</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x5F7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E95</span>;<span class="subst">&amp;</span><span class="variable">#x6446</span>;<span class="subst">&amp;</span><span class="variable">#x8131</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x5806</span>;<span class="subst">&amp;</span><span class="variable">#x65E0</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x5927</span>;<span class="subst">&amp;</span><span class="variable">#x5806</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5939</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x56F0</span>;<span class="subst">&amp;</span><span class="variable">#x6270</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
<span class="number">5.</span> <span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x91C7</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x61D2</span>;<span class="subst">&amp;</span><span class="variable">#x52A0</span>;<span class="subst">&amp;</span><span class="variable">#x8F7D</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x53EA</span>;<span class="subst">&amp;</span><span class="variable">#x8981</span>;<span class="subst">&amp;</span><span class="variable">#x6309</span>;<span class="subst">&amp;</span><span class="variable">#x7740</span>;<span class="subst">&amp;</span><span class="variable">#x89C4</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;<span class="subst">&amp;</span><span class="variable">#x547D</span>;<span class="subst">&amp;</span><span class="variable">#x540D</span>;<span class="subst">&amp;</span><span class="variable">#x89C4</span>;<span class="subst">&amp;</span><span class="variable">#x5219</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7136</span>;<span class="subst">&amp;</span><span class="variable">#x540E</span>;<span class="subst">&amp;</span><span class="variable">#x628A</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x6254</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5939</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x63A7</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#x5668</span>;<span class="subst">&amp;</span><span class="variable">#x6216</span>;<span class="subst">&amp;</span><span class="variable">#x8005</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x578B</span>;<span class="subst">&amp;</span><span class="variable">#x4E2D</span>;<span class="subst">&amp;</span><span class="variable">#x76F4</span>;<span class="subst">&amp;</span><span class="variable">#x63A5</span>;<span class="literal">new</span> <span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x540D</span>;()<span class="subst">&amp;</span><span class="variable">#x5373</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7CFB</span>;<span class="subst">&amp;</span><span class="variable">#x7EDF</span>;<span class="subst">&amp;</span><span class="variable">#x4F1A</span>;<span class="subst">&amp;</span><span class="variable">#x81EA</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x52A0</span>;<span class="subst">&amp;</span><span class="variable">#x8F7D</span>;<span class="subst">&amp;</span><span class="variable">#x76F8</span>;<span class="subst">&amp;</span><span class="variable">#x5E94</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>; 
<span class="number">6.</span> <span class="subst">&amp;</span><span class="variable">#x6CA1</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x80FD</span>;<span class="subst">&amp;</span><span class="variable">#x6307</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#xFF1F</span>;<span class="subst">&amp;</span><span class="variable">#x6587</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;include<span class="subst">&amp;</span><span class="variable">#x5171</span>;<span class="subst">&amp;</span><span class="variable">#x4EAB</span>;<span class="subst">&amp;</span><span class="variable">#x90A3</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x4E3A</span>;<span class="subst">&amp;</span><span class="variable">#x4EC0</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x80FD</span>;<span class="subst">&amp;</span><span class="variable">#x5171</span>;<span class="subst">&amp;</span><span class="variable">#x4EAB</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x5462</span>;<span class="subst">&amp;</span><span class="variable">#xFF1F</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;MicroPHP<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x518D</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#x8FD9</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x56F0</span>;<span class="subst">&amp;</span><span class="variable">#x6320</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;MicroPHP<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="variable">$this</span><span class="subst">-&amp;</span><span class="literal">gt</span>;view_vars<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x7EC4</span>;<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x653E</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x4EFB</span>;<span class="subst">&amp;</span><span class="variable">#x4F55</span>;<span class="subst">&amp;</span><span class="variable">#x60F3</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x4F7F</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x5168</span>;<span class="subst">&amp;</span><span class="variable">#x5C40</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>; <span class="subst">&amp;</span><span class="variable">#x7279</span>;<span class="subst">&amp;</span><span class="variable">#x522B</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;<span class="subst">&amp;</span><span class="variable">#x7F51</span>;<span class="subst">&amp;</span><span class="variable">#x7AD9</span>;<span class="subst">&amp;</span><span class="variable">#x5934</span>;<span class="subst">&amp;</span><span class="variable">#x90E8</span>;<span class="subst">&amp;</span><span class="variable">#x5BFC</span>;<span class="subst">&amp;</span><span class="variable">#x822A</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x6237</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x5168</span>;<span class="subst">&amp;</span><span class="variable">#x7AD9</span>;<span class="subst">&amp;</span><span class="variable">#x6BCF</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x9875</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x90FD</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x90A3</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x81EA</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;<span class="subst">&amp;</span><span class="variable">#x4E49</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x63A7</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#x5668</span>;<span class="subst">&amp;</span><span class="variable">#x7236</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7136</span>;<span class="subst">&amp;</span><span class="variable">#x540E</span>;<span class="subst">&amp;</span><span class="variable">#x548C</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x7236</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x6784</span>;<span class="subst">&amp;</span><span class="variable">#x9020</span>;<span class="subst">&amp;</span><span class="variable">#x65B9</span>;<span class="subst">&amp;</span><span class="variable">#x6CD5</span>;<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x521D</span>;<span class="subst">&amp;</span><span class="variable">#x59CB</span>;<span class="subst">&amp;</span><span class="variable">#x5316</span>;<span class="subst">&amp;</span><span class="variable">#x8FD9</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x6237</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x653E</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="variable">$this</span><span class="subst">-&amp;</span><span class="literal">gt</span>;view_vars<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x90A3</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x6240</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x63A7</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#x5668</span>;<span class="subst">&amp;</span><span class="variable">#x518D</span>;<span class="subst">&amp;</span><span class="variable">#x4E5F</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x91CD</span>;<span class="subst">&amp;</span><span class="variable">#x590D</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x53BB</span>;<span class="subst">&amp;</span><span class="variable">#x53D6</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x6237</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x4F20</span>;<span class="subst">&amp;</span><span class="variable">#x7ED9</span>;<span class="subst">&amp;</span><span class="variable">#x89C6</span>;<span class="subst">&amp;</span><span class="variable">#x56FE</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
<span class="number">7.</span> <span class="subst">&amp;</span><span class="variable">#x7075</span>;<span class="subst">&amp;</span><span class="variable">#x6D3B</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;session<span class="subst">&amp;</span><span class="variable">#x6258</span>;<span class="subst">&amp;</span><span class="variable">#x7BA1</span>;,<span class="subst">&amp;</span><span class="variable">#x652F</span>;<span class="subst">&amp;</span><span class="variable">#x6301</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x7BA1</span>;<span class="subst">&amp;</span><span class="variable">#x7406</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x578B</span>;<span class="subst">&amp;</span><span class="variable">#xFF1A</span>;mongodb,mysql,memcache,redis<span class="built_in">.</span><span class="subst">&amp;</span><span class="variable">#x5F53</span>;<span class="subst">&amp;</span><span class="variable">#x7136</span>;<span class="subst">&amp;</span><span class="variable">#x4E5F</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7CFB</span>;<span class="subst">&amp;</span><span class="variable">#x7EDF</span>;<span class="subst">&amp;</span><span class="variable">#x9ED8</span>;<span class="subst">&amp;</span><span class="variable">#x8BA4</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x7BA1</span>;<span class="subst">&amp;</span><span class="variable">#x7406</span>;<span class="subst">&amp;</span><span class="variable">#x65B9</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="built_in">.</span>session<span class="subst">&amp;</span><span class="variable">#x6258</span>;<span class="subst">&amp;</span><span class="variable">#x7BA1</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x9009</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;,<span class="subst">&amp;</span><span class="variable">#x6839</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x9879</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x5177</span>;<span class="subst">&amp;</span><span class="variable">#x4F53</span>;<span class="subst">&amp;</span><span class="variable">#x60C5</span>;<span class="subst">&amp;</span><span class="variable">#x51B5</span>;<span class="subst">&amp;</span><span class="variable">#x62E9</span>;<span class="subst">&amp;</span><span class="variable">#x4F18</span>;<span class="subst">&amp;</span><span class="variable">#x9009</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x5373</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;session<span class="subst">&amp;</span><span class="variable">#x6258</span>;<span class="subst">&amp;</span><span class="variable">#x7BA1</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x597D</span>;<span class="subst">&amp;</span><span class="variable">#x5904</span>;<span class="subst">&amp;</span><span class="variable">#x5F88</span>;<span class="subst">&amp;</span><span class="variable">#x591A</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x6BD4</span>;<span class="subst">&amp;</span><span class="variable">#x5982</span>;<span class="subst">&amp;</span><span class="variable">#xFF1A</span>;<span class="subst">&amp;</span><span class="variable">#x652F</span>;<span class="subst">&amp;</span><span class="variable">#x6301</span>;<span class="subst">&amp;</span><span class="variable">#x5206</span>;<span class="subst">&amp;</span><span class="variable">#x5E03</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#x3001</span>;<span class="subst">&amp;</span><span class="variable">#x7CBE</span>;<span class="subst">&amp;</span><span class="variable">#x786E</span>;<span class="subst">&amp;</span><span class="variable">#x63A7</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;session<span class="subst">&amp;</span><span class="variable">#x8FC7</span>;<span class="subst">&amp;</span><span class="variable">#x671F</span>;<span class="subst">&amp;</span><span class="variable">#x65F6</span>;<span class="subst">&amp;</span><span class="variable">#x95F4</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>; 
<span class="number">8.</span> <span class="subst">&amp;</span><span class="variable">#x7075</span>;<span class="subst">&amp;</span><span class="variable">#x6D3B</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x7F13</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x673A</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>; 
(<span class="number">1</span>)<span class="built_in">.</span><span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x65B9</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#x7F13</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x9A71</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#xFF1A</span>;auto,apc,sqlite,files,memcached,redis,wincache,xcache,memcache<span class="subst">&amp;</span><span class="variable">#x3002</span>;auto<span class="subst">&amp;</span><span class="variable">#x81EA</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;<span class="subst">&amp;</span><span class="variable">#x5BFB</span>;<span class="subst">&amp;</span><span class="variable">#x627E</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x987A</span>;<span class="subst">&amp;</span><span class="variable">#x5E8F</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>; : apc,sqlite,files,memcached,redis,wincache,xcache,memcache<span class="subst">&amp;</span><span class="variable">#x3002</span>; 
(<span class="number">2</span>)<span class="built_in">.</span><span class="subst">&amp;</span><span class="variable">#x7F13</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x914D</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x7B2C</span>;<span class="subst">&amp;</span><span class="variable">#x4E8C</span>;<span class="subst">&amp;</span><span class="variable">#x9A71</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x673A</span>;<span class="subst">&amp;</span><span class="variable">#x5236</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x6BD4</span>;<span class="subst">&amp;</span><span class="variable">#x5982</span>;<span class="subst">&amp;</span><span class="variable">#xFF1A</span>;<span class="subst">&amp;</span><span class="variable">#x5F53</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x73B0</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x4EE3</span>;<span class="subst">&amp;</span><span class="variable">#x7801</span>;<span class="subst">&amp;</span><span class="variable">#x4E2D</span>;<span class="subst">&amp;</span><span class="variable">#x4F7F</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;memcached, apc<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#x7B49</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7136</span>;<span class="subst">&amp;</span><span class="variable">#x540E</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x4EE3</span>;<span class="subst">&amp;</span><span class="variable">#x7801</span>;<span class="subst">&amp;</span><span class="variable">#x8F6C</span>;<span class="subst">&amp;</span><span class="variable">#x79FB</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x4E86</span>;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x65B0</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x670D</span>;<span class="subst">&amp;</span><span class="variable">#x52A1</span>;<span class="subst">&amp;</span><span class="variable">#x5668</span>;<span class="subst">&amp;</span><span class="variable">#x800C</span>;<span class="subst">&amp;</span><span class="variable">#x4E14</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x652F</span>;<span class="subst">&amp;</span><span class="variable">#x6301</span>;memcached <span class="subst">&amp;</span><span class="variable">#x6216</span>; apc<span class="subst">&amp;</span><span class="variable">#x8FD9</span>;<span class="subst">&amp;</span><span class="variable">#x65F6</span>;<span class="subst">&amp;</span><span class="variable">#x5019</span>;<span class="subst">&amp;</span><span class="variable">#x600E</span>;<span class="subst">&amp;</span><span class="variable">#x4E48</span>;<span class="subst">&amp;</span><span class="variable">#x529E</span>;<span class="subst">&amp;</span><span class="variable">#x5462</span>;<span class="subst">&amp;</span><span class="variable">#xFF1F</span>;<span class="subst">&amp;</span><span class="variable">#x8BBE</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">&amp;</span><span class="variable">#x7B2C</span>;<span class="subst">&amp;</span><span class="variable">#x4E8C</span>;<span class="subst">&amp;</span><span class="variable">#x9A71</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x5373</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x5F53</span>;<span class="subst">&amp;</span><span class="variable">#x4F60</span>;<span class="subst">&amp;</span><span class="variable">#x8BBE</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x9A71</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x652F</span>;<span class="subst">&amp;</span><span class="variable">#x6301</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x65F6</span>;<span class="subst">&amp;</span><span class="variable">#x5019</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x7CFB</span>;<span class="subst">&amp;</span><span class="variable">#x7EDF</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x4F7F</span>;<span class="subst">&amp;</span><span class="variable">#x7528</span>;<span class="subst">&amp;</span><span class="variable">#x7B2C</span>;<span class="subst">&amp;</span><span class="variable">#x4E8C</span>;<span class="subst">&amp;</span><span class="variable">#x9A71</span>;<span class="subst">&amp;</span><span class="variable">#x52A8</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
<span class="subst">&amp;</span><span class="variable">#x66F4</span>;<span class="subst">&amp;</span><span class="variable">#x591A</span>;<span class="subst">&amp;</span><span class="variable">#x8BE6</span>;<span class="subst">&amp;</span><span class="variable">#x7EC6</span>;<span class="subst">&amp;</span><span class="variable">#x4FE1</span>;<span class="subst">&amp;</span><span class="variable">#x606F</span>;,<span class="subst">&amp;</span><span class="variable">#x8BF7</span>;<span class="subst">&amp;</span><span class="variable">#x79FB</span>;<span class="subst">&amp;</span><span class="variable">#x6B65</span>;<span class="subst">&amp;</span><span class="variable">#x5B98</span>;<span class="subst">&amp;</span><span class="variable">#x7F51</span>;:http:<span class="comment">//microphp.us/</span>
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fd8699/" title="通过MySQL的UDFs和Trigger操作Memcached -" itemprop="url">通过MySQL的UDFs和Trigger操作Memcached -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x901A;&#x8FC7;MySQL&#x7684;UDFs&#x548C;Trigger&#x64CD;&#x4F5C;Memcached </p>
<p>UDFs&#x662F;User Defined Functions&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x8868;&#x793A;MySQL&#x7684;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x4ECE;MySQL 5.0&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x8BBF;&#x95EE;Memcached&#x5199;&#x5165;&#x6216;&#x8005;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x3002;&#x6B64;&#x5916;&#xFF0C;MySQL&#x4ECE;5.1&#x7248;&#x672C;&#x5F00;&#x59CB;&#x652F;&#x6301;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x5728;&#x89E6;&#x53D1;&#x5668;&#x4E2D;&#x4F7F;&#x7528;UDFs&#x76F4;&#x63A5;&#x66F4;&#x65B0;Memcached&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x964D;&#x4F4E;&#x4E86;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x548C;&#x7F16;&#x5199;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;UDFs&#x7684;&#x5B89;&#x88C5;&#x548C;&#x4F7F;&#x7528;&#x3002;</p>
<p>UDFs&#x5B89;&#x88C5; </p>
<p>&#x5B89;&#x88C5;UDFs&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x6B21;&#x5B89;&#x88C5;MySQL&#x3001;libevent&#x3001;memcached&#x3001;libmemcached&#x3001;memcached_functions_sql&#x3002;</p>
<h4 id="1-_&#x5B89;&#x88C5;mysql-5-6-24-tar-gz">1. &#x5B89;&#x88C5;mysql-5.6.24.tar.gz</h4><p>&#x53C2;&#x7167;&#x4E4B;&#x524D;&#x7684;&#x535A;&#x6587; <a href="http://ultrasql.blog.51cto.com/9591438/1640997" target="_blank" rel="external">&#x300A;InnoDB memcached&#x63D2;&#x4EF6;&#x90E8;&#x7F72;&#x300B;</a> &#x4E2D;MySQL&#x5B89;&#x88C5;&#x90E8;&#x5206;&#x3002; </p>
<h4 id="2-_&#x5B89;&#x88C5;libevent-2-0-22-stable-tar-gz&#x548C;&#x5B89;&#x88C5;memcached-1-4-22-tar-gz">2. &#x5B89;&#x88C5;libevent-2.0.22-stable.tar.gz&#x548C;&#x5B89;&#x88C5;memcached-1.4.22.tar.gz</h4><p>&#x53C2;&#x7167;&#x4E4B;&#x524D;&#x7684;&#x535A;&#x6587; <a href="http://ultrasql.blog.51cto.com/9591438/1632179" target="_blank" rel="external">&#x300A;Memcached 1.4.22&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#x300B;</a> &#x3002; </p>
<h4 id="3-_&#x5B89;&#x88C5;libmemcached-0-34-tar-gz">3. &#x5B89;&#x88C5;libmemcached-0.34.tar.gz</h4><p>memcached functions for mysql&#x5B98;&#x7F51;&#x53D1;&#x5E03;&#x7684;1.1&#x7248;&#x672C;&#x662F;09&#x5E74;&#x7684;&#xFF0C;&#x53EA;&#x517C;&#x5BB9;libmemcached0.34&#x7248;&#x672C;&#x3002;</p>
<pre><code>mkdir -p <span class="regexp">/usr/</span>local/libmemcached
wget <span class="string">https:</span><span class="comment">//launchpad.net/libmemcached/1.0/0.34/+download/libmemcached-0.34.tar.gz</span>
tar zxvf libmemcached-<span class="number">0.34</span>.tar.gz
cd libmemcached-<span class="number">0.34</span>
.<span class="regexp">/configure --prefix=/</span>usr<span class="regexp">/local/</span>libmemcached --with-memcached=<span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>memcached
make
make install
</code></pre><h4 id="4-_&#x5B89;&#x88C5;memcached_functions_mysql">4. &#x5B89;&#x88C5;memcached_functions_mysql</h4><pre><code>wget <span class="string">https:</span><span class="comment">//launchpad.net/memcached-udfs/trunk/1.1/+download/memcached_functions_mysql-1.1.tar.gz</span>
tar xvf memcached_functions_mysql-<span class="number">1.1</span>.tar.gz
cd memcached_functions_mysql-<span class="number">1.1</span>
.<span class="regexp">/configure --prefix=/</span>usr<span class="regexp">/local/</span>memcache_mysql --with-mysql=<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin<span class="regexp">/mysql_config --with-libmemcached=/</span>usr<span class="regexp">/local/</span>libmemcached
make
make install
</code></pre><h4 id="5-_&#x62F7;&#x8D1D;lib&#x6587;&#x4EF6;&#x5230;mysql&#x7684;plugin&#x4E0B;&#x9762;">5. &#x62F7;&#x8D1D;lib&#x6587;&#x4EF6;&#x5230;mysql&#x7684;plugin&#x4E0B;&#x9762;</h4><pre><code>cp <span class="regexp">/usr/</span>local<span class="regexp">/memcache_mysql/</span>lib<span class="regexp">/libmemcached_functions* /u</span>sr<span class="regexp">/local/my</span>sql<span class="regexp">/lib/</span>plugin
</code></pre><h4 id="6-_&#x914D;&#x7F6E;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;">6. &#x914D;&#x7F6E;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;</h4><pre><code>echo <span class="subst">&amp;</span>quot;/usr/<span class="built_in">local</span>/lib<span class="subst">&amp;</span>quot; <span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">gt</span>; /etc/ld<span class="built_in">.</span>so<span class="built_in">.</span>conf
ldconfig
</code></pre><h4 id="7-_&#x6DFB;&#x52A0;memcache_UDF_&#x51FD;&#x6570;">7. &#x6DFB;&#x52A0;memcache UDF &#x51FD;&#x6570;</h4><pre><code>mysql &amp;lt<span class="comment">; ./sql/install_functions.sql</span>
</code></pre><p>&#x5907;&#x6CE8;&#xFF1A;</p>
<p>&#x9996;&#x6B21;&#x9700;&#x8981;&#x4F7F;&#x7528;CREATE FUNCTION&#x6765;&#x521D;&#x59CB;&#x5316;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x3002;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x521D;&#x59CB;&#x5316;&#x6240;&#x6709;MySQL&#x63D0;&#x4F9B;&#x7684;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#xFF1A;</p>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x5728;MySQL&#x7684;SQL&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x6267;&#x884C;memcached_functions_mysql&#x6E90;&#x7801;&#x76EE;&#x5F55;&#x4E0B;&#x7684;sql/install_functions.sql&#x3002;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x8FD0;&#x884C;memcached_functions_mysql&#x6E90;&#x7801;&#x76EE;&#x5F55;&#x4E0B;&#x7684;utils/install.pl&#x8FD9;&#x4E2A;Perl&#x811A;&#x672C;&#xFF0C;&#x628A;memcache function&#x4F5C;&#x4E3A;UDFs&#x52A0;&#x5165;MySQL&#x3002;</p>
<h4 id="8-_&#x6267;&#x884C;&#x4E0B;&#x9762;SQL&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;&#x5B89;&#x88C5;&#x662F;&#x5426;&#x6210;&#x529F;&#x3002;">8. &#x6267;&#x884C;&#x4E0B;&#x9762;SQL&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;&#x5B89;&#x88C5;&#x662F;&#x5426;&#x6210;&#x529F;&#x3002;</h4><pre><code>mysql&amp;gt; select name,dl from mysql.func;
+------------------------------+---------------------------------+
|<span class="string"> name </span>|<span class="string"> dl </span>|
+------------------------------+---------------------------------+
|<span class="string"> memc_add </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_add_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_servers_set </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_server_count </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_set </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_set_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_cas </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_cas_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_get </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_get_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_get_cas </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_get_cas_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_delete </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_delete_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_append </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_append_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_prepend </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_prepend_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_increment </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_decrement </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_replace </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_replace_by_key </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_servers_behavior_set </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_servers_behavior_get </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_behavior_set </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_behavior_get </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_list_behaviors </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_list_hash_types </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_list_distribution_types </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_udf_version </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_libmemcached_version </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_stats </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_stat_get_keys </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
|<span class="string"> memc_stat_get_value </span>|<span class="string"> libmemcached_functions_mysql.so </span>|
+------------------------------+---------------------------------+
34 rows in set (0.00 sec)
</code></pre><p>&#x4F7F;&#x7528;Trigger&#x64CD;&#x4F5C;Memcached </p>
<h4 id="1-_&#x521B;&#x5EFA;&#x4E24;&#x5F20;&#x8868;">1. &#x521B;&#x5EFA;&#x4E24;&#x5F20;&#x8868;</h4><p>&#x65B0;&#x5EFA;&#x4E24;&#x5F20;&#x8868;&#xFF1A;urls&#x548C;results&#xFF0C;&#x66F4;&#x65B0;urls&#x8868;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F7F;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x66F4;&#x65B0;Memcached&#x7684;&#x5185;&#x5BB9;&#x3002;results&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x66F4;&#x65B0;Memcached&#x5931;&#x8D25;&#x7684;&#x8BB0;&#x5F55;&#x3002;</p>
<p>SQL&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="operator"><span class="keyword">use</span> test;</span>
<span class="operator"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> urls;</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`urls`</span> (
<span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
<span class="string">`url`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> &amp;apos;</span>&amp;apos;,
PRIMARY KEY (`id`)
);
<span class="operator"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> results;</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`results`</span> (
<span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,
<span class="string">`result`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> &amp;apos;</span>error&amp;apos;,
`time` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`)
);
</code></pre><h4 id="2-_&#x5EFA;&#x7ACB;3&#x4E2A;trigger">2. &#x5EFA;&#x7ACB;3&#x4E2A;trigger</h4><p>&#x5F53;&#x5411;urls&#x8868;&#x4E2D;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5BF9;Memcached&#x6267;&#x884C;set&#x64CD;&#x4F5C;&#x3002;trigger&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>DELIMITER //
<span class="operator"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> url_mem_insert;</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> url_mem_insert
<span class="keyword">BEFORE</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> urls
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span>
<span class="keyword">set</span> @mm = memc_set(NEW.id, NEW.url);</span>
if @mm &amp;lt;&amp;gt; 0 then
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> results(id) <span class="keyword">values</span>(NEW.id);</span>
<span class="operator"><span class="keyword">end</span> <span class="keyword">if</span>;</span>
<span class="operator"><span class="keyword">END</span> //
DELIMITER ;</span>
</code></pre><p>&#x5F53;&#x5BF9;urls&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5BF9;Memcached&#x6267;&#x884C;replace&#x64CD;&#x4F5C;&#x3002;trigger&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>DELIMITER //
<span class="operator"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> url_mem_update;</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> url_mem_update
<span class="keyword">BEFORE</span> <span class="keyword">UPDATE</span> <span class="keyword">ON</span> urls
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span>
<span class="keyword">set</span> @mm = memc_replace(OLD.id,NEW.url);</span>
if @mm &amp;lt;&amp;gt; 0 then
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> results(id) <span class="keyword">values</span>(OLD.id);</span>
<span class="operator"><span class="keyword">end</span> <span class="keyword">if</span>;</span>
<span class="operator"><span class="keyword">END</span> //
DELIMITER ;</span>
</code></pre><p>&#x5F53;&#x5BF9;urls&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5BF9;Memcached&#x6267;&#x884C;delete&#x64CD;&#x4F5C;&#x3002;trigger&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>DELIMITER //
<span class="operator"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> url_mem_delete;</span>
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> url_mem_delete
<span class="keyword">BEFORE</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> urls
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span>
<span class="keyword">set</span> @mm = memc_delete(OLD.ID);</span>
if @mm &amp;lt;&amp;gt; 0 then
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> results(id) <span class="keyword">values</span>(OLD.id);</span>
<span class="operator"><span class="keyword">end</span> <span class="keyword">if</span>;</span>
<span class="operator"><span class="keyword">END</span> //
DELIMITER ;</span>
</code></pre><h4 id="3-_&#x8BBE;&#x7F6E;Memcached&#x76F8;&#x5173;&#x53C2;&#x6570;">3. &#x8BBE;&#x7F6E;Memcached&#x76F8;&#x5173;&#x53C2;&#x6570;</h4><p>&#x8BBE;&#x7F6E;UDFs&#x64CD;&#x4F5C;Memcaced&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x3002;</p>
<pre><code><span class="header">mysql&amp;gt; SELECT memc_servers_set(&amp;apos;192.168.11.52:11211&amp;apos;);
+-----------------------------------------+</span>
<span class="header">| memc_servers_set(&amp;apos;192.168.11.52:11211&amp;apos;) |
+-----------------------------------------+</span>
<span class="header">| 0 |
+-----------------------------------------+</span>
1 row in set (0.07 sec)
<span class="header">mysql&amp;gt;select memc_server_count();
+---------------------+</span>
<span class="header">| memc_server_count() |
+---------------------+</span>
<span class="header">| 1 |
+---------------------+</span>
1 row in set (0.00 sec)
</code></pre><p>&#x5728;MySQL&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x5217;&#x51FA;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;Memcached&#x53C2;&#x6570;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x548C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>mysql&amp;gt;select memc_list_behaviors()\G
<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> 1. row <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>
memc_list_behaviors():
MEMCACHED SERVER BEHAVIORS
MEMCACHED_BEHAVIOR_SUPPORT_CAS
MEMCACHED_BEHAVIOR_NO_BLOCK
MEMCACHED_BEHAVIOR_TCP_NODELAY
MEMCACHED_BEHAVIOR_HASH
MEMCACHED_BEHAVIOR_CACHE_LOOKUPS
MEMCACHED_BEHAVIOR_SOCKET_SEND_SIZE
MEMCACHED_BEHAVIOR_SOCKET_RECV_SIZE
MEMCACHED_BEHAVIOR_BUFFER_REQUESTS
MEMCACHED_BEHAVIOR_KETAMA
MEMCACHED_BEHAVIOR_POLL_TIMEOUT
MEMCACHED_BEHAVIOR_RETRY_TIMEOUT
MEMCACHED_BEHAVIOR_DISTRIBUTION
MEMCACHED_BEHAVIOR_BUFFER_REQUESTS
MEMCACHED_BEHAVIOR_USER_DATA
MEMCACHED_BEHAVIOR_SORT_HOSTS
MEMCACHED_BEHAVIOR_VERIFY_KEY
MEMCACHED_BEHAVIOR_CONNECT_TIMEOUT
MEMCACHED_BEHAVIOR_KETAMA_WEIGHTED
MEMCACHED_BEHAVIOR_KETAMA_HASH
MEMCACHED_BEHAVIOR_BINARY_PROTOCOL
MEMCACHED_BEHAVIOR_SND_TIMEOUT
MEMCACHED_BEHAVIOR_RCV_TIMEOUT
MEMCACHED_BEHAVIOR_SERVER_FAILURE_LIMIT
MEMCACHED_BEHAVIOR_IO_MSG_WATERMARK
MEMCACHED_BEHAVIOR_IO_BYTES_WATERMARK
1 row in set (0.00 sec)
</code></pre><p>&#x8BBE;&#x7F6E;MEMCACHED_BEHAVIOR_NO_BLOCK&#x4E3A;&#x6253;&#x5F00;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x6837;&#x5728;Memcached&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF08;&#x4E0D;&#x80FD;&#x8FDE;&#x63A5;&#xFF09;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x63D2;&#x5165;MySQL&#x4E2D;&#xFF0C;&#x4F46;&#x6709;&#x62A5;&#x9519;&#x63D0;&#x793A;&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x8BBE;&#x7F6E;&#x6B64;&#x503C;&#xFF0C;&#x90A3;&#x4E48;Memcached&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x9700;&#x8981;&#x7B49;&#x5230;Memcached&#x5931;&#x8D25;&#x8D85;&#x65F6;&#x540E;&#x624D;&#x53EF;&#x4EE5;&#x63D2;&#x5165;&#x5230;&#x8868;&#x4E2D;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x53D1;&#x751F;&#x3002;</p>
<pre><code><span class="header">mysql&amp;gt;select memc_servers_behavior_set(&amp;apos;MEMCACHED_BEHAVIOR_NO_BLOCK&amp;apos;,&amp;apos;1&amp;apos;);
+--------------------------------------------------------------+</span>
<span class="header">| memc_servers_behavior_set(&amp;apos;MEMCACHED_BEHAVIOR_NO_BLOCK&amp;apos;,&amp;apos;1&amp;apos;) |
+--------------------------------------------------------------+</span>
<span class="header">| 0 |
+--------------------------------------------------------------+</span>
1 row in set (0.00 sec)
<span class="header">mysql&amp;gt;select memc_servers_behavior_set(&amp;apos;MEMCACHED_BEHAVIOR_TCP_NODELAY&amp;apos;,&amp;apos;1&amp;apos;);
+-----------------------------------------------------------------+</span>
<span class="header">| memc_servers_behavior_set(&amp;apos;MEMCACHED_BEHAVIOR_TCP_NODELAY&amp;apos;,&amp;apos;1&amp;apos;) |
+-----------------------------------------------------------------+</span>
<span class="header">| 0 |
+-----------------------------------------------------------------+</span>
1 row in set (0.00 sec)
</code></pre><h4 id="4-_&#x5BF9;memcached_functions_mysql&#x7684;&#x7B80;&#x5355;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;">4. &#x5BF9;memcached_functions_mysql&#x7684;&#x7B80;&#x5355;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;</h4><p>1&#xFF09;&#x5411;&#x8868;urls&#x4E2D;&#x63D2;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x67E5;&#x770B;Memcached&#x662F;&#x5426;&#x5BF9;&#x6570;&#x636E;&#x6267;&#x884C;set&#x64CD;&#x4F5C;&#x3002;</p>
<pre><code>mysql&amp;gt;insert into urls (id,url) values (1, &amp;apos;http://www.test.com.cn&amp;apos;);
Query OK, 1 row affected, 1 warning (0.00 sec)
<span class="header">mysql&amp;gt; select memc_get(&amp;apos;1&amp;apos;);
+------------------------+</span>
<span class="header">| memc_get(&amp;apos;1&amp;apos;) |
+------------------------+</span>
<span class="header">| http://www.test.com |
+------------------------+</span>
1 row in set (0.00 sec)

1&amp;gt;telnet 192.168.11.52 11211
Trying 192.168.11.52...
Connected to 192.168.11.52 (192.168.11.52).
Escape character is &amp;apos;^]&amp;apos;.
get 1
VALUE 1 0 22
http://www.test.com.cn
END
</code></pre><p>2&#xFF09;&#x66F4;&#x65B0;&#x8868;urls&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x67E5;&#x8BE2;Memcached&#x4E2D;&#x662F;&#x5426;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x66F4;&#x65B0;&#x3002;</p>
<pre><code>mysql&amp;gt;update test.urls set url=&amp;apos;http://blog.test.com.cn&amp;apos; where id=1;
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1 Changed: 1 Warnings: 0
<span class="header">mysql&amp;gt; select memc_replace(&amp;apos;1&amp;apos;,&amp;apos;http://blog.test.com.cn&amp;apos;);
+---------------------------------------------+</span>
<span class="header">| memc_replace(&amp;apos;1&amp;apos;,&amp;apos;http://blog.test.com.cn&amp;apos;) |
+---------------------------------------------+</span>
<span class="header">| 0 |
+---------------------------------------------+</span>
1 row in set (0.00 sec)
<span class="header">mysql&amp;gt; select memc_get(&amp;apos;1&amp;apos;);
+-------------------------+</span>
<span class="header">| memc_get(&amp;apos;1&amp;apos;) |
+-------------------------+</span>
<span class="header">| http://blog.test.com.cn |
+-------------------------+</span>
1 row in set (0.00 sec)

1&amp;gt;telnet 192.168.11.52 11211
Trying 192.168.11.52...
Connected to 192.168.11.52(192.168.11.52).
Escape character is &amp;apos;^]&amp;apos;.
get 1
VALUE 1 0 23
http://blog.test.com.cn
END
</code></pre><p>3&#xFF09;&#x5220;&#x9664;&#x8868;urls&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x67E5;&#x770B;Memcached&#x662F;&#x5426;&#x4E5F;&#x5C06;&#x8BE5;&#x6570;&#x636E;&#x5220;&#x9664;&#x4E86;&#x3002;</p>
<pre><code>mysql&amp;gt;delete from test.urls where id=1;
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1 Changed: 1 Warnings: 0
<span class="header">mysql&amp;gt; select memc_get(&amp;apos;1&amp;apos;);
+---------------+</span>
<span class="header">| memc_get(&amp;apos;1&amp;apos;) |
+---------------+</span>
<span class="header">| NULL |
+---------------+</span>
1 row in set (0.00 sec)

1&amp;gt;telnet 192.168.11.52 11211
Trying 192.168.11.52...
Connected to 192.168.11.52 (192.168.11.52).
Escape character is &amp;apos;^]&amp;apos;.
get 1
END
</code></pre><h4 id="5-_&#x4F7F;&#x7528;memcached_functions_mysql&#x7684;&#x7ECF;&#x9A8C;&#x4E0E;&#x6280;&#x5DE7;">5. &#x4F7F;&#x7528;memcached_functions_mysql&#x7684;&#x7ECF;&#x9A8C;&#x4E0E;&#x6280;&#x5DE7;</h4><p>memcached_functions_mysql&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x73AF;&#x5883;&#x7684;&#x5DEE;&#x522B;&#xFF0C;&#x5728;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8BF8;&#x591A;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E0B;&#x9762;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4E9B;&#x5728;&#x4F7F;&#x7528;memcached_functions_mysq&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x548C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x3002;</p>
<p>1) MySQL&#x91CD;&#x542F;&#x95EE;&#x9898;</p>
<p>&#x5982;&#x679C;MySQL&#x670D;&#x52A1;&#x5668;&#x51FA;&#x73B0;&#x91CD;&#x542F;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;Memcached&#x5173;&#x7CFB;&#xFF08;SELECT memc_servers_set(&apos;192.168.11.52:11211&apos;))&#x3002;</p>
<p>2) &#x7A0B;&#x5E8F;BUG&#x95EE;&#x9898;</p>
<p>memcached_functions_mysql&#x7684;&#x6E90;&#x7A0B;&#x5E8F;&#x6709;&#x53EF;&#x80FD;&#x5B58;&#x5728;bug&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5BFC;&#x81F4;MySQL&#x7684;&#x5931;&#x8D25;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x8BFB;&#x8005;&#x8981;&#x5C3D;&#x91CF;&#x9009;&#x62E9;&#x6E90;&#x7A0B;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x7248;&#x672C;&#x3002;</p>
<p>3) &#x7F51;&#x7EDC;&#x56E0;&#x7D20;</p>
<p>&#x7F51;&#x7EDC;&#x56E0;&#x7D20;&#x662F;&#x6307;MySQL&#x548C;Memcached&#x662F;&#x5426;&#x5904;&#x5728;&#x540C;&#x4E00;&#x4E2A;IDC&#x3001;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x662F;&#x5426;&#x5F88;&#x597D;&#x3002;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x8D8A;&#x597D;&#xFF0C;&#x5219;&#x901F;&#x5EA6;&#x8D8A;&#x5FEB;&#x3002;&#x4F7F;&#x7528;&#x672C;&#x673A;&#x7684;Memcached&#x53EF;&#x4EE5;&#x9002;&#x5F53;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x5F00;&#x9500;&#x3002;</p>
<p>4) &#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;&#x91CF;</p>
<p>&#x63D2;&#x5165;&#x6570;&#x636E;&#x91CF;&#x7684;&#x5927;&#x5C0F;&#x5305;&#x542B;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;&#x5411;MySQL&#x63D2;&#x5165;&#x6BCF;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5411;Memcached&#x4E2D;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x66F4;&#x65B0;MySQL&#x3001;Memcached&#x7684;&#x6570;&#x636E;&#x8D8A;&#x5927;&#xFF0C;&#x66F4;&#x65B0;&#x7684;&#x901F;&#x5EA6;&#x8D8A;&#x6162;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8981;&#x505A;&#x597D;&#x524D;&#x671F;&#x89C4;&#x5212;&#x3002;</p>
<p>5) &#x5EF6;&#x65F6;&#x95EE;&#x9898;</p>
<p>&#x5982;&#x679C;MySQL&#x6240;&#x5728;&#x7684;&#x673A;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x66F4;&#x65B0;Memcached&#x8FC7;&#x4E8E;&#x7F13;&#x6162;&#xFF0C;&#x5373;&#x51FA;&#x73B0;&#x7C7B;&#x4F3C;m/s&#x7684;&#x5EF6;&#x65F6;&#x95EE;&#x9898;&#x3002;</p>
<p>6) &#x5BB9;&#x707E;&#x95EE;&#x9898;</p>
<p>&#x5982;&#x679C;MySQL&#x548C;Memcached&#x4E2D;&#x6709;&#x5B95;&#x673A;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x600E;&#x4E48;&#x6062;&#x590D;&#xFF0C;&#x6839;&#x636E;&#x524D;&#x4E00;&#x5C0F;&#x8282;&#x7684;&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8003;&#x8651;&#xFF1A;&#x5EFA;&#x4E00;&#x5F20;&#x9519;&#x8BEF;&#x8868;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x66F4;&#x65B0;mc&#x65F6;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x81EA;&#x52A8;&#x628A;&#x66F4;&#x65B0;&#x9519;&#x8BEF;&#x7684;&#x8BB0;&#x5F55;&#x63D2;&#x5230;&#x8FD9;&#x5F20;&#x8868;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;&#x67E5;&#x8BE2;&#x8FD9;&#x5F20;&#x8868;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x95F4;&#x51FA;&#x73B0;&#x8FC7;&#x66F4;&#x65B0;&#x9519;&#x8BEF;&#x3002;</p>
<p>&#x5982;&#x679C;memcached_functions_mysql&#x5E94;&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x76D1;&#x63A7;&#x548C;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x65F6;&#x7684;&#x6062;&#x590D;&#x5DE5;&#x4F5C;&#xFF08;&#x5199;&#x597D;&#x811A;&#x672C;&#x4EE5;&#x5B8C;&#x5584;&#x8FD9;&#x4E2A;&#x5DE5;&#x4F5C;&#xFF09;&#x3002;</p>
<p>7) MySQL&#x81EA;&#x8EAB;&#x56E0;&#x7D20;</p>
<p>&#x5982;&#x6267;&#x884C;&#x7684;MySQL&#x8BED;&#x53E5;&#x7684;&#x6548;&#x7387;&#x4EE5;&#x53CA;&#x8FDE;&#x63A5;MySQL&#x7684;client&#x7A0B;&#x5E8F;&#xFF08;php&#xFF09;&#x7684;&#x8FDE;&#x63A5;&#x5F00;&#x9500;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x90FD;&#x9700;&#x8981;&#x8003;&#x8651;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/MySQL/">MySQL</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fe00ab/" title="memcached 1.4.23发布,集中式缓存系统 -" itemprop="url">memcached 1.4.23发布,集中式缓存系统 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> memcached 1.4.23 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="http://www.memcached.org/files/memcached-1.4.23.tar.gz" target="_blank" rel="external">http://www.memcached.org/files/memcached-1.4.23.tar.gz</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<h3 id="Bug_&#x4FEE;&#x590D;">Bug &#x4FEE;&#x590D;</h3><ul>
<li>spinlocks removed since they never seem to improve performance.</li>
<li>flush_all was not thread safe.</li>
<li>better handle items refcounted in tail by unlinking them from the LRU&apos;s</li>
</ul>
<h3 id="&#x65B0;&#x7279;&#x6027;">&#x65B0;&#x7279;&#x6027;</h3><p>&#x91CD;&#x5199;&#x4E86; memcached &#x7684;&#x6838;&#x5FC3; LRU &#x7B97;&#x6CD5;&#xFF1A;</p>
<ul>
<li>global cache_lock is gone, LRU&apos;s are now independently locked.</li>
<li>LRU&apos;s are now split between HOT, WARM, and COLD LRU&apos;s. New items enter the HOT LRU.</li>
<li>LRU updates only happen as items reach the bottom of an LRU. If active in HOT, stay in HOT, if active in WARM, stay in WARM. If active in COLD, move to WARM.</li>
<li>HOT/WARM each capped at 32% of memory available for that slab class. COLD is uncapped.</li>
<li>Items flow from HOT/WARM into COLD.</li>
<li>A background thread exists which shuffles items between/within the LRU&apos;s as capacities are reached.</li>
</ul>
<p>&#x4E3B;&#x8981;&#x76EE;&#x6807;&#x662F;&#x4FDD;&#x62A4;&#x201C;scanning&#x201D;&#x7684; active items&#xFF0C;&#x5176;&#x6B21;&#x662F;&#x4E3A;&#x4E86;&#x6539;&#x8FDB;&#x5EF6;&#x8FDF;&#x3002;</p>
<p>&#x66F4;&#x591A;&#x6539;&#x8FDB;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://code.google.com/p/memcached/wiki/ReleaseNotes1423" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a> &#x3002; </p>
<p>memcached&#x662F;&#x4E00;&#x5957;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x5FEB;&#x53D6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F53;&#x521D;&#x662F;Danga Interactive&#x4E3A;&#x4E86;LiveJournal&#x6240;&#x53D1;&#x5C55;&#x7684;&#xFF0C;&#x4F46;&#x76EE;&#x524D;&#x88AB;&#x8BB8;&#x591A;&#x8F6F;&#x4EF6;&#xFF08;&#x5982;MediaWiki&#xFF09;&#x6240;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x5957;&#x5F00;&#x653E;&#x6E90;&#x4EE3;&#x7801;&#x8F6F;&#x4EF6;&#xFF0C;&#x4EE5;BSD license&#x6388;&#x6743;&#x91CA;&#x51FA;&#x3002; </p>
<p>memcached&#x7F3A;&#x4E4F;&#x8BA4;&#x8BC1;&#x4EE5;&#x53CA;&#x5B89;&#x5168;&#x7BA1;&#x5236;&#xFF0C;&#x8FD9;&#x4EE3;&#x8868;&#x5E94;&#x8BE5;&#x5C06;memcached&#x670D;&#x52A1;&#x5668;&#x653E;&#x7F6E;&#x5728;&#x9632;&#x706B;&#x5899;&#x540E;&#x3002;</p>
<p>memcached &#x7684;API&#x4F7F;&#x7528;&#x4E09;&#x5341;&#x4E8C;&#x4F4D;&#x5143;&#x7684;&#x5FAA;&#x73AF;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#xFF08;CRC-32&#xFF09;&#x8BA1;&#x7B97;&#x952E;&#x503C;&#x540E;&#xFF0C;&#x5C06;&#x8D44;&#x6599;&#x5206;&#x6563;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x5F53;&#x8868;&#x683C;&#x6EE1;&#x4E86;&#x4EE5;&#x540E;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x65B0;&#x589E;&#x7684;&#x8D44;&#x6599;&#x4F1A;&#x4EE5;LRU&#x673A;&#x5236;&#x66FF;&#x6362;&#x6389;&#x3002; &#x7531;&#x4E8E;memcached&#x901A;&#x5E38;&#x53EA;&#x662F;&#x5F53;&#x4F5C;&#x5FEB;&#x53D6;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;memcached&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5F0F;&#x5728;&#x5199;&#x56DE;&#x8F83;&#x6162;&#x7684;&#x7CFB;&#x7EDF;&#x65F6;&#xFF08;&#x50CF;&#x662F;&#x540E;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF09;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x7A0B;&#x5F0F;&#x7801;&#x66F4;&#x65B0; memcached&#x5185;&#x7684;&#x8D44;&#x6599;&#x3002;</p>
<p>memcached&#x5177;&#x6709;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x5305;&#xFF0C;&#x5305;&#x62EC;&#xFF1A;Perl/PHP/JAVA/C/Python/Ruby/C#/MySQL/</p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x5305;&#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x662F;&#xFF1A; <a href="http://code.google.com/p/memcached/wiki/Clients" target="_blank" rel="external">http://code.google.com/p/memcached/wiki/Clients</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/1fea1cd/" title="memcache的一致性hash算法使用 -" itemprop="url">memcache的一致性hash算法使用 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:09:31.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="&#x4E00;&#x3001;&#x6982;&#x8FF0;">&#x4E00;&#x3001;&#x6982;&#x8FF0;</h4><p>1&#x3001;&#x6211;&#x4EEC;&#x7684;memcache&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x8FD9;&#x91CC;&#x6211;&#x770B;&#x7684;spymemcache&#x7684;&#x6E90;&#x7801;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;ketama&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x8282;&#x70B9;&#x7684;&#x9009;&#x62E9;&#x3002;&#x4E0E;&#x5E38;&#x89C4;&#x7684;hash&#x7B97;&#x6CD5;&#x601D;&#x8DEF;&#x4E0D;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x5BF9;&#x6211;&#x4EEC;&#x8981;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;key&#x8FDB;&#x884C;hash&#x8BA1;&#x7B97;&#xFF0C;&#x5206;&#x914D;&#x5230;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x3002;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x662F;&#x5BF9;&#x6211;&#x4EEC;&#x8981;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;hash&#x8BA1;&#x7B97;&#xFF0C;&#x8FDB;&#x800C;&#x786E;&#x8BA4;&#x6BCF;&#x4E2A;key&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x3002;</p>
<h4 id="2&#x3001;&#x5E38;&#x89C4;hash&#x7B97;&#x6CD5;&#x7684;&#x5E94;&#x7528;&#x4EE5;&#x53CA;&#x5176;&#x5F0A;&#x7AEF;">2&#x3001;&#x5E38;&#x89C4;hash&#x7B97;&#x6CD5;&#x7684;&#x5E94;&#x7528;&#x4EE5;&#x53CA;&#x5176;&#x5F0A;&#x7AEF;</h4><p>&#x6700;&#x5E38;&#x89C4;&#x7684;&#x65B9;&#x5F0F;&#x83AB;&#x8FC7;&#x4E8E;hash&#x53D6;&#x6A21;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x6BD4;&#x5982;&#x96C6;&#x7FA4;&#x4E2D;&#x53EF;&#x7528;&#x673A;&#x5668;&#x9002;&#x91CF;&#x4E3A;N&#xFF0C;&#x90A3;&#x4E48;key&#x503C;&#x4E3A;K&#x7684;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5E94;&#x8BE5;&#x8DEF;&#x7531;&#x5230;hash(K) mod N&#x5BF9;&#x5E94;&#x7684;&#x673A;&#x5668;&#x3002;&#x7684;&#x786E;&#xFF0C;&#x8FD9;&#x79CD;&#x7ED3;&#x6784;&#x662F;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x5B9E;&#x7528;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5728;&#x4E00;&#x4E9B;&#x9AD8;&#x901F;&#x53D1;&#x5C55;&#x7684;web&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4ECD;&#x6709;&#x4E9B;&#x7F3A;&#x9677;&#x3002;&#x968F;&#x7740;&#x7CFB;&#x7EDF;&#x8BBF;&#x95EE;&#x538B;&#x529B;&#x7684;&#x589E;&#x957F;&#xFF0C;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#x4E0D;&#x5F97;&#x4E0D;&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7684;&#x65B9;&#x5F0F;&#x63D0;&#x9AD8;&#x96C6;&#x7FA4;&#x7684;&#x76F8;&#x5E94;&#x901F;&#x5EA6;&#x548C;&#x6570;&#x636E;&#x627F;&#x8F7D;&#x91CF;&#x3002;&#x589E;&#x52A0;&#x673A;&#x5668;&#x610F;&#x5473;&#x7740;&#x6309;&#x7167;hash&#x53D6;&#x6A21;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;&#x589E;&#x52A0;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7684;&#x8FD9;&#x4E00;&#x65F6;&#x523B;&#xFF0C;&#x5927;&#x91CF;&#x7684;&#x7F13;&#x5B58;&#x547D;&#x4E0D;&#x4E2D;&#xFF0C;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x8FDB;&#x884C;&#x6574;&#x4F53;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#xFF0C;&#x77AC;&#x95F4;&#x4F1A;&#x7ED9;DB&#x5E26;&#x6765;&#x6781;&#x9AD8;&#x7684;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#xFF0C;&#x8BBE;&#x7F6E;&#x5BFC;&#x81F4;DB&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x3002;</p>
<h4 id="3&#x3001;&#x8BBE;&#x8BA1;&#x5206;&#x5E03;&#x5F0F;cache&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#xFF1F;">3&#x3001;&#x8BBE;&#x8BA1;&#x5206;&#x5E03;&#x5F0F;cache&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#xFF1F;</h4><p>&#x5206;&#x5E03;&#x5F0F;&#x7F13;&#x5B58;&#x8BBE;&#x8BA1;&#xFFFD;&#xFFFD;&#xFFFD;&#x5FC3;&#x70B9;&#xFF1A;&#x5728;&#x8BBE;&#x8BA1;&#x5206;&#x5E03;&#x5F0F;cache&#x7CFB;&#x7EDF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BA9;key&#x7684;&#x5206;&#x5E03;&#x5747;&#x8861;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x589E;&#x52A0;cache server&#x540E;&#xFF0C;cache&#x7684;&#x8FC1;&#x79FB;&#x505A;&#x5230;&#x6700;&#x5C11;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x63D0;&#x5230;&#x7684;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;ketama&#x7684;&#x505A;&#x6CD5;&#x662F;&#xFF1A;&#x9009;&#x62E9;&#x5177;&#x4F53;&#x7684;&#x673A;&#x5668;&#x8282;&#x70B9;&#x4E0D;&#x5728;&#x53EA;&#x4F9D;&#x8D56;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;key&#x7684;hash&#x672C;&#x8EAB;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x673A;&#x5668;&#x8282;&#x70B9;&#x672C;&#x8EAB;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;hash&#x8FD0;&#x7B97;&#x3002;</p>
<h4 id="&#x4E8C;&#x3001;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x60C5;&#x666F;&#x63CF;&#x8FF0;&#xFF08;&#x8F6C;&#x8F7D;&#xFF09;">&#x4E8C;&#x3001;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x60C5;&#x666F;&#x63CF;&#x8FF0;&#xFF08;&#x8F6C;&#x8F7D;&#xFF09;</h4><h4 id="1&#x3001;_hash&#x673A;&#x5668;&#x8282;&#x70B9;">1&#x3001; hash&#x673A;&#x5668;&#x8282;&#x70B9;</h4><p>&#x9996;&#x5148;&#x6C42;&#x51FA;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7684;hash&#x503C;&#xFF08;&#x600E;&#x4E48;&#x7B97;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7684;hash&#xFF1F;ip&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;hash&#x7684;&#x53C2;&#x6570;&#x5427;&#x3002;&#x3002;&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6CD5;&#x4E86;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x5206;&#x5E03;&#x5230;0&#xFF5E;2^32&#x7684;&#x4E00;&#x4E2A;&#x5706;&#x73AF;&#x4E0A;&#xFF08;&#x987A;&#x65F6;&#x9488;&#x5206;&#x5E03;&#xFF09;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/1fe7f9f.gif" alt="0_1313570990ExQL"></p>
<p>&#x56FE;&#x4E00;</p>
<p>&#x96C6;&#x7FA4;&#x4E2D;&#x6709;&#x673A;&#x5668;&#xFF1A;A , B, C, D, E&#x4E94;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x6211;&#x4EEC;&#x5C06;&#x5176;&#x5206;&#x5E03;&#x5230;&#x5982;&#x4E0A;&#x56FE;&#x6240;&#x793A;&#x7684;&#x73AF;&#x4E0A;&#x3002;</p>
<h4 id="2&#x3001;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;">2&#x3001;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;</h4><p>&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5199;&#x5165;&#x7F13;&#x5B58;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5176;&#x4E2D;Key&#x503C;&#x4E3A;K&#xFF0C;&#x8BA1;&#x7B97;&#x5668;hash&#x503C;Hash(K)&#xFF0C; Hash(K) &#x5BF9;&#x5E94;&#x4E8E;&#x56FE; &#x2013; 1&#x73AF;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x4E2A;&#x70B9;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x70B9;&#x5BF9;&#x5E94;&#x6CA1;&#x6709;&#x6620;&#x5C04;&#x5230;&#x5177;&#x4F53;&#x7684;&#x67D0;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x987A;&#x65F6;&#x9488;&#x67E5;&#x627E;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x627E;&#x5230;&#x6709;&#x6620;&#x5C04;&#x673A;&#x5668;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x8BE5;&#x8282;&#x70B9;&#x5C31;&#x662F;&#x786E;&#x5B9A;&#x7684;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86;2^32&#x4ECD;&#x7136;&#x627E;&#x4E0D;&#x5230;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x547D;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x8282;&#x70B9;&#x3002;&#x6BD4;&#x5982; Hash(K) &#x7684;&#x503C;&#x4ECB;&#x4E8E;A~B&#x4E4B;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x547D;&#x4E2D;&#x7684;&#x673A;&#x5668;&#x8282;&#x70B9;&#x5E94;&#x8BE5;&#x662F;B&#x8282;&#x70B9;&#xFF08;&#x5982;&#x4E0A;&#x56FE; &#xFF09;&#x3002;</p>
<h4 id="3&#x3001;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x7684;&#x5904;&#x7406;">3&#x3001;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x7684;&#x5904;&#x7406;</h4><p>&#x5982;&#x4E0A;&#x56FE; &#x2013; 1&#xFF0C;&#x5728;&#x539F;&#x6709;&#x96C6;&#x7FA4;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x6B32;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x673A;&#x5668;F&#xFF0C;&#x589E;&#x52A0;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x8BA1;&#x7B97;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7684;Hash&#x503C;&#xFF0C;&#x5C06;&#x673A;&#x5668;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/1fe8210.gif" alt="0_1313571008YJ5Q"></p>
<p>&#x56FE;&#x4E8C;</p>
<p>&#x589E;&#x52A0;&#x673A;&#x5668;&#x8282;&#x70B9;F&#x4E4B;&#x540E;&#xFF0C;&#x8BBF;&#x95EE;&#x7B56;&#x7565;&#x4E0D;&#x6539;&#x53D8;&#xFF0C;&#x4F9D;&#x7136;&#x6309;&#x7167;&#xFF08;2&#xFF09;&#x4E2D;&#x7684;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#xFF0C;&#x6B64;&#x65F6;&#x7F13;&#x5B58;&#x547D;&#x4E0D;&#x4E2D;&#x7684;&#x60C5;&#x51B5;&#x4F9D;&#x7136;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#xFF0C;&#x4E0D;&#x80FD;&#x547D;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x662F;hash(K)&#x5728;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x4EE5;&#x524D;&#x843D;&#x5728;C&#xFF5E;F&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x3002;&#x5C3D;&#x7BA1;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#x8282;&#x70B9;&#x589E;&#x52A0;&#x5E26;&#x6765;&#x7684;&#x547D;&#x4E2D;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x6BD4;&#x8F83;&#x4F20;&#x7EDF;&#x7684; hash&#x53D6;&#x6A21;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x81F4;&#x6027;hash&#x5DF2;&#x7ECF;&#x5C06;&#x4E0D;&#x547D;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x964D;&#x5230;&#x4E86;&#x6700;&#x4F4E;&#x3002;</p>
<p>Consistent Hashing&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x6291;&#x5236;&#x4E86;hash&#x952E;&#x7684;&#x91CD;&#x65B0;&#x5206;&#x5E03;&#x3002;&#x53E6;&#x5916;&#x8981;&#x53D6;&#x5F97;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5F80;&#x5F80;&#x5728;&#x670D;&#x52A1;&#x5668;&#x6570;&#x91CF;&#x6BD4;&#x8F83;&#x5C11;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x589E;&#x52A0;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x6765;&#x4FDD;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x80FD;&#x5747;&#x5300;&#x7684;&#x5206;&#x5E03;&#x5728;&#x5706;&#x73AF;&#x4E0A;&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x4E00;&#x822C;&#x7684;hash&#x65B9;&#x6CD5;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6620;&#x5C04;&#x5730;&#x70B9;&#x7684;&#x5206;&#x5E03;&#x975E;&#x5E38;&#x4E0D;&#x5747;&#x5300;&#x3002;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x7269;&#x7406;&#x8282;&#x70B9;&#xFF08;&#x670D;&#x52A1;&#x5668;&#xFF09;&#x5728;&#x5706;&#x4E0A;&#x5206;&#x914D;100&#xFF5E;200&#x4E2A;&#x70B9;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x6291;&#x5236;&#x5206;&#x5E03;&#x4E0D;&#x5747;&#x5300;&#xFF0C;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x51CF;&#x5C0F;&#x670D;&#x52A1;&#x5668;&#x589E;&#x51CF;&#x65F6;&#x7684;&#x7F13;&#x5B58;&#x91CD;&#x65B0;&#x5206;&#x5E03;&#x3002;&#x7528;&#x6237;&#x6570;&#x636E;&#x6620;&#x5C04;&#x5728;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x7528;&#x6237;&#x6570;&#x636E;&#x771F;&#x6B63;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x662F;&#x5728;&#x8BE5;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4EE3;&#x8868;&#x7684;&#x5B9E;&#x9645;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x4E0B;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x56FE;&#x63CF;&#x8FF0;&#x4E86;&#x9700;&#x8981;&#x4E3A;&#x6BCF;&#x53F0;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x589E;&#x52A0;&#x7684;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x3002; </p>
<p><img src="http://taojinke.github.io/img/20150703/1fe8481.gif" alt="0_1313571021fffF"></p>
<p>&#x56FE;&#x4E09;</p>
<p>x&#x8F74;&#x8868;&#x793A;&#x7684;&#x662F;&#x9700;&#x8981;&#x4E3A;&#x6BCF;&#x53F0;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x6269;&#x5C55;&#x7684;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x500D;&#x6570;(scale)&#xFF0C;y&#x8F74;&#x662F;&#x5B9E;&#x9645;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5F53;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x91CF;&#x5F88;&#x5C0F;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x5927;&#x7684;&#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF0C;&#x53CD;&#x4E4B;&#x5219;&#x9700;&#x8981;&#x66F4;&#x5C11;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x4ECE;&#x56FE;&#x4E0A;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5728;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x6709;10&#x53F0;&#x65F6;&#xFF0C;&#x5DEE;&#x4E0D;&#x591A;&#x9700;&#x8981;&#x4E3A;&#x6BCF;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x589E;&#x52A0;100~200&#x4E2A;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x624D;&#x80FD;&#x8FBE;&#x5230;&#x771F;&#x6B63;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;</p>
<h4 id="&#x4E09;&#x3001;&#x4EE5;spymemcache&#x6E90;&#x7801;&#x6765;&#x6F14;&#x793A;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x5E94;&#x7528;">&#x4E09;&#x3001;&#x4EE5;spymemcache&#x6E90;&#x7801;&#x6765;&#x6F14;&#x793A;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x5E94;&#x7528;</h4><p>1&#x3001;&#x4E0A;&#x8FB9;&#x63CF;&#x8FF0;&#x7684;&#x4E00;&#x81F4;&#x6027;Hash&#x7B97;&#x6CD5;&#x6709;&#x4E2A;&#x6F5C;&#x5728;&#x7684;&#x95EE;&#x9898;&#x662F;: </p>
<p>&#xFF08;1&#xFF09;&#x3001;&#x5C06;&#x8282;&#x70B9;hash&#x540E;&#x4F1A;&#x4E0D;&#x5747;&#x5300;&#x5730;&#x5206;&#x5E03;&#x5728;&#x73AF;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x5927;&#x91CF;key&#x5728;&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;key&#x547D;&#x4E2D;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6982;&#x7387;&#x5DEE;&#x522B;&#x8F83;&#x5927;&#xFF0C;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x6709;&#x6548;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;</p>
<p>&#xFF08;2&#xFF09;&#x3001;&#x5982;&#x6709;&#x4E09;&#x4E2A;&#x8282;&#x70B9;Node1,Node2,Node3&#xFF0C;&#x5206;&#x5E03;&#x5728;&#x73AF;&#x4E0A;&#x65F6;&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x6328;&#x7684;&#x5F88;&#x8FD1;&#xFF0C;&#x843D;&#x5728;&#x73AF;&#x4E0A;&#x7684;key&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x5927;&#x91CF;key&#x987A;&#x65F6;&#x9488;&#x603B;&#x662F;&#x5206;&#x914D;&#x7ED9;Node2&#xFF0C;&#x800C;&#x5176;&#x5B83;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x88AB;&#x627E;&#x5230;&#x7684;&#x6982;&#x7387;&#x90FD;&#x4F1A;&#x5F88;&#x5C0F;&#x3002;</p>
<p>2&#x3001;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x6709;: </p>
<p>&#x6539;&#x5584;Hash&#x7B97;&#x6CD5;&#xFF0C;&#x5747;&#x5300;&#x5206;&#x914D;&#x5404;&#x8282;&#x70B9;&#x5230;&#x73AF;&#x4E0A;&#xFF1B;&#xFF3B;&#x5F15;&#x6587;&#xFF3D;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x7269;&#x7406;&#x8282;&#x70B9;&#xFF08;&#x670D;&#x52A1;&#x5668;&#xFF09;&#x5728;&#x5706;&#x4E0A;&#x5206;&#x914D;100&#xFF5E;200&#x4E2A;&#x70B9;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x6291;&#x5236;&#x5206;&#x5E03;&#x4E0D;&#x5747;&#x5300;&#xFF0C;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x51CF;&#x5C0F;&#x670D;&#x52A1;&#x5668;&#x589E;&#x51CF;&#x65F6;&#x7684;&#x7F13;&#x5B58;&#x91CD;&#x65B0;&#x5206;&#x5E03;&#x3002;&#x7528;&#x6237;&#x6570;&#x636E;&#x6620;&#x5C04;&#x5728;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x7528;&#x6237;&#x6570;&#x636E;&#x771F;&#x6B63;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x662F;&#x5728;&#x8BE5;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4EE3;&#x8868;&#x7684;&#x5B9E;&#x9645;&#x7269;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;</p>
<p>&#x5728;&#x67E5;&#x770B;Spy Memcached client&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x91C7;&#x7528;&#x4E00;&#x79CD;&#x79F0;&#x4E3A;Ketama&#x7684;Hash&#x7B97;&#x6CD5;&#xFF0C;&#x4EE5;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x89E3;&#x51B3;Memcached&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x95EE;&#x9898;&#x3002;</p>
<h4 id="3&#x3001;&#x6E90;&#x7801;&#x8BF4;&#x660E;">3&#x3001;&#x6E90;&#x7801;&#x8BF4;&#x660E;</h4><p>&#x8BE5;client&#x91C7;&#x7528;TreeMap&#x5B58;&#x50A8;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x73AF;&#x5F62;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x73AF;&#x4E2D;&#xFF0C;&#x8282;&#x70B9;&#x4E4B;&#x524D;&#x662F;&#x5B58;&#x5728;&#x987A;&#x5E8F;&#x5173;&#x7CFB;&#x7684;&#xFF0C;&#x6240;&#x4EE5;TreeMap&#x7684;key&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparator&#x63A5;&#x53E3;&#x3002;&#x90A3;&#x8282;&#x70B9;&#x662F;&#x600E;&#x6837;&#x653E;&#x5165;&#x8FD9;&#x4E2A;&#x73AF;&#x4E2D;&#x7684;&#x5462;&#xFF1F; </p>
<ol>
<li>&#xA0;&#xA0; protected void setKetamaNodes(List&lt;MemcachedNode&gt; nodes) {&#xA0;&#xA0;</li>
<li>TreeMap&lt;Long, MemcachedNode&gt; newNodeMap = new TreeMap&lt;Long, MemcachedNode&gt;();&#xA0;&#xA0;</li>
<li>int numReps= config.getNodeRepetitions();&#xA0;&#xA0;</li>
<li>for(MemcachedNode node : nodes) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; // Ketama does some special work with md5 where it reuses chunks.&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; if(hashAlg == HashAlgorithm.KETAMA_HASH) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; for(int i=0; i&lt;numReps / 4; i++) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; byte[] digest=HashAlgorithm.computeMd5(config.getKeyForNode(node, i));&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; for(int h=0;h&lt;4;h++) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Long k = ((long)(digest[3+h*4]&amp;0xFF) &lt;&lt; 24)&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; | ((long)(digest[2+h*4]&amp;0xFF) &lt;&lt; 16)&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; | ((long)(digest[1+h*4]&amp;0xFF) &lt;&lt; 8)&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; | (digest[h*4]&amp;0xFF);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; newNodeMap.put(k, node);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; getLogger().debug(&#x201C;Adding node %s in position %d&#x201D;, node, k);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; } else {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; for(int i=0; i&lt;numReps; i++) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; newNodeMap.put(hashAlg.hash(config.getKeyForNode(node, i)), node);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>}&#xA0;&#xA0;</li>
<li>assert newNodeMap.size() == numReps * nodes.size();&#xA0;&#xA0;</li>
<li>ketamaNodes = newNodeMap;&#xA0;</li>
</ol>
<p>&#x4E0A;&#x9762;&#x7684;&#x6D41;&#x7A0B;&#x5927;&#x6982;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5F52;&#x7EB3;:&#x56DB;&#x4E2A;&#x865A;&#x62DF;&#x7ED3;&#x70B9;&#x4E3A;&#x4E00;&#x7EC4;&#xFF0C;&#x4EE5;getKeyForNode&#x65B9;&#x6CD5;&#x5F97;&#x5230;&#x8FD9;&#x7EC4;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;name&#xFF0C;Md5&#x7F16;&#x7801;&#x540E;&#xFF0C;&#x6BCF;&#x4E2A;&#x865A;&#x62DF;&#x7ED3;&#x70B9;&#x5BF9;&#x5E94;Md5&#x7801;16&#x4E2A;&#x5B57;&#x8282;&#x4E2D;&#x7684;4&#x4E2A;&#xFF0C;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;long&#x578B;&#x6570;&#x503C;&#xFF0C;&#x505A;&#x4E3A;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x7ED3;&#x70B9;&#x5728;&#x73AF;&#x4E2D;&#x7684;&#x60DF;&#x4E00;key&#x3002;&#x7B2C;10&#x884C;k&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Long&#x578B;&#x7684;&#x5462;&#xFF1F;&#x5C31;&#x662F;&#x56E0;&#x4E3A;Long&#x578B;&#x5B9E;&#x73B0;&#x4E86;Comparator&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x5904;&#x7406;&#x5B8C;&#x6B63;&#x5F0F;&#x7ED3;&#x70B9;&#x5728;&#x73AF;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;key&#x5728;&#x73AF;&#x4E0A;&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x7684;&#x6E38;&#x620F;&#x4E86;&#x3002;</p>
<p>&#xFFFD;&#xFFFD;&#xFFFD;&#x4E8E;&#x6BCF;&#x4E2A;key&#x8FD8;&#x662F;&#x5F97;&#x5B8C;&#x6210;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;:&#x8BA1;&#x7B97;&#x51FA;Md5&#xFF0C;&#x6839;&#x636E;Md5&#x7684;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#xFF0C;&#x901A;&#x8FC7;Kemata Hash&#x7B97;&#x6CD5;&#x5F97;&#x5230;key&#x5728;&#x8FD9;&#x4E2A;&#x73AF;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<ol>
<li>MemcachedNode getNodeForKey(long hash) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; final MemcachedNode rv;&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; if(!ketamaNodes.containsKey(hash)) {&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; // Java 1.6 adds a ceilingKey method, but I&#x2019;m still stuck in 1.5&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; // in a lot of places, so I&#x2019;m doing this myself.&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SortedMap&lt;Long, MemcachedNode&gt; tailMap=getKetamaNodes().tailMap(hash);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(tailMap.isEmpty()) {&#xA0;&#xA0;</li>
<li>hash=getKetamaNodes().firstKey();&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; } else {&#xA0;&#xA0;</li>
<li>hash=tailMap.firstKey();&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; }&#xA0;&#xA0;</li>
<li>rv=getKetamaNodes().get(hash);&#xA0;&#xA0;</li>
<li>&#xA0;&#xA0;&#xA0; return rv;&#xA0;&#xA0;</li>
<li>}&#xA0;</li>
</ol>
<p>&#x4E0A;&#x8FB9;&#x4EE3;&#x7801;&#x7684;&#x5B9E;&#x73B0;&#x5C31;&#x662F;&#x5728;&#x73AF;&#x4E0A;&#x987A;&#x65F6;&#x9488;&#x67E5;&#x627E;&#xFF0C;&#x6CA1;&#x627E;&#x5230;&#x5C31;&#x53BB;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x77E5;&#x9053;&#x5BF9;&#x5E94;&#x7684;&#x7269;&#x7406;&#x8282;&#x70B9;&#x4E86;&#x3002;</p>
<h4 id="&#x56DB;&#x3001;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5206;&#x6790;">&#x56DB;&#x3001;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5206;&#x6790;</h4><p>1&#x3001;memcache&#x7684;add&#x65B9;&#x6CD5;&#xFF1A;&#x901A;&#x8FC7;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x786E;&#x8BA4;&#x5F53;&#x524D;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x5E94;&#x7684;cacheserver&#x7684;hash&#x503C;&#x4EE5;&#x53CA;&#x8981;&#x5B58;&#x50A8;&#x6570;&#x636E;key&#x7684;hash&#x8FDB;&#x884C;&#x5BF9;&#x5E94;&#xFF0C;&#x786E;&#x8BA4;cacheserver&#xFF0C;&#x83B7;&#x53D6;connection&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5B58;&#x50A8;</p>
<p>2&#x3001;memcache&#x7684;get&#x65B9;&#x6CD5;&#xFF1A;&#x901A;&#x8FC7;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x786E;&#x8BA4;&#x5F53;&#x524D;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x5E94;&#x7684;cacheserver&#x7684;hash&#x503C;&#x4EE5;&#x53CA;&#x8981;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x7684;hash&#x503C;&#xFF0C;&#x8FDB;&#x800C;&#x786E;&#x8BA4;&#x5B58;&#x50A8;&#x7684;cacheserver&#xFF0C;&#x83B7;&#x53D6;connection&#x8FDB;&#x884C;&#x6570;&#x636E;&#x63D0;&#x53D6;</p>
<h4 id="&#x4E94;&#x3001;&#x603B;&#x7ED3;">&#x4E94;&#x3001;&#x603B;&#x7ED3;</h4><p>1&#x3001;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x53EA;&#x662F;&#x5E2E;&#x6211;&#x4EEC;&#x51CF;&#x5C11;cache&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x673A;&#x5668;&#x6570;&#x91CF;&#x589E;&#x51CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;cache&#x7684;&#x6570;&#x636E;&#x80FD;&#x8FDB;&#x884C;&#x6700;&#x5C11;&#x91CD;&#x5EFA;&#x3002;&#x53EA;&#x8981;cache&#x96C6;&#x7FA4;&#x7684;server&#x6570;&#x91CF;&#x6709;&#x53D8;&#x5316;&#xFF0C;&#x5FC5;&#x7136;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x547D;&#x4E2D;&#x7684;&#x95EE;&#x9898;</p>
<p>2&#x3001;&#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x5747;&#x8861;&#x95EE;&#x9898;&#xFF0C;&#x901A;&#x8FC7;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x601D;&#x60F3;&#x6765;&#x8FBE;&#x5230;&#x5747;&#x8861;&#x5206;&#x914D;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;cache server&#x8282;&#x70B9;&#x8D8A;&#x5C11;&#x5C31;&#x8D8A;&#x9700;&#x8981;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x8FD9;&#x4E2A;&#x65B9;&#x5F0F;&#x6765;&#x5747;&#x8861;&#x8D1F;&#x8F7D;&#x3002;</p>
<p>3&#x3001;&#x6211;&#x4EEC;&#x7684;cache&#x5BA2;&#x6237;&#x7AEF;&#x6839;&#x672C;&#x4E0D;&#x4F1A;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;map&#x6765;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;key&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#xFF0C;&#x90FD;&#x662F;&#x901A;&#x8FC7;key&#x7684;hash&#x548C;cacheserver&#xFF08;&#x4E5F;&#x8BB8;ip&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF09;&#x7684;hash&#x8BA1;&#x7B97;&#x5F53;&#x524D;&#x7684;key&#x5E94;&#x8BE5;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x3002;</p>
<p>4&#x3001;&#x5F53;&#x6211;&#x4EEC;&#x7684;cache&#x8282;&#x70B9;&#x5D29;&#x6E83;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x5FC5;&#x5B9A;&#x4E22;&#x5931;&#x90E8;&#x5206;cache&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x6839;&#x636E;&#x6D3B;&#x7740;&#x7684;cache server&#x548C;key&#x8FDB;&#x884C;&#x65B0;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x5339;&#x914D;&#x8BA1;&#x7B97;&#x3002;&#x6709;&#x53EF;&#x80FD;&#x5BF9;&#x90E8;&#x5206;&#x6CA1;&#x6709;&#x4E22;&#x5931;&#x7684;&#x6570;&#x636E;&#x4E5F;&#x8981;&#x505A;&#x91CD;&#x5EFA;&#x2026;</p>
<p>5&#x3001;&#x81F3;&#x4E8E;&#x6B63;&#x5E38;&#x5230;&#x8FBE;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x4F55;&#x627E;&#x5230;key&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x5C31;&#x662F;cache server&#x672C;&#x8EAB;&#x7684;&#x5185;&#x90E8;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x6B64;&#x5904;&#x4E0D;&#x505A;&#x63CF;&#x8FF0;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#x4EE5;&#x53CA;&#x63D0;&#x53D6;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4E86;&#x6D41;&#x7A0B;&#x5C55;&#x793A;&#x3002;</p>
<p>&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <a href="http://blog.csdn.net/kongqz/article/details/6695417" target="_blank" rel="external">http://blog.csdn.net/kongqz/article/details/6695417</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Memcached/">Memcached</a><a href="/tags/Nosql/">Nosql</a><a href="/tags/算法/">算法</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/17/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" href="/page/19/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>587</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>32</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>23</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>9</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
