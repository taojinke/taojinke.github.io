
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/19/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a99cbea/" title="Gulp学习指南 -" itemprop="url">Gulp学习指南 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x70B9;&#x51FB; <a href="http://gulpjs.com/" target="_blank" rel="external">gulp.js</a> &#x53BB;&#x5B98;&#x7F51;&#xFF1B; </p>
<p><a href="https://github.com/jabez128/stream-handbook" target="_blank" rel="external">stream</a> &#x4E2D;&#x6587;&#x7248;&#xFF0C; <a href="https://github.com/substack/stream-handbook" target="_blank" rel="external">stream</a> &#x82F1;&#x6587;&#x7248; </p>
<h2 id="&#xFFFD;&#xFFFD;&#xFFFD;&#x88C5;_Gulp-js">&#xFFFD;&#xFFFD;&#xFFFD;&#x88C5; Gulp.js</h2><p>Gulp &#x662F;&#x57FA;&#x4E8E; <a href="https://nodejs.org/download/" target="_blank" rel="external">Node.js</a> &#x7684;&#xFF0C;&#x6545;&#x8981;&#x9996;&#x5148;&#x5B89;&#x88C5; Node.js&#xFF0C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5B89;&#x88C5;Gulp&#xFF1A; </p>
<pre><code>npm install -g gulp

//- &amp;<span class="symbol">#x6267</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x5168</span>;&amp;<span class="symbol">#x5C40</span>;&amp;<span class="symbol">#x5B89</span>;&amp;<span class="symbol">#x88C5</span>; gulp&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x6837</span>;&amp;<span class="symbol">#x5728</span>;&amp;<span class="symbol">#x4EFB</span>;&amp;<span class="symbol">#x4F55</span>;&amp;<span class="symbol">#x5730</span>;&amp;<span class="symbol">#x65B9</span>;&amp;<span class="symbol">#x90FD</span>;&amp;<span class="symbol">#x53EF</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x884C</span>; gulp &amp;<span class="symbol">#x64CD</span>;&amp;<span class="symbol">#x4F5C</span>;
</code></pre><p>&#x5B89;&#x88C5;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x8981;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x547D;&#x4EE4;&#x884C;&#x5207;&#x6362;&#x5230;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;(&#x53EF;&#x4EE5; <strong>&#x53F3;&#x952E;</strong> &#x70B9;&#x51FB;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x9009;&#x62E9; <strong>&#x5728;&#x6B64;&#x5904;&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x7A97;&#x53E3;(W)</strong> )&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF1A; </p>
<pre><code>npm init
//- &amp;<span class="symbol">#x751F</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>; package.json&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x662F</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E9B</span>;&amp;<span class="symbol">#x5E38</span>;&amp;<span class="symbol">#x89C4</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x914D</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;

npm install gulp --save-dev
//- &amp;<span class="symbol">#x5C06</span>; gulp &amp;<span class="symbol">#x5B89</span>;&amp;<span class="symbol">#x88C5</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x9879</span>;&amp;<span class="symbol">#x76EE</span>;&amp;<span class="symbol">#x76EE</span>;&amp;<span class="symbol">#x5F55</span>;&amp;<span class="symbol">#x5185</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5E76</span>;&amp;<span class="symbol">#x751F</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x5305</span>;&amp;<span class="symbol">#x4F9D</span>;&amp;<span class="symbol">#x8D56</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x4E8E</span>; package.json &amp;<span class="symbol">#x5185</span>;&amp;<span class="symbol">#x7684</span>; devDependencies
</code></pre><h2 id="&#x5B89;&#x88C5;Gulp&#x63D2;&#x4EF6;">&#x5B89;&#x88C5;Gulp&#x63D2;&#x4EF6;</h2><p>Gulp&#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x662F;&#x4EE5;&#x63D2;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4F7F;&#x7528;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5B89;&#x88C5;&#x6211;&#x4EEC;&#x7528;&#x5230;&#x7684;&#x63D2;&#x4EF6;&#x5230;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x5185;&#xFF0C;&#x63D2;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>npm install &amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x540D</span>; --save-dev
//- &amp;<span class="symbol">#x591A</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x53EF</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x7A7A</span>;&amp;<span class="symbol">#x683C</span>;&amp;<span class="symbol">#x5206</span>;&amp;<span class="symbol">#x9694</span>;

npm install gulp-util gulp-uglify gulp-concat --save-dev
//- &amp;<span class="symbol">#x5B89</span>;&amp;<span class="symbol">#x88C5</span>;gulp-util&amp;<span class="symbol">#x3001</span>;gulp-uglify &amp;<span class="symbol">#x548C</span>; gulp-concat&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x4EF6</span>;
//- gulp-uglify&amp;<span class="symbol">#xFF1A</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x4E8E</span>;&amp;<span class="symbol">#x538B</span>;&amp;<span class="symbol">#x7F29</span>;js 
//- gulp-concat&amp;<span class="symbol">#xFF1A</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x4E8E</span>;&amp;<span class="symbol">#x5408</span>;&amp;<span class="symbol">#x5E76</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;
</code></pre><h2 id="&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;_gulpfile-js">&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; gulpfile.js</h2><p>&#x8981;&#x4F7F;&#x7528; Gulp &#x8FD8;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x628A;&#x6211;&#x4EEC;&#x7684;&#x63D2;&#x4EF6;&#x8F7D;&#x5165;&#x8FDB;&#x6765;&#xFF1B;</p>
<p>&#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x5185;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; gulpfile.js &#x6587;&#x4EF6;(&#x5FC5;&#x987B;&#x662F;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x54DF;~)&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="keyword">var</span> gulp    = <span class="keyword">require</span>(&amp;apos;gulp&amp;apos;);
<span class="keyword">var</span> gutil   = <span class="keyword">require</span>(&amp;apos;gulp-util&amp;apos;);
<span class="keyword">var</span> uglify  = <span class="keyword">require</span>(&amp;apos;gulp-uglify&amp;apos;);
<span class="keyword">var</span> <span class="keyword">concat</span>  = <span class="keyword">require</span>(&amp;apos;gulp-<span class="keyword">concat</span>&amp;apos;);
<span class="comment">//- &amp;#x901A;&amp;#x8FC7; require() &amp;#x8F7D;&amp;#x5165;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;~ </span>
gulp.task(&amp;apos;<span class="keyword">concat</span>&amp;apos;, <span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="comment">{
    gulp.src(&amp;apos;./scripts/*.js&amp;apos;)
        .pipe(uglify())
        .pipe(concat(&amp;apos;jkd.min.js&amp;apos;))
        .pipe(gulp.dest(&amp;apos;./build/js&amp;apos;));
}</span>);</span>
gulp.task(&amp;apos;<span class="keyword">default</span>&amp;apos;, [&amp;apos;<span class="keyword">concat</span>&amp;apos;]);
</code></pre><h2 id="&#x8FD0;&#x884C;_Gulp">&#x8FD0;&#x884C; Gulp</h2><p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x914D;&#x7F6E;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x8FD0;&#x884C;Gulp&#x5BF9;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x5566;&#xFF1B;</p>
<p>&#x4F7F;&#x7528; <strong>gulp &#x547D;&#x4EE4;</strong> &#xFF0C;&#x8FD0;&#x884C;Gulp.js&#x6784;&#x5EFA;&#x7A0B;&#x5E8F; </p>
<pre><code>gulp
//- &amp;<span class="symbol">#x8FD0</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x9ED8</span>;&amp;<span class="symbol">#x8BA4</span>;&amp;<span class="symbol">#x7684</span>; default task

gulp concat
//- &amp;<span class="symbol">#x4EC5</span>;&amp;<span class="symbol">#x8FD0</span>;&amp;<span class="symbol">#x884C</span>; concat &amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>; task

//- &amp;<span class="symbol">#x8FD0</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#xFF1A</span>;

<span class="class">D</span>:\<span class="class">SVN</span>\wap\m&amp;gt;gulp
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">13</span>] <span class="class">Using</span> gulpfile <span class="class">D</span>:\<span class="class">SVN</span>\wap\m\gulpfile.js
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">13</span>] <span class="class">Starting</span> &amp;apos;concat&amp;apos;...
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">13</span>] <span class="class">Finished</span> &amp;apos;concat&amp;apos; after <span class="number">9.1</span> ms
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">13</span>] <span class="class">Starting</span> &amp;apos;default&amp;apos;...
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">13</span>] <span class="class">Finished</span> &amp;apos;default&amp;apos; after <span class="number">11</span> &amp;<span class="symbol">#x3BC</span>;s

<span class="class">D</span>:\<span class="class">SVN</span>\wap\m&amp;gt;gulp concat
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">25</span>] <span class="class">Using</span> gulpfile <span class="class">D</span>:\<span class="class">SVN</span>\wap\m\gulpfile.js
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">25</span>] <span class="class">Starting</span> &amp;apos;concat&amp;apos;...
[<span class="number">12</span>:<span class="number">03</span>:<span class="number">25</span>] <span class="class">Finished</span> &amp;apos;concat&amp;apos; after <span class="number">9.54</span> ms
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a99348c/" title="io.js 2.0.2 发布，服务器 JS 引擎 -" itemprop="url">io.js 2.0.2 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>win,node-gyp</strong>: the delay-load hook for windows addons has now been correctly enabled by default, it had wrongly defaulted to off in the release version of 2.0.0 (Bert Belder) <a href="https://github.com/iojs/io.js/pull/1433" target="_blank" rel="external">#1433</a></li>
<li><strong>os</strong> : tmpdir()&apos;s trailing slash stripping has been refined to fix an issue when the temp directory is at &apos;/&apos;. Also considers which slash is used by the operating system. (cjihrig) <a href="https://github.com/iojs/io.js/pull/1673" target="_blank" rel="external">#1673</a></li>
<li><strong>tls</strong>: default ciphers have been updated to use gcm and aes128 (Mike MacCana) <a href="https://github.com/iojs/io.js/pull/1660" target="_blank" rel="external">#1660</a></li>
<li><strong>build</strong>: v8 snapshots have been re-enabled by default as suggested by the v8 team, since prior security issues have been resolved. This should give some perf improvements to both startup and vm context creation. (Trevor Norris) <a href="https://github.com/iojs/io.js/pull/1663" target="_blank" rel="external">#1663</a></li>
<li><strong>src</strong> : fixed preload modules not working when other flags were used before —require(Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1694" target="_blank" rel="external">#1694</a></li>
<li><strong>dgram</strong> : fixed send()&apos;s callback not being asynchronous (Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1313" target="_blank" rel="external">#1313</a></li>
<li><strong>readline</strong>: emitKeys now keeps buffering data until it has enough to parse. This fixes an issue with parsing split escapes. (Alex Kocharin) <a href="https://github.com/iojs/io.js/pull/1601" target="_blank" rel="external">#1601</a></li>
<li><strong>cluster</strong> : works now properly emit &apos;disconnect&apos; to cluser.worker(Oleg Elifantiev) <a href="https://github.com/iojs/io.js/pull/1386" target="_blank" rel="external">#1386</a></li>
<li><p><strong>events</strong>: uncaught errors now provide some context (Evan Lucas) <a href="https://github.com/iojs/io.js/pull/1654" target="_blank" rel="external">#1654</a></p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/nodejs/io.js/archive/v2.0.2.zip" target="_blank" rel="external">https://github.com/nodejs/io.js/archive/v2.0.2.zip</a> &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A; <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a> &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/62514/io-js-2-0-2" target="_blank" rel="external">http://www.oschina.net/news/62514/io-js-2-0-2</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9f95d9/" title="网页爬虫的构建（一） -" itemprop="url">网页爬虫的构建（一） -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x597D;&#x4E45;&#x6CA1;&#x5199;&#x535A;&#x5BA2;&#x4E86;&#xFF0C;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5DF2;&#x7ECF;&#x5FD9;&#x6210;&#x72D7;&#xFF0C;&#x534A;&#x5E74;&#x65F6;&#x95F4;&#x5C31;&#x8FD9;&#x4E48;&#x6CA1;&#x4E86;&#xFF0C;&#x5FC5;&#x987B;&#x5F97;&#x505A;&#x4E00;&#x4E0B;&#x603B;&#x7ED3;&#x5426;&#x5219;&#x767D;&#x5FD9;&#x3002;&#x63A5;&#x4E0B;&#x53BB;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x603B;&#x7ED3;&#xFF0C;&#x90FD;&#x662F;&#x5173;&#x4E8E; &#x5B9A;&#x5411;&#x722C;&#x866B; &#xFF08;&#x5E72;&#x4E86;&#x597D;&#x51E0;&#x4E2A;&#x6708;&#x540E;&#x624D;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x540D;&#x8BCD;&#xFF09;&#x7684;&#x6784;&#x5EFA;&#x65B9;&#x6CD5;&#xFF0C;&#x5B9E;&#x73B0;&#x5E73;&#x53F0;&#x662F;Node.JS&#x3002; </p>
<h2 id="&#x80CC;&#x666F;_&#x4E00;&#x822C;&#x722C;&#x866B;&#x7684;&#x903B;&#x8F91;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x94FE;&#x63A5;&#xFF0C;&#x628A;&#x8BE5;&#x94FE;&#x63A5;&#x7684;&#x7F51;&#x9875;&#x4E0B;&#x8F7D;&#x4FDD;&#x5B58;&#xFF0C;&#x63A5;&#x7740;&#x5206;&#x6790;&#x9875;&#x9762;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#xFF0C;&#x627E;&#x5230;&#x76EE;&#x6807;&#x94FE;&#x63A5;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x8BF7;&#x6C42;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x8BF7;&#x6C42;&#x5219;&#x653E;&#x5165;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#xFF0C;&#x9875;&#x9762;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x4EA4;&#x7ED9;&#x7D22;&#x5F15;&#x5668;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x6B64;&#x5F80;&#x590D;&#x5373;&#x53EF;&#x5EFA;&#x7ACB;&#x4E00;&#x5957;&#x63D0;&#x4F9B;&#x7ED9;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x7684;&#x6587;&#x6863;&#x5E93;&#x3002;&#x6211;&#x5F53;&#x65F6;&#x7684;&#x9700;&#x6C42;&#x5E76;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x800C;&#x662F;&#x6293;&#x53D6;&#x67D0;&#x51E0;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;&#x6570;&#x636E;&#x5E76;&#x628A;&#x89C4;&#x5B9A;&#x7684;&#x5B57;&#x6BB5;&#x8F93;&#x51FA;&#x4E3A;&#x7ED3;&#x6784;&#x5316;&#x7684;&#x6587;&#x4EF6;&#x6700;&#x7EC8;&#x4F1A;&#x653E;&#x5230;EXCEL&#x4E2D;&#x5206;&#x6790;_&#x3002;&#x540E;&#x8005;&#x4E5F;&#x8BB8;&#x53EA;&#x9700;&#x8981;&#x8BE5;&#x7F51;&#x7AD9;&#x5168;&#x91CF;&#x7684;&#x5546;&#x54C1;&#x6570;&#x636E;&#xFF0C;&#x5176;&#x5B83;&#x4E00;&#x6982;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x8FD9;&#x6837;&#x89C1;&#x9762;&#x4E0D;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x3002;">&#x80CC;&#x666F;  &#x4E00;&#x822C;&#x722C;&#x866B;&#x7684;&#x903B;&#x8F91;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x94FE;&#x63A5;&#xFF0C;&#x628A;&#x8BE5;&#x94FE;&#x63A5;&#x7684;&#x7F51;&#x9875;&#x4E0B;&#x8F7D;&#x4FDD;&#x5B58;&#xFF0C;&#x63A5;&#x7740;&#x5206;&#x6790;&#x9875;&#x9762;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#xFF0C;&#x627E;&#x5230;&#x76EE;&#x6807;&#x94FE;&#x63A5;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x8BF7;&#x6C42;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x8BF7;&#x6C42;&#x5219;&#x653E;&#x5165;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#xFF0C;&#x9875;&#x9762;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x4EA4;&#x7ED9;&#x7D22;&#x5F15;&#x5668;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x6B64;&#x5F80;&#x590D;&#x5373;&#x53EF;&#x5EFA;&#x7ACB;&#x4E00;&#x5957;&#x63D0;&#x4F9B;&#x7ED9;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x7684;&#x6587;&#x6863;&#x5E93;&#x3002;&#x6211;&#x5F53;&#x65F6;&#x7684;&#x9700;&#x6C42;&#x5E76;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x800C;&#x662F;&#x6293;&#x53D6;&#x67D0;&#x51E0;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;&#x6570;&#x636E;&#x5E76;&#x628A;&#x89C4;&#x5B9A;&#x7684;&#x5B57;&#x6BB5;&#x8F93;&#x51FA;&#x4E3A;&#x7ED3;&#x6784;&#x5316;&#x7684;&#x6587;&#x4EF6;&#x6700;&#x7EC8;&#x4F1A;&#x653E;&#x5230;EXCEL&#x4E2D;&#x5206;&#x6790;  &#x3002;&#x540E;&#x8005;&#x4E5F;&#x8BB8;&#x53EA;&#x9700;&#x8981;&#x8BE5;&#x7F51;&#x7AD9;&#x5168;&#x91CF;&#x7684;&#x5546;&#x54C1;&#x6570;&#x636E;&#xFF0C;&#x5176;&#x5B83;&#x4E00;&#x6982;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x8FD9;&#x6837;&#x89C1;&#x9762;&#x4E0D;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x3002;</h2><p>&#x6211;&#x5C06;&#x987A;&#x7740;&#x65F6;&#x95F4;&#x987A;&#x5E8F;&#x8BB0;&#x5F55;&#x95EE;&#x9898;&#x548C;&#x60F3;&#x6CD5;&#x3002;</p>
<ol>
<li><a href="http://www.cnblogs.com/mike442144/p/4194651.html" target="_blank" rel="external">&#x7F16;&#x7801;</a></li>
<li><a href="http://www.cnblogs.com/mike442144/p/4510245.html" target="_blank" rel="external">&#x91CD;&#x5B9A;&#x5411;</a></li>
<li>&#x5E76;&#x53D1;</li>
</ol>
<p>&#x95EE;&#x9898;</p>
<p>&#x7F16;&#x7801;&#x9047;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8981;&#x5F7B;&#x5E95;&#x89E3;&#x51B3;&#x7F16;&#x7801;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5F04;&#x6E05;&#x695A;&#xFFFD;&#xFFFD;&#xFFFD;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<ol>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x4E71;&#x7801;&#xFF1F;</li>
<li>&#x5982;&#x4F55;&#x627E;&#x5230;&#x5185;&#x5BB9;&#x7684;&#x6B63;&#x786E;&#x7F16;&#x7801;&#xFF1F;</li>
<li><p>&#x5982;&#x4F55;&#x8F6C;&#x7801;&#xFF1F;</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4E71;&#x7801;&#xFF0C;&#x5F53;&#x7136;&#x662F;&#x56E0;&#x4E3A;&#x5F53;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x7528;&#x7684;&#x7F16;&#x7801;&#x5E76;&#x4E0D;&#x662F;&#x201C;&#x6B63;&#x786E;&#x201D;&#x7684;&#xFF0C;&#x6240;&#x8C13;&#x201C;&#x6B63;&#x786E;&#x201D;&#x5C31;&#x662F;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;&#x5728;&#x8FDB;&#x5165;&#x5185;&#x5B58;&#x65F6;&#x7528;&#x7684;&#x4EC0;&#x4E48;&#x7F16;&#x7801;&#x53BB;&#x5B58;&#x50A8;&#x3002;&#x4E3E;&#x4E2A;&#x7C9F;&#x5B50;&#xFF0C;&#x201C;&#x4F60;&#x201D;&#x5B57;&#x7684;utf8&#x7F16;&#x7801; <a href="http://www.cnblogs.com/mike442144/p/4510245.html" target="_blank" rel="external">1</a>&#x65F6;&#x5185;&#x5B58;&#x7684;&#x503C;&#xFF1A;</p>
</li>
</ol>
<p><img src="http://taojinke.github.io/img/20150702/a9f761c.jpg" alt=""></p>
<p>&#x8FD9;&#x65F6;&#x5019;&#x4F7F;&#x7528;ascii&#x6765;&#x89E3;&#x7801;&#x5C31;&#x5F97;&#x4E0D;&#x5230;&#x6B63;&#x786E;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x56E0;&#x4E3A;ascii&#x6700;&#x5927;&#x4E5F;&#x5C31;&#x8BA4;&#x8BC6;7E <a href="http://taojinke.github.io/img/20150702/a9f761c.jpg">2</a> &#x3002;&#x4E4B;&#x6240;&#x4EE5;NodeJS&#x6253;&#x5370;&#x975E;utf8&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E71;&#x7801;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;utf8&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x8981;&#x627E;&#x5230;&#x6765;&#x6E90;&#x7684;&#x6B63;&#x786E;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#x6210;utf8&#x3002; </p>
<p>&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x627E;&#x5230;&#x5185;&#x5BB9;&#x7684;&#x6B63;&#x786E;&#x7F16;&#x7801;&#xFF1F;&#x770B;HTTP&#x534F;&#x8BAE;&#xFF01;&#x5728;HTTP header&#x4E2D;&#x6709;&#x4E00;&#x4E2A;Content-Type&#x7684;field <a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="external">3</a> &#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x534F;&#x8BAE;&#x6240;&#x652F;&#x6301;&#x7684;media-type&#xFF0C;&#x5305;&#x62EC;&#x56FE;&#x7247;&#x3001;&#x6587;&#x672C;&#x3001;&#x97F3;&#x9891;&#x7B49;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x770B;&#x6587;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x6587;&#x672C;&#x4E2D;&#x7684;html&#xFF0C;&#x4E00;&#x822C;&#x540E;&#x9762;&#x4F1A;&#x8DDF;&#x4E0A;&#x5B57;&#x7B26;&#x96C6;&#x7F16;&#x7801;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A; </p>
<pre><code><span class="attribute">Content-Type</span>: <span class="string">text/html; charset=ISO-8859-4</span>
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6307;&#x5B9A;&#x4E86;html&#x683C;&#x5F0F;&#x7684;&#x6587;&#x672C;&#x7C7B;&#x578B;&#x548C;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x90A3;&#x5F53;&#x6211;&#x4EEC;&#x63A5;&#x6536;&#x5230;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C; &#x53EA;&#x9700; &#x8981;&#x8BFB;&#x53D6;&#x8FD4;&#x56DE;&#x5934;&#x4E2D;&#x7684;Content-Type&#x5757;&#xFF0C;&#x8FD9;&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x95EE;&#x9898;&#x4E86;&#x3002;&#x4F46;&#x8FD8;&#x6CA1;&#x6709;&#x5B8C;&#xFF0C;&#x6709;&#x7684;&#x7F51;&#x7AD9;&#x5E76;&#x6CA1;&#x6709;&#x5728;HTTP header&#x91CC;&#x9762;&#x544A;&#x8BC9;&#x4F60;&#x662F;&#x4EC0;&#x4E48;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A; </p>
<pre><code><span class="attribute">Content-Type</span>: <span class="string">text/html  </span>
</code></pre><p>baidu.com&#x8FD4;&#x56DE;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x5934;&#xFF0C;&#x90A3;&#x6D4F;&#x89C8;&#x5668;&#x5982;&#x4F55;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x89E3;&#x6790;&#x9875;&#x9762;&#x5462;&#xFF0C;&#x56E0;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x5E76;&#x4E0D;&#x4F1A;&#x4E71;&#x7801;&#xFF0C;&#x4ED4;&#x7EC6;&#x770B;&#x770B;&#x8FD4;&#x56DE;&#x7684;HTML&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x6587;&#x6863;&#x91CC;&#x9762;&#x4F1A;&#x6709;meta&#x6807;&#x7B7E;&#x6765;&#x6307;&#x5B9A;&#x7F16;<a href="http://blog.csdn.net/baiwfg2/article/details/38701495" target="_blank" rel="external">4</a>:</p>
<pre><code>_When <span class="keyword">the</span> http-equiv attribute <span class="keyword">is</span> specified <span class="function_start"><span class="keyword">on</span></span> a meta element, <span class="keyword">the</span> element <span class="keyword">is</span> a pragma directive. You can use this element <span class="keyword">to</span> simulate an HTTP response header, <span class="keyword">but</span> only <span class="keyword">if</span> <span class="keyword">the</span> server doesn&amp;apos;t send <span class="keyword">the</span> corresponding <span class="type">real</span> header; you can&amp;apos;t override an HTTP header <span class="keyword">with</span> a meta http-equiv element._
</code></pre><p>&#x8FD9;&#x6837;&#x770B;&#x6765;&#x5462;&#xFF0C;&#x534F;&#x8BAE;&#x5934;&#x91CC;&#x9762;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4F1A;&#x9AD8;&#x4E00;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;&#x6B63;&#x786E;&#x7684;&#x89E3;&#x6790;&#x987A;&#x5E8F;&#x662F;&#x5148;&#x4ECE;&#x534F;&#x8BAE;&#x5934;&#x4E2D;&#x627E;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#xFF0C;&#x627E;&#x4E0D;&#x5230;&#x518D;&#x4ECE;&#x6587;&#x6863;&#x91CC;&#x9762;&#x5BFB;&#x627E;meta&#x7684;http-equiv&#x6807;&#x7B7E;&#x3002;&#xFF08;&#x8FD8;&#x6709;&#x4E24;&#x7BC7;&#x6587;&#x7AE0;&#x5173;&#x4E8E;UTF-8&#x548C;Unicode&#x8BE6;&#x89E3;&#x5199;&#x7684;&#x5F88;&#x8BE6;&#x7EC6;&#xFF08;<a href="http://blog.sina.com.cn/s/blog_70970b0101017hal.html" target="_blank" rel="external">5</a>,[6]&#xFF09;&#xFF09;&#x3002;</p>
<p>&#x627E;&#x5230;&#x4E86;&#x6B63;&#x786E;&#x7684;&#x7F16;&#x7801;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x627E;&#x7C7B;&#x5E93;&#x6765;&#x505A;&#x8F6C;&#x7801;&#x3002;&#x6BD4;&#x5982;&#x4ECE;GBK&#x7F16;&#x7801;&#x8F6C;&#x5230;UTF-8&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x7F16;&#x7801;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x505A;&#x5BF9;&#x5E94;&#x7684;&#x66FF;&#x6362;&#x3002;&#x5728;NodeJS&#x91CC;&#x9762;&#x4F7F;&#x7528;iconv&#x548C; <a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="external">iconv-lite</a> &#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x5B8C;&#x6210;&#x8FD9;&#x4E2A;&#x5DE5;&#x4F5C;&#xFF0C;iconv&#x662F;C++&#x5B9E;&#x73B0;&#x7684;&#x672C;&#x5730;&#x5E93;&#xFF0C;&#x5B89;&#x88C5;&#x4F1A;&#x6709;&#x4E9B;&#x56F0;&#x96BE;&#xFF0C; <a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="external">iconv-lite</a> &#x662F;&#x7EAF;javascript&#x5B9E;&#x73B0;&#x7684;&#x8F6C;&#x7801;&#xFF0C;&#x5B89;&#x88C5;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;&#x7F3A;&#x70B9;&#x662F;&#x53EF;&#x80FD;&#x7801;&#x4E0D;&#x5168;&#x4E5F;&#x6CA1;&#x6709;&#x6B63;&#x5F0F;&#x7248;&#x3002; </p>
<p><a href="http://www.cnblogs.com/mike442144/p/4510245.html" target="_blank" rel="external">1</a>.&#xA0;<a href="http://zh.wikipedia.org/wiki/UTF-8" target="_blank" rel="external">http://zh.wikipedia.org/wiki/UTF-8</a></p>
<p><a href="http://taojinke.github.io/img/20150702/a9f761c.jpg">2</a>.&#xA0;<a href="http://zh.wikipedia.org/wiki/ASCII" target="_blank" rel="external">http://zh.wikipedia.org/wiki/ASCII</a></p>
<p><a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="external">3</a>.&#xA0;<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" target="_blank" rel="external">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a></p>
<p><a href="http://blog.csdn.net/baiwfg2/article/details/38701495" target="_blank" rel="external">4</a>.&#xA0;<a href="http://www.w3.org/wiki/HTML/Elements/meta" target="_blank" rel="external">http://www.w3.org/wiki/HTML/Elements/meta</a></p>
<p> <a href="http://blog.sina.com.cn/s/blog_70970b0101017hal.html" target="_blank" rel="external">5</a>.&#xA0; <a href="http://blog.csdn.net/baiwfg2/article/details/38701495" target="_blank" rel="external">&#x5173;&#x4E8E;&#x6587;&#x4EF6;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x7684;&#x4E00;&#x70B9;&#x63A2;&#x8BA8;</a></p>
<p> [6]. <a href="http://blog.sina.com.cn/s/blog_70970b0101017hal.html" target="_blank" rel="external">&#xA0;Unicode&#x8BE6;&#x89E3;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Html/">Html</a><a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9c5554/" title="每日文章精选 2015 05 17 -" itemprop="url">每日文章精选 2015 05 17 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c15da.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150517/160803.html" target="_blank" rel="external">Ubuntu MX4 &#x4ECA;&#x65E5;&#x5C06;&#x5728;&#x9B45;&#x65CF;&#x5B98;&#x7F51;&#x5728;&#x7EBF;&#x5546;&#x5E97;&#x53D1;&#x552E;</a></td><tr><td>&#x9B45;&#x65CF;&#x5B98;&#x65B9;&#x5FAE;&#x535A;&#x4ECA;&#x5929;&#x5BA3;&#x5E03;&#xFF0C;Ubuntu MX4 &#x5C06;&#x4E8E;12:00 &#x5C06;&#x5728;&#x9B45;&#x65CF;&#x5B98;&#x7F51;&#x5728;&#x7EBF;&#x5546;&#x5E97;&#x9650;&#x91CF;&#x53D1;&#x552E;&#xFF0C;&#x5148;&#x5230;&#x5148;&#x5F97;&#x3002; Ubuntu MX4&#x7684;&#x6D88;&#x606F;&#x5DF2;&#x7ECF;&#x4F20;&#x64AD;&#x4E86;&#x8BB8;&#x4E45;&#xFF0C;&#x5728;&#x671F;&#x95F4;&#x66DD;&#x5149;&#x7684;&#x4E00;&#x4E9B;&#x8C0D;&#x7167;&#x8FC5;&#x901F;&#x6210;&#x4E3A;&#x5A92;&#x4F53;&#x5173;&#x6CE8;&#x7684;&#x8BDD;&#x9898;&#xFF0C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c1d2d.png" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150517/160807.html" target="_blank" rel="external">Java NIO&#x901A;&#x4FE1;&#x6846;&#x67B6;&#x5728;&#x7535;&#x4FE1;&#x9886;&#x57DF;&#x7684;&#x5B9E;&#x8DF5;</a></td><tr><td>1. &#x534E;&#x4E3A;&#x7535;&#x4FE1;&#x8F6F;&#x4EF6;&#x6280;&#x672F;&#x67B6;&#x6784;&#x6F14;&#x8FDB; 1.1. &#x7535;&#x4FE1;&#x8F6F;&#x4EF6; &#x4ECE;&#x5E7F;&#x4E49;&#x4E0A;&#x770B;&#x7535;&#x4FE1;&#x8F6F;&#x4EF6;&#x7684;&#x8303;&#x56F4;&#x975E;&#x5E38;&#x5E7F;&#xFF0C;&#x7EC6;&#x5206;&#x5B9E;&#x9645;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E24;&#x5927;&#x7C7B;&#xFF1A;&#x7CFB;&#x7EDF;&#x8F6F;&#x4EF6;&#x548C;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x3002; &#x7CFB;&#x7EDF;&#x8F6F;&#x4EF6;&#x5305;&#x62EC;&#x8DEF;&#x7531;&#x5668;&#x5E95;&#x5C42;&#x7684;&#x4FE1;&#x4EE4;&#x673A;&#x8F6F;&#x4EF6;&#x3001;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c2e44.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150516/160796.html" target="_blank" rel="external">&#x6BCF;&#x65E5;&#x6587;&#x7AE0;&#x7CBE;&#x9009; 2015 05 16</a></td><tr><td>MintBox Mini &#x4FBF;&#x643A;&#x5F0F; Linux &#x684C;&#x9762; PC MintBox Mini &#x4E00;&#x6B3E;&#x4E13;&#x95E8;&#x4E3A; Linux &#x7528;&#x6237;&#x8BBE;&#x8BA1;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x4EA7;&#x54C1;&#x5927;&#x5C0F; 10.8cm x 8.3cm2.4cm&#xFF0C;&#x91CD;&#x91CF; 250 &#x514B;&#x3002; &#x4EA7;&#x54C1;&#x914D;&#x7F6E;&#xFF1A; AMD A4 6400T CPU (64-bit,</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c3326.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/itnews/20150517/160806.html" target="_blank" rel="external">15&#x5E74;&#x524D;&#x6700;&#x706B;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x4E09;&#x5DE8;&#x5934;&#xFF1A;&#x5982;&#x4ECA;&#x597D;&#x60E8;</a></td><tr><td>&#x8FD1;&#x671F;&#xFF0C;&#x7845;&#x8C37;&#x5173;&#x4E8E;&#x6CE1;&#x6CAB;2.0&#x6709;&#x8BB8;&#x591A;&#x8BA8;&#x8BBA;&#xFF0C;&#x800C;&#x4E0A;&#x4E00;&#x6B21;&#x6CE1;&#x6CAB;&#x65F6;&#x975E;&#x5E38;&#x706B;&#x7206;&#x7684;&#x4E00;&#x5BB6;&#x516C;&#x53F8;AOL&#x672C;&#x5468;&#x521A;&#x88AB;Verizon&#x6536;&#x8D2D;&#xFF0C;&#x56E0;&#x6B64;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;&#xFF0C;&#x4EE5;&#x5F80;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x3002; 15&#x5E74;&#x524D;&#xFF0C;&#x667A;&#x80FD;&#x624B;&#x673A;&#x8FD8;&#x6CA1;&#x6709;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c3808.png" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160805.html" target="_blank" rel="external">VirtualBox 4.3.28 &#x53D1;&#x5E03;&#xFF0C;&#x5F00;&#x6E90;&#x865A;&#x62DF;&#x673A;</a></td><tr><td>VirtualBox 4.3.28 &#x53D1;&#x5E03;&#x4E86;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7EF4;&#x62A4;&#x7248;&#x672C;. &#x4FEE;&#x590D;&#x4E86;&#x4E0B;&#x8FF0;&#x7684;&#x9879;&#x76EE;: VMM: fixed a Guru Meditation when rebooting certain guests (for example Solaris doing fast reboot)</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c3a79.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/picture/20150517/160804.html" target="_blank" rel="external">&#x5F00;&#x6E90;&#x7F8E;&#x56FE; 2015 05 17</a></td><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150702/a9c3f5b.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160802.html" target="_blank" rel="external">io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</a></td><tr><td>io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A; win,node-gyp : the delay-load hook for windows addons has now been correctly enabled by default, it had wrongly def</td></tr>&#x65F6;&#x95F4;: 2015-05-17 22:34 &#x6765;&#x6E90; :Linuxeden &#x4F5C;&#x8005; :zhangkai &#x539F;&#x6587;&#x94FE;&#x63A5; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Ubuntu/">Ubuntu</a><a href="/tags/虚拟化/">虚拟化</a><a href="/tags/魅族/">魅族</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/aa0851b/" title="nodejs实现Websocket的数据接收发送 -" itemprop="url">nodejs实现Websocket的数据接收发送 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x5728;&#x53BB;&#x5E74;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5199;&#x8FC7;&#x4E00;&#x7BC7;&#x5173;&#x4E8E;websocket&#x7684;&#x535A;&#x6587;&#xFF1A; <a href="http://www.cnblogs.com/axes/p/3586132.html" target="_blank" rel="external">http://www.cnblogs.com/axes/p/3586132.html</a> &#xFF0C;&#x91CC;&#x9762;&#x4E3B;&#x8981;&#x662F;&#x501F;&#x52A9;&#x4E86;nodejs-websocket&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x540E;&#x6765;&#x8FD8;&#x7528;&#x4E86;socket.io&#x505A;&#x4E86;&#x4E9B;demo&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x501F;&#x52A9;&#x4E8E;&#x522B;&#x4EBA;&#x5C01;&#x88C5;&#x597D;&#x7684;&#x63D2;&#x4EF6;&#x505A;&#x51FA;&#x6765;&#x7684;&#xFF0C;websocket&#x5230;&#x5E95;&#x662F;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x7684;&#x5462;&#x81EA;&#x5DF1;&#x4E4B;&#x524D;&#x771F;&#x6CA1;&#x600E;&#x4E48;&#x53BB;&#x60F3;&#x8FC7;&#xFF0C;&#x6700;&#x8FD1;&#x5728;&#x770B;&#x6734;&#x7075;&#x5927;&#x795E;&#x7684;&#x300A;&#x6DF1;&#x5165;&#x6D45;&#x51FA;nodejs&#x300B;&#x65F6;&#x5019;&#xFF0C;&#x770B;&#x5230;websocket&#x90A3;&#x4E00;&#x7AE0;&#xFF0C;&#x770B;&#x4E86;&#x4E00;&#x4E0B;websocket&#x7684;&#x6570;&#x636E;&#x5E27;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5C31;&#x7422;&#x78E8;&#x7740;&#x81EA;&#x5DF1;&#x7528;nodejs&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E0B;&#x3002; </p>
<p>&#x6700;&#x540E;&#x4E5F;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#x51FA;&#x6765;&#xFF0C;&#x5148;&#x4E0A;DEMO&#xFF1A; <a href="http://wanghx.cn:9030/wsindex" target="_blank" rel="external">http://wanghx.cn:9030/wsindex</a> &#x591A;&#x5F00;&#x51E0;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x67D0;&#x4E2A;&#x7A97;&#x53E3;&#x8F93;&#x5165;&#x6570;&#x636E;&#x70B9;&#x53D1;&#x9001;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6548;&#x679C;&#x4E86;&#x3002; </p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;websocket&#x7684;API&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x5C31;&#x901A;&#x8FC7;onmessage&#x3001;onopen&#x3001;onclose&#xFF0C;&#x4EE5;&#x53CA;send&#x65B9;&#x6CD5;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x8BF4;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#x662F;&#x534F;&#x8BAE;&#x7684;&#x5347;&#x7EA7;&#xFF0C;&#x8FD9;&#x4E2A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x7B80;&#x8FF0;&#x4E00;&#x4E0B;&#xFF1A;&#x5F53;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C;new Websocket(&quot;ws://XXX.com/&quot;)&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C31;&#x4F1A;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x8FDB;&#x884C;&#x63E1;&#x624B;&#x7533;&#x8BF7;&#xFF0C;&#x62A5;&#x6587;&#x4E2D;&#x6709;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;key&#x5C31;&#x662F;Sec-WebSocket-Key&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x83B7;&#x53D6;&#x5230;key&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E2A;key&#x4E0E;&#x5B57;&#x7B26;&#x4E32;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&#x76F8;&#x8FDE;&#xFFFD;&#xFFFD;&#xFFFD;&#x5BF9;&#x65B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x901A;&#x8FC7;sha1&#x5B89;&#x5168;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x51FA;&#x7ED3;&#x679C;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;base64&#x7F16;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x7ED3;&#x679C;&#x653E;&#x5728;&#x8BF7;&#x6C42;&#x5934;&#x7684;&quot;Sec-WebSocket-Accept&quot;&#x4E2D;&#x8FD4;&#x56DE;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x63E1;&#x624B;&#x3002;&#x5177;&#x4F53;&#x8BF7;&#x770B;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code>server.on(&amp;apos<span class="comment">;upgrade&amp;apos;, function (req, socket, upgradeHead) {</span>
    var key = req.headers[&amp;apos<span class="comment">;sec-websocket-key&amp;apos;];</span>
    key = crypto.createHash(&amp;quot<span class="comment">;sha1&amp;quot;).update(key + &amp;quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&amp;quot;).digest(&amp;quot;base64&amp;quot;);</span>
    var headers = [
        &amp;apos<span class="comment">;HTTP/1.1 101 Switching Protocols&amp;apos;,</span>
        &amp;apos<span class="comment">;Upgrade: websocket&amp;apos;,</span>
        &amp;apos<span class="comment">;Connection: Upgrade&amp;apos;,</span>
        &amp;apos<span class="comment">;Sec-WebSocket-Accept: &amp;apos; + key</span>
    ]<span class="comment">;</span>
    socket.setNoDelay(true)<span class="comment">;</span>
    socket.write(headers.join(&amp;quot<span class="comment">;\r\n&amp;quot;) + &amp;quot;\r\n\r\n&amp;quot;, &amp;apos;ascii&amp;apos;);</span>
    var ws = new WebSocket(socket)<span class="comment">;</span>
    webSocketCollector.push(ws)<span class="comment">;</span>
    callback(ws)<span class="comment">;</span>
})<span class="comment">;</span>
</code></pre><p>upgrade&#x4E8B;&#x4EF6;&#x5176;&#x5B9E;&#x662F;http&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x518D;&#x5F80;&#x5E95;&#x5C42;&#x5C31;&#x662F;net&#x6A21;&#x5757;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x5B9E;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x7528;net&#x6A21;&#x5757;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x662F;&#x76D1;&#x542C;net.createServer&#x8FD4;&#x56DE;&#x7684;server&#x5BF9;&#x8C61;&#x7684;data&#x4E8B;&#x4EF6;&#xFF0C;&#x63A5;&#x6536;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x5C31;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x5347;&#x7EA7;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x90A3;&#x6BB5;&#x4EE3;&#x7801;&#x5C31;&#x5B8C;&#x6210;&#x4E86;websocket&#x7684;&#x63E1;&#x624B;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x4E86;&#x3002;</p>
<p>&#x770B;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x770B;&#x770B;websocket&#x6570;&#x636E;&#x5E27;&#x7684;&#x5B9A;&#x4E49;&#xFF08;&#x56E0;&#x4E3A;&#x89C9;&#x5F97;&#x6DF1;&#x5165;&#x6D45;&#x51FA;nodejs&#x91CC;&#x7684;&#x5E27;&#x5B9A;&#x4E49;&#x56FE;&#x6700;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x8D34;&#x8FD9;&#x5F20;&#x4E86;&#xFF09;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150702/aa051d6.png" alt=""></p>
<p>&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x5217;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x603B;&#x5171;&#x662F;8&#x4F4D;&#xFF0C;&#x6BCF;&#x4E00;&#x4F4D;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#xFF0C;&#x4E0D;&#x540C;&#x4F4D;&#x7684;&#x503C;&#x4F1A;&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x610F;&#x4E49;&#x3002;</p>
<p>fin&#xFF1A;&#x6307;&#x793A;&#x8FD9;&#x4E2A;&#x662F;&#x6D88;&#x606F;&#x7684;&#x6700;&#x540E;&#x7247;&#x6BB5;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x7247;&#x6BB5;&#x53EF;&#x80FD;&#x4E5F;&#x662F;&#x6700;&#x540E;&#x7684;&#x7247;&#x6BB5;&#x3002;&#x5982;&#x679C;&#x4E3A;1&#x5373;&#x4E3A;&#x6700;&#x540E;&#x7247;&#x6BB5;&#xFF0C;&#xFF08;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x4F4D;&#x7684;&#x7528;&#x9014;&#x6211;&#x4E2A;&#x4EBA;&#x6709;&#x70B9;&#x7591;&#x60D1;&#xFF0C;&#x6309;&#x7167;&#x4E66;&#x4E0A;&#x4EE5;&#x53CA;&#x7F51;&#x4E0A;&#x67E5;&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x88AB;&#x5206;&#x7247;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x540C;&#x7247;&#x5E94;&#x8BE5;&#x90FD;&#x4F1A;&#x6709;fin&#x4F4D;&#xFF0C;&#x4F1A;&#x6839;&#x636E;fin&#x4E3A;&#x662F;&#x4E0D;&#x662F;0&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x6700;&#x540E;&#x4E00;&#x5E27;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x5B9E;&#x73B0;&#x4E2D;&#x5374;&#x53D1;&#x73B0;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5927;&#x9700;&#x8981;&#x5206;&#x7247;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x5C31;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x5E27;&#x662F;&#x6709;fin&#x4F4D;&#x4E3A;1&#xFF0C;&#x5176;&#x4ED6;&#x5E27;&#x5219;&#x6574;&#x4E2A;&#x5E27;&#x90FD;&#x662F;&#x6570;&#x636E;&#x6BB5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x611F;&#x89C9;&#x8FD9;&#x4E2A;fin&#x4F4D;&#x4F3C;&#x4E4E;&#x7528;&#x4E0D;&#x4E0A;&#xFF0C;&#x81F3;&#x5C11;&#x6211;&#x81EA;&#x5DF1;&#x5199;&#x7684;demo&#x4E2D;&#x662F;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5230;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x5E27;&#xFF0C;&#x5B8C;&#x5168;&#x6CA1;&#x7528;&#x5230;&#x8FD9;&#x4E2A;fin&#x4F4D;&#x662F;&#x5426;&#x4E3A;1&#x6765;&#x5224;&#x65AD;&#xFF09; </p>
<p>rsv1&#x3001;rsv2&#x3001;rsv3&#xFF1A;&#x5404;&#x5360;&#x4E00;&#x4E2A;&#x4F4D;&#xFF0C;&#x7528;&#x4E8E;&#x6269;&#x5C55;&#x534F;&#x5546;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x4E0D;&#x600E;&#x4E48;&#x9700;&#x8981;&#x7406;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;0 </p>
<p>opcode&#xFF1A;&#x5360;&#x56DB;&#x4E2A;&#x4F4D;&#xFF0C;&#x53EF;&#x4EE5;&#x8868;&#x793A;0~15&#x7684;&#x5341;&#x8FDB;&#x5236;&#xFF0C;0&#x8868;&#x793A;&#x4E3A;&#x9644;&#x52A0;&#x6570;&#x636E;&#x5E27;&#xFF0C;1&#x8868;&#x793A;&#x4E3A;&#x6587;&#x672C;&#x6570;&#x636E;&#x5E27;&#xFF0C;2&#x8868;&#x793A;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x5E27;&#xFF0C;8&#x8868;&#x793A;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5173;&#x95ED;&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;9&#x8868;&#x793A;ping&#xFF0C;10&#x8868;&#x793A;pong&#xFF0C;ping&#x548C;pong&#x90FD;&#x662F;&#x7528;&#x4E8E;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;&#xFF0C;&#x5F53;&#x4E00;&#x7AEF;&#x53D1;&#x9001;ping&#x65F6;&#xFF0C;&#x53E6;&#x4E00;&#x7AEF;&#x5FC5;&#x987B;&#x54CD;&#x5E94;pong&#x8868;&#x793A;&#x81EA;&#x5DF1;&#x4ECD;&#x5904;&#x4E8E;&#x54CD;&#x5E94;&#x72B6;&#x6001;&#x3002; </p>
<p>masked&#xFF1A;&#x5360;&#x4E00;&#x4E2A;&#x4F4D;&#xFF0C;&#x8868;&#x793A;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x5904;&#x7406;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;&#x65F6;&#x4E3A;1&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x65F6;&#x4E3A;0 </p>
<p>payload length&#xFF1A;&#x5360;7&#x4F4D;&#xFF0C;&#x6216;&#x8005;7+16&#x4F4D;&#x3001;&#x6216;&#x8005;7+64&#x4F4D;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x540E;&#x9762;&#x4E03;&#x4E2A;&#x4F4D;&#x7684;&#x5341;&#x8FDB;&#x5236;&#x503C;&#x5C0F;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;125&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x7528;&#x8FD9;&#x4E03;&#x4E2A;&#x4F4D;&#x8868;&#x793A;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF1B;&#x5982;&#x679C;&#x8BE5;&#x503C;&#x4E3A;126&#xFF0C;&#x8BF4;&#x660E; 125&lt;&#x6570;&#x636E;&#x957F;&#x5EA6;&lt;65535&#xFF08;16&#x4E2A;&#x4F4D;&#x80FD;&#x63CF;&#x8FF0;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;16&#x4E2A;1&#x7684;&#x65F6;&#x5019;&#xFF09;&#xFF0C;&#x5C31;&#x7528;&#x7B2C;&#x4E09;&#x4E2A;&#x5B57;&#x8282;&#x53CA;&#x7B2C;&#x56DB;&#x4E2A;&#x5B57;&#x8282;&#x5373;16&#x4E2A;&#x4F4D;&#x6765;&#x8868;&#x793A;&#xFF1B;&#x5982;&#x679C;&#x8BE5;&#x503C;&#x4E3A;127&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x5DF2;&#x7ECF;&#x5927;&#x4E8E;65535&#xFF0C;16&#x4E2A;&#x4F4D;&#x4E5F;&#x5DF2;&#x7ECF;&#x4E0D;&#x8DB3;&#x4EE5;&#x63CF;&#x8FF0;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x4E86;&#xFF0C;&#x5C31;&#x7528;&#x7B2C;&#x4E09;&#x5230;&#x7B2C;&#x5341;&#x4E2A;&#x5B57;&#x8282;&#x8FD9;&#x516B;&#x4E2A;&#x5B57;&#x8282;&#x6765;&#x63CF;&#x8FF0;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x3002; </p>
<p>masking key&#xFF1A;&#x5F53;masked&#x4E3A;1&#x7684;&#x65F6;&#x5019;&#x624D;&#x5B58;&#x5728;&#xFF0C;&#x7528;&#x4E8E;&#x5BF9;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#x3002; </p>
<p>payload data&#xFF1A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;masked&#x4E3A;1&#xFF0C;&#x8BE5;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x52A0;&#x5BC6;&#xFF0C;&#x8981;&#x901A;&#x8FC7;masking key&#x8FDB;&#x884C;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#x89E3;&#x5BC6;&#x624D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x3002; </p>
<p>&#x5E27;&#x5B9A;&#x4E49;&#x89E3;&#x91CA;&#x5B8C;&#x4E86;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6570;&#x636E;&#x6765;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x4E86;&#xFF0C;&#x5F53;&#x6709;data&#x8FC7;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5148;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x6570;&#x636E;&#x5728;data&#x91CC;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF0C;masking key&#x4EE5;&#x53CA;opcode&#xFF1A;</p>
<pre><code><span class="class">WebSocket</span>.prototype.handleDataStat = function (data) {
    if (!this.stat) {
        var dataIndex = <span class="number">2</span>;  //&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x7D22</span>;&amp;<span class="symbol">#x5F15</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x56E0</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x7B2C</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x548C</span>;&amp;<span class="symbol">#x7B2C</span>;&amp;<span class="symbol">#x4E8C</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x80AF</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x6240</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x521D</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x503C</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">2</span>
        var secondByte = data[<span class="number">1</span>];       //&amp;<span class="symbol">#x4EE3</span>;&amp;<span class="symbol">#x8868</span>;masked&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x548C</span>;&amp;<span class="symbol">#x53EF</span>;&amp;<span class="symbol">#x80FD</span>;&amp;<span class="symbol">#x662F</span>;payloadLength&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x7B2C</span>;&amp;<span class="symbol">#x4E8C</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;
        var hasMask = secondByte &amp;gt;= <span class="number">128</span>; //&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x5927</span>;&amp;<span class="symbol">#x4E8E</span>;&amp;<span class="symbol">#x6216</span>;&amp;<span class="symbol">#x7B49</span>;&amp;<span class="symbol">#x4E8E</span>;<span class="number">128</span>&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8BF4</span>;&amp;<span class="symbol">#x660E</span>;masked&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">1</span>
        secondByte -= hasMask ? <span class="number">128</span> : <span class="number">0</span>;    //&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x63A9</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x9700</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x5C06</span>;&amp;<span class="symbol">#x63A9</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#x90A3</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x53BB</span>;&amp;<span class="symbol">#x6389</span>;
        var dataLength, maskedData;
        //&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">126</span>&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x9762</span>;<span class="number">16</span>&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">127</span>&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x9762</span>;<span class="number">64</span>&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;
        if (secondByte == <span class="number">126</span>) {
            dataIndex += <span class="number">2</span>;
            dataLength = data.readUInt16BE(<span class="number">2</span>);
        } else if (secondByte == <span class="number">127</span>) {
            dataIndex += <span class="number">8</span>;
            dataLength = data.readUInt32BE(<span class="number">2</span>) + data.readUInt32BE(<span class="number">6</span>);
        } else {
            dataLength = secondByte;
        }
        //&amp;<span class="symbol">#x5982</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x63A9</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x83B7</span>;&amp;<span class="symbol">#x53D6</span>;<span class="number">32</span>&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x4E8C</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x5236</span>;masking key&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x540C</span>;&amp;<span class="symbol">#x65F6</span>;&amp;<span class="symbol">#x66F4</span>;&amp;<span class="symbol">#x65B0</span>;index
        if (hasMask) {
            maskedData = data.slice(dataIndex, dataIndex + <span class="number">4</span>);
            dataIndex += <span class="number">4</span>;
        }
        //&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x91CF</span>;&amp;<span class="symbol">#x6700</span>;&amp;<span class="symbol">#x5927</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">10</span>kb
        if (dataLength &amp;gt; <span class="number">10240</span>) {
            this.send(&amp;quot;<span class="class">Warning</span> : data limit <span class="number">10</span>kb&amp;quot;);
        } else {
            //&amp;<span class="symbol">#x8BA1</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x6B64</span>;&amp;<span class="symbol">#x5904</span>;&amp;<span class="symbol">#x65F6</span>;&amp;<span class="symbol">#xFF0C</span>;dataIndex&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x8D77</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#xFF0C</span>;dataLength&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#xFF0C</span>;maskedData&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x4E8C</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x5236</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x89E3</span>;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;
            this.stat = {
                <span class="method">index:</span> dataIndex,
                <span class="method">totalLength:</span> dataLength,
                <span class="method">length:</span> dataLength,
                <span class="method">maskedData:</span> maskedData,
                <span class="method">opcode:</span> parseInt(data[<span class="number">0</span>].toString(<span class="number">16</span>).split(&amp;quot;&amp;quot;)[<span class="number">1</span>] , <span class="number">16</span>)   //&amp;<span class="symbol">#x83B7</span>;&amp;<span class="symbol">#x53D6</span>;&amp;<span class="symbol">#x7B2C</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x7684</span>;opcode&amp;<span class="symbol">#x4F4D</span>;
            };
        }
    } else {
        this.stat.index = <span class="number">0</span>;
    }
};
</code></pre><p>&#x4EE3;&#x7801;&#x4E2D;&#x5747;&#x6709;&#x6CE8;&#x91CA;&#xFF0C;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x5E94;&#x8BE5;&#x4E0D;&#x96BE;&#xFF0C;&#x76F4;&#x63A5;&#x770B;&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x5C31;&#x8981;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5B9E;&#x9645;&#x89E3;&#x6790;&#x4E86;&#xFF1A;</p>
<p>&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;handleDataStat&#x65B9;&#x6CD5;&#x7684;&#x5904;&#x7406;&#xFF0C;stat&#x4E2D;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;data&#x7684;&#x76F8;&#x5173;&#x6570;&#x636E;&#xFF0C;&#x5148;&#x5224;&#x65AD;opcode&#xFF0C;&#x5982;&#x679C;&#x4E3A;9&#x8BF4;&#x660E;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x7684;ping&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;pong&#x54CD;&#x5E94;&#xFF0C;&#x5982;&#x679C;&#x4E3A;10&#x5219;&#x4E3A;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x8D77;&#x7684;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;&#x3002;&#x5982;&#x679C;&#x6709;masking key&#xFF0C;&#x5219;&#x904D;&#x5386;&#x6570;&#x636E;&#x6BB5;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x5B57;&#x8282;&#x90FD;&#x4E0E;masking key&#x7684;&#x5B57;&#x8282;&#x8FDB;&#x884C;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#xFF08;&#x7F51;&#x4E0A;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x8BF4;&#x6CD5;&#x5F88;&#x5F62;&#x8C61;&#xFF1A;&#x5C31;&#x662F;&#x8F6E;&#x6D41;&#x53D1;&#x751F;X&#x5173;&#x7CFB;&#xFF09;&#xFF0C;^&#x7B26;&#x53F7;&#x5C31;&#x662F;&#x8FDB;&#x884C;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#x5566;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;masking key&#x5219;&#x76F4;&#x63A5;&#x901A;&#x8FC7;slice&#x65B9;&#x6CD5;&#x628A;&#x6570;&#x636E;&#x622A;&#x53D6;&#x4E0B;&#x6765;&#x3002;</p>
<p>&#x83B7;&#x53D6;&#x5230;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x653E;&#x8FDB;datas&#x91CC;&#x4FDD;&#x5B58;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x53EF;&#x80FD;&#x6570;&#x636E;&#x88AB;&#x5206;&#x7247;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x518D;&#x5C06;stat&#x91CC;&#x7684;&#x957F;&#x5EA6;&#x51CF;&#x53BB;&#x5F53;&#x524D;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF0C;&#x53EA;&#x6709;&#x5F53;stat&#x91CC;&#x7684;&#x957F;&#x5EA6;&#x4E3A;0&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x5E27;&#x4E3A;&#x6700;&#x540E;&#x4E00;&#x5E27;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;Buffer.concat&#x5C06;&#x6240;&#x6709;&#x6570;&#x636E;&#x5408;&#x5E76;&#xFF0C;&#x6B64;&#x65F6;&#x518D;&#x5224;&#x65AD;&#x4E00;&#x4E0B;opcode&#xFF0C;&#x5982;&#x679C;opcode&#x4E3A;8&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x4E86;&#x4E00;&#x4E2A;&#x5173;&#x95ED;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#x5219;&#x662F;&#x5173;&#x95ED;&#x539F;&#x56E0;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4E3A;8&#xFF0C;&#x5219;&#x8FD9;&#x6570;&#x636E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x3002;&#x7136;&#x540E;&#x518D;&#x5C06;stat&#x91CD;&#x7F6E;&#x4E3A;null&#xFF0C;datas&#x6570;&#x7EC4;&#x7F6E;&#x7A7A;&#x5373;&#x53EF;&#x3002;&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x89E3;&#x6790;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<pre><code><span class="type">WebSocket</span>.prototype.dataHandle = function (data) {
    this.handleDataStat(data);
    <span class="keyword">var</span> stat;
    <span class="keyword">if</span> (!(stat = this.stat)) <span class="keyword">return</span>;
    //&amp;<span class="comment">#x5982;&amp;#x679C;opcode&amp;#x4E3A;9&amp;#xFF0C;&amp;#x5219;&amp;#x53D1;&amp;#x9001;pong&amp;#x54CD;&amp;#x5E94;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;opcode&amp;#x4E3A;10&amp;#x5219;&amp;#x7F6E;pingtimes&amp;#x4E3A;0</span>
    <span class="keyword">if</span> (stat.opcode === <span class="number">9</span> || stat.opcode === <span class="number">10</span>) {
        (stat.opcode === <span class="number">9</span>) ? (this.sendPong()) : (this.pingTimes = <span class="number">0</span>);
        this.reset();
        <span class="keyword">return</span>;
    }
    <span class="keyword">var</span> <span class="literal">result</span>;
    <span class="keyword">if</span> (stat.maskedData) {
        <span class="literal">result</span> = new <span class="type">Buffer</span>(data.length-stat.index);
        <span class="keyword">for</span> (<span class="keyword">var</span> i = stat.index, j = <span class="number">0</span>; i &amp;lt; data.length; i++, j++) {
            //&amp;<span class="comment">#x5BF9;&amp;#x6BCF;&amp;#x4E2A;&amp;#x5B57;&amp;#x8282;&amp;#x8FDB;&amp;#x884C;&amp;#x5F02;&amp;#x6216;&amp;#x8FD0;&amp;#x7B97;&amp;#xFF0C;masked&amp;#x662F;4&amp;#x4E2A;&amp;#x5B57;&amp;#x8282;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;%4&amp;#xFF0C;&amp;#x501F;&amp;#x6B64;&amp;#x5FAA;&amp;#x73AF;</span>
            <span class="literal">result</span>[j] = data[i] ^ stat.maskedData[j % <span class="number">4</span>];
        }
    } <span class="keyword">else</span> {
        <span class="literal">result</span> = data.slice(stat.index, data.length);
    }
    this.datas.push(<span class="literal">result</span>);
    stat.length -= (data.length - stat.index);
    //&amp;<span class="comment">#x5F53;&amp;#x957F;&amp;#x5EA6;&amp;#x4E3A;0&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x5F53;&amp;#x524D;&amp;#x5E27;&amp;#x4E3A;&amp;#x6700;&amp;#x540E;&amp;#x5E27;</span>
    <span class="keyword">if</span> (stat.length == <span class="number">0</span>) {
        <span class="keyword">var</span> buf = <span class="type">Buffer</span>.concat(this.datas, stat.totalLength);
        <span class="keyword">if</span> (stat.opcode == <span class="number">8</span>) {
            this.close(buf.toString());
        } <span class="keyword">else</span> {
            this.emit(&amp;quot;message&amp;quot;, buf.toString());
        }
        this.reset();
    }
};
</code></pre><p>&#x5B8C;&#x6210;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x6570;&#x636E;&#x89E3;&#x6790;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x6570;&#x636E;&#x81F3;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x5E27;&#x5B9A;&#x4E49;&#x6765;&#x7EC4;&#x88C5;&#x6570;&#x636E;&#x5E76;&#x4E14;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x57FA;&#x672C;&#x4E0A;&#x6BCF;&#x4E00;&#x884C;&#x90FD;&#x6709;&#x6CE8;&#x91CA;&#xFF0C;&#x5E94;&#x8BE5;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#x3002;</p>
<pre><code><span class="xml">//&amp;#x6570;&amp;#x636E;&amp;#x53D1;&amp;#x9001;
WebSocket.prototype.send = function (message) </span><span class="expression">{
    <span class="variable"><span class="keyword">if</span></span>(<span class="variable">this.state</span> !== &amp;<span class="variable">quot</span>;<span class="variable">OPEN</span>&amp;<span class="variable">quot</span>;) <span class="variable">return</span>;
    <span class="variable">message</span> = <span class="variable">String</span>(<span class="variable">message</span>);
    <span class="variable">var</span> <span class="variable">length</span> = <span class="variable">Buffer.byteLength</span>(<span class="variable">message</span>);
/<span class="end-block">/  </span>&amp;<span class="begin-block">#x</span>6570;&amp;<span class="begin-block">#x</span>636<span class="variable">E</span>;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>8<span class="variable">D</span>77;&amp;<span class="begin-block">#x</span>59<span class="variable">CB</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>4<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>7<span class="variable">F</span>6<span class="variable">E</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5982;&amp;<span class="begin-block">#x</span>679<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>6570;&amp;<span class="begin-block">#x</span>636<span class="variable">E</span>;&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;16&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>4<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>5<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>65<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>6<span class="variable">CD</span>5;&amp;<span class="begin-block">#x</span>63<span class="variable">CF</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FF</span>0;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5219;&amp;<span class="begin-block">#x</span>7528;64&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>4<span class="variable">D</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5373;8&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5982;&amp;<span class="begin-block">#x</span>679<span class="variable">C</span>;16&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>4<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>80<span class="variable">FD</span>;&amp;<span class="begin-block">#x</span>63<span class="variable">CF</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FF</span>0;&amp;<span class="begin-block">#x</span>5219;&amp;<span class="begin-block">#x</span>7528;2&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5426;&amp;<span class="begin-block">#x</span>5219;&amp;<span class="begin-block">#x</span>7528;&amp;<span class="begin-block">#x</span>7<span class="variable">B</span>2<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>8<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>63<span class="variable">CF</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FF</span>0;
    <span class="variable">var</span> <span class="variable">index</span> = 2 + (<span class="variable">length</span> &amp;<span class="variable"><span class="keyword">gt</span></span>; 65535 ? 8 : (<span class="variable">length</span> &amp;<span class="variable"><span class="keyword">gt</span></span>; 125 ? 2 : 0));
/<span class="end-block">/  </span>&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>9<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>49;<span class="variable">buffer</span>&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>63<span class="variable">CF</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FF</span>0;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6; + <span class="variable">message</span>&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;
    <span class="variable">var</span> <span class="variable">buffer</span> = <span class="variable">new</span> <span class="variable">Buffer</span>(<span class="variable">index</span> + <span class="variable">length</span>);
/<span class="end-block">/  </span>&amp;<span class="begin-block">#x</span>7<span class="variable">B</span>2<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>00;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;<span class="variable">fin</span>&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>4<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;1&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;<span class="variable">opcode</span>&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;1
    <span class="variable">buffer</span>[0] = 129;
/<span class="end-block">/    </span>&amp;<span class="begin-block">#x</span>56<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>662<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>7531;&amp;<span class="begin-block">#x</span>670<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>52<span class="variable">A</span>1;&amp;<span class="begin-block">#x</span>7<span class="variable">AEF</span>;&amp;<span class="begin-block">#x</span>53<span class="variable">D</span>1;&amp;<span class="begin-block">#x</span>81<span class="variable">F</span>3;&amp;<span class="begin-block">#x</span>5<span class="variable">BA</span>2;&amp;<span class="begin-block">#x</span>6237;&amp;<span class="begin-block">#x</span>7<span class="variable">AEF</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>6240;&amp;<span class="begin-block">#x</span>4<span class="variable">EE</span>5;&amp;<span class="begin-block">#x</span>65<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>9700;<span class="variable">masked</span>&amp;<span class="begin-block">#x</span>63<span class="variable">A</span>9;&amp;<span class="begin-block">#x</span>7801;
    <span class="variable"><span class="keyword">if</span></span> (<span class="variable">length</span> &amp;<span class="variable"><span class="keyword">gt</span></span>; 65535) {
        <span class="variable">buffer</span>[1] = 127;
/<span class="end-block">/      </span>&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;&amp;<span class="begin-block">#x</span>8<span class="variable">D</span>85;&amp;<span class="begin-block">#x</span>8<span class="variable">FC</span>7;65535&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5219;&amp;<span class="begin-block">#x</span>7531;8&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>8868;&amp;<span class="begin-block">#x</span>793<span class="variable">A</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>56<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;4&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>80<span class="variable">FD</span>;&amp;<span class="begin-block">#x</span>8868;&amp;<span class="begin-block">#x</span>8<span class="variable">FBE</span>;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;4294967295&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">DF</span>2;&amp;<span class="begin-block">#x</span>7<span class="variable">ECF</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>8<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5168;&amp;<span class="begin-block">#x</span>591<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>7528;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>56<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>6<span class="variable">B</span>64;&amp;<span class="begin-block">#x</span>76<span class="variable">F</span>4;&amp;<span class="begin-block">#x</span>63<span class="variable">A</span>5;&amp;<span class="begin-block">#x</span>5<span class="variable">C</span>06;&amp;<span class="begin-block">#x</span>524<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>9762;4&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>7<span class="variable">F</span>6<span class="variable">E</span>;0
        <span class="variable">buffer.writeUInt</span>32<span class="variable">BE</span>(0, 2);
        <span class="variable">buffer.writeUInt</span>32<span class="variable">BE</span>(<span class="variable">length</span>, 6);
    }</span><span class="xml"> else if (length &amp;gt; 125) </span><span class="expression">{
        <span class="variable">buffer</span>[1] = 126;
/<span class="end-block">/      </span>&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;&amp;<span class="begin-block">#x</span>8<span class="variable">D</span>85;&amp;<span class="begin-block">#x</span>8<span class="variable">FC</span>7;125&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>8<span class="variable">BDD</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">C</span>31;&amp;<span class="begin-block">#x</span>7531;2&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>8282;&amp;<span class="begin-block">#x</span>8868;&amp;<span class="begin-block">#x</span>793<span class="variable">A</span>;
        <span class="variable">buffer.writeUInt</span>16<span class="variable">BE</span>(<span class="variable">length</span>, 2);
    }</span><span class="xml"> else </span><span class="expression">{
        <span class="variable">buffer</span>[1] = <span class="variable">length</span>;
    }</span><span class="xml">
//    &amp;#x5199;&amp;#x5165;&amp;#x6B63;&amp;#x6587;
    buffer.write(message, index);
    this.socket.write(buffer);
};</span>
</code></pre><p>&#x6700;&#x540E;&#x8FD8;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x5C31;&#x662F;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;&#xFF1A;&#x9632;&#x6B62;&#x670D;&#x52A1;&#x7AEF;&#x957F;&#x65F6;&#x95F4;&#x4E0D;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4EA4;&#x4E92;&#x800C;&#x5BFC;&#x81F4;&#x5BA2;&#x6237;&#x7AEF;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x9694;&#x5341;&#x79D2;&#x90FD;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x6B21;ping&#x8FDB;&#x884C;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;</p>
<pre><code>//&amp;<span class="symbol">#x6BCF</span>;&amp;<span class="symbol">#x9694</span>;<span class="number">10</span>&amp;<span class="symbol">#x79D2</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x6B21</span>;&amp;<span class="symbol">#x5FC3</span>;&amp;<span class="symbol">#x8DF3</span>;&amp;<span class="symbol">#x68C0</span>;&amp;<span class="symbol">#x6D4B</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x82E5</span>;&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x7EED</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#x51FA</span>;&amp;<span class="symbol">#x4E09</span>;&amp;<span class="symbol">#x6B21</span>;&amp;<span class="symbol">#x5FC3</span>;&amp;<span class="symbol">#x8DF3</span>;&amp;<span class="symbol">#x5374</span>;&amp;<span class="symbol">#x6CA1</span>;&amp;<span class="symbol">#x6536</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x54CD</span>;&amp;<span class="symbol">#x5E94</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x5173</span>;&amp;<span class="symbol">#x95ED</span>;socket
<span class="class">WebSocket</span>.prototype.checkHeartBeat = function () {
    var that = this;
    setTimeout(function () {
        if (that.state !== &amp;quot;<span class="class">OPEN</span>&amp;quot;) return;
        if (that.pingTimes &amp;gt;= <span class="number">3</span>) {
            that.close(&amp;quot;time out&amp;quot;);
            return;
        }
        //&amp;<span class="symbol">#x8BB0</span>;&amp;<span class="symbol">#x5F55</span>;&amp;<span class="symbol">#x5FC3</span>;&amp;<span class="symbol">#x8DF3</span>;&amp;<span class="symbol">#x6B21</span>;&amp;<span class="symbol">#x6570</span>;
        that.pingTimes++;
        that.sendPing();
        that.checkHeartBeat();
    }, <span class="number">10000</span>);
};
<span class="class">WebSocket</span>.prototype.sendPing = function () {
    this.socket.write(new <span class="class">Buffer</span>([&amp;apos;<span class="number">0x89</span>&amp;apos;, &amp;apos;<span class="number">0x0</span>&amp;apos;]))
};
<span class="class">WebSocket</span>.prototype.sendPong = function () {
    this.socket.write(new <span class="class">Buffer</span>([&amp;apos;<span class="number">0x8A</span>&amp;apos;, &amp;apos;<span class="number">0x0</span>&amp;apos;]))
};
</code></pre><p>&#x81F3;&#x6B64;&#xFF0C;&#x6574;&#x4E2A;websocket&#x7684;&#x5B9E;&#x73B0;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x6B64;demo&#x53EA;&#x662F;&#x5927;&#x6982;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E0B;websocket&#x800C;&#x5DF2;&#xFF0C;&#x5728;&#x5B89;&#x5168;&#x4E4B;&#x7C7B;&#x65B9;&#x9762;&#x80AF;&#x5B9A;&#x8FD8;&#x662F;&#x6709;&#x5F88;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x82E5;&#x662F;&#x771F;&#x6B63;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x8FD8;&#x662F;&#x7528;socket.io&#x8FD9;&#x7C7B;&#x6210;&#x719F;&#x7684;&#x63D2;&#x4EF6;&#x6BD4;&#x8F83;&#x597D;&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x8FD8;&#x662F;&#x5F88;&#x503C;&#x5F97;&#x4E00;&#x5B66;&#x7684;&#x3002;</p>
<p>&#x9644;&#x4E0A;&#x8BE5;demo&#x7684;github&#x5730;&#x5740;&#xFF1A; <a href="https://github.com/whxaxes/node-test/tree/master/server/websocket" target="_blank" rel="external">https://github.com/whxaxes/node-test/tree/master/server/websocket</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/WebSocket/">WebSocket</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9d6453/" title="Meteor再获2000万美元融资将从框架发展为平台 -" itemprop="url">Meteor再获2000万美元融资将从框架发展为平台 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x77E5;&#x540D;JavaScript Web&#x6846;&#x67B6; <a href="https://github.com/meteor/meteor" target="_blank" rel="external">Meteor</a> &#xFF08;&#x6D41;&#x661F;&#x7684;&#x610F;&#x601D;&#xFF09;&#x80CC;&#x540E;&#x7684;&#x516C;&#x53F8;Meteor Development Group&#xFF08;&#x7B80;&#x79F0; <a href="https://www.meteor.com/" target="_blank" rel="external">MDG</a> &#xFF0C; <a href="https://www.crunchbase.com/organization/meteor" target="_blank" rel="external">CrunchBase</a> &#xFF09;B&#x8F6E;&#x53C8;&#x83B7;&#x5F97;&#x7ECF;&#x7EAC;&#xFF08;Matrix&#xFF09;&#x3001;A16Z&#x7B49;&#x9876;&#x7EA7;&#x98CE;&#x6295;&#x7684;2000&#x4E07;&#x7F8E;&#x5143;&#x6295;&#x8D44;&#x3002; </p>
<p>Meteor <a href="http://www.csdn.net/article/2012-07-26/2807736" target="_blank" rel="external">&#x4E0A;&#x4E00;&#x8F6E;&#x6295;&#x8D44;</a> &#x662F;2012&#x5E74;7&#x6708;&#x7684;A&#x8F6E;&#xFF0C;1120&#x4E07;&#x7F8E;&#x5143;&#x3002; </p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6D41;&#x884C;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;Meteor&#x5728;GitHub&#x4E0A;&#x7684;&#x5173;&#x6CE8;&#x6570;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7;25000&#xFF0C;&#x5728;&#x6240;&#x6709;&#x9879;&#x76EE;&#x4E2D; <a href="https://github.com/search?p=1&amp;q=stars%3A%3E10000&amp;ref=searchresults&amp;type=Repositories&amp;utf8=%E2%9C%93" target="_blank" rel="external">&#x6392;&#x540D;&#x7B2C;&#x5341;</a> &#xFF0C;&#x524D;&#x4E5D;&#x4F4D;&#x4E2D;&#x7B2C;2&#x548C;&#x7B2C;7&#x662F;&#x56FE;&#x4E66;&#x548C;&#x5B57;&#x4F53;&#x3001;CSS&#x8D44;&#x6E90;&#xFF0C;&#x5176;&#x4ED6;7&#x4E2A;&#x9879;&#x76EE;&#x5206;&#x522B;&#x662F;Bootstrap&#x3001;Angular&#x3001;D3&#x3001;Nodejs&#x3001;jQuery&#x3001;HTML5 Boilerplate&#x548C;Rails&#x3002; </p>
<p>&#x516C;&#x53F8;CEO Geoff Schmidt&#x5BF9;TechCrunch <a href="http://techcrunch.com/2015/05/19/meteor-raises-20m-to-build-the-one-javascript-stack-to-rule-them-all/" target="_blank" rel="external">&#x8868;&#x793A;</a> &#xFF0C;&#x4E0B;&#x4E00;&#x6B65;&#x7684;&#x91CD;&#x70B9;&#x662F; <a href="http://info.meteor.com/blog/meteor-and-a-galaxy-of-containers-with-kubernetes" target="_blank" rel="external">Galaxy</a> &#xFF0C;&#x57FA;&#x4E8E;Google Kubernetes&#x5BB9;&#x5668;&#x6280;&#x672F;&#x7684;Meteor&#x5E94;&#x7528;&#x8FD0;&#x884C;&#x5E73;&#x53F0;&#x3002;&#x542C;&#x4E0A;&#x53BB;&#x50CF;&#x662F;&#x4E00;&#x4E2A;PaaS&#x670D;&#x52A1;&#x3002;&#x76EE;&#x524D;Galaxy&#x662F;&#x8FD0;&#x884C;&#x5728;AWS&#x4E0A;&#x7684;&#xFF0C;Azure&#x548C;GCE&#xFFFD;&#xFFFD;&#xFFFD;&#x5F00;&#x53D1;&#x4E2D;&#x3002; </p>
<p>Galaxy&#x53EA;&#x662F;&#x5927;&#x68CB;&#x5C40;&#x7684;&#x4E00;&#x6B65;&#xFF0C;&#x5E94;&#x7528;&#x6027;&#x80FD;&#x5206;&#x6790;&#x548C;&#x6D4B;&#x8BD5;&#x7B49;&#x4E5F;&#x5728;&#x89C4;&#x5212;&#x4E2D;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;Meteor&#x4E5F;&#x5728;&#x589E;&#x52A0;&#x5BF9;&#x5176;&#x4ED6;JavaScript UI&#x5E93;&#x6BD4;&#x5982;Angular&#x548C;React&#x7684;&#x652F;&#x6301;&#x3002;</p>
<p>Schmidt&#x5728; <a href="http://info.meteor.com/blog/announcing-our-20m-series-b-funding" target="_blank" rel="external">&#x5B98;&#x65B9;&#x535A;&#x5BA2;</a> &#x900F;&#x9732;&#xFF0C;&#x516C;&#x53F8;&#x8463;&#x4E8B;&#x4F1A;&#x6210;&#x5458;&#x91CC;&#x9664;&#x4E86;Rod Johnson&#xFF08;Spring&#x4E4B;&#x7236;&#xFF09;&#x5916;&#xFF0C;&#x7ECF;&#x7EAC;&#x7684;David Skok&#x3001;Trinity Ventures&#xFF08;&#x6B64;&#x516C;&#x53F8;&#x6295;&#x8D44;&#x4E86;Docker&#x548C;New Relic&#xFF09;&#x7684;Dan Scholnick&#x4E5F;&#x5C06;&#x52A0;&#x5165;&#x3002; </p>
<p>&#x5173;&#x4E8E;Meteor&#x672C;&#x8EAB;&#xFF0C;&#x4ED6;&#x8FD9;&#x6837;&#x5199;&#x9053;&#xFF1A;</p>
<p>&#x5F00;&#x53D1;Meteor&#x7684;&#x613F;&#x666F;&#x662F;&#x4F7F;&#x5B83;&#x6210;&#x4E3A;&#x5F00;&#x53D1;&#x51E0;&#x4E4E;&#x4EFB;&#x4F55;&#x5E94;&#x7528;&#x7684;&#x6700;&#x4F73;&#x5E73;&#x53F0;&#x3002;&#x2026;&#x2026;Meteor&#x5F00;&#x53D1;JavaScript&#x5E94;&#x7528;&#x7684;&#x5B8C;&#x6574;&#x5E73;&#x53F0;&#xFF0C;&#x5C31;&#x50CF;JavaScript&#x7F3A;&#x5931;&#x7684;SDK&#xFF0C;&#x63D0;&#x4F9B;&#x4F60;&#x5F00;&#x53D1;&#x79FB;&#x52A8;&#x548C;Web&#x7EDD;&#x4F73;&#x7684;&#x73B0;&#x4EE3;&#x4F53;&#x9A8C;&#x6240;&#x9700;&#x7684;&#x4E00;&#x5207;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Meteor/">Meteor</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9d8681/" title="Io.js 将并入 Node.js 基金会 -" itemprop="url">Io.js 将并入 Node.js 基金会 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x6839;&#x636E; Io.js &#x56E2;&#x961F;&#x6210;&#x5458; <a href="https://twitter.com/mikeal" target="_blank" rel="external">Mikeal Rogers</a> &#x6628;&#x665A;&#x53D1;&#x7684; Tweet&#xFF0C;&#x8FD9;&#x4E2A;&#x57FA;&#x4E8E; Node.js &#x7684; npm &#x517C;&#x5BB9;&#x5E73;&#x53F0;&#x5728;&#x6280;&#x672F;&#x59D4;&#x5458;&#x4F1A;&#x6295;&#x7968;&#x51B3;&#x5B9A;&#x540E;&#x5C06;&#x5408;&#x5E76;&#x5165; Node.js &#x57FA;&#x91D1;&#x4F1A;&#x3002; </p>
<p>io.js &#x6700;&#x65E9;&#x7531;&#x4E00;&#x90E8;&#x5206; Node.js &#x6838;&#x5FC3;&#x5F00;&#x53D1;&#x6210;&#x5458;&#x5171;&#x540C;&#x5EFA;&#x7ACB;&#xFF0C;&#x56E0; <a href="http://www.infoworld.com/article/2855057/application-development/why-iojs-decided-to-fork-nodejs.html" target="_blank" rel="external">&#x4E0D;&#x5E0C;&#x671B;&#x9879;&#x76EE;&#x88AB;&#xA0;Joyent &#x516C;&#x53F8;&#x516C;&#x53F8;&#x63A7;&#x5236;&#x800C;&#x5206;&#x88C2;</a> &#xFF0C;&#x610F;&#x5728;&#x628A;&#x9879;&#x76EE;&#x65B9;&#x5411;&#x7684;&#x4E3B;&#x5BFC;&#x6743;&#x4EA4;&#x7ED9;&#x793E;&#x533A;&#x3002;&#x5728;&#x6B64;&#x4E4B;&#x524D;&#xFF0C;Uber &#x7B49;&#x516C;&#x53F8;&#x5DF2;&#x7ECF;&#x5728;&#x4F7F;&#x7528; io.js &#x5E76;&#x4E3A;&#x5176;&#x8D21;&#x732E;&#x4EE3;&#x7801;&#x3002; </p>
<p>&#x59D4;&#x5458;&#x4F1A;&#x901A;&#x8FC7;&#x540E;&#xFF0C;io.js &#x548C; Node.js &#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x4F9D;&#x7136;&#x9700;&#x8981;&#x4E00;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x505A;&#x6700;&#x540E;&#x7684;&#x5408;&#x5E76;&#x5DE5;&#x4F5C;&#x3002;&#x5728;&#x5408;&#x5E76;&#x5F7B;&#x5E95;&#x5B8C;&#x6210;&#x524D;&#xFF0C;io.js &#x9879;&#x76EE;&#x4F1A;&#x4FDD;&#x6301;&#x66F4;&#x65B0;&#x3002;&#x5408;&#x5E76;&#x540E;&#xFF0C;&#x9879;&#x76EE;&#x4F1A;&#x88AB;&#x7EDF;&#x79F0;&#x4E3A; &quot;node&quot;&#x3002;</p>
<p>&#x968F;&#x7740; Node.js &#x57FA;&#x91D1;&#x4F1A;&#x7684;&#x521B;&#x7ACB;&#xFF0C;Joyent &#x516C;&#x53F8;&#x5728;&#x4E0A;&#x5468;&#x5BA3;&#x5E03;&#x524D;&#x9879;&#x76EE;&#x6838;&#x5FC3; TJ Fontaine &#x4F1A;&#x63A5;&#x89E6;&#x6838;&#x5FC3;&#x8EAB;&#x4EFD;&#x5E76;&#x79BB;&#x5F00; Joyent &#x516C;&#x53F8;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5FAE;&#x8F6F;&#x5728;&#x6628;&#x665A;&#x53D1;&#x5E03;&#x4E00;&#x7BC7; <a href="http://blogs.windows.com/buildingapps/2015/05/12/bringing-node-js-to-windows-10-iot-core/" target="_blank" rel="external">&#x535A;&#x6587;</a> &#xFF0C;&#x79F0;&#x5176; Windows 10 for IoT &#x7CFB;&#x7EDF;&#x5206;&#x652F;&#x5C06;&#x63D0;&#x4F9B; Node.js &#x5F00;&#x53D1;&#x652F;&#x6301;&#x3002; </p>
<p>&#x672C;&#x6587;&#x53C2;&#x8003;&#x4E86;&#x591A;&#x4E2A;&#x4FE1;&#x606F;&#x6765;&#x6E90;&#xFF1A; <a href="http://venturebeat.com/2015/05/13/node-project-spinoff-io-js-is-moving-to-the-node-js-foundation-with-a-merge-in-progress/" target="_blank" rel="external">venturebeat.com</a> &#x3001; <a href="https://twitter.com/mikeal" target="_blank" rel="external">twitter.com</a> &#x3001; <a href="http://www.winbeta.org/news/microsoft-brings-nodejs-windows-10-iot-core" target="_blank" rel="external">winbeta.org</a> &#x3001; <a href="http://blogs.windows.com/buildingapps/2015/05/12/bringing-node-js-to-windows-10-iot-core/" target="_blank" rel="external">blogs.windows.com</a> &#x3001; <a href="http://www.infoworld.com/article/2855057/application-development/why-iojs-decided-to-fork-nodejs.html" target="_blank" rel="external">infoworld.com</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9e2c85/" title="在React App中使用Flux -" itemprop="url">在React App中使用Flux -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="https://facebook.github.io/flux/" target="_blank" rel="external">Flux</a> &#x662F; <a href="https://www.facebook.com/" target="_blank" rel="external">Facebook</a> &#x63A8;&#x51FA;&#x7684;&#x4E00;&#x79CD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x67B6;&#x6784;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;Web&#x5E94;&#x7528;&#x3002;Flux&#x4F7F;&#x7528;&#x4E00;&#x79CD;&#x540D;&#x4E3A; &#x5355;&#x5411;&#x6570;&#x636E;&#x6D41; &#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x6BD4;&#x4F20;&#x7EDF;&#x7684; MVC &#x6A21;&#x5F0F;&#x7B80;&#x660E;&#x3002; </p>
<p>&#x6211;&#x5728; <a href="http://blog.shiqichan.com/Gulp-transform-JSX/" target="_blank" rel="external">&#x300A;&#x4F7F;&#x7528;Gulp&#x8F6C;&#x6362;React&#x7684;JSX&#x300B;</a> &#x793A;&#x4F8B;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x63D0;&#x4EA4;&#x65B0;&#x8BC4;&#x8BBA;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x4E86; Flux &#xFF0C;&#x7528;&#x6765;&#x8BF4;&#x660E; Flux &#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x3002; </p>
<p>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A; <a href="https://github.com/MarshalW/ReactDemos/tree/comment-m5" target="_blank" rel="external">https://github.com/MarshalW/ReactDemos/tree/comment-m5</a></p>
<p>&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#xFF1A;</p>
<p>&#x4E0B;&#x9762;&#x8BF4;&#x4E0B;&#x5B9E;&#x73B0;&#x7684;&#x6B65;&#x9AA4;&#x3002;</p>
<h2 id="&#x5BF9;&#x6240;&#x9700;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x5904;&#x7406;">&#x5BF9;&#x6240;&#x9700;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x5904;&#x7406;</h2><p>&#x4F7F;&#x7528; <a href="http://browserify.org/" target="_blank" rel="external">Browserify</a> &#x548C; <a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a> &#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x52A0;&#x8F7D;Flux+React&#x6240;&#x9700;&#x7684;&#x5E93;&#xFF1A; </p>
<ul>
<li>flux</li>
<li>react</li>
<li>object-assign&#xFF0C;&#x914D;&#x5408;event&#x4F7F;&#x7528;</li>
</ul>
<p>&#x5C06;&#x8FD9;&#x4E9B;&#x52A0;&#x5165;&#x5230;`package.json&#x2019;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#xFF1A;</p>
<p>npm  install</p>
<p>&#x5728;js&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;&#x6240;&#x9700;&#x7684;&#x5E93;&#xFF0C;&#x89C1; js/comments.js &#xFF1A; </p>
<p> var React = require ( &apos;react&apos; ); </p>
<p> var Dispatcher = require ( &apos;flux&apos; ).Dispatcher; </p>
<p> var EventEmitter = require ( &apos;events&apos; ).EventEmitter; </p>
<p> var assign = require ( &apos;object-assign&apos; ); </p>
<p>&#x7136;&#x540E;&#xFF0C;&#x901A;&#x8FC7; gulp &#x547D;&#x4EE4;&#x751F;&#x6210;&#x5355;&#x4E00;&#x7684;js&#x6587;&#x4EF6;&#xFF1A; bundle.js &#x3002; </p>
<p>html&#x4EE3;&#x7801;&#xFF08;&#x89C1; comments.html &#xFF09;&#x4E2D;&#x53EA;&#x5F15;&#x7528; bundle.js &#x5373;&#x53EF;&#xFF1A; </p>
<p> &lt;!DOCTYPE html&gt;</p>
<p> &lt; html &gt;</p>
<p> &lt; head &gt;</p>
<p> &lt;/ head &gt;</p>
<p> &lt; body &gt;</p>
<p> &lt; div  id = &quot;content&quot; &gt;  &lt;/ div &gt;</p>
<p> &lt; script  src = &quot;js/bundle.js&quot; &gt;  &lt;/ script &gt;</p>
<p> &lt;/ body &gt;</p>
<p> &lt;/ html &gt;</p>
<h2 id="&#x4F7F;&#x7528;Flux">&#x4F7F;&#x7528;Flux</h2><p>&#x5982;&#x4E0A;&#x4ECB;&#x7ECD;&#x7684;&#xFF0C;&#x672C;&#x793A;&#x4F8B;&#x4F9D;&#x8D56;&#x8FD9;&#x4E9B;&#x5E93;&#xFF1A;</p>
<ul>
<li>flux&#xFF0C;&#x63D0;&#x4F9B;&#x4E86; Dispatcher &#x652F;&#x6301;&#xFF0C; Dispatcher &#xFF0C;&#x63D0;&#x4F9B;&#x4E8B;&#x4EF6;&#x5E7F;&#x64AD;&#x548C;&#x6536;&#x542C;&#x529F;&#x80FD;&#xFF0C;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x6CE8;&#x518C;&#x6536;&#x542C;&#x4E8B;&#x4EF6;&#x5E7F;&#x64AD;&#xFF0C;&#x4E5F;&#x53EF;&#x5411;&#x5B83;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;</li>
<li>react&#xFF0C;&#x7528;&#x4E8E;view&#x7684;&#x751F;&#x6210;</li>
<li>EventEmitter&#xFF0C;&#x662F;nodejs&#x81EA;&#x5E26;&#x7684;&#x4E8B;&#x4EF6;&#x652F;&#x6301;&#x5E93;&#xFF0C;&#x501F;&#x52A9; browserify &#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x4F7F;&#x7528;&#x5B83;&#xFF0C; assign &#x5E93;&#x7528;&#x4E8E;&#x914D;&#x5408; EventEmitter &#xFF0C;&#x65B9;&#x4FBF;&#x96C6;&#x6210; EventEmitter &#x5230;&#x4EFB;&#x610F;&#x5BF9;&#x8C61;&#x4E0A;</li>
</ul>
<h3 id="Dispatcher&#xFF0C;&#x70B9;&#x51FB;_&#x63D0;&#x4EA4;_&#x6309;&#x94AE;&#x65F6;&#xFF0C;&#x7528;&#x4E8E;&#x5E7F;&#x64AD;&#x4E8B;&#x4EF6;">Dispatcher&#xFF0C;&#x70B9;&#x51FB; &#x63D0;&#x4EA4; &#x6309;&#x94AE;&#x65F6;&#xFF0C;&#x7528;&#x4E8E;&#x5E7F;&#x64AD;&#x4E8B;&#x4EF6;</h3><p>&#x4EE3;&#x7801;&#x89C1; js/comments.js &#x3002; </p>
<p>&#x521B;&#x5EFA; Dispatcher &#xFF1A; </p>
<p> var AppDispatcher= new Dispatcher(); </p>
<p>&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5168;&#x5C40;&#x552F;&#x4E00;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x65F6;&#xFF1A;</p>
<p> var CommentForm = React.createClass({ </p>
<p>handleSubmit: function(e) {</p>
<p>e.preventDefault();</p>
<p> var title = this .refs.title.getDOMNode(). value .trim(); </p>
<p> var content = this .refs.content.getDOMNode(). value .trim(); </p>
<p> if (!title || !content) { </p>
<p> return ; </p>
<p>}</p>
<p> this .refs.title.getDOMNode(). value = &apos;&apos; ; </p>
<p> this .refs.content.getDOMNode(). value = &apos;&apos; ; </p>
<p>AppDispatcher.dispatch({</p>
<p>eventName: &apos;new-item&apos; , </p>
<p>newItem:{title: title, content: content}</p>
<p>});</p>
<p> return ; </p>
<p>},</p>
<p>&#x4F7F;&#x7528;&#x2019;AppDispatcher.dispatch(..)&#x2019;&#x65B9;&#x6CD5;&#x5E7F;&#x64AD;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF1A;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x8BC4;&#x8BBA;&#x6761;&#x76EE;&#xFF08; new-item &#xFF09;&#x3002; </p>
<h3 id="Store&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x8BC4;&#x8BBA;&#x7684;&#x96C6;&#x5408;">Store&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x8BC4;&#x8BBA;&#x7684;&#x96C6;&#x5408;</h3><p>Flux &#x7B2C;&#x4E8C;&#x4E2A;&#x6982;&#x5FF5;&#x662F;&#x2019;Store&#x2019;&#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x548C;&#x6570;&#x636E;&#xFF0C;&#x6BD4;&#x5982;&#x5B58;&#x50A8;/&#x8FD4;&#x56DE;&#x8BC4;&#x8BBA;&#x5BF9;&#x8C61;&#x7684;&#x96C6;&#x5408;&#xFF1A; </p>
<p>var CommentStore=assign({}, EventEmitter.prototype, {</p>
<p>items:[</p>
<p>{</p>
<p>title:&apos;&#x4E0D;&#x9519;&#xFF0C;&#x8D85;&#x7EA7;&#x6EE1;&#x610F;&apos;,</p>
<p>content:&apos;&#x6837;&#x5B50;&#x6F02;&#x4EAE;&#xFF0C;&#x4E70;&#x4E4B;&#x524D;&#x8FD8;&#x5728;&#x62C5;&#x5FC3;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x662F;&#x6211;&#x591A;&#x60F3;&#x4E86;&#xFF0C;&#x5F88;&#x5B9E;&#x7528;&#xFF0C;&#x5F88;&#x597D;&apos;</p>
<p>},</p>
<p>{</p>
<p>title:&apos;&#x8FD8;&#x4E0D;&#x9519;&apos;,</p>
<p>content:&apos;&#x9001;&#x4EBA;&#x7684;&#x793C;&#x7269;&#xFF0C;&#x5F88;&#x6EE1;&#x610F;&#x7684;&#x8D2D;&#x7269;&apos;</p>
<p>}</p>
<p>]</p>
<p>});</p>
<p>&#x8FD9;&#x91CC;&#x901A;&#x8FC7; assign &#xFF0C;&#x8BA9; CommentStore &#x5BF9;&#x8C61;&#x6DF7;&#x5165;&#xFF08; mixin &#xFF09; EventEmitter &#x7684;&#x51FD;&#x6570;&#x3002; </p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#xFF0C;&#x7528;&#x6765;&#x6536;&#x542C;&#x5230;&#x6240;&#x6709; Dispatcher &#x7684;&#x5E7F;&#x64AD;&#xFF1A; </p>
<p>AppDispatcher.register(  function  (payload)  { </p>
<p> switch ( payload.eventName ) { </p>
<p> case  &apos;new-item&apos; : </p>
<p>CommentStore.items.push( payload.newItem );</p>
<p>CommentStore.emit( &apos;change&apos; ); </p>
<p> break ; </p>
<p>}</p>
<p> return  true ; </p>
<p>});</p>
<p>&#x5E76;&#x6839;&#x636E; eventName &#x8FC7;&#x6EE4;&#x51FA;&#x81EA;&#x5DF1;&#x6240;&#x9700;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x505A;&#x4E86;&#x5982;&#x4E0B;&#x4E8B;&#x60C5;&#xFF1A; </p>
<ul>
<li>&#x6839;&#x636E;&#x4E8B;&#x4EF6;&#x4E2D;&#x6570;&#x636E;&#xFF0C;&#x4E3A;&#x8BC4;&#x8BBA;&#x96C6;&#x5408;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x6761;&#x76EE;</li>
<li>&#x89E6;&#x53D1;&#x8BC4;&#x8BBA;&#x6570;&#x636E;&#x4FEE;&#x6539;&#x7684;&#x4E8B;&#x4EF6;&#xFF08;&#x4F7F;&#x7528;nodejs&#x7684; EventEmitter &#xFF09;</li>
</ul>
<h3 id="view&#x5BF9;&#x6570;&#x636E;&#x53D8;&#x5316;&#x7684;&#x54CD;&#x5E94;">view&#x5BF9;&#x6570;&#x636E;&#x53D8;&#x5316;&#x7684;&#x54CD;&#x5E94;</h3><p>&#x5728;React view&#xFF08;&#x89C6;&#x56FE;&#xFF09;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#xFF1A;</p>
<p> var CommentBox=React.createClass({ </p>
<p>getInitialState:  function  ()  { </p>
<p> var  self =this; </p>
<p>CommentStore.on( &apos;change&apos; ,  function  ()  { </p>
<p> self .setState(CommentStore.items); </p>
<p>});</p>
<p> return {data:CommentStore.items}; </p>
<p>},</p>
<p>&#x76D1;&#x542C; change &#x4E8B;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#xFF0C;&#x5C31;&#x901A;&#x8FC7; setState &#x65B9;&#x6CD5;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x3002;React&#x53D1;&#x73B0;State&#x53D8;&#x5316;&#x4E86;&#xFF0C;&#x4F1A;&#x91CD;&#x65B0;&#x7ED8;&#x5236;&#xFF08;render&#xFF09;&#x8BE5;&#x89C6;&#x56FE;&#x3002; </p>
<h2 id="&#x672C;&#x6587;&#x53C2;&#x8003;&#x4E86;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;">&#x672C;&#x6587;&#x53C2;&#x8003;&#x4E86;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;</h2><p>&#x5982;&#x4E0B;&#xFF1A;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/React/">React</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9bacdf/" title="Node爬虫——利用superagent模拟登陆 -" itemprop="url">Node爬虫——利用superagent模拟登陆 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x4E00;&#x3001;&#x6982;&#x8FF0;</p>
<p>&#x6700;&#x8FD1;&#x5B66;&#x4E60;&#x4E86;node&#xFF0C;&#x8BD5;&#x7740;&#x5199;&#x4E86;&#x4E2A;&#x722C;&#x866B;&#xFF0C;&#x8FD9;&#x662F;&#x6A21;&#x62DF;&#x767B;&#x9646;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<p>1&#x3001;&#x9700;&#x8981;&#x7684;&#x5DE5;&#x5177;</p>
<p>2&#x3001;superagent&#x7528;&#x6CD5;&#x7684;&#x7B80;&#x8FF0;</p>
<p>3&#x3001;&#x6293;&#x5305;&#x5206;&#x6790;</p>
<p>4&#x3001;&#x6700;&#x5C0F;&#x793A;&#x4F8B;</p>
<p>&#x4E8C;&#x3001;&#x9700;&#x8981;&#x7684;&#x5DE5;&#x5177;</p>
<p>nodejs&#xFF0C;superagent&#xFF0C;wireshark&#x3002;</p>
<p>nodejs&#x6CA1;&#x4EC0;&#x4E48;&#x53EF;&#x4ECB;&#x7ECD;&#x7684;&#x3002;</p>
<p>superagent&#x662F;nodejs&#x4F17;&#x591A;&#x63D2;&#x4EF6;&#x4E4B;&#x4E00;&#xFF0C;&#x7528;npm&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#x3002;&#x662F;&#x4E00;&#x4E2A;&#x8D85;&#x8F7B;&#x7684;ajax api&#xFF0C;&#x6709;&#x7740;&#x53EF;&#x8BFB;&#x6027;&#x5F3A;&#xFF0C;&#x9AD8;&#x5EA6;&#x7075;&#x6D3B;&#xFF0C;&#x5B66;&#x4E60;&#x66F2;&#x7EBF;&#x4F4E;&#x7684;&#x4F18;&#x70B9;&#x3002;</p>
<p>wireshark&#x662F;&#x4E00;&#x4E2A;&#x6293;&#x5305;&#x5DE5;&#x5177;&#xFF0C;&#x5F88;&#x5F3A;&#x5927;&#x3002;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7528;&#x5B83;&#x6765;&#x5206;&#x6790;post&#x8BF7;&#x6C42;&#x4E0E;cookie&#x3002;</p>
<p>&#x4E09;&#x3001;superagent&#x7528;&#x6CD5;&#x7684;&#x7B80;&#x8FF0;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x6700;&#x7B80;&#x5355;&#x7684;&#x7528;&#x6CD5;&#x3002;</p>
<p>&#x5411;&#x672C;&#x5730;&#x201C;/search&#x201D;&#x53D1;&#x51FA;get&#x8BF7;&#x6C42;&#xFF0C;end()&#x5185;&#x7684;&#x662F;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<pre><code>request(&amp;apos;GET&amp;apos;, &amp;apos;/search&amp;apos;).<span class="keyword">end</span>(callback);

<span class="comment">//or</span>

 request
   .get(&amp;apos;/search&amp;apos;)
   .<span class="keyword">end</span>(<span class="function"><span class="keyword">function</span><span class="params">(err, res)</span><span class="comment">{

   }</span>);</span>
</code></pre><p>&#x8FD9;&#x662F;post&#x8BF7;&#x6C42;&#xFF0C;set&#x662F;&#x8BBE;&#x7F6E;http&#x7684;header&#xFF0C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;cookie&#x5C31;&#x662F;&#x9760;&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#x7684;&#x3002;send&#x662F;post&#x4F20;&#x9001;&#x7684;&#x53C2;&#x6570;</p>
<pre><code>request.<span class="function"><span class="title">post</span><span class="params">(&amp;apos;/user&amp;apos;)</span></span>
    .<span class="function"><span class="title">set</span><span class="params">(&amp;apos;Content-Type&amp;apos;, &amp;apos;application/json&amp;apos;)</span></span>
    .<span class="function"><span class="title">send</span><span class="params">(&amp;apos;{&amp;quot;name&amp;quot;:&amp;quot;tj&amp;quot;,&amp;quot;pet&amp;quot;:&amp;quot;tobi&amp;quot;}&amp;apos;)</span></span>
    .<span class="function"><span class="title">end</span><span class="params">(callback)</span></span>
</code></pre><p>&#x66F4;&#x5177;&#x4F53;&#x7684;&#x53EF;&#x4EE5;&#x89C1; <a href="http://visionmedia.github.io/superagent/#request-basics" target="_blank" rel="external">&#x6587;&#x6863;</a> &#x3002; </p>
<p>&#x56DB;&#x3001;&#x6293;&#x5305;&#x5206;&#x6790;</p>
<p>&#x5728;&#x6211;&#x4EEC;&#x767B;&#x5F55;&#x7F51;&#x7AD9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5411;&#x6211;&#x4EEC;&#x53D1;&#x9001;&#x7684;response&#x4E2D;&#x4F1A;&#x8BBE;&#x7F6E;cookie&#xFF0C;&#x7528;&#x6765;&#x4E4B;&#x540E;&#x7684;&#x6D4F;&#x89C8;&#x4E2D;&#x9A8C;&#x8BC1;&#x6211;&#x4EEC;&#x7684;&#x8EAB;&#x4EFD;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x5229;&#x7528;post&#x6A21;&#x62DF;&#x767B;&#x5F55;&#xFF0C;&#x66F4;&#x8981;&#x4FDD;&#x5B58;&#x597D;&#x5176;&#x53D1;&#x7ED9;&#x6211;&#x4EEC;&#x7684;cookie&#xFF0C;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x8BF7;&#x6C42;&#x4E2D;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x5728;&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150702/a9b7c0b.png" alt=""></p>
<p>&#x7EA2;&#x8272;&#x6846;&#x6846;&#x4E2D;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x7684;cookie&#x3002;</p>
<p>&#x4E94;&#x3001;&#x6700;&#x5C0F;&#x793A;&#x4F8B;</p>
<pre><code>var superagent = require(&amp;apos;superagent&amp;apos;);
var events = require(&amp;quot;events&amp;quot;);

var emitter = new events.<span class="class">EventEmitter</span>()

setCookeie ();
emitter.on(&amp;quot;setCookeie&amp;quot;, getTitles)            //&amp;<span class="symbol">#x76D1</span>;&amp;<span class="symbol">#x542C</span>;setCookeie&amp;<span class="symbol">#x4E8B</span>;&amp;<span class="symbol">#x4EF6</span>;



function setCookeie () {
  superagent.post(&amp;apos;<span class="method">http:</span>//www.ourob.cn/bbs/member.php?mod=logging&amp;amp;action=login&amp;amp;loginsubmit=yes&amp;amp;infloat=yes&amp;amp;lssubmit=yes&amp;amp;inajax=<span class="number">1</span>&amp;apos;)  //&amp;<span class="symbol">#x5B66</span>;&amp;<span class="symbol">#x6821</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x8BBA</span>;&amp;<span class="symbol">#x575B</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x662F</span>;&amp;<span class="symbol">#x767B</span>;&amp;<span class="symbol">#x5F55</span>;&amp;<span class="symbol">#x63D0</span>;&amp;<span class="symbol">#x4EA4</span>;&amp;<span class="symbol">#x5730</span>;&amp;<span class="symbol">#x5740</span>;
    .type(&amp;quot;form&amp;quot;)
      .send({<span class="method">fastloginfield:</span>&amp;quot;username&amp;quot;})
      .send({<span class="method">username:</span>&amp;quot;foo&amp;quot;})                                                                                       //&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x80AF</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x662F</span>;&amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x771F</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x548C</span>;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#x5566</span>;
      .send({<span class="method">password:</span>&amp;quot;bar&amp;quot;})
      .send({<span class="method">quickforward:</span>&amp;quot;yes&amp;quot;})
      .send({<span class="method">handlekey:</span>&amp;quot;ls&amp;quot;})
        .end(function(err, res){
          if (err) throw err;
          var cookie = res.header[&amp;apos;set-cookie&amp;apos;]             //&amp;<span class="symbol">#x4ECE</span>;response&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x5F97</span>;&amp;<span class="symbol">#x5230</span>;cookie
          emitter.emit(&amp;quot;setCookeie&amp;quot;, cookie)
        })
}

function getTitles (cookie) {
  superagent.get(&amp;quot;<span class="method">http:</span>//www.ourob.cn/bbs/forum.php?mod=forumdisplay&amp;amp;fid=<span class="number">82</span>&amp;amp;filter=typeid&amp;amp;typeid=<span class="number">185</span>&amp;quot;)             //&amp;<span class="symbol">#x968F</span>;&amp;<span class="symbol">#x4FBF</span>;&amp;<span class="symbol">#x8BBA</span>;&amp;<span class="symbol">#x575B</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x5730</span>;&amp;<span class="symbol">#x5740</span>;
      .set(&amp;quot;<span class="class">Cookie</span>&amp;quot;, cookie[<span class="number">3</span>])                 //&amp;<span class="symbol">#x5728</span>;resquest&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x5F97</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x7684</span>;cookie&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x53EA</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x7B2C</span>;&amp;<span class="symbol">#x56DB</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x8DB3</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#xFF08</span>;&amp;<span class="symbol">#x5177</span>;&amp;<span class="symbol">#x4F53</span>;&amp;<span class="symbol">#x60C5</span>;&amp;<span class="symbol">#x51B5</span>;&amp;<span class="symbol">#x5177</span>;&amp;<span class="symbol">#x4F53</span>;&amp;<span class="symbol">#x5206</span>;&amp;<span class="symbol">#x6790</span>;&amp;<span class="symbol">#xFF09</span>;
          .end(function(err, res){
                if (err){
              throw err;
                };
            //do something
          })
};
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/Wireshark/">Wireshark</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/a9f58d0/" title="Sequelize.js 3.0.0 发布，Node.js 的 ORM 框架 -" itemprop="url">Sequelize.js 3.0.0 发布，Node.js 的 ORM 框架 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:40.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://city.oschina.net/xian/event/234718" target="_blank" rel="external">5&#x6708;23&#x65E5; &#x897F;&#x5B89; OSC &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#x5566;&#xFF0C;&#x5B58;&#x50A8;&#x3001;&#x865A;&#x62DF;&#x673A;&#x3001;Docker &#x7B49;&#x5E72;&#x8D27;&#x5206;&#x4EAB;</a></p>
<p>Sequelize.js&#x63D0;&#x4F9B;&#x5BF9;MySQL&#xFF0C;MariaDB&#xFF0C;SQLite &#x548C;PostgreSQL &#x6570;&#x636E;&#x5E93;&#x7684;&#x7B80;&#x5355;&#x8BBF;&#x95EE;&#xFF0C;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x6570;&#x636E;&#x5E93;&#x6761;&#x76EE;&#x5230;&#x5BF9;&#x8C61;&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x8C61;&#x5230;&#x6570;&#x636E;&#x5E93;&#x6761;&#x76EE;&#x3002;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5C31;&#x662F; ORM&#xFF08;Object-Relational-Mapper&#xFF09;&#x3002;Sequelize.js &#x5B8C;&#x5168;&#x662F;&#x4F7F;&#x7528; JavaScript &#x7F16;&#x5199;&#xFF0C;&#x9002;&#x7528;&#x4E8E; Node.js &#x7684;&#x73AF;&#x5883;&#x3002; </p>
<p>Sequelize.js 3.0.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6E05;&#x7406;&#x4E86;&#x5E9F;&#x5F03;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x7EF4;&#x62A4;&#x548C;&#x5F00;&#x53D1;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>[ADDED] findById / findByPrimary takes a single value as argument representing the primary key to find.</li>
<li>[CHANGED] belongsToMany relations MUST now be given a through argument.</li>
<li>[CHANGED] findOne / findAll / findAndCount / findOrCreate now only takes a single options argument instead of a options and queryOptions argument. So set transaction, raw, etc on the first options argument.</li>
<li>[CHANGED] The accessor for belongsToMany relationships is now either the as argument or the target model name pluralized.</li>
<li>[REMOVED] N:M relationships can no longer be represented by 2 x hasMany</li>
<li>[REMOVED] Model.create / Model.bulkCreate / Instance.save no longer takes an array of fields as its second argument, use options.fields instead.</li>
<li>[REMOVED] Query Chainer has been removed</li>
<li>[REMOVED] Migrations have been removed, use umzug instead</li>
<li>[REMOVED] Model.findAllJoin has been removed</li>
<li>[REMOVED] sequelize.query now only takes sql and options as arguments, the second and fourth argument callee and replacements have been removed and should be set via options.instance / options.model and &#xA0; options.replacements instead.</li>
<li>[REMOVED] instance.isDirty has been removed, use instance.changed() instead</li>
<li>[REMOVED] instance.values has been removed, use instance.get() instead</li>
<li>[REMOVED] instance.primaryKeyValues has been removed.</li>
<li>[REMOVED] instance.identifiers has been removed, use instance.where() instead</li>
<li>[REMOVED] instance.isDeleted has been removed, simply check the timestamp with get(&apos;deletedAt&apos;) instead</li>
<li>[REMOVED] instance.increment/decrement now longer takes a number as it&apos;s second argument.</li>
<li>[REMOVED/SECURITY] findOne no longer takes a string / integer / binary argument to represent a primaryKey. Use findById instead</li>
<li>[REMOVED/SECURITY] where: &quot;raw query&quot; is no longer legal, you must now explicitely use where: [&quot;raw query&quot;, [replacements]]</li>
<li>[BUG] Fix showIndexQuery so appropriate indexes are returned when a schema is used</li>
<li>[BUG] Fix addIndexQuery error when the model has a schema</li>
<li>[BUG] Fix app crash in sqlite while running in special unique constraint errors <a href="https://github.com/sequelize/sequelize/pull/3730" target="_blank" rel="external">#3730</a></li>
<li>[BUG] Fix bulkCreate: do not insert NULL for undefined values <a href="https://github.com/sequelize/sequelize/pull/3729" target="_blank" rel="external">#3729</a></li>
<li>[BUG] Fix trying to roll back a comitted transaction if an error occured while comitting resulting in an unhandled rejection <a href="https://github.com/sequelize/sequelize/pull/3726" target="_blank" rel="external">#3726</a></li>
<li>[BUG] Fix regression in beforeUpdate hook where instance.changed() would always be false <a href="https://github.com/sequelize/sequelize/pull/3727" target="_blank" rel="external">#3727</a></li>
<li>[BUG] Fix trying to roll back a comitted transaction if an error occured while comitting</li>
</ul>
<h4 id="&#x5411;&#x540E;&#x517C;&#x5BB9;&#x6539;&#x8FDB;">&#x5411;&#x540E;&#x517C;&#x5BB9;&#x6539;&#x8FDB;</h4><ul>
<li>Most of the changes in 3.0.0 are BC breaking, read the changelog for 3.0.0 carefully.</li>
<li>The error that is thrown when a column is declared to be an enum but without any values used to &quot;Values for ENUM haven&apos;t been defined&quot; and is now &quot;Values for ENUM have not been defined&quot;.</li>
</ul>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/sequelize/sequelize/archive/v3.0.0.zip" target="_blank" rel="external">https://github.com/sequelize/sequelize/archive/v3.0.0.zip</a> &#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/数据库/">数据库</a><a href="/tags/数据持久化/">数据持久化</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/18/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><a class="extend next" rel="next" href="/page/20/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>472</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>73</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>61</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>52</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>30</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Mac-OS-X/" title="Mac OS X">Mac OS X<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Ubuntu/" title="Ubuntu">Ubuntu<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Kafka/" title="Kafka">Kafka<sup>7</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
