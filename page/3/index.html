
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/3/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/ede6432/" title="腾讯Bugly移动开发者沙龙：App性能优化与终端架构设计" itemprop="url">腾讯Bugly移动开发者沙龙：App性能优化与终端架构设计</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x817E;&#x8BAF;Bugly&#x79FB;&#x52A8;&#x5F00;&#x53D1;&#x8005;&#x6C99;&#x9F99;&#xFF1A;App&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E0E;&#x7EC8;&#x7AEF;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;">&#x817E;&#x8BAF;Bugly&#x79FB;&#x52A8;&#x5F00;&#x53D1;&#x8005;&#x6C99;&#x9F99;&#xFF1A;App&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E0E;&#x7EC8;&#x7AEF;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-06 19:49:52  <a href="/sites/7fAnIr">CSDN&#x79FB;&#x52A8;&#x5F00;&#x53D1;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.csdn.net/article/2015-06-06/2824885?utm_source=tuicool" target="_blank" rel="external">http://www.csdn.net/article/2015-06-06/2824885</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11110030">&#x6027;&#x80FD;&#x4F18;&#x5316;</a><a href="/topics/11000077">&#x79FB;&#x52A8;&#x5F00;&#x53D1;</a></p>
<p>5&#x6708;31&#x65E5;&#xFF0C;&#x7531;&#x817E;&#x8BAF;&#x65E0;&#x7EBF;&#x7814;&#x53D1;&#x90E8;&#x4E3B;&#x529E;&#x7684;&#x201C;&#x817E;&#x8BAF;Bugly&#x79FB;&#x52A8;&#x5F00;&#x53D1;&#x8005;&#x6C99;&#x9F99;&#x201D;&#x7B2C;&#x4E00;&#x671F;&#x5728;&#x5317;&#x4EAC;&#x8F66;&#x5E93;&#x5496;&#x5561;&#x62C9;&#x5F00;&#x5E8F;&#x5E55;&#x3002;&#x672C;&#x6B21;&#x6C99;&#x9F99;&#x6D3B;&#x52A8;&#x4EE5;&#x201C;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x7B14;&#x8BB0;&#x201D;&#x4E3A;&#x4E3B;&#x9898;&#xFF0C;&#x9080;&#x8BF7;&#x5230;&#x817E;&#x8BAF;&#x79FB;&#x52A8;&#x6027;&#x80FD;&#x8BC4;&#x6D4B;&#x4E13;&#x5BB6;&#x53F6;&#x65B9;&#x6B63;&#x4E0E;&#x624B;&#x673A;QQ&#x8D1F;&#x8D23;&#x4EBA;&#x5F20;&#x65ED;&#x5728;&#x73B0;&#x573A;&#x7ED3;&#x5408;&#x5B9E;&#x6218;&#x5C31;&#x201C;Android&#x5E94;&#x7528;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x201D;&#x4E0E;&#x201C;&#x7EC8;&#x7AEF;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x201D;&#x8FDB;&#x884C;&#x4E86;&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x4E0E;&#x5206;&#x4EAB;&#x3002;</p>
<p><img src="http://img2.tuicool.com/Ub63Yv3.jpg" alt=""></p>
<p>&#x79FB;&#x52A8;&#x6027;&#x80FD;&#x8BC4;&#x6D4B;&#x4E13;&#x5BB6;&#x53F6;&#x65B9;&#x6B63;&#xFF1A;Android&#x4F18;&#x5316;&#x7B14;&#x8BB0;</p>
<p>&#x817E;&#x8BAF;&#x79FB;&#x52A8;&#x6027;&#x80FD;&#x8BC4;&#x6D4B;&#x4E13;&#x5BB6; &#x53F6;&#x65B9;&#x6B63;&#x5BF9;Android&#x5E94;&#x7528;&#x6027;&#x80FD;&#x8BC4;&#x6D4B;&#x548C;&#x8C03;&#x4F18;&#x8FDB;&#x884C;&#x4E86;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;&#x5173;&#x4E8E;Android&#x5E94;&#x7528;&#x4F18;&#x5316;&#xFF0C;&#x4E3B;&#x8981;&#x96C6;&#x4E2D;&#x5728;&#x5185;&#x5B58;&#x548C;UI&#x6D41;&#x7545;&#x5EA6;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#x5185;&#x5B58;&#x5360;&#x7528;&#x4E0E;&#x6CC4;&#x9732;&#xFF0C;UI&#x6D41;&#x7545;&#x5EA6;&#x7684;&#x5E27;&#x6570;&#x548C;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#xFF0C;IO&#x7684;&#x963B;&#x585E;&#x5F0F;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x7B49;&#x3002;</p>
<p><img src="http://img0.tuicool.com/qaQnAb.jpg" alt=""></p>
<p>&#x8C08;&#x5230;&#x4E3A;&#x4EC0;&#x4E48;&#x4F18;&#x5316;&#x5185;&#x5B58;&#x65F6;&#xFF0C;&#x53F6;&#x65B9;&#x6B63;&#x8868;&#x793A;&#xFF0C;&#x5BF9;&#x4E8E;&#x624B;&#x673A;&#x6765;&#x8BF4;&#xFF0C;&#x5185;&#x5B58;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7A00;&#x7F3A;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x73B0;&#x5728;&#x666E;&#x904D;&#x62E5;&#x6709;&#x7740;&#x5F88;&#x5927;&#x5185;&#x5B58;&#x7684;Android&#x624B;&#x673A;&#x4E5F;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#xFF0C;&#x800C;Android&#x7684;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x5305;&#x62EC;DDMS&#x3001;MAT&#x548C;android.os.Debug&#x3002;&#x6D4B;&#x8BD5;&#x4EBA;&#x5458;&#x5E94;&#x4ECE;&#x7F16;&#x8BD1;&#x4EE3;&#x7801;&#x3001;&#x9009;&#x5B9A;&#x6D4B;&#x8BD5;&#x573A;&#x666F;&#x3001;&#x6D4B;&#x8BD5;&#x573A;&#x666F;&#x8F6C;&#x6362;&#x6210;&#x7528;&#x4F8B;&#x3001;&#x8DD1;&#x8D77;&#x5DE5;&#x5177;Run&#x7528;&#x4F8B;&#x5165;&#x624B;&#xFF0C;&#x5E76;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x6DF1;&#x5EA6;&#x5206;&#x6790;&#xFF0C;&#x6765;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x6D4B;&#x8BD5;&#x3002;</p>
<p>&#x624B;&#x673A;QQ&#x8D1F;&#x8D23;&#x4EBA;&#x5F20;&#x65ED;&#xFF1A;&#x6700;&#x5408;&#x9002;&#x7684;&#x67B6;&#x6784; &#x6700;&#x5408;&#x9002;&#x7684;&#x91CD;&#x6784;</p>
<p>&#x624B;&#x673A;QQ&#x8D1F;&#x8D23;&#x4EBA;&#x5F20;&#x65ED;&#x4ECE;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x3001;&#x91CD;&#x6784;&#x4E0E;&#x9879;&#x76EE;&#x8FDB;&#x5EA6;&#x7B49;&#x65B9;&#x9762;&#x5BF9;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;&#x8FDB;&#x884C;&#x4E86;&#x5168;&#x65B9;&#x4F4D;&#x7684;&#x5256;&#x6790;&#x4E0E;&#x8BB2;&#x89E3;&#x3002;&#x4E0D;&#x662F;&#x6BCF;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x5458;&#x90FD;&#x80FD;&#x591F;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x67B6;&#x6784;&#x5E08;&#x2014;&#x2014;&#x8FD9;&#x662F;&#x5F00;&#x53D1;&#x754C;&#x5E7F;&#x4E3A;&#x6D41;&#x4F20;&#x7684;&#x4E00;&#x4E2A;&#x8BBA;&#x8C03;&#x3002;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5C06;&#x4EA7;&#x54C1;&#x4ECE;&#x9700;&#x6C42;&#x5230;&#x8BBE;&#x8BA1;&#x7684;&#x6BCF;&#x4E2A;&#x7EC6;&#x8282;&#x90FD;&#x8981;&#x8003;&#x8651;&#x5230;&#xFF0C;&#x628A;&#x63E1;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x4F7F;&#x8BBE;&#x8BA1;&#x7684;&#x9879;&#x76EE;&#x5C3D;&#x91CF;&#x6548;&#x7387;&#x9AD8;&#xFF0C;&#x5F00;&#x53D1;&#x5BB9;&#x6613;&#xFF0C;&#x7EF4;&#x62A4;&#x65B9;&#x4FBF;&#xFF0C;&#x5347;&#x7EA7;&#x7B80;&#x5355;&#x3002;</p>
<p><img src="http://img0.tuicool.com/MJFJ7b.jpg" alt=""></p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x7A76;&#x7ADF;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x67B6;&#x6784;&#x624D;&#x662F;&#x6700;&#x5408;&#x9002;&#x7684;&#xFF1F;&#x5F20;&#x65ED;&#x8868;&#x793A;&#xFF0C;&#x8861;&#x91CF;&#x4E00;&#x4E2A;&#x67B6;&#x6784;&#x662F;&#x5426;&#x5408;&#x9002;&#x7684;&#x91CD;&#x8981;&#x6807;&#x51C6;&#x5C31;&#x662F;&#xFF1A;&#x662F;&#x5426;&#x9002;&#x7528;&#x4E8E;&#x5F53;&#x524D;&#x56E2;&#x961F;&#x4E0E;&#x4E1A;&#x52A1;&#x89C4;&#x6A21;&#xFF0C;&#x662F;&#x5426;&#x9002;&#x7528;&#x4E8E;&#x4EA7;&#x54C1;/&#x5546;&#x4E1A;&#x53D1;&#x5C55;&#x7684;&#x4E0B;&#x4E00;&#x6B65;&#x65B9;&#x5411;&#xFF1F;&#x5982;&#x679C;&#x56E2;&#x961F;&#x89C4;&#x6A21;&#x6269;&#x5927;&#x3001;&#x6269;&#x5C55;&#x6027;&#x4E0D;&#x8DB3;&#x3001;&#x7EF4;&#x62A4;&#x6027;&#x5D29;&#x574F;&#x3001;&#x6027;&#x80FD;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x5C31;&#x5FC5;&#x987B;&#x5F15;&#x5165;&#x91CD;&#x6784;&#x3002;&#x6839;&#x636E;&#x73B0;&#x6709;&#x60C5;&#x51B5;&#xFF0C;&#x91CD;&#x65B0;&#x505A;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#xFF0C;&#x5E76;&#x627E;&#x5230;&#x539F;&#x6709;&#x67B6;&#x6784;&#x53EF;&#x590D;&#x7528;&#x7684;&#x90E8;&#x5206;&#x4EE5;&#x53CA;&#x9700;&#x8981;&#x91CD;/&#x6539;&#x5199;&#x7684;&#x5173;&#x952E;&#x70B9;&#xFF0C;&#x7ED9;&#x51FA;&#x91CD;&#x6784;&#x7684;&#x6539;&#x5584;&#x76EE;&#x6807;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x817E;&#x8BAF;Bugly&#x79FB;&#x52A8;&#x5F00;&#x53D1;&#x8005;&#x6C99;&#x9F99;&#x7684;&#x9996;&#x79C0;&#xFF0C;&#x672C;&#x6B21;&#x6D3B;&#x52A8;&#x805A;&#x96C6;&#x4E86;&#x7EA6;&#x4E24;&#x767E;&#x591A;&#x540D;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x53C2;&#x4E0E;&#xFF0C;&#x6574;&#x4E2A;&#x5206;&#x4EAB;&#x4F1A;&#x73B0;&#x573A;&#x5EA7;&#x65E0;&#x865A;&#x5E2D;&#xFF0C;&#x4E24;&#x4F4D;&#x6280;&#x672F;&#x5496;&#x4EE5;&#x5E72;&#x8D27;&#x52A0;&#x5B9E;&#x4F8B;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x4F7F;&#x6574;&#x4E2A;&#x5206;&#x4EAB;&#x901A;&#x4FD7;&#x6613;&#x61C2;&#x3001;&#x751F;&#x52A8;&#x6709;&#x8DA3;&#x3002;&#x9664;&#x4E86;&#x6280;&#x672F;&#x5185;&#x5BB9;&#x5206;&#x4EAB;&#x4E4B;&#x5916;&#xFF0C;&#x73B0;&#x573A;&#x8FD8;&#x8BBE;&#x7F6E;&#x4E86;&#x4E92;&#x52A8;&#x3001;&#x8336;&#x6B47;&#x4EA4;&#x6D41;&#x548C;&#x5706;&#x684C;&#x8BBA;&#x575B;&#x7B49;&#x73AF;&#x8282;&#xFF0C;&#x4E24;&#x4F4D;&#x6F14;&#x8BB2;&#x5609;&#x5BBE;&#x76F4;&#x63A5;&#x4E0E;&#x5F00;&#x53D1;&#x8005;&#x4EEC;&#x8FDB;&#x884C;&#x9762;&#x5BF9;&#x9762;&#x7684;&#x7B54;&#x7591;&#x89E3;&#x60D1;&#x3002; </p>
<p>&#x73B0;&#x573A;&#x82B1;&#x7D6E;&#xFF1A;</p>
<p><img src="http://img1.tuicool.com/jYNzE3.jpg" alt=""></p>
<p><img src="http://img0.tuicool.com/fu22Mr.jpg" alt=""></p>
<p><img src="http://img0.tuicool.com/bMjARre.jpg" alt=""></p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/rAveEza">&#x95F2;&#x8C08;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x6A21;&#x5F0F;</a></li>
<li>2.<a href="/articles/NF7bUb3">&#x7B14;&#x8BB0;, Cirru Table Redo &#x5931;&#x8D25;, &#x7ECF;&#x9A8C;&#x6559;&#x8BAD;</a></li>
<li>3.<a href="/articles/6VB7zii">Datazen&#x5B89;&#x88C5;</a></li>
<li>4.<a href="/articles/NjUB7b">Fibonacci&#x6570;&#x5217;&#x6027;&#x8D28;&#x7684;&#x7EC4;&#x5408;&#x8BC1;&#x660E;</a></li>
<li>5.<a href="/articles/BbaINzQ">Backbone.js 1.2.1 &#x53D1;&#x5E03;&#xFF0C;JavaScript &#x7684; MVC &#x6846;&#x67B6;</a></li>
<li><p>6.<a href="/articles/QbYRb2I">Unity3d &#x83B7;&#x53D6;&#x5C4F;&#x5E55;depth&#x4E0E;normal</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/rmmQ3uR">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;rmmQ3uR&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/性能优化/">性能优化</a><a href="/tags/移动开发/">移动开发</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/ede2c0b/" title="几种锁算法的实现" itemprop="url">几种锁算法的实现</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;">&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-06 23:48:59  <a href="/sites/3uEjYv">segmentfault-&#x535A;&#x5BA2;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://segmentfault.com/a/1190000002881664?utm_source=tuicool" target="_blank" rel="external">http://segmentfault.com/a/1190000002881664</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000083">&#x7B97;&#x6CD5;</a></p>
<h2 id="Multicore">Multicore</h2><h3 id="Abstract">Abstract</h3><p>4&#x79CD;Lock&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<ul>
<li>TASLock</li>
<li>TTASLock</li>
<li>CLHLock</li>
<li>MCSLock</li>
</ul>
<h3 id="TASLock">TASLock</h3><p>&#x6BCF;&#x4E00;&#x4E2A;Lock&#x5E26;&#x6709;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x4F4D;&#xFF0C;lock()&#x4E0E;unlock()&#x64CD;&#x4F5C;&#x539F;&#x5B50;&#x7684;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x4F4D;&#x3002;false&#x65F6;&#x53EF;&#x8FDB;&#x5165;&#xFF0C;true&#x65F6;spin&#x3002; </p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TASLock</span> <span class="keyword">implements</span> <span class="title">Lock</span>
</span>{
    AtomicBoolean state = <span class="keyword">new</span> AtomicBoolean(<span class="keyword">false</span>);
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span>
    </span>{
        <span class="keyword">while</span>(state.getAndSet(<span class="keyword">true</span>))
        {}
    }
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span>
    </span>{
        state.set(<span class="keyword">false</span>);
    }
}
</code></pre><p>defect&#xFF1A;</p>
<ul>
<li>&#x5728;&#x9501;&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; while(state.getAndSet(true)) &#x4F1A;&#x4E0D;&#x505C;&#x7684;&#x5C06; </li>
</ul>
<p>state&#x4ECE;true&#x6539;&#x4E3A;true</p>
<h3 id="TTASLock">TTASLock</h3><p>TASLock&#x7B97;&#x6CD5;&#x7684;&#x6539;&#x8FDB;&#x3002;</p>
<pre><code>public class TTASLock implements Lock()
{
    AtomicBoolean <span class="keyword">state</span> = new AtomicBoolean(false);
    public void lock()
    {
        while (true)
        {
            while (<span class="keyword">state</span>.get())
            {};
            if (! <span class="keyword">state</span>.getAndSet(true))
                return;
        }
    }
    public void unlock()
    {
        <span class="keyword">state</span>.<span class="built_in">set</span>(false);
    }
}
</code></pre><ol>
<li>while (state.get()){} &#x662F;&#x4E00;&#x4E2A;&#x6539;&#x8FDB;&#xFF0C;&#x6548;&#x679C;&#x662F;&#x5148;&#x770B;&#x4E00;&#x773C;lock&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5F53;lock&#x662F;false&#x65F6;&#xFF0C;<br>&#x518D;&#x771F;&#x6B63;&#x7684;&#x6267;&#x884C; state.getAndSet(true) &#x3002;</li>
<li>&#x5F53;state.getAndSet(true) &#x7684;return&#x4E3A;false&#x65F6;&#xFF0C;&#x8BF4;&#x660E;&#x4E4B;&#x524D;&#x7684;&#x786E;&#x662F;false&#xFF0C;&#x4E8E;&#x662F;&#x83B7;&#x5F97;&#x9501;&#xFF0C;return&#x3002;<br>&#x5426;&#x5219;&#x56DE;&#x5230;while(true),&#x518D;&#x6B21;&#x5C1D;&#x8BD5;&#x83B7;&#x5F97;&#x9501;&#x3002;</li>
</ol>
<p>defect&#xFF1A;</p>
<ul>
<li>&#x5728;unlock&#x65F6;&#xFF0C;state.set(false)&#x8FD8;&#x662F;&#x4F1A;&#x5E26;&#x6765;&#x5927;&#x91CF;&#x7684;cache miss&#x3002;</li>
<li>cache miss VS cache hit</li>
</ul>
<h3 id="CLHLock">CLHLock</h3><p>&#x961F;&#x5217;&#x9501;&#x3002;</p>
<p><a href="http://git.oschina.net/qcliu/testC/blob/master/multicore/clh.c" target="_blank" rel="external">CLHLock</a></p>
<pre><code>void initCLHlock()
{
    q.<span class="keyword">locked</span> = FALSE;
    tail = &amp;amp;q;
}
void lock()
{
    QNode* qnode = (QNode*)pthread_getspecific(myNode);
    qnode-&amp;gt;<span class="keyword">locked</span> = TRUE;
    QNode* pred = getAndSet(qnode);//&amp;#x539F;&amp;#x5B50;&amp;#x7684;&amp;#x5F97;&amp;#x5230;&amp;#x961F;&amp;#x5C3E;&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;qnode&amp;#x8BBE;&amp;#x4E3A;&amp;#x65B0;&amp;#x7684;&amp;#x961F;&amp;#x5C3E;&amp;#x3002;
    pthread_setspecific(myPred, pred);
    while(pred-&amp;gt;<span class="keyword">locked</span>)
    {
    }
}
void unlock()
{
    QNode* qnode = (QNode*)pthread_getspecific(myNode);
    qnode-&amp;gt;<span class="keyword">locked</span> = FALSE;
    QNode* pred = (QNode*)pthread_getspecific(myPred);
    pthread_setspecific(myNode, pred);//unlock&amp;#x65F6;&amp;#x5FC5;&amp;#x987B;&amp;#x5C06;myNode&amp;#x6307;&amp;#x5411;&amp;#x524D;&amp;#x9762;&amp;#x7684;Node
}
</code></pre><h6 id="NOTE_:"><strong>NOTE</strong> :</h6><ul>
<li>unlock&#x65F6;&#x5FC5;&#x987B;&#x5C06;myNode&#x6307;&#x5411;&#x524D;&#x9762;&#x7684;Node&#xFF01;<br>&gt; <strong>&#x540E;&#x679C;</strong> &#xFF1A;&#x5982;&#x679C;Thread A unlock()&#x540E;&#xFF0C;&#x7D27;&#x63A5;&#x7740;&#x53C8;&#x8FDB;&#x5165;<br>&#x961F;&#x5C3E;&#xFF0C; A&#x7684;locked&#x4F1A;&#x518D;&#x6B21;&#x88AB;&#x7F6E;&#x4E3A;TRUE&#xFF0C; Thread B&#x8FD8;&#x5728;&#x770B;&#x7740;Thread A &#x7684;locked&#x5B57;&#x6BB5;&#xFF0C;&#x4E8E;&#x662F;&#x4EA7;&#x751F;<br>deadlock&#x3002;</li>
<li>&#x521D;&#x59CB;&#x65F6;&#x6559;&#x5BA4;&#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x51F3;&#x5B50;&#xFF0C; &#x6BCF;&#x4E2A;&#x5B66;&#x751F;&#x6765;&#x5230;&#x95E8;&#x53E3;&#x6392;&#x961F;&#x65F6;&#x90FD;&#x81EA;&#x5DF1;&#x5E26;&#x7740;&#x4E00;&#x4E2A;&#x51F3;&#x5B50;&#x3002;</li>
</ul>
<h3 id="MCSLock">MCSLock</h3><pre><code>public class <span class="class">MCSLock</span> implements <span class="class">Lock</span>
{
    <span class="class">AtomicReference</span>&amp;lt;<span class="class">QNode</span>&amp;gt; tail;
    <span class="class">ThreadLocal</span>&amp;lt;<span class="class">QNode</span>&amp;gt; myNode;
    public <span class="class">MCSLock</span>()
    {
        queue = new <span class="class">AtomicReference</span>&amp;lt;<span class="class">QNode</span>&amp;gt;(null);
        myNode = new <span class="class">ThreadLocal</span>&amp;lt;<span class="class">QNode</span>&amp;gt;()
        {
            protected <span class="class">QNode</span> initialValue()
            {
                return new <span class="class">QNode</span>();
            }
        };
    }
    ...
    class <span class="class">QNode</span>
    {
        boolean locked = <span class="keyword">false</span>;
        <span class="class">QNode</span> next = null;//&amp;<span class="symbol">#x4E0E</span>;<span class="class">CLHLock</span>&amp;<span class="symbol">#x76F8</span>;&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x591A</span>;&amp;<span class="symbol">#x4E86</span>;&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x4E2A</span>;&amp;<span class="symbol">#x771F</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x7684</span>;next
    }
}   
public void lock()
{
    <span class="class">QNode</span> qnode = myNode.get();
    <span class="class">QNode</span> pred = tail.getAndSet(qnode);
    if (pred != null)
    {
        qnode.locked = <span class="keyword">true</span>;
        pred.next = qnode;
        //wait until predecessor gives up the lock
        while(qnode.locked){}//&amp;<span class="symbol">#x5C06</span>;&amp;<span class="symbol">#x81EA</span>;&amp;<span class="symbol">#x5DF1</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="keyword">true</span>&amp;<span class="symbol">#x7136</span>;&amp;<span class="symbol">#x540E</span>;spin&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x770B</span>;&amp;<span class="symbol">#x4F3C</span>;deadlock
    }
}
public void unlock()
{
    <span class="class">QNode</span> qnode = myNode.get();
    if (qnode.next == null)         //&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x6CA1</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x7B49</span>;&amp;<span class="symbol">#x5F85</span>;&amp;<span class="symbol">#x7EBF</span>;&amp;<span class="symbol">#x7A0B</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x60C5</span>;&amp;<span class="symbol">#x51B5</span>;
    {//------there is a gap!!!!
        if (tail.compareAndSet(qnode, null))
            return;                 //&amp;<span class="symbol">#x771F</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6CA1</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x7B49</span>;&amp;<span class="symbol">#x5F85</span>;&amp;<span class="symbol">#x7EBF</span>;&amp;<span class="symbol">#x7A0B</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x76F4</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x9700</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x901A</span>;&amp;<span class="symbol">#x77E5</span>;
        //wait until predecessor fills in its next field
        while (qnode.next == null){}
    }
    //&amp;<span class="symbol">#x53F3</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x7B49</span>;&amp;<span class="symbol">#x5F85</span>;&amp;<span class="symbol">#x7EBF</span>;&amp;<span class="symbol">#x7A0B</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5219</span>;&amp;<span class="symbol">#x901A</span>;&amp;<span class="symbol">#x77E5</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x7EBF</span>;&amp;<span class="symbol">#x7A0B</span>;
    qnode.next.locked = <span class="keyword">false</span>;
    qnode.next = null;
}
</code></pre><p>NOTE:</p>
<ul>
<li>unlock()&#x8981;&#x8981;&#x7279;&#x522B;&#x7684;&#x6CE8;&#x610F;&#x3002;</li>
</ul>
<h3 id="Summary">Summary</h3><ul>
<li>CLHLock&#x7684;&#x601D;&#x60F3;&#x662F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5728;&#x524D;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;node&#x4E0A;spin&#xFF0C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;unlock&#x65F6;&#x4FEE;&#x6539;&#x81EA;&#x8EAB;&#x7684;&#x6807;&#x8BB0;&#x3002;<br>&#x5728;&#x5171;&#x4EAB;&#x603B;&#x7EBF;&#x7ED3;&#x6784;&#x4E0B;&#x6027;&#x80FD;&#x53EF;&#x4EE5;&#xFF0C;&#x65E0;&#x6CD5;&#x5E94;&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x3002;</li>
<li>MCSLock &#x7528;&#x4E8E;&#x89E3;&#x51B3;&#x5206;&#x5E03;&#x5F0F;&#x5E76;&#x884C;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x5728;&#x81EA;&#x5DF1;&#x7684;node&#x4E0A;spin&#xFF0C;&#x5F53;&#x91CA;&#x653E;&#x9501;&#x65F6;&#x901A;&#x77E5;<br>&#x540E;&#x9762;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</li>
</ul>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/NrMJJz">CUDA —— Dynamic Parallelism</a></li>
<li>2.<a href="/articles/miuIzi">C++&#x4E2D;&#x7684;&#x6307;&#x9488;&#x57FA;&#x7840;</a></li>
<li>3.<a href="/articles/JRnyi2Z">&#x5E38;&#x89C1;&#x9762;&#x8BD5;&#x9898;&#x7CFB;&#x5217;1&#x2014;&#x2014;&#x539F;&#x5730;&#x6D88;&#x9664;&#x5B57;&#x7B26;&#x4E32;&#x8FDE;&#x7EED;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;</a></li>
<li>4.<a href="/articles/uM3IN32">&#x4ECE;RTSP&#x534F;&#x8BAE;SDP&#x6570;&#x636E;&#x4E2D;&#x83B7;&#x5F97;&#x4E8C;&#x8FDB;&#x5236;&#x7684;SPS&#x3001;PPS</a></li>
<li>5.<a href="/articles/Yzuqe2">cdoj1092-&#x97E9;&#x7237;&#x7684;&#x68A6; &#xFF08;&#x5B57;&#x7B26;&#x4E32;hash&#xFF09;&#x3010;hash&#x3011;</a></li>
<li><p>6.<a href="/articles/22YV7fr">&#x5982;&#x4F55;&#x5B9A;&#x4F4D;Obj-C&#x91CE;&#x6307;&#x9488;&#x968F;&#x673A;Crash(&#x4E8C;)&#xFF1A;&#x8BA9;&#x975E;&#x5FC5;&#x73B0;Crash&#x53D8;&#x6210;&#x5FC5;&#x73B0;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/vuuUFjY">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;vuuUFjY&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法/">算法</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/edce003/" title="Aspose.Tasks for .NET 8.4.1 发布" itemprop="url">Aspose.Tasks for .NET 8.4.1 发布</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Aspose-Tasks_for_-NET_8-4-1_&#x53D1;&#x5E03;">Aspose.Tasks for .NET 8.4.1 &#x53D1;&#x5E03;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 07:38:12  <a href="/sites/JNzQre">&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x65B0;&#x95FB;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.oschina.net/news/63133/aspose-tasks-for-net-8-4-1?utm_source=tuicool" target="_blank" rel="external">http://www.oschina.net/news/63133/aspose-tasks-for-net-8-4-1</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11050000">.Net</a></p>
<p><a href="http://www.oschina.net/question/1765084_236572" target="_blank" rel="external">6&#x6708;14&#x65E5;&#x4E0A;&#x6D77; OSC &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x673A;&#x68B0;&#x952E;&#x76D8;&#x548C;&#x5F00;&#x6E90;&#x65E0;&#x7801;&#x5185;&#x88E4;</a></p>
<p>Aspose.Tasks for .NET 8.4.1 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x5305;&#x62EC;&#x65B0;&#x7279;&#x6027;&#xFF0C;&#x4E00;&#x4E9B; API &#x6539;&#x8FDB;&#x548C; bug &#x4FEE;&#x590D;&#x3002;&#x6B64;&#x7248;&#x672C;&#x4E3B;&#x8981;&#x65B0;&#x7279;&#x6027;&#xFF1A;&#x5173;&#x4E8E; Primavera MPX &#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x9605;&#x8BFB;&#x65B9;&#x9762;&#x7684;&#x65B0;&#x529F;&#x80FD;&#xFF1B;&#x4E3A; Resource Assignments &#x6DFB;&#x52A0;&#x4E86;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#x3002;</p>
<h3 id="&#x5176;&#x4ED6;&#x6539;&#x8FDB;">&#x5176;&#x4ED6;&#x6539;&#x8FDB;</h3><ul>
<li>Project Reading Exceptions while reading certain project files</li>
<li>Exception raised while reading slack values in scientific notation</li>
<li>Functional issue with calculation for working with 24-hour calendar</li>
<li>Issue with adding calendar to project</li>
</ul>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="http://www.aspose.com/blogs/aspose-products/aspose-tasks-product-family/archive/2015/06/05/reading-primavera-mpx-file-data-supported-with-aspose.tasks-for-.net-8.4.0.html" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a> &#x3002; </p>
<p>Aspose.Tasks &#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x9700;&#x56FE;&#x5F62;&#x5316;&#x73AF;&#x5883;&#x652F;&#x6301;&#x7684; .NET &#x9879;&#x76EE;&#x7BA1;&#x7406;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EF;&#x8BA9; .NET &#x5E94;&#x7528;&#x8BFB;&#x5199;&#x3001;&#x7BA1;&#x7406;&#x5FAE;&#x8F6F; Project &#x8F6F;&#x4EF6;&#x6240;&#x5236;&#x4F5C;&#x7684;&#x9879;&#x76EE;&#x7BA1;&#x7406;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x8BFB;&#x53D6;&#x548C;&#x4FEE;&#x6539;&#x4EFB;&#x52A1;&#x3001;&#x8D44;&#x6E90;&#x3001;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x3001;&#x5173;&#x7CFB;&#x548C;&#x65E5;&#x7A0B;&#x3002;Aspose.Tasks &#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x652F;&#x6301; WinForm &#x548C; WebForm &#x5E94;&#x7528;&#x3002;.</p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/nYriY3B">[.net &#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x57FA;&#x7840;] (14) &#x91CD;&#x6784;</a></li>
<li>2.<a href="/articles/mm6viyA">silverlight RIA Service&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x6C42;&#x52A9;</a></li>
<li>3.<a href="/articles/7RvaYf3">&#x7531;&#x4E00;&#x4E2A;&#x8BA2;&#x5355;&#x63A8;&#x9001;&#x60F3;&#x5230;&#x4E86;ObservableCollection&#x7684;&#x795E;&#x5947;&#x7528;&#x6CD5;</a></li>
<li>4.<a href="/articles/eQnUFv6">&#x54B8;&#x86CB;&#x7CFB;&#x5217;&#x4E00;&#x25CF;&#x300A;&#x968F;&#x673A;&#x6570;&#x751F;&#x6210;&#x7BC7;&#x300B;1 &#x5E8F;</a></li>
<li>5.<a href="/articles/I3iU3e">&#x7F16;&#x7A0B;&#x6A21;&#x62DF;&#x81EA;&#x7136;(&#x4E00;)&#xFF1A;&#x5982;&#x4F55;&#x753B;&#x4E00;&#x9897;&#x9759;&#x6001;&#x6811;</a></li>
<li><p>6.<a href="/articles/73UVNfY">Mock session,cookie,querystring in ASB.NET MVC</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/RJrUN3F">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;RJrUN3F&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/edcceec/" title="OWebl 0.2 发布，OCaml 的 Web 框架" itemprop="url">OWebl 0.2 发布，OCaml 的 Web 框架</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="OWebl_0-2_&#x53D1;&#x5E03;&#xFF0C;OCaml_&#x7684;_Web_&#x6846;&#x67B6;">OWebl 0.2 &#x53D1;&#x5E03;&#xFF0C;OCaml &#x7684; Web &#x6846;&#x67B6;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 07:54:18  <a href="/sites/JNzQre">&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x65B0;&#x95FB;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.oschina.net/news/63142/owebl-0-2?utm_source=tuicool" target="_blank" rel="external">http://www.oschina.net/news/63142/owebl-0-2</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11080091">OCaml</a></p>
<p><a href="http://www.oschina.net/question/1765084_236572" target="_blank" rel="external">6&#x6708;14&#x65E5;&#x4E0A;&#x6D77; OSC &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x673A;&#x68B0;&#x952E;&#x76D8;&#x548C;&#x5F00;&#x6E90;&#x65E0;&#x7801;&#x5185;&#x88E4;</a></p>
<p>OWebl &#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684; OCaml &#x7684; Web &#x6846;&#x67B6;&#x3002;</p>
<p>OWebl 0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x5E93;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x5F00;&#x59CB;&#x5F00;&#x53D1; <a href="https://github.com/eatonphil/recore" target="_blank" rel="external">Recore</a> &#x5E93;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x66F4;&#x9AD8;&#x7EA7;&#x522B;&#x7684; API &#x7ED9;&#x7528;&#x6237;&#x3002;&#x540C;&#x65F6;&#x8FD8;&#x5F15;&#x5165;&#x4E86;&#xA0; <a href="https://github.com/eatonphil/ostd" target="_blank" rel="external">OSTD</a> &#xFF0C;&#x8FD9;&#x4E2A;&#x5E93;&#x5305;&#x62EC;&#x8BA1;&#x5212;&#x5F15;&#x5165;&#x7684;&#x6240;&#x6709;&#x6807;&#x51C6;&#x6A21;&#x677F;&#x7279;&#x6027;&#x3002;&#x540C;&#x65F6;&#x4E5F;&#x5F15;&#x5165;&#x4E86; Humps &#x6587;&#x4EF6;&#x7684;&#x89C4;&#x8303;&#x3002; </p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x63D0;&#x9AD8;&#x4E86;&#x53EF;&#x9605;&#x8BFB;&#x6027;&#x3002;</p>
<p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x6539;&#x8FDB;&#xFF1A; </p>
<ul>
<li><p>Added manditory cache headers (Cache-Control and Last-Modified) to files served.</p>
<ul>
<li>If-Modified-Since header is in the pipeline</li>
</ul>
</li>
<li><p>Removed template root directory from file and template responses</p>
</li>
<li>Added support for many file mime types</li>
<li>Began moving API calls to camel-case</li>
<li>Transitioned from Utils module to Recore</li>
<li>Switch from template markers ` to beginning and end markers &quot;&quot;</li>
</ul>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/eatonphil/owebl/releases/tag/v0.2" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a> &#xFF0C;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/eatonphil/owebl/releases/download/v0.2/owebl_v0.2.tar.gz" target="_blank" rel="external"><strong>owebl_v0.2.tar.gz</strong></a> &#x3002; </p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/NF7bUb3">&#x7B14;&#x8BB0;, Cirru Table Redo &#x5931;&#x8D25;, &#x7ECF;&#x9A8C;&#x6559;&#x8BAD;</a></li>
<li>2.<a href="/articles/NjUB7b">Fibonacci&#x6570;&#x5217;&#x6027;&#x8D28;&#x7684;&#x7EC4;&#x5408;&#x8BC1;&#x660E;</a></li>
<li>3.<a href="/articles/QbYRb2I">Unity3d &#x83B7;&#x53D6;&#x5C4F;&#x5E55;depth&#x4E0E;normal</a></li>
<li>4.<a href="/articles/NnIrmaA">&#x7231;&#x7ACB;&#x4FE1;&#x5F00;&#x6E90;&#x7269;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#xFF1A;Calvin</a></li>
<li>5.<a href="/articles/yQJ3Ynq">Rosenbrock Function</a></li>
<li><p>6.<a href="/articles/JrMfMvq">golang&#x4E2D;map&#x7684;&#x6392;&#x5E8F;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/VbuUjeJ">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;VbuUjeJ&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/OCaml/">OCaml</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/edcb8f3/" title="Git 2.4.3 发布" itemprop="url">Git 2.4.3 发布</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Git_2-4-3_&#x53D1;&#x5E03;">Git 2.4.3 &#x53D1;&#x5E03;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 07:54:37  <a href="/sites/JNzQre">&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x65B0;&#x95FB;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.oschina.net/news/63143/git-2-4-3?utm_source=tuicool" target="_blank" rel="external">http://www.oschina.net/news/63143/git-2-4-3</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11090032">Git</a></p>
<p><a href="http://www.oschina.net/question/1765084_236572" target="_blank" rel="external">6&#x6708;14&#x65E5;&#x4E0A;&#x6D77; OSC &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x673A;&#x68B0;&#x952E;&#x76D8;&#x548C;&#x5F00;&#x6E90;&#x65E0;&#x7801;&#x5185;&#x88E4;</a></p>
<p>Git 2.4.3 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li>Error messages from &quot;git branch&quot; called remote-tracking branches as</li>
</ul>
<p>&quot;remote branches&quot;.</p>
<ul>
<li>&quot;git rerere forget&quot; in a repository without rerere enabled gave a</li>
</ul>
<p>cryptic error message; it should be a silent no-op instead.</p>
<ul>
<li>&quot;git pull —log&quot; and &quot;git pull —no-log&quot; worked as expected, but</li>
</ul>
<p>&quot;git pull —log=20&quot; did not.</p>
<ul>
<li>The pull.ff configuration was supposed to override the merge.ff</li>
</ul>
<p>configuration, but it didn&apos;t.</p>
<ul>
<li>The code to read pack-bitmap wanted to allocate a few hundred</li>
</ul>
<p>pointers to a structure, but by mistake allocated and leaked memory</p>
<p>enough to hold that many actual structures.</p>
<ul>
<li>Various documentation mark-up fixes to make the output more</li>
</ul>
<p>consistent in general and also make AsciiDoctor (an alternative</p>
<p>formatter) happier.</p>
<ul>
<li>&quot;git bundle verify&quot; did not diagnose extra parameters on the</li>
</ul>
<p>command line.</p>
<ul>
<li>Multi-ref transaction support we merged a few releases ago</li>
</ul>
<p>unnecessarily kept many file descriptors open, risking to fail with</p>
<p>resource exhaustion.</p>
<ul>
<li>The ref API did not handle cases where &apos;refs/heads/xyzzy/frotz&apos; is</li>
</ul>
<p>removed at the same time as &apos;refs/heads/xyzzy&apos; is added (or vice</p>
<p>versa) very well.</p>
<ul>
<li>The &quot;log —decorate&quot; enhancement in Git 2.4 that shows the commit</li>
</ul>
<p>at the tip of the current branch e.g. &quot;HEAD -&gt; master&quot;, did not</p>
<p>work with —decorate=full.</p>
<ul>
<li>There was a commented-out (instead of being marked to expect</li>
</ul>
<p>failure) test that documented a breakage that was fixed since the</p>
<p>test was written; turn it into a proper test.</p>
<ul>
<li>core.excludesfile (defaulting to $XDG_HOME/git/ignore) is supposed</li>
</ul>
<p>to be overridden by repository-specific .git/info/exclude file, but</p>
<p>the order was swapped from the beginning. This belatedly fixes it.</p>
<ul>
<li>The connection initiation code for &quot;ssh&quot; transport tried to absorb</li>
</ul>
<p>differences between the stock &quot;ssh&quot; and Putty-supplied &quot;plink&quot; and</p>
<p>its derivatives, but the logic to tell that we are using &quot;plink&quot;</p>
<p>variants were too loose and falsely triggered when &quot;plink&quot; appeared</p>
<p>anywhere in the path (e.g. &quot;/home/me/bin/uplink/ssh&quot;).</p>
<ul>
<li>&quot;git rebase -i&quot; moved the &quot;current&quot; command from &quot;todo&quot; to &quot;done&quot; a</li>
</ul>
<p>bit too prematurely, losing a step when a &quot;pick&quot; did not even start.</p>
<ul>
<li>&quot;git add -e&quot; did not allow the user to abort the operation by</li>
</ul>
<p>killing the editor.</p>
<ul>
<li>Git 2.4 broke setting verbosity and progress levels on &quot;git clone&quot;</li>
</ul>
<p>with native transports.</p>
<ul>
<li>Some time ago, &quot;git blame&quot; (incorrectly) lost the convert_to_git()</li>
</ul>
<p>call when synthesizing a fake &quot;tip&quot; commit that represents the</p>
<p>state in the working tree, which broke folks who record the history</p>
<p>with LF line ending to make their project portabile across</p>
<p>platforms while terminating lines in their working tree files with</p>
<p>CRLF for their platform.</p>
<ul>
<li>Code clean-up for xdg configuration path support.</li>
</ul>
<p>&#x6B64;&#x5916;&#x8FD8;&#x5305;&#x62EC;&#x5E38;&#x89C4;&#x4FEE;&#x590D;&#xFF0C;&#x6587;&#x6863;&#x66F4;&#x65B0;&#x548C;&#x4EE3;&#x7801;&#x6E05;&#x7406;&#x3002;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/git/git/archive/v2.4.3.zip" target="_blank" rel="external">https://github.com/git/git/archive/v2.4.3.zip</a> &#x3002; </p>
<p>Git&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7248;&#x672C;&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#xFF0C;&#x7528;&#x4EE5;&#x6709;&#x6548;&#x3001;&#x9AD8;&#x901F;&#x7684;&#x5904;&#x7406;&#x4ECE;&#x5F88;&#x5C0F;&#x5230;&#x975E;&#x5E38;&#x5927;&#x7684;&#x9879;&#x76EE;&#x7248;&#x672C;&#x7BA1;&#x7406;&#x3002;</p>
<p> <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD; Git &#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5E73;&#x53F0;</strong> &#xFF1A; <a href="http://git.oschina.net/" target="_blank" rel="external">http://git.oschina.net/</a></p>
<p><img src="http://img0.tuicool.com/FBnyiq.png" alt=""></p>
<p>Windows&#x4E0B;&#x7684;Git&#x8BF7;&#x770B;&#x8FD9;&#x91CC;&#xFF1A; <a href="http://www.oschina.net/p/msysgit" target="_blank" rel="external">http://www.oschina.net/p/msysgit</a></p>
<p>Git &#x662F; Linus Torvalds &#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x7BA1;&#x7406; Linux &#x5185;&#x6838;&#x5F00;&#x53D1;&#x800C;&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x4E2A;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x7684;&#x7248;&#x672C;&#x63A7;&#x5236;&#x8F6F;&#x4EF6;&#x3002;</p>
<p>Torvalds &#x5F00;&#x59CB;&#x7740;&#x624B;&#x5F00;&#x53D1; Git &#x662F;&#x4E3A;&#x4E86;&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x8FC7;&#x6E21;&#x65B9;&#x6848;&#x6765;&#x66FF;&#x4EE3; BitKeeper&#xFF0C;&#x540E;&#x8005;&#x4E4B;&#x524D;&#x4E00;&#x76F4;&#x662F; Linux &#x5185;&#x6838;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x5168;&#x7403;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x8981;&#x6E90;&#x4EE3;&#x7801;&#x5DE5;&#x5177;&#x3002;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x793E;&#x533A;&#x4E2D;&#x7684;&#x6709;&#x4E9B;&#x4EBA;&#x89C9;&#x5F97; BitKeeper &#x7684;&#x8BB8;&#x53EF;&#x8BC1;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x793E;&#x533A;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64; Torvalds &#x51B3;&#x5B9A;&#x7740;&#x624B;&#x7814;&#x7A76;&#x8BB8;&#x53EF;&#x8BC1;&#x66F4;&#x4E3A;&#x7075;&#x6D3B;&#x7684;&#x7248;&#x672C;&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#x3002;&#x5C3D;&#x7BA1;&#x6700;&#x521D; Git &#x7684;&#x5F00;&#x53D1;&#x662F;&#x4E3A;&#x4E86;&#x8F85;&#x52A9; Linux &#x5185;&#x6838;&#x5F00;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x5728;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x81EA;&#x7531;&#x8F6F;&#x4EF6;&#x9879;&#x76EE;&#x4E2D;&#x4E5F;&#x4F7F;&#x7528;&#x4E86; Git&#x3002;&#x4F8B;&#x5982;&#xFF0C;X.org &#x6700;&#x8FD1;&#x5C31;&#x8FC1;&#x79FB;&#x5230; Git &#x4E0A;&#x6765;&#x4E86;&#xFF0C;&#x5F88;&#x591A; Freedesktop.org &#x7684;&#x9879;&#x76EE;&#x4E5F;&#x8FC1;&#x79FB;&#x5230;&#x4E86; Git &#x4E0A;&#x3002;</p>
<h2 id="Git&#x4E0E;CVS&#x7684;&#x533A;&#x522B;">Git&#x4E0E;CVS&#x7684;&#x533A;&#x522B;</h2><ul>
<li>&#x5206;&#x652F;&#x66F4;&#x5FEB;&#x3001;&#x66F4;&#x5BB9;&#x6613;&#x3002;</li>
<li>&#x652F;&#x6301;&#x79BB;&#x7EBF;&#x5DE5;&#x4F5C;&#xFF1B;&#x672C;&#x5730;&#x63D0;&#x4EA4;&#x53EF;&#x4EE5;&#x7A0D;&#x540E;&#x63D0;&#x4EA4;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;</li>
<li>Git &#x63D0;&#x4EA4;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;&#x4E14;&#x662F;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x8303;&#x56F4;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x50CF; CVS &#x4E2D;&#x4E00;&#x6837;&#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x3002;</li>
<li>Git &#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5DE5;&#x4F5C;&#x6811;&#x90FD;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x5B8C;&#x6574;&#x9879;&#x76EE;&#x5386;&#x53F2;&#x7684;&#x4ED3;&#x5E93;&#x3002;</li>
<li>&#x6CA1;&#x6709;&#x54EA;&#x4E00;&#x4E2A; Git &#x4ED3;&#x5E93;&#x4F1A;&#x5929;&#x751F;&#x6BD4;&#x5176;&#x4ED6;&#x4ED3;&#x5E93;&#x66F4;&#x91CD;&#x8981;&#x3002;</li>
</ul>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/BvaIFna">Nginx+Keepalived&#x5B9E;&#x73B0;&#x7AD9;&#x70B9;&#x9AD8;&#x53EF;&#x7528;</a></li>
<li>2.<a href="/articles/An67f2f">&#x8D85;&#x6162;&#x7684; Facebook…</a></li>
<li>3.<a href="/articles/jiIBf2y">SharePoint 2013 &#x642D;&#x5EFA;&#x8D1F;&#x8F7D;&#x5747;&#x8861;(NLB)</a></li>
<li>4.<a href="/articles/va2QV3m">Git &#x7248;&#x672C;&#x63A7;&#x5236;&#x4E0E;&#x5DE5;&#x4F5C;&#x6D41;</a></li>
<li>5.<a href="/articles/iyuUfm">gorouter&#x8C03;&#x7814;</a></li>
<li><p>6.<a href="/articles/bEruuyz">gorouter &#x5B89;&#x88C5;&#x90E8;&#x7F72;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/rieyyu">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;rieyyu&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Git/">Git</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/edc881f/" title="笔记, Cirru Table Redo 失败, 经验教训" itemprop="url">笔记, Cirru Table Redo 失败, 经验教训</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T01:45:51.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x7B14;&#x8BB0;,_Cirru_Table_Redo_&#x5931;&#x8D25;,_&#x7ECF;&#x9A8C;&#x6559;&#x8BAD;">&#x7B14;&#x8BB0;, Cirru Table Redo &#x5931;&#x8D25;, &#x7ECF;&#x9A8C;&#x6559;&#x8BAD;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 08:53:26  <a href="/sites/3uEjYv">segmentfault-&#x535A;&#x5BA2;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://segmentfault.com/a/1190000002882642?utm_source=tuicool" target="_blank" rel="external">http://segmentfault.com/a/1190000002882642</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000151">&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;</a></p>
<h3 id="&#x7F18;&#x8D77;">&#x7F18;&#x8D77;</h3><p>&#x524D;&#x9762;&#x4E24;&#x5468;&#x82B1;&#x4E86;&#x4E00;&#x4E9B;&#x7CBE;&#x529B;&#x65AD;&#x65AD;&#x7EED;&#x7EED;&#x53BB;&#x60F3;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;:</p>
<p>Cirru Table Redo: <a href="https://github.com/Cirru/cirru-table-redo" target="_blank" rel="external">https://github.com/Cirru/cirru-table-redo</a></p>
<p>&#x672C;&#x6765;&#x7684;&#x76EE;&#x6807;&#x662F;&#x505A;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x9884;&#x89C8;&#x6BCF;&#x4E2A;&#x503C;&#x7684;&#x89E3;&#x91CA;&#x5668;&#x7684; Demo&#x4ECE;&#x524D;&#x505A;&#x8FC7;&#x4E24;&#x4E2A;&#x7248;&#x672C;, &#x4E5F;&#x662F;&#x5728;&#x5FAE;&#x535A;&#x8BB0;&#x5F55;&#x5F53;&#x4E2D;&#x56DE;&#x5FC6;&#x624D;&#x840C;&#x751F;&#x5FF5;&#x5934;&#x7684;: </p>
<p>Cirru Live Editing: <a href="http://www.tudou.com/programs/view/SWKnhfmduos/" target="_blank" rel="external">http://www.tudou.com/programs/view/SWKnhfmduos/</a></p>
<p>Cirru Table: <a href="http://www.tudou.com/programs/view/mHypUOnZSOI/" target="_blank" rel="external">http://www.tudou.com/programs/view/mHypUOnZSOI/</a></p>
<p>&#x5728; Live Editing &#x7684;&#x4F8B;&#x5B50;&#x91CC;, &#x6211;&#x8BD5;&#x9A8C;&#x4E86;&#x6709;&#x4E00;&#x4E2A;&#x5168;&#x5C40; Mutable Scope,</p>
<p>&#x7136;&#x540E;&#x4EE3;&#x7801;&#x4E00;&#x904D;&#x6E32;&#x67D3;&#x4E00;&#x904D;&#x4F1A;&#x4FEE;&#x6539; Scope, &#x4E8E;&#x662F;&#x4EE3;&#x7801;&#x540C;&#x65F6;&#x4F1A;&#x663E;&#x793A;&#x6BCF;&#x4E2A;&#x503C;.</p>
<p>&#x5F53;&#x65F6;&#x7684; commit &#x6CA1;&#x53BB;&#x627E;&#x662F;&#x54EA;&#x4E00;&#x4E2A;, &#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x770B;&#x4E0D;&#x6E05;&#x6670;&#x7684;&#x89C6;&#x9891;&#x4E86;</p>
<p>Cirru Table &#x5F53;&#x4E2D;&#x5462;, &#x5219;&#x662F;&#x628A;&#x89E3;&#x91CA;&#x8FC7;&#x7A0B;&#x6574;&#x4E2A;&#x8BB0;&#x5F55;&#x7136;&#x540E;&#x7528;&#x6811;&#x5C55;&#x793A;&#x51FA;&#x6765;</p>
<p>&#x6548;&#x679C;&#x5BF9;&#x6211;&#x81EA;&#x5DF1;&#x6765;&#x662F;&#x662F;&#x633A;&#x68D2;&#x7684;, &#x53EA;&#x4E0D;&#x8FC7;&#x5177;&#x4F53;&#x5230;&#x7A0B;&#x5E8F;, &#x4E0D;&#x53EF;&#x80FD;&#x505A;&#x5230;&#x8BB0;&#x5F55;&#x5168;&#x90E8;&#x6267;&#x884C;&#x8FC7;&#x7A0B;</p>
<p>Chrome Profiler &#x5F53;&#x4E2D; Flame Graph &#x6709;&#x7C7B;&#x4F3C;, &#x4F46;&#x6050;&#x6015;&#x4E5F;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#x5168;&#x90E8;&#x6570;&#x636E;</p>
<p>&#x4E0D;&#x8FC7;&#x6211;&#x89C9;&#x5F97;&#x7B49;&#x786C;&#x4EF6;&#x6027;&#x80FD;&#x4E0A;&#x53BB;&#x4E86;&#x5012;&#x662F;&#x503C;&#x5F97;&#x8003;&#x8651;&#x4E0B;, &#x800C;&#x4E14;&#x5F15;&#x5165;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x624B;&#x6CD5;&#x4F18;&#x5316;&#x4E0B;</p>
<p>&#x4F5C;&#x4E3A;&#x6982;&#x5FF5;&#x6F14;&#x793A;, &#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x4E86;, &#x6211;&#x4E0D;&#x7BA1;&#x4E86;, &#x53EA;&#x662F;&#x60F3;&#x5C1D;&#x8BD5;&#x70B9;&#x522B;&#x7684;</p>
<p><img src="http://img0.tuicool.com/A7n632b.jpg" alt=""></p>
<h3 id="&#x5931;&#x8D25;&#x7684;&#x76EE;&#x6807;">&#x5931;&#x8D25;&#x7684;&#x76EE;&#x6807;</h3><p>&#x90A3;&#x4E48;&#x6211;&#x6709;&#x65B0;&#x7684;&#x60F3;&#x6CD5;&#x4E86;, &#x8BD5;&#x8BD5;&#x7528;&#x65B0;&#x7684;&#x529E;&#x6CD5;&#x6765;&#x6F14;&#x793A;, &#x6BD4;&#x5982;&#x8BF4;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x6BB5;&#x811A;&#x672C;:</p>
<pre><code>cirrudefine <span class="list">(<span class="keyword">add</span> x y)</span> <span class="list">(<span class="keyword">+</span> x y)</span>
define <span class="list">(<span class="keyword">main</span>)</span>
  print <span class="list">(<span class="keyword">add</span> <span class="number">1</span> <span class="number">2</span>)</span>
</code></pre><p>&#x5C31;&#x50CF; Chris Granger &#x6307;&#x51FA;&#x7684;, <strong>&#x62BD;&#x8C61;&#x7684;&#x53D8;&#x91CF;&#x662F;&#x7A0B;&#x5E8F;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x7684;&#x539F;&#x56E0;</strong></p>
<p>&#x56E0;&#x4E3A;&#x4F60;&#x6839;&#x672C;&#x4E0D;&#x77E5;&#x9053;&#x53D8;&#x91CF;&#x91CC;&#x8FB9;&#x662F;&#x4EC0;&#x4E48;, &#x53EA;&#x80FD;&#x4E00;&#x8FB9;&#x8111;&#x8865;&#x4E00;&#x8FB9;&#x5199;&#x4EE3;&#x7801;, &#x9519;&#x4E86;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;</p>
<p>&#x90A3;&#x6211;&#x7684;&#x65B9;&#x6848;&#x9996;&#x5148;&#x662F;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x8FC7;&#x7A0B;&#x5F53;&#x4E2D;&#x5E94;&#x8BE5;&#x628A;&#x5177;&#x4F53;&#x7684;&#x6570;&#x503C;&#x663E;&#x793A;&#x51FA;&#x6765;</p>
<p>&#x5C31;&#x7B97;&#x5199; test case &#x4E5F;&#x53EA;&#x662F;&#x7ED9;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x6570;&#x636E;&#x5427;, &#x4E0D;&#x5982;&#x76F4;&#x63A5;&#x5728;&#x7A0B;&#x5E8F;&#x5F53;&#x4E2D;&#x7ED9;:</p>
<pre><code><span class="string">cirrudefine:</span>Builtin (<span class="string">add:</span>Symbol <span class="string">x:</span><span class="number">1</span> <span class="string">y:</span><span class="number">2</span>)
  +:Builtin <span class="string">x:</span><span class="number">1</span> <span class="string">y:</span><span class="number">2</span>
</code></pre><p>&#x4E3A;&#x4E86;&#x6574;&#x5957;&#x4E1C;&#x897F;&#x80FD;&#x8FD0;&#x884C;, &#x6211;&#x9700;&#x8981;&#x5F15;&#x5165; suppose &#x51FD;&#x6570;, &#x5199;&#x4E0A;&#x521D;&#x59CB;&#x7684;&#x53D8;&#x91CF; </p>
<p>suppose &#x7684;&#x4F5C;&#x7528;, &#x662F;&#x5728;&#x5F00;&#x53D1;&#x65F6;&#x63D0;&#x4F9B;&#x56FE;&#x5F62;&#x5316;&#x7684;&#x6570;&#x636E;, &#x800C;&#x5728;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x65F6;&#x6D88;&#x5931; </p>
<p>&#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x7ECF;&#x8FC7;&#x6CE8;&#x91CA;, &#x6587;&#x5B57;&#x7248;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>
<pre><code><span class="attribute">cirrusuppose</span>:Built (<span class="attribute">add</span>:Symbol <span class="number">1</span>:<span class="number">1</span> <span class="number">2</span>:<span class="number">2</span>)

<span class="attribute">define</span>:Builtin (<span class="attribute">add</span>:Symbol <span class="attribute">x</span>:<span class="number">1</span> <span class="attribute">y</span>:<span class="number">2</span>)
  +:Builtin <span class="attribute">x</span>:<span class="number">1</span> <span class="attribute">y</span>:<span class="number">2</span>

<span class="attribute">define</span>:Builtin (<span class="attribute">main</span>:Symbol)
  <span class="attribute">print</span>:Builtin (<span class="attribute">add</span>:Func <span class="number">1</span>:<span class="number">1</span> <span class="number">2</span>:<span class="number">2</span>)
</code></pre><p>&#x57FA;&#x4E8E;&#x8FD9;&#x6837;&#x7684;&#x601D;&#x8DEF;, &#x62C6;&#x5206;&#x51FA;&#x6765;&#x5B50;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x4E9B;:</p>
<ul>
<li>&#x9700;&#x8981;&#x6709;&#x57FA;&#x672C;&#x7684;&#x89E3;&#x91CA;&#x5668;, &#x6BD4;&#x5982; add &#x8C03;&#x7528;&#x65F6;&#x76F4;&#x63A5;&#x80FD;&#x8FD0;&#x884C; (&#x641E;&#x5B9A; Demo)</li>
<li>&#x9700;&#x8981;&#x5728;&#x6E32;&#x67D3; DOM &#x65F6;&#x4E5F;&#x80FD;&#x89E3;&#x91CA;, &#x5199;&#x53E6;&#x4E00;&#x4EFD;&#x89E3;&#x91CA;&#x5668; (&#x601D;&#x8DEF;&#x7406;&#x6E05;, &#x6CA1;&#x641E;&#x5B9A;&#x7279;&#x4F8B;)</li>
<li>&#x9700;&#x8981;&#x641E;&#x5B9A;&#x8BFB;&#x5199;&#x6587;&#x4EF6;&#x63A5;&#x53E3;&#x7684;&#x6570;&#x636E;&#x6A21;&#x62DF; (&#x601D;&#x8DEF;&#x7406;&#x6E05;, &#x6CA1;&#x5B9E;&#x73B0;)</li>
<li>&#x9700;&#x8981;&#x8003;&#x8651;&#x533F;&#x540D;&#x51FD;&#x6570;&#x7684;&#x4F7F;&#x7528;, &#x5185;&#x90E8;&#x7684;&#x6570;&#x636E;&#x600E;&#x6837;&#x6A21;&#x62DF; (&#x601D;&#x8DEF;&#x6CA1;&#x6709;&#x7406;&#x51FA;&#x6765;)</li>
</ul>
<p>&#x73B0;&#x5728;&#x611F;&#x89C9;&#x8FD9;&#x4E2A;&#x5751;&#x5DF2;&#x7ECF;&#x592A;&#x5927;&#x4E86;, &#x76EE;&#x524D;&#x80FD;&#x529B;&#x8FDC;&#x8FDC;&#x4E0D;&#x591F;, &#x6253;&#x7B97;&#x5FEB;&#x70B9;&#x8DF3;&#x51FA;&#x6765;</p>
<p>&#x5F53;&#x7136;&#x6211;&#x4F9D;&#x7136;&#x5BF9;&#x6B64;&#x4FDD;&#x6301;&#x5F3A;&#x70C8;&#x7684;&#x5174;&#x8DA3;, &#x4E5F;&#x662F;&#x6211;&#x4E3A;&#x4EC0;&#x4E48;&#x5931;&#x8D25;&#x4E86;&#x8FD8;&#x7559;&#x7B14;&#x8BB0;</p>
<p>&#x5982;&#x679C;&#x6709;&#x540C;&#x5B66;&#x5BF9;&#x6B64;&#x611F;&#x5174;&#x8DA3;&#x7EE7;&#x7EED;&#x63A2;&#x7D22;&#x5C31;&#x6709;&#xFFFD;&#xFFFD;&#xFFFD;&#x601D;&#x4E86;.. &#x5F53;&#x7136;&#x5F88;&#x53EF;&#x80FD;&#x5931;&#x8D25;</p>
<p>&#x524D;&#x4E9B;&#x5929;&#x770B;&#x5230;&#x8FD9;&#x53E5;&#x8BDD;, &#x53EF;&#x4EE5;&#x5171;&#x52C9;&#x4E00;&#x4E0B;:</p>
<p><a href="http://weibo.com/1651843872/Cl1Cl2hKI" target="_blank" rel="external">http://weibo.com/1651843872/Cl1Cl2hKI</a></p>
<p>If you don&apos;t fail at least 90 percent of the time, you&apos;re not aiming high enough.— Alan Kay </p>
<h3 id="Live_Coding">Live Coding</h3><p>&#x5173;&#x4E8E;&#x600E;&#x6837;&#x8BA9;&#x7F16;&#x7A0B;&#x66F4;&#x52A0;&#x7B80;&#x5355;, &#x66F4;&#x52A0;&#x53EF;&#x9760;, &#x793E;&#x533A;&#x5DF2;&#x7ECF;&#x6295;&#x5165;&#x4E86;&#x5F88;&#x591A;&#x7814;&#x7A76;</p>
<p>&#x7279;&#x522B;&#x662F;&#x524D;&#x9762;&#x7684; Chris Granger &#x7684;&#x4F5C;&#x54C1;, &#x90FD;&#x662F;&#x5F88;&#x53D1;&#x4EBA;&#x6DF1;&#x7701;&#x7684;</p>
<p>&#x4ED6;&#x8BBE;&#x8BA1;&#x7684; LightTable &#x5F53;&#x4E2D;&#x5C31;&#x5728;&#x591A;, &#x4E0D;&#x8FC7;&#x5177;&#x4F53;&#x5BF9;&#x5E94;&#x8FD9;&#x91CC;&#x7684;&#x662F;:</p>
<p>Inline Evaluation: <a href="http://docs.lighttable.com/tutorials/full/#inline-evaluation" target="_blank" rel="external">http://docs.lighttable.com/tutorials/full/#inline-evaluation</a></p>
<p>&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x5E0C;&#x671B;&#x80FD;&#x6709;&#x5BF9;&#x66F4;&#x5927;&#x7684;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x6848;, &#x5355;&#x884C;&#x7684;&#x6709;&#x70B9;&#x4E0D;&#x591F;</p>
<p>&#x4E0D;&#x7BA1;&#x600E;&#x4E48;&#x8BF4; LightTable &#x8DDF; Swift &#x51FA;&#x73B0;&#x5728;&#x6211;&#x9762;&#x524D;&#x65F6;&#x8FD8;&#x662F;&#x5F88;&#x6B63;&#x9707;&#x60CA;&#x7684;</p>
<p>&#x5927;&#x6982;&#x56E0;&#x4E3A;&#x6211;&#x5B8C;&#x5168;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x6837;&#x53BB;&#x5B9E;&#x73B0;&#x5427;.. Anyway, &#x4EE5;&#x540E;&#x4F1A;&#x6709;&#x66F4;&#x5F3A;&#x5927;&#x7684;</p>
<p>Bret Victor &#x5728;&#x6613;&#x5B66;&#x7F16;&#x7A0B;&#x5F53;&#x4E2D;&#x6F14;&#x793A;&#x7684;&#x5C31;&#x771F;&#x7684;&#x5BF9;&#x56FE;&#x5F62;&#x5F00;&#x53D1;&#x8005;&#x975E;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x4E86;</p>
<p>&#x56E0;&#x4E3A;&#x80FD;&#x6E05;&#x695A;&#x7406;&#x89E3;&#x6BCF;&#x4E00;&#x884C;&#x7A0B;&#x5E8F;&#x53D1;&#x6325;&#x600E;&#x6837;&#x7684;&#x4F5C;&#x7528;&#x7684;&#x8BDD;, &#x5BF9;&#x5F00;&#x53D1;&#x6765;&#x8BF4;&#x4F1A;&#x6E05;&#x6670;&#x5F88;&#x591A;</p>
<p>&#x5177;&#x4F53;&#x770B;&#x539F;&#x6587;&#x5427;, &#x6216;&#x8005;&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#x53EF;&#x4EE5;&#x7684;:</p>
<p>Learnable Programming: <a href="http://worrydream.com/LearnableProgramming/" target="_blank" rel="external">http://worrydream.com/LearnableProgramming/</a></p>
<p>(&#x7FFB;&#x8BD1;)&#x6613;&#x5B66;&#x7F16;&#x7A0B;: <a href="http://chengyichao.info/learnable-programming/" target="_blank" rel="external">http://chengyichao.info/learnable-programming/</a></p>
<p>&#x603B;&#x4E4B;&#x5C31;&#x662F;, &#x8BA9;&#x7A0B;&#x5E8F;&#x8131;&#x79BB;&#x62BD;&#x8C61;, &#x80FD;&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x975E;&#x5E38;&#x76F4;&#x89C2;&#x5730;&#x7406;&#x89E3;, &#x8FD9;&#x5F88;&#x91CD;&#x8981;</p>
<h3 id="&#x811A;&#x672C;&#x548C;&#x9759;&#x6001;&#x7C7B;&#x578B;">&#x811A;&#x672C;&#x548C;&#x9759;&#x6001;&#x7C7B;&#x578B;</h3><p>&#x4E2D;&#x95F4;&#x6709;&#x4E2A;&#x601D;&#x8003;, &#x5C31;&#x662F;: &#x7A0B;&#x5E8F;&#x8D8A;&#x5927;, &#x8D8A;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x62BD;&#x8C61;&#x673A;&#x5236;, &#x4E5F;&#x8D8A;&#x53D1;&#x96BE;&#x61C2;</p>
<p>&#x9996;&#x5148;&#x6570;&#x636E;&#x7684;&#x62BD;&#x8C61;, &#x8FC7;&#x7A0B;&#x7684;&#x62BD;&#x8C61;, &#x5728;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x5F53;&#x4E2D;&#x662F;&#x81F3;&#x5173;&#x91CD;&#x8981;&#x7684;</p>
<p>&#x5176;&#x6B21;&#x624D;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x8BA9;&#x7A0B;&#x5E8F;&#x66F4;&#x597D;&#x61C2;, &#x6709;&#x4E0D;&#x9AD8;&#x7684;&#x7EF4;&#x62A4;&#x6210;&#x672C;, &#x7136;&#x800C;&#x4E24;&#x8005;&#x5E38;&#x5E38;&#x80CC;&#x9053;&#x800C;&#x9A70;</p>
<p>&#x6BD4;&#x5982;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B; Monad &#x62BD;&#x8C61;&#x7A0B;&#x5EA6;&#x5F88;&#x9AD8;, &#x7406;&#x89E3;&#x8D77;&#x6765;&#x6781;&#x96BE;</p>
<p>&#x811A;&#x672C;&#x8BED;&#x8A00;&#x8BA1;&#x5212;&#x56E0;&#x4E3A;&#x77ED;&#x5C0F;, &#x62BD;&#x8C61;&#x4E0D;&#x9AD8;, &#x4F46;&#x4E5F;&#x56E0;&#x6B64;&#x7ECF;&#x5E38;&#x51FA;&#x9519;, &#x53EA;&#x80FD;&#x4ECE; Log &#x8C03;&#x8BD5;</p>
<p>&#x5BF9;&#x4E8E;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x6211;&#x53C8;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x79CD;&#x7406;&#x89E3;, &#x5C31;&#x662F;&#x811A;&#x672C;&#x5B9E;&#x9645;&#x5199;&#x7684;&#x662F;&#x4E0D;&#x51FA;&#x9519;&#x7684;&#x60C5;&#x51B5;</p>
<p>&#x5C31;&#x662F;&#x8BF4;&#x5047;&#x8BBE;&#x7A0B;&#x5E8F;&#x4E0D;&#x4F1A;&#x9047;&#x5230;&#x5947;&#x602A;&#x7684;&#x6570;&#x636E;, &#x90A3;&#x4E48;&#x5148;&#x8FD9;&#x6837;, &#x518D;&#x90A3;&#x4E48;, &#x5E94;&#x8BE5;&#x5C31;&#x641E;&#x5B9A;&#x4E86;</p>
<p>&#x7136;&#x540E;&#x5199;&#x7740;&#x5199;&#x7740;&#x53D1;&#x73B0;&#x6709;&#x6CA1;&#x8003;&#x8651;&#x5230;&#x7684;, &#x52A0;&#x5165;&#x5224;&#x65AD;&#x53BB;&#x5904;&#x7406;&#x4E00;&#x4E0B;. &#x5F3A;&#x8C03;&#x4E0B;&#x540D;&#x5B57;, &#x811A;&#x672C;.</p>
<p>&#x5728;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x7684;&#x8BED;&#x53E5;&#x5F53;&#x4E2D;, &#x6216;&#x8005;&#x8BF4;&#x9700;&#x8981;&#x663E;&#x793A;&#x58F0;&#x660E;&#x7C7B;&#x578B;&#x7684;&#x8BED;&#x8A00;, &#x5C31;&#x4E0D;&#x80FD;&#x8FD9;&#x6837;&#x6563;&#x6F2B;</p>
<p>&#x6BCF;&#x4E00;&#x4E2A;&#x51FD;&#x6570;, &#x5230;&#x9700;&#x8981;&#x8003;&#x8651;&#x597D;&#x7C7B;&#x578B;, &#x600E;&#x6837;&#x5904;&#x7406;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7684;&#x53EF;&#x80FD;, &#x518D;&#x8FDE;&#x63A5;&#x5230;&#x4E00;&#x8D77;</p>
<p>&#x7A0B;&#x5E8F;&#x7ECF;&#x8FC7;&#x4E86;&#x7C7B;&#x578B;&#x68C0;&#x67E5;, &#x76F8;&#x6BD4;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x6765;&#x8BF4;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x60C5;&#x51B5;&#x5C11;&#x5F97;&#x591A;</p>
<p>&#x5F53;&#x7136;, &#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x8BA4;&#x771F;&#x8003;&#x8651;, &#x63D0;&#x5347;&#x8D28;&#x91CF;&#x7684;&#x540C;&#x65F6;, &#x7F16;&#x5199;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x4E5F;&#x591A;&#x4E86;</p>
<p>&#x8FD9;&#x51E0;&#x4E4E;&#x5C31;&#x662F;&#x5728;&#x4FBF;&#x5229;&#x548C;&#x53EF;&#x9760;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x505A;&#x6289;&#x62E9;, &#x800C;&#x4E14;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x76EE;&#x7684;</p>
<p>&#x6240;&#x4EE5;&#x6211;&#x60F3;&#x4E24;&#x8005;&#x90FD;&#x53EF;&#x4EE5;&#x5F53;&#x4F5C;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;</p>
<p>&#x6709;&#x4E00;&#x5929;&#x8981;&#x8BBE;&#x8BA1;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x65F6;&#x5019;, &#x8003;&#x8651;&#x4E0B;&#x662F;&#x5426;&#x9700;&#x8981;&#x4E24;&#x8005;&#x533A;&#x5206;&#x5F00;&#x6765;?</p>
<h3 id="&#x4E0D;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x7684;_name">&#x4E0D;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x7684; name</h3><p>&#x4E2D;&#x95F4;&#x8BD5;&#x7740;&#x73A9;&#x7684;&#x65F6;&#x5019;, &#x672A;&#x6765;&#x8003;&#x8651;&#x6E32;&#x67D3;&#x65F6;&#x72B6;&#x6001;&#x4E0D;&#x88AB;&#x7834;&#x7834;&#x574F;, &#x6211;&#x5C1D;&#x8BD5;&#x8003;&#x8651;&#x4E0D;&#x53EF;&#x53D8;&#x6570;&#x636E;</p>
<p>&#x6BD4;&#x5982;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x89E3;&#x91CA;&#x5668;, &#x4F1A;&#x4FEE;&#x6539;&#x4F5C;&#x7528;&#x57DF;&#x5F53;&#x4E2D;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x6570;&#x636E;,</p>
<p>&#x5982;&#x679C;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#x4E2D;&#x540E;&#x8FB9;&#x7684;&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x4E86;&#x6570;&#x636E;, &#x5176;&#x4ED6;&#x7528;&#x4E86;&#x53D8;&#x91CF;&#x7684;&#x672A;&#x4F4D;&#x7F6E;&#x662F;&#x5426;&#x6536;&#x5230;&#x5F71;&#x54CD;?</p>
<pre><code>cirrudefine <span class="list">(<span class="keyword">guess</span> x y)</span>
  set size <span class="number">10</span>
  set width <span class="number">20</span>
  + <span class="list">(<span class="keyword">*</span> x size)</span> <span class="list">(<span class="keyword">*</span> y weight)</span>
</code></pre><p>&#x53EF;&#x662F;&#x53BB;&#x6389;&#x4FEE;&#x6539;&#x4F5C;&#x7528;&#x57DF;&#x7684;&#x51FD;&#x6570; set , &#x95EE;&#x9898;&#x6765;&#x4E86;, &#x7136;&#x540E;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x5462;? </p>
<p>&#x540E;&#x6765;&#x60F3;&#x8D77;&#x4E86; Do Notation &#x5F53;&#x4E2D;&#x624B;&#x6CD5;, &#x901A;&#x8FC7;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x57DF;&#x5F15;&#x5165;&#x6570;&#x636E;&#x7684; name,</p>
<p>&#x5177;&#x4F53;&#x5C31;&#x662F;&#x4E2A;&#x5C71;&#x5BE8;(&#x4E0D;&#x5168;)&#x7684; bind &#x51FD;&#x6570;, &#x901A;&#x8FC7;&#x8C03;&#x7528;&#x533F;&#x540D;&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;: </p>
<pre><code>cirrudefine <span class="params">(guess x y)</span>
  bind <span class="number">10</span> $ \ <span class="params">(size)</span>
    bind <span class="number">20</span> $ \ <span class="params">(weight)</span>
      + <span class="params">(* x size)</span> <span class="params">(* y weight)</span>
</code></pre><p>&#x4E5F;&#x662F;&#x56E0;&#x4E3A;&#x533F;&#x540D;&#x51FD;&#x6570;&#x7684;&#x5B58;&#x5728;, &#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x96BE;&#x5EA6;&#x589E;&#x52A0;&#x4E86;, &#x533F;&#x540D;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x6570;&#x636E;&#x5982;&#x4F55;&#x5C55;&#x793A;?</p>
<p>&#x6587;&#x672C;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x662F;&#x975E;&#x5E38;&#x62BD;&#x8C61;&#x7684;, &#x867D;&#x7136;&#x770B;&#x8D77;&#x6765;&#x53EA;&#x662F;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x503C;, &#x5B9E;&#x9645;&#x5374;&#x4E0D;&#x80FD;&#x90A3;&#x4E48;&#x5199;,</p>
<p>&#x5177;&#x4F53;&#x6CA1;&#x6709;&#x8003;&#x8651;&#x6E05;&#x695A;. &#x4E0D;&#x8FC7; bind &#x7684;&#x9996;&#x53D1;&#x786E;&#x5B9E;&#x6709;&#x610F;&#x601D;, &#x4EE5;&#x540E;&#x8FD8;&#x80FD;&#x7528;&#x5230; </p>
<h3 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h3><p>&#x53EF;&#x89C6;&#x5316;&#x7684;&#x7F16;&#x7A0B;&#x65B9;&#x6848;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x4F1A;&#x5F88;&#x91CD;&#x8981;, &#x7279;&#x522B;&#x662F;&#x754C;&#x9762;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x8D8B;&#x52BF;&#x4E0B;</p>
<p>&#x53E6;&#x5916;&#x8981;&#x5438;&#x5F15;&#x65B0;&#x4EBA;&#x52A0;&#x5165;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x9886;&#x57DF;, &#x771F;&#x7684;&#x662F;&#x8981;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x8BDA;&#x610F;&#x624D;&#x884C;&#x554A;</p>
<p>&#x6211;&#x671F;&#x5F85;&#x770B;&#x56FD;&#x5916;&#x725B;&#x4EBA;&#x53D1;&#x5E03;&#x65B0;&#x7684;&#x65B9;&#x6848;&#x53BB;&#x505A;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x7684;&#x53EF;&#x89C6;&#x5316;, &#x81EA;&#x5DF1;&#x505A;&#x53EA;&#x662F;&#x5B66;&#x4E60;&#x800C;&#x5DF2;</p>
<p>&#x81F3;&#x5C11;&#x7406;&#x89E3;&#x4E86; bind &#x51FD;&#x6570;&#x8FD9;&#x4E00;&#x8282;, &#x5E2E;&#x6211;&#x7406;&#x89E3;&#x4E86; Haskell &#x5F53;&#x4E2D;&#x6709;&#x4E9B;&#x5730;&#x65B9; </p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/NnIrmaA">&#x7231;&#x7ACB;&#x4FE1;&#x5F00;&#x6E90;&#x7269;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#xFF1A;Calvin</a></li>
<li>2.<a href="/articles/zqmUzqB">Java I/O : Bit Operation &#x4F4D;&#x8FD0;&#x7B97;</a></li>
<li><p>3.<a href="/articles/3A3YNvm">&#x91CD;&#x65B0;&#x62CE;&#x4E00;&#x904D;js&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/NF7bUb3">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;NF7bUb3&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/软件开发/">软件开发</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/20150607/fa9e682/" title="Nginx+Keepalived实现站点高可用 -" itemprop="url">Nginx+Keepalived实现站点高可用 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T22:21:37.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Nginx+Keepalived&#x5B9E;&#x73B0;&#x7AD9;&#x70B9;&#x9AD8;&#x53EF;&#x7528;">Nginx+Keepalived&#x5B9E;&#x73B0;&#x7AD9;&#x70B9;&#x9AD8;&#x53EF;&#x7528;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-06 23:48:59  <a href="/sites/3uEjYv">segmentfault-&#x535A;&#x5BA2;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://segmentfault.com/a/1190000002881132?utm_source=tuicool" target="_blank" rel="external">http://segmentfault.com/a/1190000002881132</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11090041">keepalived</a></p>
<p>&#x516C;&#x53F8;&#x5185;&#x90E8; OA &#x7CFB;&#x7EDF;&#x8981;&#x505A;&#x7EBF;&#x4E0A;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x5355;&#x70B9;&#x6545;&#x969C;&#xFF0C;&#x6240;&#x4EE5;&#x8BA1;&#x5212;&#x4F7F;&#x7528;2&#x53F0;&#x865A;&#x62DF;&#x673A;&#x901A;&#x8FC7; Keepalived &#x5DE5;&#x5177;&#x6765;&#x5B9E;&#x73B0; nginx &#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF08;High Avaiability&#xFF09;&#xFF0C;&#x8FBE;&#x5230;&#x4E00;&#x53F0;nginx&#x5165;&#x53E3;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#xFF0C;&#x53E6;&#x4E00;&#x53F0;&#x5907;&#x673A;&#x81EA;&#x52A8;&#x63A5;&#x7BA1;&#x670D;&#x52A1;&#x7684;&#x6548;&#x679C;&#x3002;&#xFF08;nginx&#x505A;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF0C;&#x5B9E;&#x73B0;&#x540E;&#x7AEF;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF09;&#x5FEB;&#x901F;&#x642D;&#x5EFA;&#x8BF7;&#x76F4;&#x63A5;&#x8DF3;&#x81F3; &#x7B2C;2&#x8282;&#x3002;</p>
<h2 id="1-_Keepalived&#x4ECB;&#x7ECD;">1. Keepalived&#x4ECB;&#x7ECD;</h2><p>Keepalived&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;VRRP&#x534F;&#x8BAE;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x670D;&#x52A1;&#x9AD8;&#x53EF;&#x7528;&#x65B9;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x5176;&#x6765;&#x907F;&#x514D;IP&#x5355;&#x70B9;&#x6545;&#x969C;&#xFF0C;&#x7C7B;&#x4F3C;&#x7684;&#x5DE5;&#x5177;&#x8FD8;&#x6709;heartbeat&#x3001;corosync&#x3001;pacemaker&#x3002;&#x4F46;&#x662F;&#x5B83;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x5355;&#x72EC;&#x51FA;&#x73B0;&#xFF0C;&#x800C;&#x662F;&#x4E0E;&#x5176;&#x5B83;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6280;&#x672F;&#xFF08;&#x5982;lvs&#x3001;haproxy&#x3001;nginx&#xFF09;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x6765;&#x8FBE;&#x5230;&#x96C6;&#x7FA4;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;</p>
<h2 id="1-1_VRRP&#x534F;&#x8BAE;">1.1 VRRP&#x534F;&#x8BAE;</h2><p>VRRP&#x5168;&#x79F0; Virtual Router Redundancy Protocol&#xFF0C;&#x5373; <a href="http://en.wikipedia.org/wiki/VRRP" target="_blank" rel="external">&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5197;&#x4F59;&#x534F;&#x8BAE;</a> &#x3002;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5B83;&#x662F;&#x5B9E;&#x73B0;&#x8DEF;&#x7531;&#x5668;&#x9AD8;&#x53EF;&#x7528;&#x7684;&#x5BB9;&#x9519;&#x534F;&#x8BAE;&#xFF0C;&#x5373;&#x5C06;N&#x53F0;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x529F;&#x80FD;&#x7684;&#x8DEF;&#x7531;&#x5668;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x5668;&#x7EC4;(Router Group)&#xFF0C;&#x8FD9;&#x4E2A;&#x7EC4;&#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E2A;master&#x548C;&#x591A;&#x4E2A;backup&#xFF0C;&#x4F46;&#x5728;&#x5916;&#x754C;&#x770B;&#x6765;&#x5C31;&#x50CF;&#x4E00;&#x53F0;&#xFFFD;&#xFFFD;&#xFFFD;&#x6837;&#xFF0C;&#x6784;&#x6210;&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x865A;&#x62DF;IP&#xFF08;vip&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8DEF;&#x7531;&#x5668;&#x6240;&#x5728;&#x5C40;&#x57DF;&#x7F51;&#x5185;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x7684;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;&#xFF09;&#xFF0C;&#x5360;&#x6709;&#x8FD9;&#x4E2A;IP&#x7684;master&#x5B9E;&#x9645;&#x8D1F;&#x8D23;ARP&#x76F8;&#x5E94;&#x548C;&#x8F6C;&#x53D1;IP&#x6570;&#x636E;&#x5305;&#xFF0C;&#x7EC4;&#x4E2D;&#x7684;&#x5176;&#x5B83;&#x8DEF;&#x7531;&#x5668;&#x4F5C;&#x4E3A;&#x5907;&#x4EFD;&#x7684;&#x89D2;&#x8272;&#x5904;&#x4E8E;&#x5F85;&#x547D;&#x72B6;&#x6001;&#x3002;master&#x4F1A;&#x53D1;&#x7EC4;&#x64AD;&#x6D88;&#x606F;&#xFF0C;&#x5F53;backup&#x5728;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x5185;&#x6536;&#x4E0D;&#x5230;vrrp&#x5305;&#x65F6;&#x5C31;&#x8BA4;&#x4E3A;master&#x5B95;&#x6389;&#x4E86;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x6839;&#x636E;VRRP&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x6765;&#x9009;&#x4E3E;&#x4E00;&#x4E2A;backup&#x5F53;master&#xFF0C;&#x4FDD;&#x8BC1;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x9AD8;&#xFFFD;&#xFFFD;&#xFFFD;&#x7528;&#x3002; </p>
<p>&#x5728;VRRP&#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#x91CC;&#xFF0C;&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5668;&#x4F7F;&#x7528; 00-00-5E-00-01-XX &#x4F5C;&#x4E3A; <em>&#x865A;&#x62DF;</em> MAC&#x5730;&#x5740;&#xFF0C;XX&#x5C31;&#x662F;&#x552F;&#x4E00;&#x7684; VRID &#xFF08;Virtual Router IDentifier&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7269;&#x7406;&#x8DEF;&#x7531;&#x5668;&#x5360;&#x7528;&#x3002;&#x5728;&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5668;&#x91CC;&#x9762;&#x7684;&#x7269;&#x7406;&#x8DEF;&#x7531;&#x5668;&#x7EC4;&#x91CC;&#x9762;&#x901A;&#x8FC7;&#x591A;&#x64AD;IP&#x5730;&#x5740; 224.0.0.18 &#x6765;&#x5B9A;&#x65F6;&#x53D1;&#x9001;&#x901A;&#x544A;&#x6D88;&#x606F;&#x3002;&#x6BCF;&#x4E2A;Router&#x90FD;&#x6709;&#x4E00;&#x4E2A; 1-255 &#x4E4B;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x522B;&#xFF0C;&#x7EA7;&#x522B;&#x6700;&#x9AD8;&#x7684;&#xFF08;highest priority&#xFF09;&#x5C06;&#x6210;&#x4E3A;&#x4E3B;&#x63A7;&#xFF08;master&#xFF09;&#x8DEF;&#x7531;&#x5668;&#x3002;&#x901A;&#x8FC7;&#x964D;&#x4F4E;master&#x7684;&#x4F18;&#x5148;&#x6743;&#x53EF;&#x4EE5;&#x8BA9;&#x5904;&#x4E8E;backup&#x72B6;&#x6001;&#x7684;&#x8DEF;&#x7531;&#x5668;&#x62A2;&#x5360;&#xFF08;pro-empt&#xFF09;&#x4E3B;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x4E24;&#x4E2A;backup&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x540C;&#x7684;IP&#x5730;&#x5740;&#x8F83;&#x5927;&#x8005;&#x4E3A;master&#xFF0C;&#x63A5;&#x7BA1;&#x865A;&#x62DF;IP&#x3002; </p>
<p><img src="http://img2.tuicool.com/2qEnqm.jpg" alt=""></p>
<h3 id="&#x4E0E;heartbeat/corosync&#x7B49;&#x6BD4;&#x8F83;">&#x4E0E;heartbeat/corosync&#x7B49;&#x6BD4;&#x8F83;</h3><p>&#x76F4;&#x63A5;&#x6458;&#x6284;&#x81EA; <a href="http://www.linuxidc.com/Linux/2013-08/89227.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-08/89227.htm</a> &#xFF1A; </p>
<p>Heartbeat&#x3001;Corosync&#x3001;Keepalived&#x8FD9;&#x4E09;&#x4E2A;&#x96C6;&#x7FA4;&#x7EC4;&#x4EF6;&#x6211;&#x4EEC;&#x5230;&#x5E95;&#x9009;&#x54EA;&#x4E2A;&#x597D;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x60F3;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;Heartbeat&#x3001;Corosync&#x662F;&#x5C5E;&#x4E8E;&#x540C;&#x4E00;&#x7C7B;&#x578B;&#xFF0C;Keepalived&#x4E0E;Heartbeat&#x3001;Corosync&#xFF0C;&#x6839;&#x672C;&#x4E0D;&#x662F;&#x540C;&#x4E00;&#x7C7B;&#x578B;&#x7684;&#x3002;Keepalived&#x4F7F;&#x7528;&#x7684;vrrp&#x534F;&#x8BAE;&#x65B9;&#x5F0F;&#xFF0C;&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5197;&#x4F59;&#x534F;&#x8BAE; (Virtual Router Redundancy Protocol&#xFF0C;&#x7B80;&#x79F0;VRRP)&#xFF1B;Heartbeat&#x6216;Corosync&#x662F;&#x57FA;&#x4E8E;&#x4E3B;&#x673A;&#x6216;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x65B9;&#x5F0F;&#xFF1B;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5C31;&#x662F;&#xFF0C;Keepalived&#x7684;&#x76EE;&#x7684;&#x662F;&#x6A21;&#x62DF;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;Heartbeat&#x6216;Corosync&#x7684;&#x76EE;&#x7684;&#x662F;&#x5B9E;&#x73B0;Service&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4E00;&#x822C;Keepalived&#x662F;&#x5B9E;&#x73B0;&#x524D;&#x7AEF;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x524D;&#x7AEF;&#x9AD8;&#x53EF;&#x7528;&#x7684;&#x7EC4;&#x5408;&#x6709;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5E38;&#x89C1;&#x7684;LVS+Keepalived&#x3001;Nginx+Keepalived&#x3001;HAproxy+Keepalived&#x3002;&#x800C;Heartbeat&#x6216;Corosync&#x662F;&#x5B9E;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x7EC4;&#x5408;&#x6709;Heartbeat v3(Corosync)+Pacemaker+NFS+Httpd &#x5B9E;&#x73B0;Web&#x670D;&#x52A1;&#x5668;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3001;Heartbeat v3(Corosync)+Pacemaker+NFS+MySQL &#x5B9E;&#x73B0;MySQL&#x670D;&#x52A1;&#x5668;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#xFF0C;Keepalived&#x4E2D;&#x5B9E;&#x73B0;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x524D;&#x7AEF;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x5B58;&#x50A8;&#xFF0C;&#x4E00;&#x822C;&#x5E38;&#x7528;&#x4E8E;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;&#x800C;Heartbeat(&#x6216;Corosync)&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4E14;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x5B58;&#x50A8;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x591A;&#x8282;&#x70B9;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x8BF4;&#x660E;&#x767D;&#x4E86;&#x3002;</p>
<p>&#x53C8;&#x6709;&#x535A;&#x53CB;&#x4F1A;&#x95EE;&#x4E86;&#xFF0C;&#x90A3;heartbaet&#x4E0E;corosync&#x6211;&#x4EEC;&#x53C8;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x54EA;&#x4E2A;&#x597D;&#x554A;&#xFF0C;&#x6211;&#x60F3;&#x8BF4;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x7528;corosync&#xFF0C;&#x56E0;&#x4E3A;corosync&#x7684;&#x8FD0;&#x884C;&#x673A;&#x5236;&#x66F4;&#x4F18;&#x4E8E;heartbeat&#xFF0C;&#x5C31;&#x8FDE;&#x4ECE;heartbeat&#x5206;&#x79BB;&#x51FA;&#x6765;&#x7684;pacemaker&#x90FD;&#x8BF4;&#x5728;&#x4EE5;&#x540E;&#x7684;&#x5F00;&#x53D1;&#x5F53;&#x4E2D;&#x66F4;&#x503E;&#x5411;&#x4E8E;corosync&#xFF0C;&#x6240;&#x4EE5;&#x73B0;&#x5728;corosync+pacemaker&#x662F;&#x6700;&#x4F73;&#x7EC4;&#x5408;&#x3002;</p>
<h2 id="1-2_Keepalived_+_nginx">1.2 Keepalived + nginx</h2><p>keepalived&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;VRRP&#x534F;&#x8BAE;&#x5728;Linux&#x4E0A;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x5206;&#x522B;&#x662F;core&#x3001;check&#x548C;vrrp&#x3002;core&#x6A21;&#x5757;&#x4E3A;keepalived&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x8D1F;&#x8D23;&#x4E3B;&#x8FDB;&#x7A0B;&#x7684;&#x542F;&#x52A8;&#x3001;&#x7EF4;&#x62A4;&#x4EE5;&#x53CA;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x548C;&#x89E3;&#x6790;&#x3002;check&#x8D1F;&#x8D23;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF0C;&#x5305;&#x62EC;&#x5E38;&#x89C1;&#x7684;&#x5404;&#x79CD;&#x68C0;&#x67E5;&#x65B9;&#x5F0F;&#x3002;vrrp&#x6A21;&#x5757;&#x662F;&#x6765;&#x5B9E;&#x73B0;VRRP&#x534F;&#x8BAE;&#x7684;&#x3002;&#x672C;&#x6587;&#x57FA;&#x4E8E;&#x5982;&#x4E0B;&#x7684;&#x62D3;&#x6251;&#x56FE;&#xFF1A;</p>
<pre><code>                   +-------------+
                   |<span class="string">    uplink   </span>|
                   +-------------+
    |<span class="string">
    +
    MASTER            keep</span>|<span class="string">alived         BACKUP
172.29.88.224      172.29.88.222      172.29.88.225
+-------------+    +-------------+    +-------------+
</span>|<span class="string">   nginx01   </span>|<span class="string">----</span>|<span class="string">  virtualIP  </span>|<span class="string">----</span>|<span class="string">   nginx02   </span>|
+-------------+    +-------------+    +-------------+
    |<span class="string">
       +------------------+------------------+
       </span>|<span class="string">                  </span>|<span class="string">                  </span>|
+-------------+    +-------------+    +-------------+
|<span class="string">    web01    </span>|<span class="string">    </span>|<span class="string">    web02    </span>|<span class="string">    </span>|<span class="string">    web03    </span>|
+-------------+    +-------------+    +-------------+
</code></pre><h2 id="2-_keepalived&#x5B9E;&#x73B0;nginx&#x9AD8;&#x53EF;&#x7528;">2. keepalived&#x5B9E;&#x73B0;nginx&#x9AD8;&#x53EF;&#x7528;</h2><h2 id="2-1&#x5B89;&#x88C5;">2.1&#x5B89;&#x88C5;</h2><p>&#x6211;&#x7684;&#x73AF;&#x5883;&#x662F;CentOS 6.2 X86_64&#xFF0C;&#x76F4;&#x63A5;&#x901A;&#x8FC7;yum&#x65B9;&#x5F0F;&#x5B89;&#x88C5;&#x6700;&#x7B80;&#x5355;&#xFF1A;</p>
<pre><code><span class="preprocessor"># yum install -y keepalived</span>
<span class="preprocessor"># keepalived -v</span>
Keepalived v1.2.13 (<span class="number">03</span>/<span class="number">19</span>,<span class="number">2015</span>)
</code></pre><h2 id="2-2_nginx&#x76D1;&#x63A7;&#x811A;&#x672C;">2.2 nginx&#x76D1;&#x63A7;&#x811A;&#x672C;</h2><p>&#x8BE5;&#x811A;&#x672C;&#x68C0;&#x6D4B;ngnix&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5728;nginx&#x8FDB;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x542F;&#x52A8;ngnix&#xFF0C;&#x5982;&#x679C;&#x542F;&#x52A8;&#x5931;&#x8D25;&#x5219;&#x505C;&#x6B62;keepalived&#xFF0C;&#x51C6;&#x5907;&#x8BA9;&#x5176;&#x5B83;&#x673A;&#x5668;&#x63A5;&#x7BA1;&#x3002;</p>
<p>/etc/keepalived/check_nginx.sh &#xFF1A; </p>
<pre><code><span class="shebang">#!/bin/bash</span>
counter=$(ps -C nginx --no-heading|wc <span class="operator">-l</span>)
<span class="keyword">if</span> [ &amp;quot;<span class="variable">${counter}</span>&amp;quot; = &amp;quot;<span class="number">0</span>&amp;quot; ]; <span class="keyword">then</span>
    /usr/<span class="built_in">local</span>/bin/nginx
    sleep <span class="number">2</span>
    counter=$(ps -C nginx --no-heading|wc <span class="operator">-l</span>)
    <span class="keyword">if</span> [ &amp;quot;<span class="variable">${counter}</span>&amp;quot; = &amp;quot;<span class="number">0</span>&amp;quot; ]; <span class="keyword">then</span>
        /etc/init.d/keepalived stop
    <span class="keyword">fi</span>
<span class="keyword">fi</span>
</code></pre><p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#xFF0C;&#x603B;&#x7ED3;&#x51FA;&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x5F62;&#x4E0B;&#x5173;&#x95ED;keepalived&#xFF0C;&#x5982; curl &#x4E3B;&#x9875;&#x8FDE;&#x7EED;2&#x4E2A;5s&#x6CA1;&#x6709;&#x54CD;&#x5E94;&#x5219;&#x5207;&#x6362;&#xFF1A;</p>
<pre><code><span class="shebang">#!/bin/bash</span>
<span class="comment"># curl -IL http://localhost/member/login.htm</span>
<span class="comment"># curl --data &amp;quot;memberName=fengkan&amp;amp;password=22&amp;quot; http://localhost/member/login.htm</span>
count = <span class="number">0</span>
<span class="keyword">for</span> (( k=<span class="number">0</span>; k&amp;lt;<span class="number">2</span>; k++ )) 
<span class="keyword">do</span> 
    check_code=$( curl --connect-timeout <span class="number">3</span> <span class="operator">-s</span>L -w &amp;quot;%{http_code}\\n&amp;quot; http://localhost/login.html -o /dev/null )
    <span class="keyword">if</span> [ &amp;quot;<span class="variable">$check_code</span>&amp;quot; != &amp;quot;<span class="number">200</span>&amp;quot; ]; <span class="keyword">then</span>
        count = count +<span class="number">1</span>
        <span class="built_in">continue</span>
    <span class="keyword">else</span>
        count = <span class="number">0</span>
        <span class="built_in">break</span>
    <span class="keyword">fi</span>
<span class="keyword">done</span>
<span class="keyword">if</span> [ &amp;quot;<span class="variable">$count</span>&amp;quot; != &amp;quot;<span class="number">0</span>&amp;quot; ]; <span class="keyword">then</span>
<span class="comment">#   /etc/init.d/keepalived stop</span>
    <span class="built_in">exit</span> <span class="number">1</span>
<span class="keyword">else</span>
    <span class="built_in">exit</span> <span class="number">0</span>
<span class="keyword">fi</span>
</code></pre><h2 id="2-3_keepalived-conf">2.3 keepalived.conf</h2><pre><code>! Configuration File <span class="keyword">for</span> keepalived
global_defs {
    notification_email {
        zhouxiao<span class="annotation">@example</span>.com
        itsection<span class="annotation">@example</span>.com
    }
    notification_email_from itsection<span class="annotation">@example</span>.com
    smtp_server mail.example.com
    smtp_connect_timeout <span class="number">30</span>
    router_id LVS_DEVEL
}
vrrp_script chk_nginx {
#    script &amp;quot;killall -<span class="number">0</span> nginx&amp;quot;
    script &amp;quot;<span class="regexp">/etc/</span>keepalived/check_nginx.sh&amp;quot; 
    interval <span class="number">2</span> 
    weight -<span class="number">5</span> 
    fall <span class="number">3</span>  
    rise <span class="number">2</span> 
}
vrrp_instance VI_1 {
    state MASTER
    <span class="class"><span class="keyword">interface</span> <span class="title">eth0</span>
    <span class="title">mcast_src_ip</span> 172.29.88.224
    <span class="title">virtual_router_id</span> 51
    <span class="title">priority</span> 101
    <span class="title">advert_int</span> 2
    <span class="title">authentication</span> {</span>
        auth_type PASS
        auth_pass <span class="number">1111</span>
    }
    virtual_ipaddress {
        <span class="number">172.29</span>.88.222
    }
    track_script {
       chk_nginx 
    }
}
</code></pre><p>&#x5728;&#x5176;&#x5B83;&#x5907;&#x673A;BACKUP&#x4E0A;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6539;&#x53D8; state MASTER -&gt; state BACKUP &#xFF0C; priority 101 -&gt; priority 100 &#xFF0C; mcast_src_ip 172.29.88.224 -&gt; mcast_src_ip 172.29.88.225 &#x5373;&#x53EF;&#x3002; </p>
<pre><code><span class="keyword">service</span> keepalived <span class="literal">restart</span>
</code></pre><h2 id="2-4_&#x914D;&#x7F6E;&#x9009;&#x9879;&#x8BF4;&#x660E;">2.4 &#x914D;&#x7F6E;&#x9009;&#x9879;&#x8BF4;&#x660E;</h2><h4 id="global_defs">global_defs</h4><ul>
<li>notification_email &#xFF1A; keepalived&#x5728;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x5207;&#x6362;&#x64CD;&#x4F5C;&#x65F6;&#x9700;&#x8981;&#x53D1;&#x9001;email&#x901A;&#x77E5;&#xFFFD;&#xFFFD;&#xFFFD;&#x5740;&#xFF0C;&#x540E;&#x9762;&#x7684; smtp_server &#x76F8;&#x6BD4;&#x4E5F;&#x90FD;&#x77E5;&#x9053;&#x662F;&#x90AE;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5176;&#x5B83;&#x65B9;&#x5F0F;&#x62A5;&#x8B66;&#xFF0C;&#x6BD5;&#x7ADF;&#x90AE;&#x4EF6;&#x4E0D;&#x662F;&#x5B9E;&#x65F6;&#x901A;&#x77E5;&#x7684;&#x3002;</li>
<li>router_id &#xFF1A; &#x673A;&#x5668;&#x6807;&#x8BC6;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x8BBE;&#x4E3A;hostname&#x3002;&#x6545;&#x969C;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x4F1A;&#x7528;&#x5230;</li>
</ul>
<h4 id="vrrp_instance">vrrp_instance</h4><ul>
<li>state &#xFF1A; &#x6307;&#x5B9A;instance(Initial)&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x914D;&#x7F6E;&#x597D;&#x540E;&#xFF0C;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x5C31;&#x662F;&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7684;&#xFF0C;&#x4F46;&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7684;&#x4E0D;&#x7B97;&#xFF0C;&#x8FD8;&#x662F;&#x5F97;&#x8981;&#x901A;&#x8FC7;&#x7ADE;&#x9009;&#x901A;&#x8FC7;&#x4F18;&#x5148;&#x7EA7;&#x6765;&#x786E;&#x5B9A;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x4E3A;MASTER&#xFF0C;&#x4F46;&#x5982;&#x82E5;&#x4ED6;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x53CA;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x53F0;&#x5728;&#x53D1;&#x9001;&#x901A;&#x544A;&#x65F6;&#xFF0C;&#x4F1A;&#x53D1;&#x9001;&#x81EA;&#x5DF1;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x53D1;&#x73B0;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x5982;&#x81EA;&#x5DF1;&#x7684;&#x9AD8;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4F1A;&#x5C31;&#x56DE;&#x62A2;&#x5360;&#x4E3A;MASTER</li>
<li>interface &#xFF1A; &#x5B9E;&#x4F8B;&#x7ED1;&#x5B9A;&#x7684;&#x7F51;&#x5361;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x914D;&#x7F6E;&#x865A;&#x62DF;IP&#x7684;&#x65F6;&#x5019;&#x5FC5;&#x987B;&#x662F;&#x5728;&#x5DF2;&#x6709;&#x7684;&#x7F51;&#x5361;&#x4E0A;&#x6DFB;&#x52A0;&#x7684;</li>
<li>mcast_src_ip &#xFF1A; &#x53D1;&#x9001;&#x591A;&#x64AD;&#x6570;&#x636E;&#x5305;&#x65F6;&#x7684;&#x6E90;IP&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x91CC;&#x6CE8;&#x610F;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x5728;&#x90A3;&#x4E2A;&#x5730;&#x5740;&#x4E0A;&#x53D1;&#x9001;VRRP&#x901A;&#x544A;&#xFF0C;&#x8FD9;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x9009;&#x62E9;&#x7A33;&#x5B9A;&#x7684;&#x7F51;&#x5361;&#x7AEF;&#x53E3;&#x6765;&#x53D1;&#x9001;&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x5F53;&#x4E8E;heartbeat&#x7684;&#x5FC3;&#x8DF3;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x90A3;&#x4E48;&#x5C31;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x7ED1;&#x5B9A;&#x7684;&#x7F51;&#x5361;&#x7684;IP&#xFF0C;&#x4E5F;&#x5C31;&#x662F;interface&#x6307;&#x5B9A;&#x7684;IP&#x5730;&#x5740;</li>
<li>virtual_router_id &#xFF1A; &#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;VRID&#xFF0C;&#x8FD9;&#x91CC;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x76F8;&#x540C;&#x7684;VRID&#x4E3A;&#x4E00;&#x4E2A;&#x7EC4;&#xFF0C;&#x4ED6;&#x5C06;&#x51B3;&#x5B9A;&#x591A;&#x64AD;&#x7684;MAC&#x5730;&#x5740;</li>
<li>priority &#xFF1A; &#x8BBE;&#x7F6E;&#x672C;&#x8282;&#x70B9;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x4E3A;master</li>
<li>advert_int &#xFF1A; &#x68C0;&#x67E5;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1&#x79D2;&#x3002;&#x8FD9;&#x5C31;&#x662F;VRRP&#x7684;&#x5B9A;&#x65F6;&#x5668;&#xFF0C;MASTER&#x6BCF;&#x9694;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x4E2A;advertisement&#x62A5;&#x6587;&#x4EE5;&#x901A;&#x77E5;&#x7EC4;&#x5185;&#x5176;&#x4ED6;&#x8DEF;&#x7531;&#x5668;&#x81EA;&#x5DF1;&#x5DE5;&#x4F5C;&#x6B63;&#x5E38;</li>
<li>authentication &#xFF1A; &#x5B9A;&#x4E49;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x4E3B;&#x4ECE;&#x5FC5;&#x987B;&#x4E00;&#x6837;</li>
<li>virtual_ipaddress &#xFF1A; &#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x7684;&#x5C31;&#x662F;VIP&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x865A;&#x62DF;IP&#x5730;&#x5740;&#xFF0C;&#x4ED6;&#x968F;&#x7740;state&#x7684;&#x53D8;&#x5316;&#x800C;&#x589E;&#x52A0;&#x5220;&#x9664;&#xFF0C;&#x5F53;state&#x4E3A;master&#x7684;&#x65F6;&#x5019;&#x5C31;&#x6DFB;&#x52A0;&#xFF0C;&#x5F53;state&#x4E3A;backup&#x7684;&#x65F6;&#x5019;&#x5220;&#x9664;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x6709;&#x4F18;&#x5148;&#x7EA7;&#x6765;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x548C;state&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x6CA1;&#x6709;&#x591A;&#x5927;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;IP&#x5730;&#x5740;</li>
<li>track_script &#xFF1A; &#x5F15;&#x7528;VRRP&#x811A;&#x672C;&#xFF0C;&#x5373;&#x5728; vrrp_script &#x90E8;&#x5206;&#x6307;&#x5B9A;&#x7684;&#x540D;&#x5B57;&#x3002;&#x5B9A;&#x671F;&#x8FD0;&#x884C;&#x5B83;&#x4EEC;&#x6765;&#x6539;&#x53D8;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x5E76;&#x6700;&#x7EC8;&#x5F15;&#x53D1;&#x4E3B;&#x5907;&#x5207;&#x6362;&#x3002;</li>
</ul>
<p>vrrp_script </p>
<p>&#x544A;&#x8BC9; keepalived &#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x5207;&#x6362;&#xFF0C;&#x6240;&#x4EE5;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#x3002;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A; vrrp_script</p>
<ul>
<li>script &#xFF1A; &#x81EA;&#x5DF1;&#x5199;&#x7684;&#x68C0;&#x6D4B;&#x811A;&#x672C;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x884C;&#x547D;&#x4EE4;&#x5982; killall -0 nginx</li>
<li>interval 2 &#xFF1A; &#x6BCF;2s&#x68C0;&#x6D4B;&#x4E00;&#x6B21;</li>
<li>weight -5 &#xFF1A; &#x68C0;&#x6D4B;&#x5931;&#x8D25;&#xFF08;&#x811A;&#x672C;&#x8FD4;&#x56DE;&#x975E;0&#xFF09;&#x5219;&#x4F18;&#x5148;&#x7EA7; -5</li>
<li>fall 2 &#xFF1A; &#x68C0;&#x6D4B;&#x8FDE;&#x7EED; 2 &#x6B21;&#x5931;&#x8D25;&#x624D;&#x7B97;&#x786E;&#x5B9A;&#x662F;&#x771F;&#x5931;&#x8D25;&#x3002;&#x4F1A;&#x7528;weight&#x51CF;&#x5C11;&#x4F18;&#x5148;&#x7EA7;&#xFF08;1-255&#x4E4B;&#x95F4;&#xFF09;</li>
<li>rise 1 &#xFF1A; &#x68C0;&#x6D4B; 1 &#x6B21;&#x6210;&#x529F;&#x5C31;&#x7B97;&#x6210;&#x529F;&#x3002;&#x4F46;&#x4E0D;&#x4FEE;&#x6539;&#x4F18;&#x5148;&#x7EA7;</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x8981;&#x63D0;&#x793A;&#x4E00;&#x4E0B;script&#x4E00;&#x822C;&#x6709;2&#x79CD;&#x5199;&#x6CD5;&#xFF1A;</p>
<ol>
<li>&#x901A;&#x8FC7;&#x811A;&#x672C;&#x6267;&#x884C;&#x7684;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF0C;&#x6539;&#x53D8;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;keepalived&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x901A;&#x544A;&#x6D88;&#x606F;&#xFF0C;backup&#x6BD4;&#x8F83;&#x4F18;&#x5148;&#x7EA7;&#x518D;&#x51B3;&#x5B9A;</li>
<li>&#x811A;&#x672C;&#x91CC;&#x9762;&#x68C0;&#x6D4B;&#x5230;&#x5F02;&#x5E38;&#xFF0C;&#x76F4;&#x63A5;&#x5173;&#x95ED;keepalived&#x8FDB;&#x7A0B;&#xFF0C;backup&#x673A;&#x5668;&#x63A5;&#x6536;&#x4E0D;&#x5230;advertisement&#x4F1A;&#x62A2;&#x5360;IP</li>
</ol>
<p>&#x4E0A;&#x6587; vrrp_script &#x914D;&#x7F6E;&#x90E8;&#x5206;&#xFF0C; killall -0 nginx &#x5C5E;&#x4E8E;&#x7B2C;1&#x79CD;&#x60C5;&#x51B5;&#xFF0C; /etc/keepalived/check_nginx.sh &#x5C5E;&#x4E8E;&#x7B2C;2&#x79CD;&#x60C5;&#x51B5;&#xFF08;&#x811A;&#x672C;&#x4E2D;&#x5173;&#x95ED;keepalived&#xFF09;&#x3002;&#x4E2A;&#x4EBA;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x901A;&#x8FC7;shell&#x811A;&#x672C;&#x5224;&#x65AD;&#xFF0C;&#x4F46;&#x6709;&#x5F02;&#x5E38;&#x65F6;exit 1&#xFF0C;&#x6B63;&#x5E38;&#x9000;&#x51FA;exit 0&#xFF0C;&#x7136;&#x540E;keepalived&#x6839;&#x636E;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x7684; vrrp_instance &#x4F18;&#x5148;&#x7EA7;&#x9009;&#x4E3E;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x62A2;&#x5360;VIP&#xFF1A; </p>
<ul>
<li>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A;0&#xFF0C;&#x5E76;&#x4E14;weight&#x914D;&#x7F6E;&#x7684;&#x503C;&#x5927;&#x4E8E;0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x5E94;&#x7684;&#x589E;&#x52A0;</li>
<li>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x975E;0&#xFF0C;&#x5E76;&#x4E14;weight&#x914D;&#x7F6E;&#x7684;&#x503C;&#x5C0F;&#x4E8E;0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x5E94;&#x7684;&#x51CF;&#x5C11;</li>
</ul>
<p>&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#xFF0C;&#x539F;&#x672C;&#x914D;&#x7F6E;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x53D8;&#xFF0C;&#x5373;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;priority&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x3002;</p>
<p>&#x63D0;&#x793A;&#xFF1A;</p>
<ol>
<li>&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x63D0;&#x9AD8;&#x6216;&#x8005;&#x964D;&#x4F4E;</li>
<li>&#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x591A;&#x4E2A;&#x68C0;&#x6D4B;&#x811A;&#x672C;&#x5E76;&#x4E3A;&#x6BCF;&#x4E2A;&#x68C0;&#x6D4B;&#x811A;&#x672C;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;weight&#xFF08;&#x5728;&#x914D;&#x7F6E;&#x4E2D;&#x5217;&#x51FA;&#x5C31;&#x884C;&#xFF09;</li>
<li>&#x4E0D;&#x7BA1;&#x63D0;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x8FD8;&#x662F;&#x964D;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x6700;&#x7EC8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x8303;&#x56F4;&#x662F;&#x5728;[1,254]&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x4F18;&#x5148;&#x7EA7;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;0&#x6216;&#x8005;&#x4F18;&#x5148;&#x7EA7;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;255&#x7684;&#x60C5;&#x51B5;</li>
<li>&#x5728;MASTER&#x8282;&#x70B9;&#x7684; vrrp_instance &#x4E2D; &#x914D;&#x7F6E; nopreempt &#xFF0C;&#x5F53;&#x5B83;&#x5F02;&#x5E38;&#x6062;&#x590D;&#x540E;&#xFF0C;&#x5373;&#x4F7F;&#x5B83; prio &#x66F4;&#x9AD8;&#x4E5F;&#x4E0D;&#x4F1A;&#x62A2;&#x5360;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x505A;&#x65E0;&#x8C13;&#x7684;&#x5207;&#x6362;</li>
</ol>
<p>&#x4EE5;&#x4E0A;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5229;&#x7528;&#x811A;&#x672C;&#x68C0;&#x6D4B;&#x4E1A;&#x52A1;&#x8FDB;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x4F18;&#x5148;&#x7EA7;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E3B;&#x5907;&#x5207;&#x6362;&#x3002;</p>
<h4 id="&#x914D;&#x7F6E;&#x7ED3;&#x675F;">&#x914D;&#x7F6E;&#x7ED3;&#x675F;</h4><p>&#x5728;&#x9ED8;&#x8BA4;&#x7684;keepalive.conf&#x91CC;&#x9762;&#x8FD8;&#x6709; virtual_server,real_server &#x8FD9;&#x6837;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x5B83;&#x662F;&#x4E3A;lvs&#x51C6;&#x5907;&#x7684;&#x3002; notify &#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x5728;&#x5207;&#x6362;&#x6210;MASTER&#x6216;BACKUP&#x65F6;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x5982;&#x6709;&#x9700;&#x6C42;&#x8BF7;&#x81EA;&#x884C;google&#x3002; </p>
<p>notify</p>
<h2 id="2-5_nginx&#x914D;&#x7F6E;">2.5 nginx&#x914D;&#x7F6E;</h2><p>&#x5F53;&#x7136;nginx&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0E;keepalived&#x5E76;&#x6CA1;&#x6709;&#x8054;&#x7CFB;&#x3002;&#x4F46;&#x8BB0;&#x4F4F;&#xFF0C;2&#x53F0;nginx&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x914D;&#x7F6E;&#x5E94;&#x8BE5;&#x662F;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#x7684;&#xFF08;rsync&#x540C;&#x6B65;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x505A;&#x5230;&#x5BF9;&#x7528;&#x6237;&#x900F;&#x660E;&#xFF0C;nginx.conf &#x91CC;&#x9762;&#x7684; server_name &#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x57DF;&#x540D;&#x6765;&#x4EE3;&#x66FF;&#xFF0C;&#x7136;&#x540E;dns&#x89E3;&#x6790;&#x8FD9;&#x4E2A;&#x57DF;&#x540D;&#x5230;&#x865A;&#x62DF;IP 172.29.88.222&#x3002; </p>
<p>&#x66F4;&#x591A;&#x5173;&#x4E8E;nginx&#x5185;&#x5BB9;&#x914D;&#x7F6E;&#x8BF7;&#x53C2;&#x8003; <a href="http://seanlook.com/2015/05/17/nginx-install-and-config/" target="_blank" rel="external">&#x8FD9;&#x91CC;</a> &#x3002; </p>
<h2 id="3-_&#x6D4B;&#x8BD5;">3. &#x6D4B;&#x8BD5;</h2><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;&#xFF1A;172.29.88.224 (itoatest1,MASTER,101)&#xFF0C;172.29.88.222&#xFF08;itoatest2,BACKUP,100&#xFF09;&#xFF0C;nginx&#x548C;keepalived&#x90FD;&#x542F;&#x52A8;&#xFF0C;&#x865A;&#x62DF;IP 172.29.88.222 &#x5728; itoatest1 &#x4E0A;&#xFF1A;</p>
<pre><code><span class="array"># </span>&amp;<span class="array">#x</span>4F7F;&amp;<span class="array">#x</span>7528;ip&amp;<span class="array">#x</span>547D;&amp;<span class="array">#x</span>4EE4;&amp;<span class="array">#x</span>914D;&amp;<span class="array">#x</span>7F6E;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>5730;&amp;<span class="array">#x</span>5740;&amp;<span class="array">#xFF</span>0C;ifconfig&amp;<span class="array">#x</span>67E5;&amp;<span class="array">#x</span>770B;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>4E86;
[root@itoatest1 nginx-<span class="number">1.6</span>]<span class="array"># ip a</span>|grep eth0
<span class="number">2</span>: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu <span class="number">1500</span> qdisc pfifo_fast state UP qlen <span class="number">1000</span>
    inet <span class="number">172.29</span>.88.224/<span class="number">24</span> brd <span class="number">172.29</span>.88.255 scope global eth0
    inet <span class="number">172.29</span>.88.222/<span class="number">32</span> scope global eth0
</code></pre><p>&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE; 172.29.88.222 &#x6216;&#x57DF;&#x540D;&#xFF0C;OK&#x3002;</p>
<p>&#x76F4;&#x63A5;&#x5173;&#x95ED; itoatest1 &#x4E0A;&#x7684;nginx&#xFF1A; /usr/local/nginx-1.6/sbin/nginx -s stop &#xFF1A; </p>
<pre><code>[root@localhost keepalived]<span class="comment"># ip a|grep eth0</span>
<span class="number">2</span>: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu <span class="number">1500</span> qdisc pfifo_fast <span class="keyword">state</span> UP qlen <span class="number">1000</span>
    <span class="keyword">inet</span> <span class="number">172.29</span>.<span class="number">88.224</span>/<span class="number">24</span> brd <span class="number">172.29</span>.<span class="number">88.255</span> scope <span class="keyword">global</span> eth0
</code></pre><p>vip&#x6D88;&#x5931;&#xFF0C;&#x6F02;&#x79FB;&#x5230; itoatest2&#xFF1A;</p>
<p><img src="http://img0.tuicool.com/UnURFv.png" alt=""></p>
<p>&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E24;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A; /var/log/messages &#xFF1A; </p>
<pre><code>## <span class="tag">itoatest1</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:01</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Sending</span> <span class="tag">gratuitous</span> <span class="tag">ARPs</span> <span class="tag">on</span> <span class="tag">eth0</span> <span class="tag">for</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:06</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Sending</span> <span class="tag">gratuitous</span> <span class="tag">ARPs</span> <span class="tag">on</span> <span class="tag">eth0</span> <span class="tag">for</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:46</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Script</span>(<span class="tag">chk_nginx</span>) <span class="tag">failed</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Received</span> <span class="tag">higher</span> <span class="tag">prio</span> <span class="tag">advert</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Entering</span> <span class="tag">BACKUP</span> <span class="tag">STATE</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[44875]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">removing</span> <span class="tag">protocol</span> <span class="tag">VIPs</span>.
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest1</span> <span class="tag">Keepalived_healthcheckers</span><span class="attr_selector">[44874]</span>: <span class="tag">Netlink</span> <span class="tag">reflector</span> <span class="tag">reports</span> <span class="tag">IP</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span> <span class="tag">removed</span>

## <span class="tag">itoatest2</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:00</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Transition</span> <span class="tag">to</span> <span class="tag">MASTER</span> <span class="tag">STATE</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:00</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Received</span> <span class="tag">higher</span> <span class="tag">prio</span> <span class="tag">advert</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:00</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Entering</span> <span class="tag">BACKUP</span> <span class="tag">STATE</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">forcing</span> <span class="tag">a</span> <span class="tag">new</span> <span class="tag">MASTER</span> <span class="tag">election</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:48</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">forcing</span> <span class="tag">a</span> <span class="tag">new</span> <span class="tag">MASTER</span> <span class="tag">election</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:49</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Transition</span> <span class="tag">to</span> <span class="tag">MASTER</span> <span class="tag">STATE</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:50</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Entering</span> <span class="tag">MASTER</span> <span class="tag">STATE</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:50</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">setting</span> <span class="tag">protocol</span> <span class="tag">VIPs</span>.
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:50</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Sending</span> <span class="tag">gratuitous</span> <span class="tag">ARPs</span> <span class="tag">on</span> <span class="tag">eth0</span> <span class="tag">for</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:50</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_healthcheckers</span><span class="attr_selector">[35554]</span>: <span class="tag">Netlink</span> <span class="tag">reflector</span> <span class="tag">reports</span> <span class="tag">IP</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span> <span class="tag">added</span>
<span class="tag">Jun</span>  5 16<span class="pseudo">:44</span><span class="pseudo">:55</span> <span class="tag">itoatest2</span> <span class="tag">Keepalived_vrrp</span><span class="attr_selector">[35555]</span>: <span class="tag">VRRP_Instance</span>(<span class="tag">VI_1</span>) <span class="tag">Sending</span> <span class="tag">gratuitous</span> <span class="tag">ARPs</span> <span class="tag">on</span> <span class="tag">eth0</span> <span class="tag">for</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.222</span>
</code></pre><p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;&#x4E24;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6293;&#x5305;&#x6765;&#x67E5;&#x770B; &#x4F18;&#x5148;&#x7EA7;priority &#x7684;&#x53D8;&#x5316;&#xFF1A;</p>
<pre><code>## <span class="tag">itoatest1</span> &amp;<span class="id">#x4E0A</span>;
## &amp;<span class="id">#x76F4</span>;&amp;<span class="id">#x63A5</span>;&amp;<span class="id">#x8F93</span>;&amp;<span class="id">#x51FA</span>;&amp;<span class="id">#xFF0C</span>;&amp;<span class="id">#x6216</span>;&amp;<span class="id">#x540E</span>;&amp;<span class="id">#x52A0</span>; <span class="tag">-w</span> <span class="tag">itoatest-kl</span><span class="class">.cap</span>&amp;<span class="id">#x5B58</span>;&amp;<span class="id">#x5165</span>;&amp;<span class="id">#x6587</span>;&amp;<span class="id">#x4EF6</span>;&amp;<span class="id">#x7528</span>;<span class="tag">wireshark</span>&amp;<span class="id">#x67E5</span>;&amp;<span class="id">#x770B</span>;
# <span class="tag">tcpdump</span> <span class="tag">-vvv</span> <span class="tag">-n</span> <span class="tag">-i</span> <span class="tag">eth0</span> <span class="tag">dst</span> 224<span class="class">.0</span><span class="class">.0</span><span class="class">.18</span> <span class="tag">and</span> <span class="tag">src</span> 172<span class="class">.29</span><span class="class">.88</span><span class="class">.224</span>
</code></pre><p><img src="http://img1.tuicool.com/2QNr6b2.png" alt=""></p>
<h4 id="&#x53C2;&#x8003;">&#x53C2;&#x8003;</h4><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/EN3U3aN">&#x5F00;&#x59CB;&#x4F7F;&#x7528; HTTP/2</a></li>
<li>2.<a href="/articles/rieyyu">Git 2.4.3 &#x53D1;&#x5E03;</a></li>
<li>3.<a href="/articles/An67f2f">&#x8D85;&#x6162;&#x7684; Facebook…</a></li>
<li>4.<a href="/articles/jiIBf2y">SharePoint 2013 &#x642D;&#x5EFA;&#x8D1F;&#x8F7D;&#x5747;&#x8861;(NLB)</a></li>
<li>5.<a href="/articles/va2QV3m">Git &#x7248;&#x672C;&#x63A7;&#x5236;&#x4E0E;&#x5DE5;&#x4F5C;&#x6D41;</a></li>
<li><p>6.<a href="/articles/iyuUfm">gorouter&#x8C03;&#x7814;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/BvaIFna">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;BvaIFna&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/keepalived/">keepalived</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/20150607/f8dd7e4/" title="PAT Gas Station -" itemprop="url">PAT Gas Station -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T22:21:34.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="PAT_Gas_Station">PAT Gas Station</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 13:55:12  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/threezj/p/4558399.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/threezj/p/4558399.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000060">&#x6280;&#x672F;</a></p>
<p><a href="http://www.patest.cn/contests/pat-a-practise/1072" target="_blank" rel="external">Gas Station</a></p>
<p>A gas station has to be built at such a location that the minimum distance between the station and any of the residential housing is as far away as possible. However it must guarantee that all the houses are in its service range.</p>
<p>Now given the map of the city and several candidate locations for the gas station, you are supposed to give the best recommendation. If there are more than one solution, output the one with the smallest average distance to all the houses. If such a solution is still not unique, output the one with the smallest index number.</p>
<p>&#x9898;&#x610F;&#x8D85;&#x590D;&#x6742;&#x7684;&#x4E00;&#x9053;&#x9898; &#x6211;&#x6574;&#x7406;&#x4E86;&#x4E00;&#x4E0B; &#x610F;&#x601D;&#x5DEE;&#x4E0D;&#x591A;&#x662F;&#x8FD9;&#x6837;</p>
<p>1.&#x7B97;&#x51FA;&#x6BCF;&#x4E2A;&#x52A0;&#x6CB9;&#x7AD9;&#x5230;&#x6240;&#x6709;house&#x7684;&#x8DDD;&#x79BB;</p>
<p>2.&#x6240;&#x6709;&#x8DDD;&#x79BB;&#x5FC5;&#x987B;&#x5C0F;&#x4E8E; &#x52A0;&#x6CB9;&#x7AD9;&#x7684;&#x6700;&#x5927;&#x670D;&#x52A1;&#x8DDD;&#x79BB;</p>
<p>3.&#x4ECE;&#x6240;&#x6709;&#x8DDD;&#x79BB;&#x627E;&#x51FA;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x8DDD;&#x79BB;</p>
<p>4.&#x5728;&#x6BCF;&#x4E2A;&#x52A0;&#x6CB9;&#x7AD9;&#x7684;&#x6700;&#x5C0F;&#x8DDD;&#x79BB;&#x4E2D;&#x53D6;&#x6700;&#x5927;&#x7684;&#x8DDD;&#x79BB;</p>
<p>5.&#x82E5;&#x6700;&#x5C0F;&#x8DDD;&#x79BB;&#x76F8;&#x7B49;&#x5219;&#x53D6;&#x5E73;&#x5747;&#x8DDD;&#x79BB;&#x6700;&#x5C0F;&#x7684;</p>
<p>6.&#x82E5;&#x5E73;&#x5747;&#x8DDD;&#x79BB;&#x6700;&#x5C0F;&#x5219;&#x53D6;&#x5E8F;&#x53F7;&#x6700;&#x5C0F;&#x7684;</p>
<p>&#x4EE5;&#x4E0A;&#x4E3A;&#x8FD9;&#x9898;&#x7684;&#x6B65;&#x9AA4; &#x662F;&#x4E0D;&#x662F;&#x5FEB;&#x6655;&#x4E86;&#xFF1F; &#x7B97;&#x6CD5;&#x5E94;&#x8BE5;&#x8FD8;&#x662F;&#x7B80;&#x5355;&#x7684;&#xA0; &#x5C31;&#x662F; dijkstra&#x7B97;&#x6CD5;</p>
<p>&#x4E0B;&#x9762;&#x7ED9;&#x51FA;AC&#x4EE3;&#x7801;</p>
<pre><code>  1 #<span class="keyword">include</span> &amp;lt;stdio.<span class="keyword">h</span>&amp;gt;
  2 #<span class="keyword">include</span> &amp;lt;stdlib.<span class="keyword">h</span>&amp;gt;
  3 #define MAX 1000000
  4 
  5 
  6 int <span class="keyword">g</span>[1011][1011];
  7 int <span class="keyword">N</span>,<span class="keyword">M</span>,K,<span class="keyword">Ds</span>;
  8 int <span class="keyword">dis</span>[1011];
  9 int flag[1011];
 10 float <span class="keyword">sum</span>[10];
 11 
 12 void dijkstra(int v)
 13 {
 14     int i,j,pos,min;
 15     <span class="keyword">dis</span>[v]=0;
 16     
 17     <span class="keyword">for</span>(i=1;i&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;i++)
 18     {    
 19         min=MAX;
 20         <span class="keyword">for</span>(j=1;j&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;j++)
 21         {
 22             <span class="keyword">if</span>(flag[j]!=1 &amp;amp;&amp;amp; <span class="keyword">dis</span>[j]&amp;lt;min)
 23             {
 24                 min=<span class="keyword">dis</span>[j];
 25                 pos=j;
 26             }
 27         }
 28         flag[pos]=1;
 29         <span class="keyword">for</span>(j=1;j&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;j++)
 30         {
 31             <span class="keyword">if</span>(flag[j]!=1)
 32             {
 33                 <span class="keyword">if</span>(<span class="keyword">dis</span>[pos]+<span class="keyword">g</span>[pos][j]&amp;lt;<span class="keyword">dis</span>[j])
 34                 {
 35                     <span class="keyword">dis</span>[j]=<span class="keyword">dis</span>[pos]+<span class="keyword">g</span>[pos][j];
 36                 }
 37             }
 38         }
 39             
 40     }
 41 }
 42 int main()
 43 {
 44     int i,j;
 45     int s3,s4,<span class="keyword">L</span>,k,pos=0,t=0,flag1=0;
 46     int min[10];
 47     float ave,ave2,max;
 48     <span class="keyword">char</span> s1[10],s2[10];
 49     
 50     scanf(&amp;quot;%<span class="keyword">d</span>%<span class="keyword">d</span>%<span class="keyword">d</span>%<span class="keyword">d</span>&amp;quot;,&amp;amp;<span class="keyword">N</span>,&amp;amp;<span class="keyword">M</span>,&amp;amp;K,&amp;amp;<span class="keyword">Ds</span>); 
 51     <span class="keyword">for</span>(i=1;i&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;i++)
 52     {
 53         <span class="keyword">dis</span>[i]=MAX;
 54         <span class="keyword">for</span>(j=1;j&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;j++)
 55             <span class="keyword">g</span>[i][j]=MAX;
 56     }
 57     <span class="keyword">for</span>(i=1;i&amp;lt;=K;i++)
 58     {
 59         scanf(&amp;quot;%s %s%<span class="keyword">d</span>&amp;quot;,s1,s2,&amp;amp;<span class="keyword">L</span>);
 60         
 61         <span class="keyword">if</span>(s1[0]==&amp;apos;<span class="keyword">G</span>&amp;apos;)
 62             s3=atoi(s1+1)+<span class="keyword">N</span>;
 63         <span class="keyword">else</span>
 64             s3=atoi(s1);
 65         <span class="keyword">if</span>(s2[0]==&amp;apos;<span class="keyword">G</span>&amp;apos;)
 66             s4=atoi(s2+1)+<span class="keyword">N</span>;
 67         <span class="keyword">else</span>
 68             s4=atoi(s2);                
 69         <span class="keyword">g</span>[s3][s4]=<span class="keyword">g</span>[s4][s3]=<span class="keyword">L</span>;
 70     }
 71     
 72     <span class="keyword">for</span>(i=<span class="keyword">N</span>+1;i&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;i++)
 73     {
 74         dijkstra(i);
 75         min[t]=<span class="keyword">dis</span>[1];
 76         <span class="keyword">for</span>(j=1;j&amp;lt;=<span class="keyword">N</span>;j++)
 77         {
 78             <span class="keyword">if</span>(<span class="keyword">dis</span>[j]&amp;gt;<span class="keyword">Ds</span>)
 79             {
 80                     min[t]=-1;
 81                     <span class="keyword">sum</span>[t]=-1;
 82                     <span class="keyword">break</span>;
 83             }    
 84             <span class="keyword">if</span>(min[t]&amp;gt;<span class="keyword">dis</span>[j])
 85             {
 86                 min[t]=<span class="keyword">dis</span>[j];    
 87             }
 88             <span class="keyword">sum</span>[t]+=<span class="keyword">dis</span>[j];    
 89         }
 90         t++;
 91         <span class="keyword">for</span>(j=1;j&amp;lt;=<span class="keyword">N</span>+<span class="keyword">M</span>;j++)
 92         {
 93             <span class="keyword">dis</span>[j]=MAX;    
 94             flag[j]=0;
 95         }        
 96     }
 97     <span class="keyword">for</span>(i=0;i&amp;lt;<span class="keyword">M</span>;i++)
 98     {
 99         <span class="keyword">if</span>(min[i]!=-1)
100         {
101             flag1=1;
102             <span class="keyword">break</span>;
103             
104         }
105     }
106     max=-100000;
107     <span class="keyword">for</span>(i=0;i&amp;lt;<span class="keyword">M</span>;i++)
108     {
109         <span class="keyword">if</span>(flag1==0)
110             <span class="keyword">break</span>;
111         <span class="keyword">if</span>(max&amp;lt;min[i]&amp;amp;&amp;amp;min[i]!=-1)
112         {
113             max=min[i];
114             pos=i;
115             ave=<span class="keyword">sum</span>[pos]/<span class="keyword">N</span>;
116         }    
117         <span class="keyword">else</span> <span class="keyword">if</span>(max==min[i]&amp;amp;&amp;amp;min[i]!=-1)
118         {
119             ave=<span class="keyword">sum</span>[pos]/<span class="keyword">N</span>;
120             ave2=<span class="keyword">sum</span>[i]/<span class="keyword">N</span>;
121             <span class="keyword">if</span>(ave&amp;gt;ave2)
122             {
123                 max=min[i];
124                 pos=i;
125                 ave=ave2;
126             }    
127                     
128         }
129     }
130     <span class="keyword">if</span>(flag1==1)
131         printf(&amp;quot;<span class="keyword">G</span>%<span class="keyword">d</span>\<span class="keyword">n</span>%.1f %.1f\<span class="keyword">n</span>&amp;quot;,pos+1,max,ave);    
132     <span class="keyword">else</span>
133         printf(&amp;quot;<span class="keyword">No</span> Solution\<span class="keyword">n</span>&amp;quot;);
134 }
</code></pre><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/3UfaIzA">&#x5224;&#x65AD;&#x6B27;&#x62C9;&#x56DE;&#x8DEF;</a></li>
<li>2.<a href="/articles/qqAFRzM">&#x300A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x300B;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x4E4B;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x2014;Merge Sort &#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;</a></li>
<li>3.<a href="/articles/yY7RF3">USACO 2.2 Party Lamps &#x6D3E;&#x5BF9;&#x706F; (lamps)</a></li>
<li>4.<a href="/articles/BRrEJv">&#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6311;&#x6218;&#x8D5B;WriteUp</a></li>
<li>5.<a href="/articles/vuuUFjY">&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li><p>6.<a href="/articles/NrMJJz">CUDA —— Dynamic Parallelism</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/BnYNRjI">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;BnYNRjI&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/技术/">技术</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/20150607/f8e9652/" title="ADO.NET学习系列（二） -" itemprop="url">ADO.NET学习系列（二） -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T22:21:34.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="ADO-NET&#x5B66;&#x4E60;&#x7CFB;&#x5217;&#xFF08;&#x4E8C;&#xFF09;">ADO.NET&#x5B66;&#x4E60;&#x7CFB;&#x5217;&#xFF08;&#x4E8C;&#xFF09;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 11:15:00  <a href="/sites/ZVBBzq">&#x535A;&#x5BA2;&#x56ED;-.NET&#x65B0;&#x624B;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/caofangsheng/p/4558138.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/caofangsheng/p/4558138.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000064">&#x6570;&#x636E;&#x5E93;</a></p>
<p>&#x8FD9;&#x6B21;&#x6211;&#x4F7F;&#x7528;ADO.NET&#x6765;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x4E3B;&#x7528;&#x5230;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x3002;&#x6211;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x7528;SQL&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x4E86;&#xFF0C;&#x90A3;&#x6837;&#x59CB;&#x7EC8;&#x6CA1;&#x6709;&#x8FDB;&#x6B65;&#xFF5E;&#xFF5E;&#xFF5E;</p>
<p>&#x4E0B;&#x9762;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x628A;&#x6211;&#x8FD9;&#x6B21;&#x7EC3;&#x4E60;&#x8981;&#x7528;&#x5230;&#x7684;&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#xFF0C;&#x8D34;&#x51FA;&#x6765;&#xFF1A;</p>
<p><img src="http://img1.tuicool.com/7JJJry.gif" alt=""></p>
<pre><code> <span class="number">1</span> USE master    --&amp;<span class="array">#x</span>4F7F;&amp;<span class="array">#x</span>7528;&amp;<span class="array">#x</span>7CFB;&amp;<span class="array">#x</span>7EDF;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>5E93;
 <span class="number">2</span> GO
 <span class="number">3</span> <span class="keyword">IF</span> EXISTS(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> sysdatabases WHERE name=N&amp;apos;DB_MyStudentLife&amp;apos;)   
 <span class="number">4</span> DROP DATABASE [DB_MyStudentLife];  --&amp;<span class="array">#x</span>5982;&amp;<span class="array">#x</span>679C;&amp;<span class="array">#x</span>8981;&amp;<span class="array">#x</span>521B;&amp;<span class="array">#x</span>5EFA;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>5E93;&amp;<span class="array">#x</span>5B58;&amp;<span class="array">#x</span>5728;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>8BDD;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>5C31;&amp;<span class="array">#x</span>5220;&amp;<span class="array">#x</span>9664;
 <span class="number">5</span> GO
 <span class="number">6</span> CREATE DATABASE [DB_MyStudentLife] --&amp;<span class="array">#x</span>521B;&amp;<span class="array">#x</span>5EFA;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>5E93;
 <span class="number">7</span> GO
 <span class="number">8</span> USE [DB_MyStudentLife]       --&amp;<span class="array">#x</span>4F7F;&amp;<span class="array">#x</span>7528;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>5E93;
 <span class="number">9</span> GO
<span class="number">10</span> <span class="keyword">IF</span> EXISTS(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> sysobjects WHERE name=N&amp;apos;MyClass&amp;apos;)
<span class="number">11</span> DROP <span class="keyword">TABLE</span> [MyClass]           --&amp;<span class="array">#x</span>5982;&amp;<span class="array">#x</span>679C;&amp;<span class="array">#x</span>8981;&amp;<span class="array">#x</span>521B;&amp;<span class="array">#x</span>5EFA;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>8868;&amp;<span class="array">#x</span>5B58;&amp;<span class="array">#x</span>5728;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>8BDD;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>5C31;&amp;<span class="array">#x</span>5220;&amp;<span class="array">#x</span>9664;(&amp;<span class="array">#x</span>6CE8;&amp;<span class="array">#x</span>610F;sysobjects&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>4E00;&amp;<span class="array">#x</span>5B9A;&amp;<span class="array">#x</span>8981;&amp;<span class="array">#x</span>5168;&amp;<span class="array">#x</span>90E8;&amp;<span class="array">#x</span>662F;&amp;<span class="array">#x</span>5C0F;&amp;<span class="array">#x</span>5199;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>7136;&amp;<span class="array">#x</span>6709;&amp;<span class="array">#x</span>9519;&amp;<span class="array">#x</span>8BEF;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>80FD;&amp;<span class="array">#x</span>5199;&amp;<span class="array">#x</span>6210;&amp;<span class="array">#x</span>5927;&amp;<span class="array">#x</span>5199;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>3002;)
<span class="number">12</span> GO
<span class="number">13</span> CREATE <span class="keyword">TABLE</span> MyClass                                --&amp;<span class="array">#x</span>521B;&amp;<span class="array">#x</span>5EFA;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>8868;
<span class="number">14</span> (
<span class="number">15</span>     C_ID INT NOT NULL PRIMARY KEY,               --&amp;<span class="array">#x</span>73ED;&amp;<span class="array">#x</span>7EA7;&amp;<span class="array">#x</span>7F16;&amp;<span class="array">#x</span>53F7;
<span class="number">16</span>     C_Name NVARCHAR(<span class="number">200</span>) not null,               --&amp;<span class="array">#x</span>73ED;&amp;<span class="array">#x</span>7EA7;&amp;<span class="array">#x</span>540D;&amp;<span class="array">#x</span>79F0;
<span class="number">17</span>     C_Descr nvarchar(max) not null               --&amp;<span class="array">#x</span>73ED;&amp;<span class="array">#x</span>7EA7;&amp;<span class="array">#x</span>7B80;&amp;<span class="array">#x</span>4ECB;
<span class="number">18</span>  
<span class="number">19</span> );
<span class="number">20</span> GO
<span class="number">21</span> <span class="keyword">IF</span> EXISTS(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> sysobjects WHERE name=N&amp;apos;MyStudent&amp;apos;)
<span class="number">22</span> DROP <span class="keyword">TABLE</span> MyStudent
<span class="number">23</span> GO
<span class="number">24</span> CREATE <span class="keyword">TABLE</span> MyStudent
<span class="number">25</span> (
<span class="number">26</span> S_ID int not null primary key,   --&amp;<span class="array">#x</span>5B66;&amp;<span class="array">#x</span>53F7;
<span class="number">27</span> S_Name nvarchar(<span class="number">50</span>) not null,                  --&amp;<span class="array">#x</span>59D3;&amp;<span class="array">#x</span>540D;
<span class="number">28</span> S_Gender char(<span class="number">2</span>) not null,                     --&amp;<span class="array">#x</span>6027;&amp;<span class="array">#x</span>522B;
<span class="number">29</span> S_Address nvarchar(max) not null ,             --&amp;<span class="array">#x</span>5730;&amp;<span class="array">#x</span>5740;
<span class="number">30</span> S_Phone nvarchar(<span class="number">50</span>)not null,                  --&amp;<span class="array">#x</span>7535;&amp;<span class="array">#x</span>8BDD;
<span class="number">31</span> S_Age int not null,                            --&amp;<span class="array">#x</span>5E74;&amp;<span class="array">#x</span>9F84;
<span class="number">32</span> S_Birthday datetime not null,                  --&amp;<span class="array">#x</span>751F;&amp;<span class="array">#x</span>65E5;
<span class="number">33</span> S_CardID int not null,                         --&amp;<span class="array">#x</span>8EAB;&amp;<span class="array">#x</span>4EFD;&amp;<span class="array">#x</span>8BC1;&amp;<span class="array">#x</span>53F7;&amp;<span class="array">#x</span>7801;
<span class="number">34</span> S_CID  int not null references MyClass(C_ID)   --&amp;<span class="array">#x</span>73ED;&amp;<span class="array">#x</span>7EA7;&amp;<span class="array">#x</span>7F16;&amp;<span class="array">#x</span>53F7;
<span class="number">35</span> 
<span class="number">36</span> );
</code></pre><p> &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x8868;&#x8BED;&#x53E5;</p>
<p>&#x63A5;&#x7740;&#x5927;&#x5BB6;&#x9009;&#x4E2D;&#x521A;&#x624D;&#x6267;&#x884C;&#x811A;&#x672C;&#xFF0C;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x6211;&#x4E0B;&#x9762;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5411;&#x6570;&#x636E;&#x5E93;&#x8868;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x5427;</p>
<p><img src="http://img1.tuicool.com/7JJJry.gif" alt=""></p>
<pre><code> <span class="number">1</span> insert <span class="keyword">into</span> MyClass(C_ID,C_Name,C_Descr)values(<span class="number">1</span>,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x8F6F</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="number">1108</span><span class="subst">&amp;</span><span class="variable">#x73ED</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6B66</span>;<span class="subst">&amp;</span><span class="variable">#x6C49</span>;<span class="subst">&amp;</span><span class="variable">#x8F6F</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5DE5</span>;<span class="subst">&amp;</span><span class="variable">#x7A0B</span>;<span class="subst">&amp;</span><span class="variable">#x804C</span>;<span class="subst">&amp;</span><span class="variable">#x4E1A</span>;<span class="subst">&amp;</span><span class="variable">#x5B66</span>;<span class="subst">&amp;</span><span class="variable">#x9662</span>;<span class="subst">&amp;</span>apos;);
 <span class="number">2</span> insert <span class="keyword">into</span> MyClass(C_ID,C_Name,C_Descr)values(<span class="number">2</span>,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x8F6F</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="number">1107</span><span class="subst">&amp;</span><span class="variable">#x73ED</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6B66</span>;<span class="subst">&amp;</span><span class="variable">#x6C49</span>;<span class="subst">&amp;</span><span class="variable">#x8F6F</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5DE5</span>;<span class="subst">&amp;</span><span class="variable">#x7A0B</span>;<span class="subst">&amp;</span><span class="variable">#x804C</span>;<span class="subst">&amp;</span><span class="variable">#x4E1A</span>;<span class="subst">&amp;</span><span class="variable">#x5B66</span>;<span class="subst">&amp;</span><span class="variable">#x9662</span>;<span class="subst">&amp;</span>apos;);
 <span class="number">3</span> insert <span class="keyword">into</span> MyClass(C_ID,C_Name,C_Descr)values(<span class="number">3</span>,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x5B9E</span>;<span class="subst">&amp;</span><span class="variable">#x9A8C</span>;<span class="subst">&amp;</span><span class="variable">#x73ED</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6B66</span>;<span class="subst">&amp;</span><span class="variable">#x6C49</span>;<span class="subst">&amp;</span><span class="variable">#x8F6F</span>;<span class="subst">&amp;</span><span class="variable">#x4EF6</span>;<span class="subst">&amp;</span><span class="variable">#x5DE5</span>;<span class="subst">&amp;</span><span class="variable">#x7A0B</span>;<span class="subst">&amp;</span><span class="variable">#x804C</span>;<span class="subst">&amp;</span><span class="variable">#x4E1A</span>;<span class="subst">&amp;</span><span class="variable">#x5B66</span>;<span class="subst">&amp;</span><span class="variable">#x9662</span>;<span class="subst">&amp;</span>apos;);
 <span class="number">4</span> 
 <span class="number">5</span> 
 <span class="number">6</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">1</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
 <span class="number">7</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">2</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
 <span class="number">8</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">3</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#xFFFD</span>;<span class="subst">&amp;</span><span class="variable">#xFFFD</span>;<span class="subst">&amp;</span><span class="variable">#xFFFD</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
 <span class="number">9</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">4</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">10</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">5</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">11</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">6</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">12</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">7</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">13</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">8</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">14</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">9</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">15</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">10</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">16</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">11</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">17</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">12</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">18</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">13</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">19</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">14</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">20</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">15</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">21</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">16</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
<span class="number">22</span> insert <span class="keyword">into</span> MyStudent(S_ID,S_Name,S_Gender,S_Age,S_Birthday,S_CardID,S_Phone,S_Address,S_CID)values(<span class="subst">&amp;</span>apos;<span class="number">17</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x674E</span>;<span class="subst">&amp;</span><span class="variable">#x56DB</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x7537</span>;<span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">22</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">1992</span><span class="subst">-</span><span class="number">09</span><span class="subst">-</span><span class="number">26</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">111111111</span><span class="subst">&amp;</span>apos;,<span class="subst">&amp;</span>apos;<span class="number">11232131234</span><span class="subst">&amp;</span>apos;,N<span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x6DF1</span>;<span class="subst">&amp;</span><span class="variable">#x5733</span>;<span class="subst">&amp;</span><span class="variable">#x5B9D</span>;<span class="subst">&amp;</span><span class="variable">#x5B89</span>;<span class="subst">&amp;</span><span class="variable">#x77F3</span>;<span class="subst">&amp;</span><span class="variable">#x5CA9</span>;<span class="subst">&amp;</span>apos;,<span class="number">1</span>);
</code></pre><p> &#x63D2;&#x5165;&#x6570;&#x636E;&#x5230;&#x6570;&#x636E;&#x5E93;&#x8868;&#x4E2D;</p>
<p>&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#xFF0C;&#x7B49;&#x4F1A;&#x6211;&#x8981;&#x5411;MyClass&#x8868;&#x4E2D;&#x63D2;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x73B0;&#x5728;&#x4E3A;&#x8FD9;&#x4E2A;&#x8868;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x63D2;&#x5165;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p><img src="http://img1.tuicool.com/7JJJry.gif" alt=""></p>
<pre><code> <span class="number">1</span> <span class="keyword">IF</span> OBJECT_ID(&amp;apos;Ins_ClasseD&amp;apos;,&amp;apos;P&amp;apos;) <span class="keyword">IS</span> <span class="keyword">NOT</span> NULL 
 <span class="number">2</span>   DROP <span class="function"><span class="keyword">PROCEDURE</span>  <span class="title">Ins_ClasseD</span>
 3   <span class="title">GO</span> 
 4   <span class="title">CREATE</span> <span class="title">PROCEDURE</span> <span class="title">Ins_ClasseD</span>
 5    @<span class="title">C_ID</span> <span class="title">int</span>  ,   
 6    @<span class="title">C_Name</span> <span class="title">nvarchar</span><span class="params">(200)</span>  ,
 7    @<span class="title">C_Descr</span> <span class="title">nvarchar</span><span class="params">(max)</span>
 8    <span class="title">AS</span>
 9    <span class="title">INSERT</span> <span class="title">INTO</span> <span class="title">dbo</span>.<span class="title">MyClass</span>
10            <span class="params">( C_ID, C_Name, C_Descr )</span>
11    <span class="title">VALUES</span>  <span class="params">( @C_ID, -- C_ID - int
12              @C_Name, -- C_Name - nvarchar(200)</span>
13              @<span class="title">C_Descr</span>  -- <span class="title">C_Descr</span> - <span class="title">nvarchar</span><span class="params">(max)</span>
14              );</span>
<span class="number">15</span>              
<span class="number">16</span>    GO
</code></pre><p> &#x7ED9;MyClass&#x8868;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;</p>
<p>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x7A0B;&#x5E8F;&#x5B9E;&#x73B0;&#xFF1A;</p>
<p>&#x6211;&#x662F;&#x590D;&#x4E60;&#xFF0C;ADO.NET&#xFF0C;&#x73B0;&#x5728;&#x5C31;&#x968F;&#x4FBF;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x63A7;&#x5236;&#x53F0;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x6765;&#x5F00;&#x59CB;&#x6211;&#x7684;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<p>&#x6CE8;&#x610F;;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x7B80;&#x5355;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x6CA1;&#x6709;&#x628A;&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x90A3;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#xFF0C;&#x653E;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8981;&#x653E;&#x7684;&#x8BDD;&#xFF0C;&#x8981;&#x7528;&#x5230;System.Configuration&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;ConfigurationManager&#x7C7B;..&#x5177;&#x4F53;&#x7684;&#x7EC6;&#x8282;&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#x3002;</p>
<p>&#x8BF7;&#x770B;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code>using <span class="class">System</span>;
using <span class="class">System</span>.<span class="class">Collections</span>.<span class="class">Generic</span>;
using <span class="class">System</span>.<span class="class">Linq</span>;
using <span class="class">System</span>.<span class="class">Text</span>;
using <span class="class">System</span>.<span class="class">Threading</span>.<span class="class">Tasks</span>;
using <span class="class">System</span>.<span class="class">Data</span>;
using <span class="class">System</span>.<span class="class">Data</span>.<span class="class">SqlClient</span>;
namespace <span class="class">ADO</span>.<span class="class">NET</span>&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x6761</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x5E93</span>;&amp;<span class="symbol">#x4E2D</span>;
{
    class <span class="class">Program</span>
    {
        //&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;<span class="symbol">#x4E32</span>;
        private static string sqlCon = &amp;quot;server=.;database=<span class="class">DB_MyStudentLife</span>;uid=sa;pwd=<span class="class">Password_1</span>&amp;quot;;
        static void <span class="class">Main</span>(string[] args)
        {
            //<span class="number">1</span>&amp;<span class="symbol">#x521B</span>;&amp;<span class="symbol">#x5EFA</span>;&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5BF9</span>;&amp;<span class="symbol">#x8C61</span>;&amp;<span class="symbol">#xFF08</span>;&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;<span class="symbol">#x4E32</span>;&amp;<span class="symbol">#xFF09</span>;
            <span class="class">SqlConnection</span> scon = new <span class="class">SqlConnection</span>(sqlCon);
            //<span class="number">2</span>&amp;<span class="symbol">#x521B</span>;&amp;<span class="symbol">#x5EFA</span>;&amp;<span class="symbol">#x547D</span>;&amp;<span class="symbol">#x4EE4</span>;&amp;<span class="symbol">#x5BF9</span>;&amp;<span class="symbol">#x8C61</span>;&amp;<span class="symbol">#xFF08</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x547D</span>;&amp;<span class="symbol">#x4EE4</span>;&amp;<span class="symbol">#x5BF9</span>;&amp;<span class="symbol">#x8C61</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x5C5E</span>;&amp;<span class="symbol">#x6027</span>;&amp;<span class="symbol">#xFF09</span>;
            <span class="class">SqlCommand</span> scmd = new <span class="class">SqlCommand</span>();
            scmd.<span class="class">CommandText</span> = &amp;quot;<span class="class">Ins_ClasseD</span>&amp;quot;;
            scmd.<span class="class">CommandType</span> = <span class="class">CommandType</span>.<span class="class">StoredProcedure</span>;  //&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x4F7F</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x50A8</span>;&amp;<span class="symbol">#x8FC7</span>;&amp;<span class="symbol">#x7A0B</span>;&amp;<span class="symbol">#x6765</span>;&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;
            scmd.<span class="class">Connection</span> = scon;
            //<span class="number">3</span>&amp;<span class="symbol">#x6253</span>;&amp;<span class="symbol">#x5F00</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x5E93</span>;&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x63A5</span>;
            scon.<span class="class">Open</span>();
            //&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x53C2</span>;&amp;<span class="symbol">#x6570</span>;
            scmd.<span class="class">Parameters</span>.<span class="class">Add</span>(new <span class="class">SqlParameter</span>(&amp;quot;@<span class="class">C_ID</span>&amp;quot;,<span class="number">6</span>));
            scmd.<span class="class">Parameters</span>.<span class="class">Add</span>(new <span class="class">SqlParameter</span>(&amp;quot;@<span class="class">C_Name</span>&amp;quot;, &amp;quot;&amp;<span class="symbol">#x6D4B</span>;&amp;<span class="symbol">#x8BD5</span>;&amp;<span class="symbol">#x73ED</span>;&amp;quot;));
            scmd.<span class="class">Parameters</span>.<span class="class">Add</span>(new <span class="class">SqlParameter</span>(&amp;quot;@<span class="class">C_Descr</span>&amp;quot;, &amp;quot;&amp;<span class="symbol">#x8F6F</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x6D4B</span>;&amp;<span class="symbol">#x8BD5</span>;&amp;<span class="symbol">#x6280</span>;&amp;<span class="symbol">#x672F</span>;&amp;quot;));
            //<span class="number">4</span>&amp;<span class="symbol">#x53D1</span>;&amp;<span class="symbol">#x9001</span>;&amp;<span class="symbol">#x547D</span>;&amp;<span class="symbol">#x4EE4</span>;
           int result= scmd.<span class="class">ExecuteNonQuery</span>();
            //<span class="number">5</span>&amp;<span class="symbol">#x5904</span>;&amp;<span class="symbol">#x7406</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;
           if (result &amp;gt; <span class="number">0</span>)
           {
               <span class="class">Console</span>.<span class="class">WriteLine</span>(&amp;quot;&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x529F</span>;&amp;quot;);
           }
           else
           {
               <span class="class">Console</span>.<span class="class">WriteLine</span>(&amp;quot;&amp;<span class="symbol">#x63D2</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x5931</span>;&amp;<span class="symbol">#x8D25</span>;&amp;quot;);
           }  
        //<span class="number">6</span>&amp;<span class="symbol">#x6700</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x6B65</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5DEE</span>;&amp;<span class="symbol">#x70B9</span>;&amp;<span class="symbol">#x5FD8</span>;&amp;<span class="symbol">#x8BB0</span>;&amp;<span class="symbol">#x4E86</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x5173</span>;&amp;<span class="symbol">#x95ED</span>;&amp;<span class="symbol">#x8FDE</span>;&amp;<span class="symbol">#x63A5</span>;  
        scon.<span class="class">Close</span>();
           <span class="class">Console</span>.<span class="class">ReadKey</span>();
        }
    }
}
</code></pre><p>&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x73A9;&#x4E4B;&#x540E;&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF1A;</p>
<p><img src="http://img0.tuicool.com/YFRVnq.jpg" alt=""></p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/a6ZrA3M">&#x5BF9;datagridview&#x8FDB;&#x884C;&#x589E;&#x5220;&#x6539;(B)</a></li>
<li>2.<a href="/articles/ZNVBfiu">Datazen&#x914D;&#x7F6E;</a></li>
<li>3.<a href="/articles/R7z67zJ">RMAN&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D; &#x2014;&#x2014; &#x53C2;&#x6570;&#x6587;&#x4EF6;&#x8FD8;&#x539F;</a></li>
<li>4.<a href="/articles/uQ7J32Q">&#x8FDC;&#x7A0B;&#x642D;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x73AF;&#x5883;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;</a></li>
<li>5.<a href="/articles/6VB7zii">Datazen&#x5B89;&#x88C5;</a></li>
<li><p>6.<a href="/articles/eUfI3m6">&#x6211;&#x7684;MYSQL&#x5B66;&#x4E60;&#x5FC3;&#x5F97;&#xFF08;16&#xFF09; &#xFF1A; &#x4F18;&#x5316;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/z6naAjB">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;z6naAjB&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/数据库/">数据库</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/20150607/f8ec4b5/" title="Android 学习笔记 BroadcastReceiver广播... -" itemprop="url">Android 学习笔记 BroadcastReceiver广播... -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T22:21:34.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Android_&#x5B66;&#x4E60;&#x7B14;&#x8BB0;_BroadcastReceiver&#x5E7F;&#x64AD;…">Android &#x5B66;&#x4E60;&#x7B14;&#x8BB0; BroadcastReceiver&#x5E7F;&#x64AD;…</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 11:22:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/RGogoing/p/4557370.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/RGogoing/p/4557370.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11050070">BroadcastReceiver</a></p>
<p>PS&#xFF1A;&#x4E0D;&#x65AD;&#x63D0;&#x5347;&#x81EA;&#x5DF1;&#xFF0C;&#x662F;&#x4EF6;&#x597D;&#x4E8B;… </p>
<h4 id="&#x5B66;&#x4E60;&#x5185;&#x5BB9;&#xFF1A;">&#x5B66;&#x4E60;&#x5185;&#x5BB9;&#xFF1A;</h4><h4 id="1-BroadcastReceiver&#x7684;&#x4F7F;&#x7528;-">1.BroadcastReceiver&#x7684;&#x4F7F;&#x7528;..</h4><h4 id="2-&#x901A;&#x8FC7;BroadcastReceiver&#x53BB;&#x542F;&#x52A8;Service…">2.&#x901A;&#x8FC7;BroadcastReceiver&#x53BB;&#x542F;&#x52A8;Service…</h4><h4 id="1-BroadcastReceiver…">1.BroadcastReceiver…</h4><p>&#x5E7F;&#x64AD;&#xFFFD;&#xFFFD;&#xFFFD;&#x6536;&#x8005;&#xFF0C;&#x7528;&#x6765;&#x63A5;&#x6536;&#x7CFB;&#x7EDF;&#x548C;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x5E7F;&#x64AD;…Android&#x5E7F;&#x64AD;&#x673A;&#x5236;&#x7528;&#x7684;&#x5730;&#x65B9;&#x8FD8;&#x662F;&#x5F88;&#x591A;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#xFF1A;&#x5F53;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x901A;&#x8FC7;&#x63A5;&#x6536;&#x8FD9;&#x6761;&#x5E7F;&#x64AD;&#x5C31;&#x80FD;&#x53CA;&#x65F6;&#x505A;&#x51FA;&#x76F8;&#x5E94;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x7136;&#x540E;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;..&#x8FD9;&#x5C31;&#x662F;&#x5E7F;&#x64AD;&#x7684;&#x673A;&#x5236;…&#x5B83;&#x81EA;&#x8EAB;&#x5E76;&#x4E0D;&#x5B9E;&#x73B0;&#x56FE;&#x5F62;&#x7528;&#x6237;&#x754C;&#x9762;…&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x89E6;&#x53D1;&#x6027;&#x7684;&#x64CD;&#x4F5C;…</p>
<h4 id="&#x4F7F;&#x7528;&#x5E7F;&#x64AD;&#x662F;&#x9700;&#x8981;&#x51E0;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;…">&#x4F7F;&#x7528;&#x5E7F;&#x64AD;&#x662F;&#x9700;&#x8981;&#x51E0;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;…</h4><p>i.&#x90A3;&#x5C31;&#x662F;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5E7F;&#x64AD;&#xFF0C;&#x518D;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x54CD;&#x5E94;&#x7684;&#x65B9;&#x6CD5;…&#x6765;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;&#x54CD;&#x5E94;&#x7684;&#x64CD;&#x4F5C;…</p>
<h4 id="ii-&#x5E7F;&#x64AD;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x662F;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x7684;&#xFF0C;&#x4E0D;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x662F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x7684;…-">ii.&#x5E7F;&#x64AD;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x662F;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x7684;&#xFF0C;&#x4E0D;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x662F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x7684;….</h4><h4 id="&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;&#xFF1A;">&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;&#xFF1A;</h4><p>&#x4E00;&#x79CD;&#x662F;&#x9759;&#x6001;&#x6CE8;&#x518C;&#xFF0C;&#x9759;&#x6001;&#x6CE8;&#x518C;&#x5C31;&#x662F;&#x914D;&#x7F6E;AndroidManifest.xml&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#xFF0C;&#x7531;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;receiver,&#x5C5E;&#x4E8E;&#x5E38;&#x9A7B;&#x578B;&#x7684;…</p>
<pre><code><span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--&amp;</span><span class="variable">#x8FD9</span>;<span class="subst">&amp;</span><span class="variable">#x6BB5</span>;<span class="subst">&amp;</span><span class="variable">#x4EE3</span>;<span class="subst">&amp;</span><span class="variable">#x7801</span>;<span class="subst">&amp;</span><span class="variable">#x6DFB</span>;<span class="subst">&amp;</span><span class="variable">#x52A0</span>;<span class="subst">&amp;</span><span class="variable">#x5728</span>;application<span class="subst">&amp;</span><span class="variable">#x4E4B</span>;<span class="subst">&amp;</span><span class="variable">#x95F4</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x4E86</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;<span class="subst">--&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;receiver android:name<span class="subst">=&amp;</span>quot;<span class="built_in">.</span>MyBroadcast<span class="subst">&amp;</span>quot;
                  android:enabled<span class="subst">=&amp;</span>quot;<span class="literal">true</span><span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;
            <span class="subst">&amp;</span><span class="literal">lt</span>;intent<span class="attribute">-filter</span><span class="subst">&amp;</span><span class="literal">gt</span>;
                <span class="subst">&amp;</span><span class="literal">lt</span>;action android:name<span class="subst">=&amp;</span>quot;android<span class="built_in">.</span>intent<span class="built_in">.</span>action<span class="built_in">.</span>EDIT<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
            <span class="subst">&amp;</span><span class="literal">lt</span>;/intent<span class="attribute">-filter</span><span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;/receiver<span class="subst">&amp;</span><span class="literal">gt</span>;
</code></pre><p>&#x4E8C;&#x79CD;&#x5219;&#x662F;&#x52A8;&#x6001;&#x6CE8;&#x518C;…&#x5C5E;&#x4E8E;&#x975E;&#x5E38;&#x9A7B;&#x578B;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x9690;&#x85CF;&#x5728;&#x4EE3;&#x7801;&#x5757;&#x4E4B;&#x95F4;…&#x4E0D;&#x5BB9;&#x6613;&#x53D1;&#x73B0;…</p>
<pre><code>private <span class="class">BroadcastReceiver</span> receiver;

receiver=new <span class="class">CallReceiver</span>();
//&amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x6001</span>;&amp;<span class="symbol">#x6CE8</span>;&amp;<span class="symbol">#x518C</span>;&amp;<span class="symbol">#x5E7F</span>;&amp;<span class="symbol">#x64AD</span>;&amp;<span class="symbol">#x5730</span>;&amp;<span class="symbol">#x5740</span>;...
registerReceiver(receiver,new <span class="class">IntentFilter</span>(&amp;quot;android.intent.action.<span class="class">EDIT</span>&amp;quot;));
//&amp;<span class="symbol">#x89E3</span>;&amp;<span class="symbol">#x9664</span>;&amp;<span class="symbol">#x6CE8</span>;&amp;<span class="symbol">#x518C</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x5E7F</span>;&amp;<span class="symbol">#x64AD</span>;&amp;<span class="symbol">#x5730</span>;&amp;<span class="symbol">#x5740</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x5BF9</span>;&amp;<span class="symbol">#x5E7F</span>;&amp;<span class="symbol">#x64AD</span>;&amp;<span class="symbol">#x673A</span>;&amp;<span class="symbol">#x5236</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x6CE8</span>;&amp;<span class="symbol">#x9500</span>;...
unregisterReceiver(receiver);
</code></pre><p>iii.&#x6CE8;&#x518C;&#x5B8C;&#x6210;&#x540E;&#x5C31;&#x662F;&#x8FDB;&#x884C;&#x53D1;&#x9001;&#x5E7F;&#x64AD;&#x4E86;…&#x8FD9;&#x6837;&#x5E7F;&#x64AD;&#x63A5;&#x6536;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x4E86;…&#x5148;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;Intent&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;sendBroadcast(Intent)&#x65B9;&#x6CD5;&#x5C06;&#x5E7F;&#x64AD;&#x53D1;&#x51FA;… </p>
<p>&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#xFF0C;&#x5BF9;&#x8C61;&#x8C03;&#x7528;&#x4E86;onReceive()&#x65B9;&#x6CD5;&#x65F6;&#x5E7F;&#x64AD;&#x624D;&#x662F;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x5F53;&#x4ECE;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x5C31;&#x65E0;&#x6548;&#x4E86;..&#x56E0;&#x6B64; <strong>&#x5E7F;&#x64AD;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x662F;&#x975E;&#x5E38;&#x77ED;&#x6682;&#x7684;&#xFF0C;</strong> &#x4E5F;&#x5C31;&#x4EC5;&#x4EC5;&#x5341;&#x51E0;&#x79D2;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x8981;&#x5728;&#x5176;&#x4E2D;&#x52A0;&#x5165;&#x4E00;&#x4E9B;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x4EA4;&#x7ED9;Service&#x53BB;&#x5B8C;&#x6210;&#xFF0C;&#x5E7F;&#x64AD;&#x5C31;&#x662F;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x5C0F;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;…&#x7C98;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;… </p>
<pre><code><span class="keyword">package</span> com.example.broadcast_receiver;
<span class="keyword">import</span> android.content.<span class="type">BroadcastReceiver</span>;
<span class="keyword">import</span> android.content.<span class="type">Context</span>;
<span class="keyword">import</span> android.content.<span class="type">Intent</span>;
<span class="keyword">import</span> android.widget.<span class="type">Toast</span>;
public <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcast</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">BroadcastReceiver</span>{</span>
    <span class="annotation">@Override</span>
    public void onReceive(<span class="type">Context</span> context, <span class="type">Intent</span> intent) {
        <span class="comment">// <span class="doctag">TODO</span> Auto-generated method stub</span>
        <span class="type">String</span> str=intent.getStringExtra(&amp;quot;msg&amp;quot;);
        <span class="type">Toast</span>.makeText(context, str, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).show();
    }
}
</code></pre><p>&#x4E0A;&#x9762;&#x5C31;&#x662F;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E7F;&#x64AD;&#x63A5;&#x6536;&#x7C7B;&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;BroadcastReceiver,&#x5728;&#x5176;&#x4E2D;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;…. </p>
<pre><code><span class="keyword">package</span> com.example.broadcast_receiver;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.app.Activity;
<span class="keyword">import</span> android.view.Menu;
<span class="keyword">import</span> android.view.View;
<span class="keyword">import</span> android.view.View.OnClickListener;
<span class="keyword">import</span> android.content.Intent;
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>{
    <span class="keyword">private</span> Intent intent=<span class="keyword">new</span> Intent(Intent.ACTION_EDIT);
    <span class="annotation">@Override</span>
    <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{
        <span class="keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        findViewById(R.id.broadcast).setOnClickListener(<span class="keyword">this</span>);
    }
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>{
        <span class="comment">// Inflate the menu; this adds items to the action bar if it is present.</span>
        getMenuInflater().inflate(R.menu.main, menu);
        <span class="keyword">return</span> <span class="keyword">true</span>;
    }
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>{
        <span class="comment">// <span class="doctag">TODO</span> Auto-generated method stub</span>
        <span class="keyword">switch</span> (v.getId()) {
        <span class="keyword">case</span> R.id.broadcast:
            intent.putExtra(&amp;quot;msg&amp;quot;, &amp;quot;aa&amp;quot;);
            MainActivity.<span class="keyword">this</span>.sendBroadcast(intent);
            <span class="keyword">break</span>;
        }
    }
}
</code></pre><p>&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x5728;MainActivity&#x4E2D;&#x8C03;&#x7528;&#x5E7F;&#x64AD;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4E2A;&#x52A8;&#x4F5C;&#xFF0C;&#x5C31;&#x662F;&#x89E6;&#x53D1;&#x6309;&#x94AE;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x8F93;&#x51FA;&quot;aa&quot;&#x8FD9;&#x6761;&#x4FE1;&#x606F;…&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#xFF0C;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5C31;&#x4E00;&#x4E2A;&#x6309;&#x94AE;&#xFF0C;&#x6CA1;&#x5FC5;&#x8981;&#x53BB;&#x7C98;&#x8D34;…&#x91CD;&#x8981;&#x7684;&#x662F;&#x7406;&#x89E3;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x4F7F;&#x7528;BroadcastReceiver&#x65F6;&#x4E00;&#x5B9A;&#x8981;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#xFF0C;&#x5426;&#x5219;&#x662F;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x7684;…. </p>
<h4 id="2-&#x5982;&#x4F55;&#x4F7F;&#x7528;BroadcastReceiver&#x53BB;&#x542F;&#x52A8;Service…">2.&#x5982;&#x4F55;&#x4F7F;&#x7528;BroadcastReceiver&#x53BB;&#x542F;&#x52A8;Service…</h4><p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x8FC7;&#xFF0C;BroadcastReceiver&#x5BF9;&#x8C61;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x662F;&#x975E;&#x5E38;&#x77ED;&#x6682;&#x7684;…&#x90A3;&#x4E48;&#x8017;&#x65F6;&#x7684;&#x52A8;&#x4F5C;&#x662F;&#x65E0;&#x6CD5;&#x5728;&#x8FD9;&#x91CC;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;BroadcastReceiver&#x4E2D;&#x53BB;&#x8C03;&#x7528;Service…&#x8BA9;Service&#x53BB;&#x6267;&#x884C;&#x8017;&#x65F6;&#x7684;&#x670D;&#x52A1;…&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x5982;&#x4F55;&#x53BB;&#x542F;&#x52A8;Service…</p>
<h4 id="i-&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;Service…">i.&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;Service…</h4><pre><code><span class="keyword">package</span> com.example.broadcast_receiver;
<span class="keyword">import</span> android.app.Service;
<span class="keyword">import</span> android.content.Intent;
<span class="keyword">import</span> android.media.MediaPlayer;
<span class="keyword">import</span> android.os.IBinder;
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> <span class="keyword">extends</span> <span class="title">Service</span></span>{
    <span class="keyword">private</span> MediaPlayer media;
    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>{
        <span class="comment">// <span class="doctag">TODO</span> Auto-generated method stub</span>
        <span class="keyword">return</span> <span class="keyword">null</span>;
    }
    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span></span>{
        <span class="keyword">super</span>.onCreate();
        media=MediaPlayer.create(MyService.<span class="keyword">this</span>, R.raw.a);
        MyService.<span class="keyword">this</span>.media.prepare();
        MyService.<span class="keyword">this</span>.media.start();
        media.setLooping(<span class="keyword">true</span>);
    }
    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span>{
        <span class="keyword">super</span>.onDestroy();
    }
    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">(Intent intent,<span class="keyword">int</span> startId)</span></span>{
        <span class="keyword">super</span>.onStart(intent, startId);
    }
}
</code></pre><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x590D;&#x5236;&#x4E00;&#x9996;&#x6B4C;&#x66F2;&#x5230;res\raw&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x4E00;&#x9996;&#x6B4C;&#x66F2;…raw&#x6587;&#x4EF6;&#x5939;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x8FDB;&#x884C;&#x65B0;&#x5EFA;… </p>
<pre><code><span class="keyword">package</span> com.example.broadcast_receiver;
<span class="keyword">import</span> android.content.<span class="type">BroadcastReceiver</span>;
<span class="keyword">import</span> android.content.<span class="type">Context</span>;
<span class="keyword">import</span> android.content.<span class="type">Intent</span>;
<span class="keyword">import</span> android.widget.<span class="type">Toast</span>;
public <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcast</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">BroadcastReceiver</span>{</span>
    <span class="annotation">@Override</span>
    public void onReceive(<span class="type">Context</span> context, <span class="type">Intent</span> intent) {
        <span class="comment">// <span class="doctag">TODO</span> Auto-generated method stub</span>
        <span class="type">Intent</span> newintent =<span class="keyword">new</span> <span class="type">Intent</span>(context,<span class="type">MyService</span>.<span class="keyword">class</span>);
        context.startService(newintent);
        <span class="type">String</span> str=intent.getStringExtra(&amp;quot;msg&amp;quot;);
        <span class="type">Toast</span>.makeText(context, str, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).show();
    }  
}
</code></pre><p>&#x8FD9;&#x4E2A;&#x662F;&#x5E7F;&#x64AD;&#x7C7B;&#xFF0C;&#x4ECE;&#x5E7F;&#x64AD;&#x7684;&#x5185;&#x90E8;&#x53BB;&#x542F;&#x52A8;Service…..&#x7136;&#x540E;&#x5728;AndroidManifest.xml&#x6587;&#x4EF6;&#x4E2D;&#x7684;&lt;application&gt;&#x548C;&lt;/application&gt;&#x4E4B;&#x95F4;&#x52A0;&#x5165;&#x4EE3;&#x7801;&lt;service android:name=&quot;.MyService&quot; android:enable=&quot;true&quot;/&gt;&#x5C31;&#x641E;&#x5B9A;&#x4E86;… </p>
<h4 id="&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x5728;BroadcastReceiver()&#x5185;&#x90E8;&#x53BB;&#x542F;&#x52A8;Service…-">&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x5728;BroadcastReceiver()&#x5185;&#x90E8;&#x53BB;&#x542F;&#x52A8;Service…..</h4><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/Ajimq2">android&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x5B9E;&#x73B0;TextView&#x6309;&#x4E0B;&#x540E;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x6539;&#x53D8;</a></li>
<li>2.<a href="/articles/ZVBJZb">Android UI: LinearLayout&#x4E2D;layout_weight &#x5C5E;&#x6027;&#x7684;&#x4F7F;&#x7528;&#x89C4;&#x5219;</a></li>
<li>3.<a href="/articles/qa2Urqz">Android&#xFF1A;&#x52A0;&#x8F7D;Android Design Support Library&#x5F02;&#x5E38;&#x89E3;&#x51B3;&#x65B9;&#x6848;</a></li>
<li>4.<a href="/articles/zmAnyyn">&#x817E;&#x8BAF;&#x79FB;&#x52A8;&#x6027;&#x80FD;&#x8BC4;&#x6D4B;&#x4E13;&#x5BB6;&#x53F6;&#x65B9;&#x6B63;&#xFF1A;Android&#x4F18;&#x5316;&#x7B14;&#x8BB0;</a></li>
<li>5.<a href="/articles/2qIZ736">Android &#x5B66;&#x4E60;&#x7B14;&#x8BB0; Service&#x670D;&#x52A1;&#x4E0E;&#x8FDC;&#x7A0B;&#x901A;&#x4FE1;…&#xFF08;AIDL&#xFF09;</a></li>
<li><p>6.<a href="/articles/Nf2EzeY">android&#x56FD;&#x9645;&#x5316;&#x64CD;&#x4F5C;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/An2Ejmn">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;An2Ejmn&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/BroadcastReceiver/">BroadcastReceiver</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>78</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/技术/" title="技术">技术<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS开发/" title="iOS开发">iOS开发<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/安卓开发/" title="安卓开发">安卓开发<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/链表/" title="链表">链表<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Oracle数据库/" title="Oracle数据库">Oracle数据库<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MVC模式/" title="MVC模式">MVC模式<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Html/" title="Html">Html<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/REST/" title="REST">REST<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/WCF/" title="WCF">WCF<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Objective-C/" title="Objective-C">Objective-C<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Docker/" title="Docker">Docker<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/性能优化/" title="性能优化">性能优化<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/移动开发/" title="移动开发">移动开发<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/加密解密/" title="加密解密">加密解密<sup>2</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
