
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/2/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/48cab26/" title="使用 varnish + nginx + lua 搭建网站的降级系统 -" itemprop="url">使用 varnish + nginx + lua 搭建网站的降级系统 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:31:19.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h3><p>&#x901A;&#x5E38;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x6570;&#x636E;&#x5E93;&#x6302;&#x6389;&#x540E;&#xFF0C;&#x540E;&#x679C;&#x5C06;&#x662F;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#x7684;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x57FA;&#x672C;&#x4E0D;&#x53EF;&#x7528;&#x4E86;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x7F51;&#x7AD9;&#x6765;&#x8BF4;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x6302;&#x6389;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x80FD;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x3002;&#x672C;&#x6587;&#x5C06;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528; varnish + nginx + lua &#x642D;&#x5EFA;&#x7F51;&#x7AD9;&#x964D;&#x7EA7;&#x7CFB;&#x7EDF;&#x6765;&#x5B9E;&#x73B0;&#x6574;&#x4E2A;&#x76EE;&#x6807;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150706/48c72ff.jpg" alt=""></p>
<h3 id="&#x964D;&#x7EA7;&#x76EE;&#x6807;">&#x964D;&#x7EA7;&#x76EE;&#x6807;</h3><p>&#x964D;&#x7EA7;&#x65B9;&#x6848;&#x7684;&#x76EE;&#x6807;&#x662F;&#xFF0C;&#x5F53;&#x7F51;&#x7AD9;&#x51FA;&#x73B0;&#x81F4;&#x547D;&#x6545;&#x969C;&#x65F6;&#xFF08;&#x5982;&#x51FA;&#x73B0;500&#x9519;&#x8BEF;&#xFF0C;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x7F13;&#x5B58;&#x7684;&#x9875;&#x9762;&#x6570;&#x636E;&#x5C55;&#x73B0;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x4ECE;&#x800C;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;&#x3002;</p>
<ol>
<li>&#x53EA;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;</li>
<li>&#x6D4F;&#x89C8;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x975E;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x4E0B;&#x7684;&#x6570;&#x636E;</li>
<li>&#x652F;&#x6301;&#x624B;&#x52A8;&#x548C;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x3002;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x662F;&#x5F53;&#x540E;&#x7AEF;&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;&#x6B21;&#x6570;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x8FBE;&#x5230;&#x4E00;&#x5B9A;&#x9608;&#x503C;(&#x4E0D;&#x5305;&#x542B;503)&#x3002;&#x624B;&#x52A8;&#x964D;&#x7EA7;&#x662F;&#x4ECE;&#x63A7;&#x5236;&#x754C;&#x9762;&#x64CD;&#x4F5C;&#x3002;</li>
</ol>
<h3 id="&#x964D;&#x7EA7;&#x65B9;&#x6848;">&#x964D;&#x7EA7;&#x65B9;&#x6848;</h3><h4 id="&#x5B58;&#x50A8;">&#x5B58;&#x50A8;</h4><p>&#x4F7F;&#x7528;varnish&#x4F5C;&#x4E3A;&#x5B58;&#x50A8;&#x3002;&#x6709;&#x6548;&#x7684;&#x8282;&#x7EA6;&#x4E86;&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x5E76;&#x4FDD;&#x6301;&#x4E86;&#x8F83;&#x597D;&#x7684;&#x6027;&#x80FD;&#x3002;</p>
<h4 id="&#x66F4;&#x65B0;">&#x66F4;&#x65B0;</h4><p>&#x4F7F;&#x7528;crond&#x811A;&#x672C;&#x4ECE;nginx&#x7684;access&#x65E5;&#x5FD7;&#x4E2D;&#x5206;&#x6790;&#x51FA;&#x8BF7;&#x6C42;url&#xFF0C;&#x7136;&#x540E;&#x5411;varnish&#x53D1;&#x8BF7;&#x6C42;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x65B0;varnish&#x7684;&#x7F13;&#x5B58;&#x3002;&#x7F13;&#x5B58;&#x7684;&#x5F02;&#x6B65;&#x66F4;&#x65B0;&#xFF0C;&#x51CF;&#x5C11;&#x5BF9;nginx&#x7684;&#x538B;&#xFFFD;&#xFFFD;&#xFFFD;&#x3002;</p>
<h4 id="&#x964D;&#x7EA7;">&#x964D;&#x7EA7;</h4><p>&#x652F;&#x6301;&#x624B;&#x52A8;&#x964D;&#x7EA7;&#x548C;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x3002;&#x964D;&#x7EA7;&#x540E;&#xFF0C;nginx&#x81EA;&#x52A8;&#x4ECE;varnish&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#x3002;</p>
<h4 id="&#x6D41;&#x7A0B;&#x56FE;">&#x6D41;&#x7A0B;&#x56FE;</h4><p><img src="http://taojinke.github.io/img/20150706/48c8416.png" alt=""></p>
<h4 id="&#x6D41;&#x7A0B;&#x63CF;&#x8FF0;">&#x6D41;&#x7A0B;&#x63CF;&#x8FF0;</h4><ol>
<li>&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x5230;nginx&#x65F6;&#xFF0C;nginx&#x4F1A;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x662F;&#x5426;&#x662F;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x5C5E;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;varnish&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;&#x975E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x5230;php-fpm&#x3002;</li>
<li>&#x5F53;crond&#x811A;&#x672C;&#x8BF7;&#x6C42;varnish&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;varnish&#x5904;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x4E0D;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x66F4;&#x65B0;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5904;&#x5728;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x5230;nginx&#xFF0C;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;&#x7136;&#x540E;&#x628A;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x5230;varnish&#x4E2D;&#x3002;</li>
<li>varnish&#x4F1A;&#x81EA;&#x52A8;&#x76D1;&#x63A7;&#x540E;&#x7AEF;nginx&#x7684;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x68C0;&#x6D4B;&#x5230;nginx&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;varnish&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x8FDB;&#x5165;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;</li>
</ol>
<h3 id="&#x5B89;&#x88C5;&#x90E8;&#x7F72;">&#x5B89;&#x88C5;&#x90E8;&#x7F72;</h3><p>vanish&#x5B89;&#x88C5;&#x5230;/home/varnish &#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5B89;&#x88C5;libpcre&#x3002;</p>
<pre><code>sudo yum <span class="keyword">install</span> pcre pcre-devel
</code></pre><p>&#x5176;&#x6B21;&#xFF0C;&#x5B89;&#x88C5;varnish&#x3002;</p>
<pre><code>.<span class="regexp">/configure --prefix=/</span>home/varnish
make
sudo -u admin make install
sudo -u admin mkdir -p <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>
sudo chown <span class="string">admin:</span>admin -R <span class="regexp">/home/</span>varnish
sudo -u admin touch <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>varnish_cache.data
sudo chmod <span class="number">777</span> <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>varnish_cache.data
</code></pre><p>&#x518D;&#x6B21;&#xFF0C;&#x4FEE;&#x6539;varnish&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;&#x90E8;&#x7F72;&#x76F8;&#x5173;&#x811A;&#x672C;&#x3002; <a href="http://www.bo56.com/download/pc_downgrade.tar.gz" target="_blank" rel="external">&#x70B9;&#x51FB;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x5305;</a> &#x3002;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x4E3A;default.vcl&#x3002; </p>
<p>&#x6700;&#x540E;&#xFF0C;&#x542F;&#x52A8;varnish&#x3002;&#x542F;&#x52A8;&#x811A;&#x672C;&#x4E5F;&#x5728;&#x538B;&#x7F29;&#x5305;&#x4E2D;&#xFF0C;&#x540D;&#x79F0;&#x4E3A; varnishctl</p>
<pre><code>sudo <span class="regexp">/home/</span>admin<span class="regexp">/varnish/</span>sbin<span class="regexp">/varnishctl start</span>
</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x542F;&#x52A8;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;varnishlog&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x662F;&#x5426;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x5B57;&#x6837;&#xFF0C;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;http&#x7684;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x4E3A;200</p>
<pre><code>$ /home/varnish/bin/varnishlog
0 Backend_health - default Still healthy 4--X-RH <span class="number">4 2 4 0</span>.<span class="number">002698 0</span>.001722 HTTP/<span class="number">1.1 200</span> OK
</code></pre><h3 id="&#x90E8;&#x7F72;lua&#x811A;&#x672C;">&#x90E8;&#x7F72;lua&#x811A;&#x672C;</h3><p>lua&#x811A;&#x672C;&#x5728;/home/admin/nginx/data/lua&#x76EE;&#x5F55;&#x4E0B;&#x3002; &#x786E;&#x4FDD;&#x76EE;&#x5F55;&#x4E0B;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x4E2A;&#x811A;&#x672C;&#x3002;</p>
<pre><code>pc_get_downgrade_data<span class="class">.lua</span>
init<span class="class">.lua</span>
pc_status_stat<span class="class">.lua</span>
pc_get_status<span class="class">.lua</span>
pc_set_satus.lua
</code></pre><p>&#x8FD9;&#x51E0;&#x4E2A;&#x811A;&#x672C;&#x5728;&#x4E0B;&#x8F7D;&#x7684;&#x538B;&#x7F29;&#x5305;&#x4E2D;&#x6709;&#x3002;</p>
<h3 id="&#x4FEE;&#x6539;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x4FEE;&#x6539;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x5728;http&#x57DF;&#x589E;&#x52A0;</p>
<pre><code>init_by_lua_file &amp;apos<span class="comment">;lua/init.lua&amp;apos;;</span>
lua_shared_dict pc_status 1m<span class="comment">;</span>
lua_shared_dict pc_auto_status 1m<span class="comment">;</span>
#varnish config
upstream varnish{
    server <span class="number">127.0.0.1</span>:8080 weight=1 max_fails=2 fail_timeout=5s<span class="comment">;</span>
}
</code></pre><p>&#x6700;&#x540E;&#xFF0C;&#x5728;server&#x57DF;&#x5B8F;&#x589E;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x3002;</p>
<pre><code><span class="title">location</span> <span class="variable">@php</span> {
  <span class="title">include</span> fastcgi_params;
}   
<span class="title">location</span> <span class="variable">@var</span> {
 <span class="title">proxy_pass</span> <span class="url">http://varnish<span class="variable">$str_params</span></span>;
}   
<span class="title">location</span> <span class="regexp">~* ^(.+\.php)(.*)$</span> {
  <span class="comment">#check downgrade status, then get data from varnish</span>
  <span class="title">set</span> <span class="variable">$str_params</span> <span class="variable">$uri</span>;
  <span class="title">content_by_lua_file</span> lua/pc_get_downgrade_data.lua;
}
<span class="title">location</span> /hl_get_auto_status {
           <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
               <span class="title">return</span> <span class="number">403</span>;
           }
           <span class="title">content_by_lua_file</span> lua/pc_get_auto_status.lua;
 }
<span class="title">location</span> /hl_get_status {
     <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
         <span class="title">return</span> <span class="number">403</span>;
     }
     <span class="title">content_by_lua_file</span> lua/pc_get_status.lua;
}
<span class="title">location</span> /hl_set_status {
           <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
               <span class="title">return</span> <span class="number">403</span>;
           }
           <span class="title">content_by_lua_file</span> lua/pc_set_status.lua;
}
<span class="title">log_by_lua_file</span>  lua/pc_status_stat.lua;
</code></pre><h3 id="&#x90E8;&#x7F72;crond&#x811A;&#x672C;">&#x90E8;&#x7F72;crond&#x811A;&#x672C;</h3><p>&#x811A;&#x672C;varnish_crond.php&#x3002;&#x5728;crond&#x4E2D;&#x589E;&#x52A0;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x3002;&#x6BCF;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<p>&#x6765;&#x81EA;crond&#x7684;&#x8BF7;&#x6C42;&#xFF0C;user-agent&#x6570;&#x636E;&#x4E3A;varnish_crond&#x3002;&#x628A;user-agent&#x4E3A;varnish_crond&#x8BF7;&#x6C42;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x3002;&#x4FDD;&#x8BC1;&#x80FD;&#x6B63;&#x5E38;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x76F8;&#x5173;&#x6570;&#x636E;&#x3002;</p>
<h3 id="&#x964D;&#x7EA7;&#x7BA1;&#x7406;">&#x964D;&#x7EA7;&#x7BA1;&#x7406;</h3><h4 id="varnish&#x964D;&#x7EA7;">varnish&#x964D;&#x7EA7;</h4><p>&#x53EA;&#x8981;&#x8BA9;varnish&#x914D;&#x7F6E;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x76D1;&#x63A7;&#x811A;&#x672C;check.php&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;&#x5373;&#x53EF;&#x3002;varnish&#x76D1;&#x63A7;&#x5230;&#x6307;&#x5B9A;&#x811A;&#x672C;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x81EA;&#x52A8;&#x4F1A;&#x8FDB;&#x5165;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;&#x5F53;&#x811A;&#x672C;&#x8FD4;&#x56DE;200&#x72B6;&#x6001;&#x540E;&#xFF0C;varnish&#x81EA;&#x52A8;&#x53C8;&#x4F1A;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x3002; </p>
<h4 id="nginx&#x964D;&#x7EA7;">nginx&#x964D;&#x7EA7;</h4><p>&#x8BBE;&#x7F6E;&#x964D;&#x7EA7;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_set_status?status=<span class="number">1</span></span></span>
</code></pre><p>&#x6062;&#x590D;&#x6B63;&#x5E38;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_set_status?status=<span class="number">0</span></span></span>
</code></pre><p>&#x67E5;&#x770B;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_get_status</span></span>
</code></pre><p>&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x4E3A;1&#x8868;&#x793A;&#x964D;&#x7EA7;&#x3002;</p>
<p>&#x6765;&#x6E90;&#xFF1A; <a href="http://www.bo56.com/%E4%BD%BF%E7%94%A8varnish-nginx-lua%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99%E7%9A%84%E9%99%8D%E7%BA%A7%E7%B3%BB%E7%BB%9F/" target="_blank" rel="external">http://www.bo56.com/%E4%BD%BF%E7%94%A8varnish-nginx-lua%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99%E7%9A%84%E9%99%8D%E7%BA%A7%E7%B3%BB%E7%BB%9F/</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Lua/">Lua</a><a href="/tags/Nginx/">Nginx</a><a href="/tags/Varnish/">Varnish</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cdf2cc/" title="在android上运行io.js -" itemprop="url">在android上运行io.js -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x65E0;&#x610F;&#x4E2D;&#x770B;&#x5230;io.js&#x5728;4&#x6708;&#x4EFD;&#x5F00;&#x59CB;&#x5DF2;&#x7ECF;&#x652F;&#x6301;android&#x7F16;&#x8BD1;,&#x679C;&#x65AD;&#x5F04;&#x4E00;&#x4E2A;</p>
<h2 id="&#x73AF;&#x5883;">&#x73AF;&#x5883;</h2><p>opensuse 11.4 x86</p>
<p>android 4.2.2 linux 3.2, &#x5DF2;root</p>
<h2 id="&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;NDK_r10e">&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;NDK r10e</h2><p><a href="http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86.bin" target="_blank" rel="external">http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86.bin</a></p>
<p>&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x633A;&#x6162;&#x7684;,&#x8D70;&#x767E;&#x5EA6;&#x4E91;&#x5C31;&#x5F88;&#x5FEB;</p>
<p>&#x5728;opensuse&#x5207;&#x6362;&#x5230;root,&#x7136;&#x540E;&#x8FD0;&#x884C;</p>
<pre><code><span class="keyword">cd</span> /<span class="keyword">opt</span>
./android-ndk-r10e-linux-x86.bin
</code></pre><p>&#x5373;&#x53EF;&#x81EA;&#x884C;&#x89E3;&#x538B;&#x51FA;ndk</p>
<h2 id="&#x4E0B;&#x8F7D;&#x5E76;&#x7F16;&#x8BD1;io-js">&#x4E0B;&#x8F7D;&#x5E76;&#x7F16;&#x8BD1;io.js</h2><pre><code>cd /opt
<span class="array"># </span>&amp;<span class="array">#x</span>6216;&amp;<span class="array">#x</span>8005;&amp;<span class="array">#x</span>767E;&amp;<span class="array">#x</span>5EA6;&amp;<span class="array">#x</span>4E91;&amp;<span class="array">#x</span>4E0B;&amp;<span class="array">#x</span>8F7D;&amp;<span class="array">#x</span>4E5F;&amp;<span class="array">#x</span>53EF;&amp;<span class="array">#x</span>4EE5;,&amp;<span class="array">#x</span>66F4;&amp;<span class="array">#x</span>5FEB;
wget https:<span class="comment">//iojs.org/dist/v2.1.0/iojs-v2.1.0.tar.gz</span>
tar xf iojs-v2.1.0.tar.gz
cd iojs-v2.1.0
./android-configure /opt/android-ndk-r10e
make -j8
</code></pre><p>&#x65E0;&#x5F02;&#x5E38;,&#x65E0;Error,&#x987A;&#x5229;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;</p>
<h2 id="&#x4F20;&#x8F93;&#x5230;android&#x4E0A;">&#x4F20;&#x8F93;&#x5230;android&#x4E0A;</h2><pre><code>adb remount
adb shell <span class="keyword">mkdir</span> /<span class="keyword">system</span>/iojs
adb <span class="keyword">push</span> out/Release/iojs /<span class="keyword">system</span>/iojs/iojs
adb <span class="keyword">push</span> lib /<span class="keyword">system</span>/iojs/iojs
adb shell <span class="keyword">chmod</span> <span class="number">777</span> /<span class="keyword">system</span>/iojs/iojs
</code></pre><h2 id="&#x5C1D;&#x8BD5;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;">&#x5C1D;&#x8BD5;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;</h2><p>&#x5148;&#x5F04;&#x4E2A;&#x5B98;&#x7F51;demo, &#x5B58;&#x4E3A;example.js</p>
<pre><code>var http = require<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;http&amp;apos;);</span>

http.createServer<span class="list">(<span class="keyword">function</span> <span class="list">(<span class="keyword">request</span>, response)</span> {
  response.writeHead<span class="list">(<span class="number">200</span>, {<span class="keyword">&amp;apos</span><span class="comment">;Content-Type&amp;apos;: &amp;apos;text/plain&amp;apos;});</span>
  response.end<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;Hello World\n&amp;apos;);</span>
})</span>.listen<span class="list">(<span class="number">8124</span>)</span><span class="comment">;</span>

console.log<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;Server running at http://127.0.0.1:8124/&amp;apos;);</span></span></span></span></span>
</code></pre><p>&#x4F20;&#x5230;android&#x4E0A;</p>
<pre><code>adb shell mkdir <span class="regexp">/sdcard/</span>iojs/
adb push example.js <span class="regexp">/sdcard/</span>iojs/
adb shell <span class="regexp">/system/</span>iojs<span class="regexp">/iojs /</span>sdcard<span class="regexp">/iojs/</span>example.js
</code></pre><p>&#x8BBF;&#x95EE;&#x4E00;&#x4E0B;android&#x8BBE;&#x5907;&#x4E0A;&#x7684;&#x670D;&#x52A1;,&#x54C8;&#x54C8;</p>
<pre><code>curl -v <span class="string">http:</span><span class="comment">//192.168.72.107:8124/</span>
</code></pre><p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#x5185;&#x5BB9;,&#x641E;&#x5B9A;</p>
<pre><code>*   Trying <span class="number">192.168.72.107</span>...
* Connected to <span class="number">192.168.72.107</span> (<span class="number">192.168.72.107</span>) port 8124 (#0)
&amp;gt<span class="comment">; GET / HTTP/1.1</span>
&amp;gt<span class="comment">; Host: 192.168.72.107:8124</span>
&amp;gt<span class="comment">; User-Agent: curl/7.42.1</span>
&amp;gt<span class="comment">; Accept: */*</span>
&amp;gt<span class="comment">; </span>
&amp;lt<span class="comment">; HTTP/1.1 200 OK</span>
&amp;lt<span class="comment">; Content-Type: text/plain</span>
&amp;lt<span class="comment">; Date: Thu, 28 May 2015 02:13:18 GMT</span>
&amp;lt<span class="comment">; Connection: keep-alive</span>
&amp;lt<span class="comment">; Transfer-Encoding: chunked</span>
&amp;lt<span class="comment">; </span>
Hello World
* Connection #0 to host <span class="number">192.168.72.107</span> left intact
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android/">Android</a><a href="/tags/Linux/">Linux</a><a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2d0fd9b/" title="IO.js 1.7.1 发布，服务器 JS 引擎 -" itemprop="url">IO.js 1.7.1 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x534E;&#x4E3A;&#x5F00;&#x53D1;&#x677F;</a></p>
<p>IO.js 1.7.1 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6539;&#x8FDB;&#x4E86;&#x5BF9; ARM &#x7684;&#x652F;&#x6301;&#xFF0C;&#x73B0;&#x5728; ARM &#x4E0A;&#x9762;&#x6B64;&#x7248;&#x672C;&#x80FD;&#x591F;&#x987A;&#x5229;&#x521B;&#x5EFA;&#x548C;&#x6D4B;&#x8BD5;&#x4E86;&#x3002; </p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A; </p>
<ul>
<li>C++ API: Fedor Indutny contributed a feature to V8 which has been backported to the V8 bundled in io.js. SealHandleScope allows a C++ add-on author to <em>seal</em> a HandleScope to prevent further, unintended allocations within it. Currently only enabled for debug builds of io.js. This feature helped detect the leak in <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a> and is now activated on the root HandleScope in io.js. (Fedor Indutny) <a href="https://github.com/iojs/io.js/pull/1395" target="_blank" rel="external">#1395</a> .</li>
<li><p>ARM: This release includes significant work to improve the state of ARM support for builds and tests. The io.js CI cluster&apos;s ARMv6, ARMv7 and ARMv8 build servers are now all (mostly) reporting passing builds and tests.</p>
<ul>
<li>ARMv8 64-bit (AARCH64) is now properly supported, including a backported fix in libuv that was mistakenly detecting the existence of epoll_wait() . (Ben Noordhuis) <a href="https://github.com/iojs/io.js/pull/1365" target="_blank" rel="external">#1365</a> .</li>
<li>ARMv6: <a href="https://github.com/iojs/io.js/issues/1376" target="_blank" rel="external">#1376</a> reported a problem with Math.exp() on ARMv6 (incl Raspberry Pi). The culprit is erroneous codegen for ARMv6 when using the &quot;fast math&quot; feature of V8. —nofast_math has been turned on for all ARMv6 variants by default to avoid this, fast math can be turned back on with —fast_math . (Ben Noordhuis) <a href="https://github.com/iojs/io.js/pull/1398" target="_blank" rel="external">#1398</a> .</li>
<li>Tests: timeouts have been tuned specifically for slower platforms, detected as ARMv6 and ARMv7. (Roman Reiss) <a href="https://github.com/iojs/io.js/pull/1366" target="_blank" rel="external">#1366</a> .</li>
</ul>
</li>
<li><p>npm: Upgrade npm to 2.7.6. See the <a href="https://github.com/npm/npm/releases/tag/v2.7.6" target="_blank" rel="external">release notes</a> for details. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/b7475936f473f029e6a027ba1b16277523747d0b" target="_blank" rel="external">b747593</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a> Don&apos;t automatically log all git failures as errors. maybeGithub needs to be able to fail without logging to support its fallback logic. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/78005ebb6f4103c20f077669c3929b7ea46a4c0d" target="_blank" rel="external">78005eb</a><a href="https://github.com/npm/npm/issues/7743" target="_blank" rel="external">#7743</a> Always quote arguments passed to npm run-script . This allows build systems and the like to safely escape glob patterns passed as arguments to run-scripts with npm run-script &lt;script&gt; — &lt;arguments&gt; . This is a tricky change to test, and may be reverted or moved to npm@3 if it turns out it breaks things for users. ( <a href="https://github.com/mantoni" target="_blank" rel="external">@mantoni</a> )</li>
<li><a href="https://github.com/npm/npm/commit/da015eee45f6daf384598151d06a9b57ffce136e" target="_blank" rel="external">da015ee</a><a href="https://github.com/npm/npm/issues/7074" target="_blank" rel="external">#7074</a>read-package-json@1.3.3 : read-package-json no longer caches package.json files, which trades a very small performance loss for the elimination of a large class of really annoying race conditions. See <a href="https://github.com/npm/npm/issues/7074" target="_blank" rel="external">#7074</a> for the grisly details. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/releases/tag/v1.7.1" target="_blank" rel="external">https://github.com/iojs/io.js/releases/tag/v1.7.1</a></p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cfffb3/" title="io.js 1.6.0 发布，服务器端 JS 引擎 -" itemprop="url">io.js 1.6.0 发布，服务器端 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>  io.js 1.6.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A;  <a href="https://github.com/iojs/io.js/archive/v1.6.0.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.0.zip</a>  &#x3002;</p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>node</strong> : a new -r or —requirecommand-line option can be used to pre-load modules at start-up (Ali Ijaz Sheikh)  <a href="https://github.com/iojs/io.js/pull/881" target="_blank" rel="external">#881</a>  .</li>
<li><strong>querystring</strong> : parse() and stringify()are now faster (Brian White)  <a href="https://github.com/iojs/io.js/pull/847" target="_blank" rel="external">#847</a>  .</li>
<li><strong>http</strong> : the http.ClientRequest#flush() method has been deprecated and replaced with http.ClientRequest#flushHeaders()to match the same change now in Node.js v0.12 as per  <a href="https://github.com/joyent/node/pull/9048" target="_blank" rel="external">joyent/node#9048</a>  (Yosuke Furukawa)  <a href="https://github.com/iojs/io.js/pull/1156" target="_blank" rel="external">#1156</a>  .</li>
<li><strong>net</strong> : allow server.listen() to accept a String option for port , e.g. { port: &quot;1234&quot; } , to match the same option being accepted in net.connect()as of  <a href="https://github.com/joyent/node/pull/9268" target="_blank" rel="external">joyent/node#9268</a>  (Ben Noordhuis)  <a href="https://github.com/iojs/io.js/pull/1116" target="_blank" rel="external">#1116</a>  .</li>
<li><strong>tls</strong>: further work on the reported memory leak although there appears to be a minor leak remaining for the use-case in question, track progress at  <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a>  .</li>
<li><strong>v8</strong> : backport a fix for an integer overflow when —max_old_space_sizevalues aboveare used (Ben Noordhuis)  <a href="https://github.com/iojs/io.js/pull/1166" target="_blank" rel="external">#1166</a>  .</li>
<li>platforms: the io.js CI system now reports passes onFreeBSDandSmartOS( <em>Solaris</em> ).</li>
<li><strong>npm</strong>: upgrade npm to 2.7.1. See  <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v271-2015-03-05" target="_blank" rel="external">npm CHANGELOG.md</a>  for details. Summary:</li>
</ul>
<ul>
<li><a href="https://github.com/npm/npm/issues/7121" target="_blank" rel="external">#7121</a>  npm install —savefor Git dependencies saves the URL passed in, instead of the temporary directory used to clone the remote repo. Fixes using Git dependencies when shrinkwwapping. In the process, rewrote the Git dependency caching code. Again. No more single-letter variable names, and a much clearer workflow. (  <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a>  )</li>
<li><a href="https://github.com/npm/npm/commit/abdd040da9" target="_blank" rel="external">abdd040</a> read-package-json@1.3.2: Provide more helpful error messages when JSON parse errors are encountered by using a more forgiving JSON parser than JSON.parse. (  <a href="https://github.com/smikes" target="_blank" rel="external">@smikes</a>  )</li>
<li><a href="https://github.com/npm/npm/commit/c56cfcd79c" target="_blank" rel="external">c56cfcd</a><a href="https://github.com/npm/npm/issues/7525" target="_blank" rel="external">#7525</a>  npm dedupehandles scoped packages. (  <a href="https://github.com/KidkArolis" target="_blank" rel="external">@KidkArolis</a>  )</li>
<li><p><a href="https://github.com/npm/npm/commit/4ef1412d00" target="_blank" rel="external">4ef1412</a><a href="https://github.com/npm/npm/issues/7075" target="_blank" rel="external">#7075</a>  If you try to tag a release as a valid semver range, npm publish and npm tagwill error early instead of proceeding. (  <a href="https://github.com/smikes" target="_blank" rel="external">@smikes</a>  )</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B;  <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a>  &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A;  <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a>  &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li>libexecinfo (FreeBSD and OpenBSD only) </li>
</ul>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong> [ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a> ] </p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 1.6.0 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A; <a href="http://www.oschina.net/news/60704/io-js-1-6-0" target="_blank" rel="external">http://www.oschina.net/news/60704/io-js-1-6-0</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cfb675/" title="io.js 1.6.3 发布，服务器 JS 引擎 -" itemprop="url">io.js 1.6.3 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://baichuan.taobao.com/?from=oschinabbs" target="_blank" rel="external">&#x963F;&#x91CC;&#x767E;&#x5DDD;&#xFF0C;&#x5F00;&#x542F;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;&#x65B0;&#x7BC7;&#x7AE0;</a></p>
<p>io.js 1.6.3 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>fs: corruption can be caused by fs.writeFileSync() and append-mode fs.writeFile() and fs.writeFileSync() under certain circumstances, reported in <a href="https://github.com/iojs/io.js/issues/1058" target="_blank" rel="external">#1058</a> , fixed in <a href="https://github.com/iojs/io.js/pull/1063" target="_blank" rel="external">#1063</a> (Olov Lassus).</li>
<li>iojs: an &quot;internal modules&quot; API has been introduced to allow core code to share JavaScript modules internally only without having to expose them as a public API, this feature is for core-only <a href="https://github.com/iojs/io.js/pull/848" target="_blank" rel="external">#848</a> (Vladimir Kurchatkin).</li>
<li><p>timers: two minor problems with timers have been fixed:</p>
<ul>
<li>Timer#close() is now properly idempotent <a href="https://github.com/iojs/io.js/issues/1288" target="_blank" rel="external">#1288</a> (Petka Antonov).</li>
<li>setTimeout() will only run the callback once now after an unref() during the callback <a href="https://github.com/iojs/io.js/pull/1231" target="_blank" rel="external">#1231</a> (Roman Reiss).</li>
<li>NOTE: there are still other unresolved concerns with the timers code, such as <a href="https://github.com/iojs/io.js/pull/1152" target="_blank" rel="external">#1152</a> .</li>
</ul>
</li>
<li><p>Windows: a &quot;delay-load hook&quot; has been added for compiled add-ons on Windows that should alleviate some of the problems that Windows users may be experiencing with add-ons in io.js <a href="https://github.com/iojs/io.js/pull/1251" target="_blank" rel="external">#1251</a> (Bert Belder).</p>
</li>
<li>V8: minor bug-fix upgrade for V8 to 4.1.0.27.</li>
<li><p>npm: upgrade npm to 2.7.4. See <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v274-2015-03-20" target="_blank" rel="external">npm CHANGELOG.md</a> for details. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/7641" target="_blank" rel="external">#7641</a> Due to 448efd0, running npm shrinkwrap —dev caused production dependencies to no longer be included in npm-shrinkwrap.json . Whoopsie! ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/fb0ac26eecdd76f6eaa4a96a865b7c6f52ce5aa5" target="_blank" rel="external">fb0ac26</a><a href="https://github.com/npm/npm/issues/7579" target="_blank" rel="external">#7579</a> Only block removing files and links when we&apos;re sure npm isn&apos;t responsible for them. This change is hard to summarize, because if things are working correctly you should never see it, but if you want more context, just <a href="https://github.com/npm/npm/commit/fb0ac26eecdd76f6eaa4a96a865b7c6f52ce5aa5" target="_blank" rel="external">go read the commit message</a> , which lays it all out. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/051c4738486a826300f205b71590781ce7744f01" target="_blank" rel="external">051c473</a><a href="https://github.com/npm/npm/issues/7552" target="_blank" rel="external">#7552</a>bundledDependencies are now properly included in the installation context. This is another fantastically hard-to-summarize bug, and once again, I encourage you to <a href="https://github.com/npm/npm/commit/051c4738486a826300f205b71590781ce7744f01" target="_blank" rel="external">read the commit message</a> if you&apos;re curious about the details. The snappy takeaway is that this unbreaks many use cases for ember-cli . ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/fe1bc387a14475e373557de669e03d9d006d3173" target="_blank" rel="external">fe1bc38</a><a href="https://github.com/npm/npm/issues/7672" target="_blank" rel="external">#7672</a>npm-registry-client@3.1.2 : Fix client-side certificate handling by correcting property name. ( <a href="https://github.com/atamon" target="_blank" rel="external">@atamon</a> )</li>
<li><a href="https://github.com/npm/npm/commit/89ce829a00b526d0518f5cd855c323bffe182af0" target="_blank" rel="external">89ce829</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>hosted-git-info@1.5.3 : Part 3 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/63313eb0c37891c355546fd1093010c8a0c3cd81" target="_blank" rel="external">63313eb</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>realize-package-specifier@2.2.0 : Part 2 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/3ed41bf64a1bb752bb3155c74dd6ffbbd28c89c9" target="_blank" rel="external">3ed41bf</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>npm-package-arg@3.1.1 : Part 1 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/archive/v1.6.3.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.3.zip</a> &#x3002; </p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cf0b8f/" title="IO.js 1.6.4 发布，服务器 JS 引擎 -" itemprop="url">IO.js 1.6.4 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x534E;&#x4E3A;&#x5F00;&#x53D1;&#x677F;</a></p>
<p>io.js 1.6.4 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><p>npm: upgrade npm to 2.7.5. See <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v275-2015-03-26" target="_blank" rel="external">npm CHANGELOG.md</a> for details. Includes two important security fixes. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/300834e91a4e2a95fb7fb59c309e7c3fc91d2312" target="_blank" rel="external">300834e</a>tar@2.0.0 : Normalize symbolic links that point to targets outside the extraction root. This prevents packages containing symbolic links from overwriting targets outside the expected paths for a package. Thanks to <a href="http://gfxmonk.net/" target="_blank" rel="external">Tim Cuthbertson</a> and the team at <a href="https://liftsecurity.io/" target="_blank" rel="external">Lift Security</a> for working with the npm team to identify this issue. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/0dc68757cffd5397c280bc71365d106523a5a052" target="_blank" rel="external">0dc6875</a>semver@4.3.2 : Package versions can be no more than 256 characters long. This prevents a situation in which parsing the version number can use exponentially more time and memory to parse, leading to a potential denial of service. Thanks to Adam Baldwin at Lift Security for bringing this to our attention. &#xA0;( <a href="https://github.com/isaacs" target="_blank" rel="external">@isaacs</a> )</li>
<li><a href="https://github.com/npm/npm/commit/eab618425c51e3aa4416da28dcd8ca4ba63aec41" target="_blank" rel="external">eab6184</a><a href="https://github.com/npm/npm/issues/7766" target="_blank" rel="external">#7766</a> One last tweak to ensure that GitHub shortcuts work with private repositories. ( <a href="https://github.com/iarna" target="_blank" rel="external">@iarna</a> )</li>
<li><a href="https://github.com/npm/npm/commit/a840a13bbf0330157536381ea8e58d0bd93b4c05" target="_blank" rel="external">a840a13</a><a href="https://github.com/npm/npm/issues/7746" target="_blank" rel="external">#7746</a> Only fix up git URL paths when there are paths to fix up. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
<li><p>openssl: preliminary work has been done for an upcoming upgrade to OpenSSL 1.0.2a <a href="https://github.com/iojs/io.js/pull/1325" target="_blank" rel="external">#1325</a> (Shigeki Ohtsu). See <a href="https://github.com/iojs/io.js/issues/589" target="_blank" rel="external">#589</a> for additional details.</p>
</li>
<li>timers: a minor memory leak when timers are unreferenced was fixed, alongside some related timers issues <a href="https://github.com/iojs/io.js/pull/1330" target="_blank" rel="external">#1330</a> (Fedor Indutny). This appears to have fixed the remaining leak reported in <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a> .</li>
<li>android: it is now possible to compile io.js for Android and related devices <a href="https://github.com/iojs/io.js/pull/1307" target="_blank" rel="external">#1307</a> (Giovanny Andres Gongora Granada).</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/releases/tag/v1.6.4" target="_blank" rel="external">https://github.com/iojs/io.js/releases/tag/v1.6.4</a></p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cc0f66/" title="每日文章精选 2015 05 21 -" itemprop="url">每日文章精选 2015 05 21 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf6fc.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150520/160871.html" target="_blank" rel="external">&#x9B45;&#x65CF;&#x5F00;&#x59CB;&#x5411;&#x4E2D;&#x56FD;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x4F9B;Ubuntu MX4</a></td><tr><td>&#x9B45;&#x65CF;&#x5F00;&#x59CB;&#x5411;&#x4E2D;&#x56FD;&#x5F00;&#x53D1;&#x8005; &#x63D0;&#x4F9B;Ubuntu MX4 &#xFF0C; &#x8FD9;&#x6B3E;&#x624B;&#x673A; &#x4E0D;&#x4E45;&#x4E4B;&#x540E;&#x5C06;&#x5411;&#x6B27;&#x6D32;&#x5730;&#x533A;&#x51FA;&#x552E;&#x3002;&#x9B45;&#x65CF;&#x662F;&#x5728;2014&#x5E74;2&#x6708;&#x5BA3;&#x5E03;&#x4E0E;Canonical&#x516C;&#x53F8;&#x5408;&#x4F5C;&#x53D1;&#x552E;&#x642D;&#x8F7D;Ubuntu&#x7CFB;&#x7EDF;&#x7684;&#x667A;&#x80FD;&#x624B;&#x673A;&#x3002;Canonical&#x5728;&#x65B0;&#x95FB;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf96d.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/itnews/20150520/160873.html" target="_blank" rel="external">&#x662F;&#x7F51;&#x7AD9;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x6539;&#x53D8;&#x8FD8;&#x662F;&#x4E2D;&#x56FD;&#x7F51;&#x6C11;&#x9700;&#x8981;&#x6539;&#x53D8;&#xFF1F;</a></td><tr><td>&#x4E00;&#x4F4D;&#x4E2D;&#x56FD;&#x7684;Web&#x5F00;&#x53D1;&#x8005;&#x5728;Reddit&#x4E0A; &#x53D1;&#x5E16; &#xFF0C;&#x5EFA;&#x8BAE;&#x56FD;&#x5916;&#x7684;&#x7F51;&#x7AD9;&#x5F00;&#x53D1;&#x8005;&#x6539;&#x53D8;&#x4E00;&#x4E9B;&#x901A;&#x7528;&#x7684;&#x505A;&#x6CD5;&#xFF1A;&#x7531;&#x4E8E;&#x4E2D;&#x56FD;&#x5BF9;Google&#x548C;Facebook&#x7B49;&#x7F51;&#x7AD9;&#x53CA;&#x5176;&#x670D;&#x52A1;&#x7684;&#x5C4F;&#x853D;&#xFF0C;&#x5728;&#x7F51;&#x9875;&#x4E2D;&#x52A0;&#x8F7D;Youtube&#x3001;Facebook&#x3001;Goog</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf96d.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150521/160879.html" target="_blank" rel="external">&#x5FAE;&#x8F6F;&#x5BA3;&#x5E03; WCF &#x901A;&#x8BAF;&#x57FA;&#x7840;&#x5E93;&#x5F00;&#x6E90;</a></td><tr><td>&#x5FAE;&#x8F6F; &#x5BA3;&#x5E03; &#x5C06; Windows Communication Foundation(WCF) &#x9879;&#x76EE;&#x5F00;&#x6E90;&#x4E86;&#xFF0C;Windows Communication Foundation(WCF)&#x662F;&#x7531;&#x5FAE;&#x8F6F;&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x652F;&#x6301;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#xFF0C;&#x53EF;&#x4EE5;&#x7FFB;&#x8BD1;&#x4E3A;Wi</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfbde.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150520/160864.html" target="_blank" rel="external">Node.js&#x4E0E;io.js&#x90A3;&#x4E9B;&#x4E8B;&#x513F;</a></td><tr><td>&#x53BB;&#x5E74;12&#x6708;&#xFF0C;&#x591A;&#x4F4D;&#x91CD;&#x91CF;&#x7EA7;Node.js&#x5F00;&#x53D1;&#x8005;&#x4E0D;&#x6EE1;Joyent&#x5BF9;Node.js&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x81EA;&#x7ACB;&#x95E8;&#x6237;&#x521B;&#x5EFA;&#x4E86;io.js&#x3002;io.js&#x7684;&#x53D1;&#x5C55;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x5FEB;&#xFF0C;&#x5148;&#x662F;&#x4E8E;2015&#x5E74;1&#x6708;&#x4EFD;&#x53D1;&#x5E03;&#x4E86;1.0&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x5FEB;&#x5C31;&#x8FBE;&#x5230;&#x4E86;2.0&#x7248;&#x672C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/itnews/20150521/160884.html" target="_blank" rel="external">&#x201C;&#x5954;&#x817E;D&#x201D;&#x53C8;&#x56DE;&#x6765;&#x4E86;&#xFF01;</a></td><tr><td>&#x8FD8;&#x8BB0;&#x5F97;&#x5954;&#x817E;D(Pentium D)&#x5417;&#xFF1F;&#x8FD9;&#x662F;11&#x5E74;&#x524D;&#xFF0C;Intel&#x4E3A;&#x4E86;&#x62A2;&#x5148;&#x8FDB;&#x5165;&#x53CC;&#x6838;&#x65F6;&#x4EE3;&#x800C;&#x63A8;&#x51FA;&#x7684;&#x65B0;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E24;&#x4E2A;&#x5355;&#x6838;&#x5FC3;&#x6574;&#x5408;&#x5C01;&#x88C5;&#x3001;&#x800C;&#x975E;&#x53CC;&#x6838;&#x5FC3;&#x539F;&#x751F;&#x8BBE;&#x8BA1;&#xFF0C;&#x88AB;&#x8BBD;&#x523A;&#x4E3A;&#x80F6;&#x6C34;&#x5927;&#x6CD5;&#xFF0C;&#x8D85;&#x9AD8;&#x7684;&#x529F;&#x8017;&#x548C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160880.html" target="_blank" rel="external">MemSQL 4.0.27 &#x53D1;&#x5E03;&#xFF0C;&#x5305;&#x62EC;&#x5168;&#x65B0;&#x793E;&#x533A;&#x7248;&#x672C;&#xFF01;</a></td><tr><td>MemSQL &#x4ECA;&#x5929;&#x53D1;&#x5E03; MemSQL &#x5168;&#x65B0;&#x793E;&#x533A;&#x7248;&#x672C;&#xFF0C;&#x514D;&#x8D39;&#xFF0C;&#x65E0;&#x9650;&#x5BB9;&#x91CF;&#xFF0C;&#x65E0;&#x9650;&#x89C4;&#x6A21;&#xFF0C;&#x5305;&#x62EC;&#x6240;&#x6709;&#x4E8B;&#x7269;&#x548C;&#x5206;&#x6790;&#x529F;&#x80FD;&#xFF01; &#x7531;&#x524D; Facebook &#x5DE5;&#x7A0B;&#x5E08;&#x521B;&#x529E;&#x7684; MemSQL&#xFF0C;&#x53F7;&#x79F0;&#x4E16;&#x754C;&#x4E0A;&#x6700;&#x5FEB;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160875.html" target="_blank" rel="external">PhoneGap Desktop App 0.1.7 beta &#x53D1;&#x5E03;</a></td><tr><td>PhoneGap Desktop App 0.1.7 beta &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x662F;&#x4FEE;&#x590D; PhoneGap Desktop App 0.1.6 Beta &#x7684;&#x4E00;&#x4E2A;&#x5173;&#x952E; bug&#x3002; &#x5B89;&#x88C5; &#x4E0B;&#x8F7D;&#x548C;&#x5B89;&#x88C5; PhoneGap Desktop App 0.1.7 Beta&#xFF1A; OS X &#xFF1A; Ph</td></tr>&#x65F6;&#x95F4;: 2015-05-21 21:56 &#x4F5C;&#x8005; :zhangkai &#x539F;&#x6587;&#x94FE;&#x63A5; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MemSQL/">MemSQL</a><a href="/tags/PhoneGap/">PhoneGap</a><a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2ccda09/" title="io.js 2.1.0 发布，服务器 JS 引擎 -" itemprop="url">io.js 2.1.0 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>io.js 2.1.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#xFF1A;</p>
<ul>
<li><strong>crypto</strong> : Diffie-Hellman key exchange (DHE) parameters ( &apos;dhparams&apos;) must now be 1024 bits or longer or an error will be thrown.&#xA0; <a href="https://github.com/nodejs/io.js/pull/1739" target="_blank" rel="external">#1739</a> .</li>
<li><strong>node</strong> : A new —trace-sync-iocommand line flag will print a warning and a stack trace whenever a synchronous API is used.&#xA0; <a href="https://github.com/nodejs/io.js/pull/1707" target="_blank" rel="external">#1707</a> .</li>
<li><strong>node</strong> : To allow for chaining of methods, the setTimeout() , setKeepAlive() , setNoDelay() , ref() and unref() methods used in &apos;net&apos; , &apos;dgram&apos; , &apos;http&apos; , &apos;https&apos; and &apos;tls&apos; now return the current instance instead of undefined(Roman Reiss &amp; Evan Lucas) <a href="https://github.com/nodejs/io.js/pull/1699" target="_blank" rel="external">#1699</a><a href="https://github.com/nodejs/io.js/pull/1768" target="_blank" rel="external">#1768</a><a href="https://github.com/nodejs/io.js/pull/1779" target="_blank" rel="external">#1779</a> .</li>
<li><strong>npm</strong>: Upgraded to v2.10.1, release notes can be found in <a href="https://github.com/npm/npm/releases/tag/v2.10.1" target="_blank" rel="external">https://github.com/npm/npm/releases/tag/v2.10.1</a> and <a href="https://github.com/npm/npm/releases/tag/v2.10.0" target="_blank" rel="external">https://github.com/npm/npm/releases/tag/v2.10.0</a> .</li>
<li><p><strong>util</strong> : A significant speed-up (in the order of 35%) for the common-case of a single string argument to util.format() , used by console.log()(&#x421;&#x43A;&#x43E;&#x432;&#x43E;&#x440;&#x43E;&#x434;&#x430; &#x41D;&#x438;&#x43A;&#x438;&#x442;&#x430; &#x410;&#x43D;&#x434;&#x440;&#x435;&#x435;&#x432;&#x438;&#x447;) <a href="https://github.com/nodejs/io.js/pull/1749" target="_blank" rel="external">#1749</a> .</p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/nodejs/io.js/archive/v2.1.0.zip" target="_blank" rel="external">https://github.com/nodejs/io.js/archive/v2.1.0.zip</a> &#x3002;</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/nodejs/io.js/blob/master/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A; <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a> &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 2.1.0 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/62720/io-js-2-1-0" target="_blank" rel="external">http://www.oschina.net/news/62720/io-js-2-1-0</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cd0d4e/" title="io.js 2.0.2 发布，服务器 JS 引擎 -" itemprop="url">io.js 2.0.2 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>win,node-gyp</strong>: the delay-load hook for windows addons has now been correctly enabled by default, it had wrongly defaulted to off in the release version of 2.0.0 (Bert Belder) <a href="https://github.com/iojs/io.js/pull/1433" target="_blank" rel="external">#1433</a></li>
<li><strong>os</strong> : tmpdir()&apos;s trailing slash stripping has been refined to fix an issue when the temp directory is at &apos;/&apos;. Also considers which slash is used by the operating system. (cjihrig) <a href="https://github.com/iojs/io.js/pull/1673" target="_blank" rel="external">#1673</a></li>
<li><strong>tls</strong>: default ciphers have been updated to use gcm and aes128 (Mike MacCana) <a href="https://github.com/iojs/io.js/pull/1660" target="_blank" rel="external">#1660</a></li>
<li><strong>build</strong>: v8 snapshots have been re-enabled by default as suggested by the v8 team, since prior security issues have been resolved. This should give some perf improvements to both startup and vm context creation. (Trevor Norris) <a href="https://github.com/iojs/io.js/pull/1663" target="_blank" rel="external">#1663</a></li>
<li><strong>src</strong> : fixed preload modules not working when other flags were used before —require(Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1694" target="_blank" rel="external">#1694</a></li>
<li><strong>dgram</strong> : fixed send()&apos;s callback not being asynchronous (Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1313" target="_blank" rel="external">#1313</a></li>
<li><strong>readline</strong>: emitKeys now keeps buffering data until it has enough to parse. This fixes an issue with parsing split escapes. (Alex Kocharin) <a href="https://github.com/iojs/io.js/pull/1601" target="_blank" rel="external">#1601</a></li>
<li><strong>cluster</strong> : works now properly emit &apos;disconnect&apos; to cluser.worker(Oleg Elifantiev) <a href="https://github.com/iojs/io.js/pull/1386" target="_blank" rel="external">#1386</a></li>
<li><p><strong>events</strong>: uncaught errors now provide some context (Evan Lucas) <a href="https://github.com/iojs/io.js/pull/1654" target="_blank" rel="external">#1654</a></p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/nodejs/io.js/archive/v2.0.2.zip" target="_blank" rel="external">https://github.com/nodejs/io.js/archive/v2.0.2.zip</a> &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A; <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a> &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/62514/io-js-2-0-2" target="_blank" rel="external">http://www.oschina.net/news/62514/io-js-2-0-2</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/2cef0b4/" title="io.js 1.6.2 发布，服务器 JS 引擎 -" itemprop="url">io.js 1.6.2 发布，服务器 JS 引擎 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:30:32.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>io.js 1.6.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6539;&#x8FDB;&#x4E86;&#x5BF9; Windows &#x7684;&#x652F;&#x6301;&#xFF0C;&#x4FEE;&#x590D;&#x4E86; FreeBSD &#x53D1;&#x73B0;&#x7684; BUG&#x3002;</p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>Windows&#xFF1A;The ongoing work in improving the state of Windows support has resulted in full test suite passes once again. As noted in the release notes for v1.4.2, CI system and configuration problems prevented it from properly reporting problems with the Windows tests, the problems with the CI and the codebase appear to have been fully resolved.</li>
<li><strong>FreeBSD</strong>: A  <a href="https://lists.freebsd.org/pipermail/freebsd-current/2015-March/055043.html" target="_blank" rel="external">kernel bug</a>  impacting io.js/Node.js was  <a href="https://github.com/joyent/node/issues/9326" target="_blank" rel="external">discovered</a>  and a patch has been introduced to prevent it causing problems for io.js (Fedor Indutny)  <a href="https://github.com/iojs/io.js/pull/1218" target="_blank" rel="external">#1218</a>  .</li>
<li><strong>module</strong> : you can now require(&apos;.&apos;) instead of having to require(&apos;./&apos;), this is considered a bugfix (Micha&#xEB;l Zasso)  <a href="https://github.com/iojs/io.js/pull/1185" target="_blank" rel="external">#1185</a>  .</li>
<li><p>v8: updated to 4.1.0.25 including patches for —max_old_space_size values aboveand Solaris support, both of which are already included in io.js.</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B;  <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a>  &#x3002;</p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A;  <a href="https://github.com/iojs/io.js/archive/v1.6.2.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.2.zip</a>  &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A;  <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a>  &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[  <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 1.6.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/60828/io-js-1-6-2" target="_blank" rel="external">http://www.oschina.net/news/60828/io-js-1-6-2</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/io-js/">io.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" href="/page/3/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>587</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>32</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>23</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>9</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
