
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/7/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
                        <a href="http://nodejs-xx.sblig.club/" target="_blank">NodeJs</a>
                    </li>
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/197f4e3/" title="mongodb的安装及配置安装服务 -" itemprop="url">mongodb的安装及配置安装服务 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <ol>
<li><p>&#x5B89;&#x88C5;mongodb&#x6570;&#x636E;&#x5E93;</p>
<p>mongodb&#x5B98;&#x65B9;&#x7F51;&#x5740;&#xFF1A; <a href="https://www.mongodb.org" target="_blank" rel="external">https://www.mongodb.org</a></p>
<p><img src="http://taojinke.github.io/img/20150706/197e3cc.png" alt=""></p>
</li>
</ol>
<p>&#x5B89;&#x88C5;&#x597D;&#x4E4B;&#x540E;&#x7684;&#x6B65;&#x594F;&#xFF1A;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x89C4;&#x5212;&#x4F60;&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x548C;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#xFF0C;&#x6211;&#x6253;&#x7B97;&#x5C06;Mongo&#x7684;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x653E;&#x7F6E;C:\mongodb</p>
<p>&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x5728;D:\Mongodb&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5C06;&#x4E0B;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#x653E;&#x5230;C:\mongodb</p>
<p> &#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;mongo&#x7684;&#x65E5;&#x5FD7;&#x76EE;&#x5F55;&#x548C;&#x914D;&#x7F6E;&#x6587;&#x4EF6; cmd-&gt; md C:\mongodb\log</p>
<p> // &#x6B64;&#x5904;&#x662F;&#x5229;&#x7528;&#x547D;&#x4EE4;&#x884C; &#x5728;C:\mongodb&#x8DEF;&#x5F84;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;mongod.cfg&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5199;&#x5165;logpath=C:&#xA0;  \mongodb\log\mongo.log &#x4FE1;&#x606F;&#xFF1B;&#x5982;&#x679C;&#x4F60;&#x5ACC;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x884C;&#x9EBB;&#x70E6;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x624B;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5E76;&#x6DFB;&#x52A0;&#x6587;&#x672C; <em>__&#x5185;&#x5BB9;&#xFF1B;</em></p>
<p>echo logpath=C:\mongodb\log\mongo.log &gt; C:\mongodb\mongod.cfg</p>
<p>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x7BA1;&#x7406;&#x5458;&#x8EAB;&#x4EFD;&#x8FD0;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>
<p>window8.1&#x4E0B;&#x542F;&#x52A8;&#x7BA1;&#x7406;&#x5458;&#x547D;&#x4EE4;&#x884C;&#x7A97;&#x53E3;&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150706/197eb1f.jpg" alt=""></p>
<p>&#x6253;&#x5F00;&#x540E;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#xFF1A;</p>
<p> C:\mongodb\bin&gt; mongod.exe —config C:\mongodb\mongod.cfg —dbpath D:\Mongodb —install</p>
<p>&#x5373;&#x5B89;&#x88C5;&#x670D;&#x52A1;&#x548C;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4; &#x7684;&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;</p>
<p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A; &#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A; net start mongodb</p>
<p>&#x7B2C;&#x516D;&#x6B65;&#xFF1A;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x662F;&#x5426;&#x8FD0;&#xFFFD;&#xFFFD;&#xFFFD;&#xFF1A;</p>
<p>&#x547D;&#x4EE4;&#x884C;&#x8F93;&#x5165;&#xFF1A; services.msc</p>
<p>&#x5F39;&#x51FA;window&#x7684;&#x670D;&#x52A1;&#x7A97;&#x542F;&#x52A8;&#x60C5;&#x51B5;&#xFF1A;&#x5C31;&#x53EF;&#x4EE5;&#x627E;&#x5230;MongoDB&#x670D;&#x52A1;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x4E86;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/199f595/" title="ABP结合MongoDB的使用范例 -" itemprop="url">ABP结合MongoDB的使用范例 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>ASP.NET Boilerplate&#x5B98;&#x65B9;&#x7684;&#x8303;&#x4F8B;&#x90FD;&#x662F;&#x57FA;&#x4E8E;Entity Framework&#x548C;NHibernate&#x7684;&#xFF0C;&#x8BF4;&#x662F;&#x652F;&#x6301;MangoDB&#xFF0C;&#x6E90;&#x7801;&#x4E2D;&#x4E5F;&#x786E;&#x5B9E;&#x6709;MangoDB&#xFF0C;&#x4F46;&#x7528;Google&#x5BFB;&#x904D;&#x4E16;&#x754C;&#x4E5F;&#x6CA1;&#x627E;&#x5230;&#x4EFB;&#x4F55;&#x8BF4;&#x660E;&#x6216;&#x8303;&#x4F8B;&#xFF0C;&#x65E0;&#x5948;&#x53EA;&#x6709;&#x81EA;&#x5DF1;&#x6478;&#x7D22;&#x4E86;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x662F;&#x521A;&#x521A;&#x63A5;&#x89E6;ABP&#xFF0C;&#x6D4B;&#x8BD5;&#x65F6;&#x4E3E;&#x6B65;&#x7EF4;&#x8270;&#xFF0C;&#x603B;&#x7B97;&#x662F;&#x5F97;&#x4EE5;&#x8FBE;&#x6210;&#xFF0C;&#x4EE5;&#x4E0B;&#x603B;&#x7ED3;&#x8BB0;&#x5F55;&#x4E0B;&#x8FD9;&#x5F97;&#x6765;&#x4E0D;&#x6613;&#x7684;&#x6210;&#x679C;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#x524D;&#x5F80;&#x5B98;&#x7F51;&#x53BB;&#x4E0B;&#x8F7D;&#x6A21;&#x677F;&#xFF1A;</p>
<p><a href="http://www.aspnetboilerplate.com/Templates" target="_blank" rel="external">http://www.aspnetboilerplate.com/Templates</a></p>
<p>&#x9009;&#x9879;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199c9a3.png" alt="image"></p>
<p>&#x4E0B;&#x8F7D;&#x597D;&#x4E4B;&#x540E;&#x89E3;&#x538B;&#x7F29;&#xFF0C;&#x7528;VS&#x6253;&#x5F00;&#x3002;</p>
<p>&#x8FD9;&#x65F6;&#x7BA1;&#x7406;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;NuGet&#x5305;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199c9a3.png" alt="image"></p>
<p>&#x6267;&#x884C;&#x8FD8;&#x539F;&#x547D;&#x4EE4;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199cc14.png" alt="image"></p>
<p>&#x6162;&#x6162;&#x7B49;&#x5F85;&#x5176;&#x81EA;&#x52A8;&#x4E0B;&#x8F7D;&#x548C;&#x5B89;&#x88C5;&#x3002;</p>
<p>&#x4E0B;&#x597D;&#x4E4B;&#x540E;&#x5173;&#x95ED;NuGet&#x7A97;&#x53E3;&#xFF0C;&#x6267;&#x884C;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x64CD;&#x4F5C;&#xFF0C;&#x5168;&#x90E8;&#x7F16;&#x8BD1;&#x6210;&#x529F;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x7136;&#x540E;&#x53BB;&#x5176;github&#x7A7A;&#x95F4;&#xFF1A;</p>
<p><a href="https://github.com/aspnetboilerplate" target="_blank" rel="external">https://github.com/aspnetboilerplate</a></p>
<p>&#x4F7F;&#x7528;Git&#x4E0B;&#x8F7D; aspnetboilerplate &#x9879;&#x76EE;&#x7684;&#x6E90;&#x7801;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x5176;&#x5730;&#x5740;&#x4E3A;&#xFF1A; <a href="https://github.com/aspnetboilerplate/aspnetboilerplate.git" target="_blank" rel="external">https://github.com/aspnetboilerplate/aspnetboilerplate.git</a></p>
<p>&#x4E0B;&#x8F7D;&#x597D;&#x6E90;&#x7801;&#x4E4B;&#x540E;&#xFF0C;&#x6DFB;&#x52A0;&#x73B0;&#x6709;&#x9879;&#x76EE;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199ce85.png" alt="image"></p>
<p>&#x9009;&#x53D6;&#x8FD9;&#x4E2A; Abp.MongoDB &#x9879;&#x76EE;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199ce85.png" alt="image"></p>
<p>&#x518D;&#x5EA6;&#x7BA1;&#x7406;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;NuGet&#x7A0B;&#x5E8F;&#x5305;&#xFF0C;&#x5C06;Abp&#x5305;&#x5206;&#x914D;&#x7ED9;MongoDB&#x9879;&#x76EE;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d0f6.png" alt="image"></p>
<p>&#x800C;&#x540E;&#x5355;&#x72EC;&#x7BA1;&#x7406; Abp.MongoDB &#x9879;&#x76EE;&#x7684;NuGet&#x7A0B;&#x5E8F;&#x5305;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d0f6.png" alt="image"></p>
<p>&#x8054;&#x673A;&#x641C;&#x7D22;MongoDB&#xFF0C;&#x5B89;&#x88C5;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d367.png" alt="image"></p>
<p>&#x5B89;&#x88C5;&#x4E4B;&#x540E;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x786E;&#x8BA4;&#x5168;&#x90E8;&#x7F16;&#x8BD1;&#x901A;&#x8FC7;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x91CD;&#x65B0;&#x547D;&#x540D; MyProject.EntityFramework &#x9879;&#x76EE;&#x4E3A; MyProject.MongoDB&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d367.png" alt="image"></p>
<p>&#x7BA1;&#x7406;&#x5176;&#x9879;&#x76EE;&#x5F15;&#x7528;&#xFF0C;&#x52FE;&#x9009;Abp.MongoDB&#x9879;&#x76EE;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d5d8.png" alt="image"></p>
<p>&#x7BA1;&#x7406; MyProject.MongoDB &#x9879;&#x76EE;&#x7684;NuGet&#x5305;&#xFF0C;&#x5378;&#x8F7D; Abp.EntityFramework&#xFF0C;&#x6CE8;&#x610F;&#x5BF9;&#x8BDD;&#x6846;&#x70B9;&#x201C;&#x5426;&#x201D;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d5d8.png" alt="image"></p>
<p>&#x63A5;&#x7740;&#x5378;&#x8F7D;EntityFramework.DynamicFilters&#xFF0C;&#x6CE8;&#x610F;&#x5BF9;&#x8BDD;&#x6846;&#x70B9;&#x201C;&#x662F;&#x201D;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199d849.png" alt="image"></p>
<p>&#x7136;&#x540E;&#x5220;&#x9664;&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x8FD9;&#x4E09;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199daba.png" alt="image"></p>
<p>&#x987A;&#x624B;&#x5C06; EntityFramework &#x76EE;&#x5F55;&#x6539;&#x540D;&#x4E3A; MongoDB &#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199daba.png" alt="image"></p>
<p>&#x4FEE;&#x6539; MyProjectDataModule.cs &#x7684;&#x4EE3;&#x7801;&#x4E3A;&#xFF1A;</p>
<pre><code><span class="keyword">using</span> System.Reflection;
<span class="keyword">using</span> Abp.Modules;
<span class="keyword">using</span> Abp.MongoDb;
<span class="keyword">using</span> Abp.Configuration.Startup;
<span class="keyword">namespace</span> <span class="title">MyProject</span>
{
    [DependsOn(<span class="keyword">typeof</span>(AbpMongoDbModule), <span class="keyword">typeof</span>(MyProjectCoreModule))]
    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyProjectDataModule</span> : <span class="title">AbpModule</span>
    {
        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">PreInitialize</span>(<span class="params"></span>)
        </span>{
            Configuration.DefaultNameOrConnectionString = &amp;quot;Default&amp;quot;;
            <span class="comment">//MongoDB&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x5730;&amp;#x5740;</span>
            Configuration.Modules.AbpMongoDb().ConnectionString = &amp;quot;mongodb:<span class="comment">//localhost&amp;quot;;</span>
            <span class="comment">//MongoDB&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x540D;&amp;#x79F0;</span>
            Configuration.Modules.AbpMongoDb().DatatabaseName = &amp;quot;MyProject&amp;quot;;
        }
        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Initialize</span>(<span class="params"></span>)
        </span>{
            IocManager.RegisterAssemblyByConvention(Assembly.GetExecutingAssembly());
        }
    }
}
</code></pre><p>&#x7136;&#x540E;&#x53BB; MyProject.Core &#x9879;&#x76EE;&#x4E2D;&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B; Book &#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="keyword">using</span> System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.Text;
<span class="keyword">using</span> System.Threading.Tasks;
<span class="keyword">using</span> Abp.Domain.Entities.Auditing;

<span class="keyword">namespace</span> MyProject
{
    <span class="keyword">public</span> <span class="keyword">class</span> Book : AuditedEntity&amp;lt;Guid&amp;gt;
    {
        <span class="keyword">public</span> <span class="built_in">string</span> Name { get; <span class="built_in">set</span>; }
        <span class="keyword">public</span> <span class="keyword">double</span> Price { get; <span class="built_in">set</span>; }
    }
}
</code></pre><p>&#x518D;&#x5728; MyProject.Core &#x9879;&#x76EE;&#x4E2D;&#x521B;&#x5EFA;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x4ED3;&#x50A8;&#x7C7B; IBookRepository &#xFF1A;</p>
<pre><code><span class="keyword">using</span> System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.<span class="built_in">Text</span>;
<span class="keyword">using</span> System.Threading.Tasks;
<span class="keyword">using</span> Abp.Domain.Repositories;

namespace MyProject
{
    public <span class="class"><span class="keyword">interface</span> <span class="title">IBookRepository</span> : IRepository&amp;lt;Book, Guid&amp;gt;
    </span>{
    }
}
</code></pre><p>&#x56DE;&#x5230; MyProject.MongoDB &#x9879;&#x76EE;&#xFF0C;&#x5728;&#x5176; MongoDB/Repositories &#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA; BookRepository &#x7C7B;&#x4EE5;&#x5B9E;&#x73B0;&#x5148;&#x524D;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF1A;</p>
<pre><code><span class="keyword">using</span> System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.Text;
<span class="keyword">using</span> System.Threading.Tasks;
<span class="keyword">using</span> Abp.MongoDb;
<span class="keyword">using</span> Abp.MongoDb.Repositories;
<span class="keyword">namespace</span> MyProject.MongoDB.Repositories
{
    <span class="keyword">public</span> <span class="keyword">class</span> BookRepository : MongoDbRepositoryBase&amp;lt;Book, Guid&amp;gt;, IBookRepository
    {
        <span class="function"><span class="keyword">public</span> <span class="title">BookRepository</span><span class="params">(IMongoDatabaseProvider databaseProvider)</span>
            : <span class="title">base</span><span class="params">(databaseProvider)</span>
        </span>{
        }
    }
}
</code></pre><p>&#x8F6C;&#x5230; MyProject.Application &#x9879;&#x76EE;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x521B;&#x5EFA; BookService &#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x91CC;&#x9762;&#x521B;&#x5EFA; IBookAppService &#x5E94;&#x7528;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#xFF1A;</p>
<pre><code><span class="keyword">using</span> Abp.Application.Services;

<span class="keyword">namespace</span> <span class="title">MyProject.BookService</span>
{
    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IBookAppService</span> : <span class="title">IApplicationService</span>
    {
        <span class="function"><span class="keyword">void</span> <span class="title">Creat</span>(<span class="params"></span>)</span>;
    }
}
</code></pre><p>&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x518D;&#x521B;&#x5EFA;&#x8BE5;&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B; BookAppService &#xFF1A;</p>
<pre><code>namespace MyProject<span class="built_in">.</span>BookService
{
    <span class="keyword">public</span> class BookAppService : MyProjectAppServiceBase, IBookAppService
    {
        <span class="keyword">private</span> readonly IBookRepository _bookRepository;
        <span class="keyword">public</span> BookAppService(IBookRepository bookRepository)
        {
            _bookRepository <span class="subst">=</span> bookRepository;
        }
        <span class="keyword">public</span> <span class="literal">void</span> Creat()
        {
            <span class="built_in">var</span> <span class="built_in">data</span> <span class="subst">=</span> <span class="literal">new</span> Book()
            {
                Name <span class="subst">=</span> <span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="variable">#x4E00</span>;<span class="subst">&amp;</span><span class="variable">#x672C</span>;<span class="subst">&amp;</span><span class="variable">#x65B0</span>;<span class="subst">&amp;</span><span class="variable">#x4E66</span>;<span class="subst">&amp;</span>quot;,
                Price <span class="subst">=</span> <span class="number">99.99</span>
            };
            _bookRepository<span class="built_in">.</span>Insert(<span class="built_in">data</span>);
        }
    }
}
</code></pre><p>&#x73B0;&#x5728;&#x4FEE;&#x6539; MyProject.Web &#x9879;&#x76EE;&#x4E2D; HomeController &#x7C7B;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code><span class="keyword">using</span> System.Web.Mvc;
<span class="keyword">using</span> Abp.Dependency;
<span class="keyword">using</span> MyProject.BookService;
<span class="keyword">namespace</span> <span class="title">MyProject.Web.Controllers</span>
{
    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HomeController</span> : <span class="title">MyProjectControllerBase</span>
    {
        <span class="function"><span class="keyword">public</span> ActionResult <span class="title">Index</span>(<span class="params"></span>)
        </span>{
            IocManager.Instance.Resolve&amp;lt;IBookAppService&amp;gt;().Creat();
            <span class="keyword">return</span> View();
        }
    }
}
</code></pre><p>&#x6211;&#x4EEC;&#x5728;&#x8FD4;&#x56DE;View&#x4E4B;&#x524D;&#x6267;&#x884C;&#x4E86;&#x4E00;&#x4E0B;&#x521A;&#x624D;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x7684;&#x521B;&#x5EFA; Book &#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5728;&#x6211;&#x4EEC;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x4E3B;&#x9875;&#x65F6;&#xFF0C;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684; Book &#x7C7B;&#x578B;&#x6570;&#x636E;&#x5230; MongoDB &#x6570;&#x636E;&#x5E93;&#x4E86;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8C03;&#x7528; Ioc &#x7BA1;&#x7406;&#x5668;&#x521B;&#x5EFA;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5373;&#x53EF;&#x83B7;&#x5F97;&#x4E4B;&#xFF0C;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x65F6;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x5C42;&#x53E0;&#x5D4C;&#x5957;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x90FD;&#x7531; Ioc &#x7BA1;&#x7406;&#x5668;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x3002;</p>
<p>&#x6B64;&#x65F6;&#x5C06; MyProject.Web &#x9879;&#x76EE;&#x8BBE;&#x4E3A;&#x542F;&#x52A8;&#x9879;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;&#xFF0C;&#x770B;&#x5230;&#x7F51;&#x7AD9;&#x4E3B;&#x9875;&#x6B63;&#x5E38;&#x663E;&#x793A;&#x540E;&#xFF0C;&#x4F7F;&#x7528;MongoVUE&#x67E5;&#x770B;&#x4E00;&#x4E0B;MongoDB&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x65B0;&#x589E;&#x7684; MyProject &#x6570;&#x636E;&#x5E93;&#x548C; Book &#x96C6;&#x5408;&#x4E86;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x6709;&#x6211;&#x4EEC;&#x65B0;&#x589E;&#x7684;&#x8FD9;1&#x9879;&#x6570;&#x636E;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199dd2b.png" alt="image"></p>
<p>&#x81F3;&#x6B64;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x4E3B;&#x8981;&#x6539;&#x52A8;&#x6587;&#x4EF6;&#x5927;&#x81F4;&#x5982;&#x6B64;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/199dd2b.png" alt="image"></p>
<p>&#x63D0;&#x793A;&#xFF1A;ABP&#x9ED8;&#x8BA4;&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6620;&#x5C04;&#x89C4;&#x5219;&#x597D;&#x50CF;&#x5BF9;&#x975E;&#x82F1;&#x6587;&#x5B57;&#x7B26;&#x652F;&#x6301;&#x7684;&#x4E0D;&#x597D;&#xFF0C;&#x4E4B;&#x524D;&#x5C1D;&#x8BD5;&#x7528;&#x4E2D;&#x6587;&#x547D;&#x540D;&#x7C7B;&#x65F6;&#x9047;&#x5230;&#x4E86;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x5C3D;&#x91CF;&#x8FD8;&#x662F;&#x8001;&#x8001;&#x5B9E;&#x5B9E;&#x7528;&#x82F1;&#x6587;&#x547D;&#x540D;&#x5427;&#x3002;</p>
<p>&#x6E90;&#x7801;&#x4E0B;&#x8F7D;&#xFF1A; <a href="http://vdisk.weibo.com/s/t2jT2xwNFVv" target="_blank" rel="external">http://vdisk.weibo.com/s/t2jT2xwNFVv</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/1959289/" title="dbDao 汪伟华的MySQL初学者入门视频教程 -" itemprop="url">dbDao 汪伟华的MySQL初学者入门视频教程 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>dbDao &#xA0;&#x6C6A;&#x4F1F;&#x534E;&#x7684;MySQL&#x521D;&#x5B66;&#x8005;&#x5165;&#x95E8;&#x89C6;&#x9891;&#x6559;&#x7A0B;&#xFF0C; &#x89C2;&#x770B;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.tudou.com/listplay/3EfXnLqpfu0.html" target="_blank" rel="external">http://www.tudou.com/listplay/3EfXnLqpfu0.html</a></p>
<p><img src="http://taojinke.github.io/img/20150706/19577ae.png" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150706/1957a1f.png" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150706/1957f01.png" alt=""></p>
<p>&#x76F8;&#x5173;&#x6587;&#x7AE0; | Related posts:</p>
<ol>
<li><a href="http://www.askmaclean.com/archives/win7-install-oracle-11gr2-plsqldeveloper-sqldeveloper.html" target="_blank" rel="external">&#x3010;&#x89C6;&#x9891;&#x6559;&#x5B66;&#x3011;&#x5728;WIN7&#x4E0A;&#x90E8;&#x7F72;Oracle 11gR2+PL/SQL Developer+SQL Developer</a>&#x3010;&#x89C6;&#x9891;&#x6559;&#x5B66;&#x3011;&#x5728;WIN7&#x4E0A;&#x90E8;&#x7F72;Oracle 11gR2+PL/SQL Developer+SQL Develop [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/%e6%b1%aa%e4%bc%9f%e5%8d%8e-mysql-replication-%e5%a4%8d%e5%88%b6%e9%ab%98%e5%8f%af%e7%94%a8%e9%85%8d%e7%bd%ae%e6%96%b9%e6%a1%88.html" target="_blank" rel="external">&#x6C6A;&#x4F1F;&#x534E;-MySQL Replication &#x590D;&#x5236;&#x9AD8;&#x53EF;&#x7528;&#x914D;&#x7F6E;&#x65B9;&#x6848;</a>&#x6C6A;&#x4F1F;&#x534E;-MySQL Replication &#x590D;&#x5236;&#x9AD8;&#x53EF;&#x7528;&#x914D;&#x7F6E;&#x65B9;&#x6848; dbDao &#x767E;&#x5EA6;&#x8D34;&#x5427;&#xFF1A;<a href="http://tieba" target="_blank" rel="external">http://tieba</a> [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mysql-replication-ha.html" target="_blank" rel="external">&#x8BD7;&#x6A80;&#x8F6F;&#x4EF6;&#x6C6A;&#x4F1F;&#x534E; MySQL Replication &#x590D;&#x5236;&#x9AD8;&#x53EF;&#x7528;&#x914D;&#x7F6E;&#x65B9;&#x6848;</a>&#x3010;&#x8BD7;&#x6A80;&#x8F6F;&#x4EF6;&#x6C6A;&#x4F1F;&#x534E;&#x3011; MySQL Replication &#x590D;&#x5236;&#x9AD8;&#x53EF;&#x7528;&#x914D;&#x7F6E;&#x65B9;&#x6848; dbDao &#x767E;&#x5EA6;&#x8D34;&#x5427;&#xFF1A;http:/ [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mongodb-db-collection-remove%e6%96%b9%e6%b3%95.html" target="_blank" rel="external">MongoDB db.collection.remove()&#x65B9;&#x6CD5;</a>mongodb&#x4E2D;&#x5220;&#x9664;document&#x91C7;&#x7528;remove&#x65B9;&#x6CD5;&#xFF0C; <a href="http://docs.mongodb.org/m" target="_blank" rel="external">http://docs.mongodb.org/m</a> [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mongodb-change-password.html" target="_blank" rel="external">MongoDB&#x4E2D;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x548C;&#x5FD8;&#x8BB0;&#x5BC6;&#x7801;&#x7684;&#x60C5;&#x51B5;</a>&#xA0; MongoDB&#x4E2D;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x548C;&#x5FD8;&#x8BB0;&#x5BC6;&#x7801;&#x7684;&#x60C5;&#x51B5; dbDao &#x767E;&#x5EA6;&#x8D34;&#x5427;&#xFF1A;<a href="http://tieba.bai" target="_blank" rel="external">http://tieba.bai</a> [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mongodb-not-null.html" target="_blank" rel="external">MongoDB &#x4E2D;&#x627E;&#x51FA;&#x975E;&#x7A7A;&#x7684;VALUE, NOT NULL</a>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;<a href="http://www.askmaclean.com/archives/mongodb-not-nul" target="_blank" rel="external">http://www.askmaclean.com/archives/mongodb-not-nul</a> [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/parnassusdata-mongodb-service.html" target="_blank" rel="external">&#x8BD7;&#x6A80;&#x8F6F;&#x4EF6;&#x63D0;&#x4F9B;MongoDB&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;</a>&#x8BD7;&#x6A80;&#x8F6F;&#x4EF6;&#x63D0;&#x4F9B;MongoDB&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1; dbDao &#x767E;&#x5EA6;&#x8D34;&#x5427;&#xFF1A;<a href="http://tieba.baidu.com/db" target="_blank" rel="external">http://tieba.baidu.com/db</a> [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/%e9%80%9a%e8%bf%87mongolab%e7%94%b3%e8%af%b7%e5%85%8d%e8%b4%b9%e7%9a%84mongodb%e6%b5%8b%e8%af%95%e5%ae%9e%e4%be%8b.html" target="_blank" rel="external">&#x901A;&#x8FC7;Mongolab&#x7533;&#x8BF7;&#x514D;&#x8D39;&#x7684;MongoDB&#x6D4B;&#x8BD5;&#x5B9E;&#x4F8B;</a>Mongolab&#x76EE;&#x524D;&#x63D0;&#x4F9B;&#x7684;&#x514D;&#x8D39;&#x7684;MongoDB&#x5B9E;&#x4F8B;&#x4F9B;&#x5E7F;&#x5927;&#x7528;&#x6237;&#x6D4B;&#x8BD5;&#x4F7F;&#x7528;&#xFF0C;&#x514D;&#x8D39;&#x5B9E;&#x4F8B;&#x7684;&#x9650;&#x5236;&#x662F;&#x6700;&#x5927;500MB&#x3002; &amp;nb [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mongodb-aggregation%e8%81%9a%e9%9b%86%e6%b5%8b%e8%af%95.html" target="_blank" rel="external">MongoDB Aggregation&#x805A;&#x96C6;&#x6D4B;&#x8BD5;</a>dbDao &#x767E;&#x5EA6;&#x8D34;&#x5427;&#xFF1A;<a href="http://tieba.baidu.com/dbdao" target="_blank" rel="external">http://tieba.baidu.com/dbdao</a> MongoDB&#x6280;&#x672F;&#x5B66;&#x4E60;QQ&#x7FA4;&#xFF1A; [&#x2026;]…</li>
<li><a href="http://www.askmaclean.com/archives/mongodb-getcmdlineopts.html" target="_blank" rel="external">MongoDB&#x83B7;&#x53D6;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x53C2;&#x6570;getCmdLineOpts</a>MongoDB&#x83B7;&#x53D6;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;; &#x6709;&#x65F6;&#x5019;&#x5E0C;&#x671B;&#x77E5;&#x9053;&#x542F;&#x52A8;mongd&#x7684;&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x83B7;&#x5F97;&#xFF1A; db [&#x2026;]…</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a><a href="/tags/MySQL/">MySQL</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/19ad8a2/" title="MongoDb gridfs-ngnix文件存储方案 -" itemprop="url">MongoDb gridfs-ngnix文件存储方案 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5728;&#x5404;&#x7C7B;&#x7CFB;&#x7EDF;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x7684;&#x95EE;&#x9898;&#x3002; &#x5E38;&#x89C1;&#x7684;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;DBMS&#x4F20;&#x7EDF;&#x6587;&#x4EF6;&#x6D41;&#x5B58;&#x50A8;&#x3002;&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x57FA;&#x4E8E;NoSQL&#x6570;&#x636E;&#x5E93;MongoDb&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x3002;&#x7B14;&#x8005;&#x73AF;&#x5883; &#x4EE5;CentOS 6.5&#xFF0C;MongoDb 2.6.3,&#xA0; Nginx-1.4.7 &#x4E3A;&#x4F8B;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x4E86;&#x89E3;Linux&#x5E38;&#x7528;&#x547D;&#x4EE4;&#x3002;&#x5148;&#x6765;&#x56DE;&#x987E;&#x4E00;&#x4E0B;MongoDb&#x7684;&#x5185;&#x90E8;&#x6587;&#x4EF6;&#x7ED3;&#x6784; </p>
<p><img src="http://taojinke.github.io/img/20150706/19a91d5.png" alt="O6EzR"></p>
<ol>
<li>MongoDB&#x5728;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x4E0A;&#x6309;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x6765;&#x5212;&#x5206;&#xFF0C;&#x4E00;&#x4E2A;collection&#x662F;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;</li>
<li>&#x540C;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x6570;&#x636E;&#x88AB;&#x5206;&#x6210;&#x5F88;&#x591A;&#x4E2A;Extent&#xFF0C;Extent&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x8FDE;&#x63A5;</li>
<li>&#x5728;&#x6BCF;&#x4E00;&#x4E2A;Extent&#x4E2D;&#xFF0C;&#x4FDD;&#x5B58;&#x4E86;&#x5177;&#x4F53;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x53CC;&#x5411;&#x94FE;&#x63A5;&#x8FDE;&#x63A5;&#x7684;</li>
<li>&#x6BCF;&#x4E00;&#x884C;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x4E0D;&#x4EC5;&#x5305;&#x62EC;&#x6570;&#x636E;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD8;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x4E00;&#x90E8;&#x5206;&#x9644;&#x52A0;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x5728;&#x6570;&#x636E;update&#x53D8;&#x5927;&#x540E;&#x53EF;&#x4EE5;&#x4E0D;&#x79FB;&#x52A8;&#x4F4D;&#x7F6E;</li>
<li>&#x7D22;&#x5F15;&#x4EE5;BTree&#x7ED3;&#x6784;&#x5B9E;&#x73B0;</li>
</ol>
<p>&#x7136;&#x540E;&#x662F;GridFs&#x7684;&#x7ED3;&#x6784;</p>
<p><img src="http://taojinke.github.io/img/20150706/19a9928.png" alt="gridfs1"></p>
<p>GridFS&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;fs.chunks&#x548C;fs.files&#x6765;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x5176;&#x4E2D;fs.files&#x96C6;&#x5408;&#x5B58;&#x653E;&#x6587;&#x4EF6;&#x7684;&#x4FE1;&#x606F;&#xFF0C;fs.chunks&#x5B58;&#x653E;&#x6587;&#x4EF6;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E00;&#x4E2A;fs.files&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF0C;&#x5373;&#x4E00;&#x4E2A;file&#x7684;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="xml"></span><span class="expression">{ 
&amp;<span class="variable">quot</span>;_<span class="variable">id</span>&amp;<span class="variable">quot</span>; : <span class="variable">ObjectId</span>(&amp;<span class="variable">quot</span>;4<span class="variable">f</span>4608844<span class="variable">f</span>9<span class="variable">b</span>855<span class="variable">c</span>6<span class="variable">c</span>35<span class="variable">e</span>298&amp;<span class="variable">quot</span>;),       //&amp;<span class="begin-block">#x</span>552<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>00;<span class="variable">id</span>&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>53<span class="variable">EF</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">EE</span>5;&amp;<span class="begin-block">#x</span>662<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>7528;&amp;<span class="begin-block">#x</span>6237;&amp;<span class="begin-block">#x</span>81<span class="variable">EA</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>9<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>49;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>7<span class="variable">C</span>7<span class="variable">B</span>;&amp;<span class="begin-block">#x</span>578<span class="variable">B</span>;
&amp;<span class="variable">quot</span>;<span class="variable">filename</span>&amp;<span class="variable">quot</span>; : &amp;<span class="variable">quot</span>;<span class="variable">CPU.txt</span>&amp;<span class="variable">quot</span>;,      //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>540<span class="variable">D</span>;
&amp;<span class="variable">quot</span>;<span class="variable">length</span>&amp;<span class="variable">quot</span>; : 778,      //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>957<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">EA</span>6;
&amp;<span class="variable">quot</span>;<span class="variable">chunkSize</span>&amp;<span class="variable">quot</span>; : 262144,    /<span class="end-block">/chunk</span>&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5927;&amp;<span class="begin-block">#x</span>5<span class="variable">C</span>0<span class="variable">F</span>;
&amp;<span class="variable">quot</span>;<span class="variable">uploadDate</span>&amp;<span class="variable">quot</span>; : <span class="variable">ISODate</span>(&amp;<span class="variable">quot</span>;2012<span class="variable">-</span>02<span class="variable">-</span>23<span class="variable">T</span>09:36:04<span class="variable">.</span>593<span class="variable">Z</span>&amp;<span class="variable">quot</span>;), //&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>0<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>20;&amp;<span class="begin-block">#x</span>65<span class="variable">F</span>6;&amp;<span class="begin-block">#x</span>95<span class="variable">F</span>4;
&amp;<span class="variable">quot</span>;<span class="variable">md</span>5&amp;<span class="variable">quot</span>; : &amp;<span class="variable">quot</span>;<span class="variable">e</span>2<span class="variable">c</span>789<span class="variable">b</span>036<span class="variable">cfb</span>3<span class="variable">b</span>848<span class="variable">ae</span>39<span class="variable">a</span>24<span class="variable">e</span>795<span class="variable">ca</span>6&amp;<span class="variable">quot</span>;,      //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;<span class="variable">md</span>5&amp;<span class="begin-block">#x</span>503<span class="variable">C</span>;
&amp;<span class="variable">quot</span>;<span class="variable">contentType</span>&amp;<span class="variable">quot</span>; : &amp;<span class="variable">quot</span>;<span class="variable">text</span><span class="end-block">/plain</span>&amp;<span class="variable">quot</span>;     //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;<span class="variable">MIME</span>&amp;<span class="begin-block">#x</span>7<span class="variable">C</span>7<span class="variable">B</span>;&amp;<span class="begin-block">#x</span>578<span class="variable">B</span>;
&amp;<span class="variable">quot</span>;<span class="variable">meta</span>&amp;<span class="variable">quot</span>; : <span class="variable">null</span>    //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5176;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>83;&amp;<span class="begin-block">#x</span>4<span class="variable">FE</span>1;&amp;<span class="begin-block">#x</span>606<span class="variable">F</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>9<span class="variable">ED</span>8;&amp;<span class="begin-block">#x</span>8<span class="variable">BA</span>4;&amp;<span class="begin-block">#x</span>662<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>6<span class="variable">CA</span>1;&amp;<span class="begin-block">#x</span>6709;&amp;<span class="begin-block">#x</span>201<span class="variable">D</span>;<span class="variable">meta</span>&amp;<span class="begin-block">#x</span>201<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FD</span>9;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;<span class="variable">key</span>&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>7528;&amp;<span class="begin-block">#x</span>6237;&amp;<span class="begin-block">#x</span>53<span class="variable">EF</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">EE</span>5;&amp;<span class="begin-block">#x</span>81<span class="variable">EA</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">DF</span>1;&amp;<span class="begin-block">#x</span>5<span class="variable">B</span>9<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>49;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>3<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">EFB</span>;&amp;<span class="begin-block">#x</span>610<span class="variable">F</span>;<span class="variable">BSON</span>&amp;<span class="begin-block">#x</span>5<span class="variable">BF</span>9;&amp;<span class="begin-block">#x</span>8<span class="variable">C</span>61;
}</span><span class="xml"></span>
</code></pre><p>&#x5BF9;&#x5E94;&#x7684;fs.chunks&#x4E2D;&#x7684;chunk&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="xml"></span><span class="expression">{ 
&amp;<span class="variable">quot</span>;_<span class="variable">id</span>&amp;<span class="variable">quot</span>; : <span class="variable">ObjectId</span>(&amp;<span class="variable">quot</span>;4<span class="variable">f</span>4608844<span class="variable">f</span>9<span class="variable">b</span>855<span class="variable">c</span>6<span class="variable">c</span>35<span class="variable">e</span>299&amp;<span class="variable">quot</span>;),    /<span class="end-block">/chunk</span>&amp;<span class="begin-block">#x</span>7684;<span class="variable">id</span>
&amp;<span class="variable">quot</span>;<span class="variable">files</span>_<span class="variable">id</span>&amp;<span class="variable">quot</span>; : <span class="variable">ObjectId</span>(&amp;<span class="variable">quot</span>;4<span class="variable">f</span>4608844<span class="variable">f</span>9<span class="variable">b</span>855<span class="variable">c</span>6<span class="variable">c</span>35<span class="variable">e</span>298&amp;<span class="variable">quot</span>;),  //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;<span class="variable">id</span>&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5<span class="variable">BF</span>9;&amp;<span class="begin-block">#x</span>5<span class="variable">E</span>94;<span class="variable">fs.files</span>&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">D</span>;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5<span class="variable">BF</span>9;&amp;<span class="begin-block">#x</span>8<span class="variable">C</span>61;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>76<span class="variable">F</span>8;&amp;<span class="begin-block">#x</span>5<span class="variable">F</span>53;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>8<span class="variable">E</span>;<span class="variable">fs.files</span>&amp;<span class="begin-block">#x</span>96<span class="variable">C</span>6;&amp;<span class="begin-block">#x</span>5408;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>5916;&amp;<span class="begin-block">#x</span>952<span class="variable">E</span>;
&amp;<span class="variable">quot</span>;<span class="variable">n</span>&amp;<span class="variable">quot</span>; : 0,     //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>7<span class="variable">B</span>2<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>51<span class="variable">E</span>0;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;<span class="variable">chunk</span>&amp;<span class="begin-block">#x</span>5757;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>5982;&amp;<span class="begin-block">#x</span>679<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>5927;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>8<span class="variable">E</span>;<span class="variable">chunksize</span>&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>8<span class="variable">BDD</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>1<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>88<span class="variable">AB</span>;&amp;<span class="begin-block">#x</span>5206;&amp;<span class="begin-block">#x</span>5272;&amp;<span class="begin-block">#x</span>6210;&amp;<span class="begin-block">#x</span>591<span class="variable">A</span>;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>2<span class="variable">A</span>;<span class="variable">chunk</span>&amp;<span class="begin-block">#x</span>5757;
&amp;<span class="variable">quot</span>;<span class="variable">data</span>&amp;<span class="variable">quot</span>; : <span class="variable">BinData</span>(0,&amp;<span class="variable">quot</span>;<span class="variable">QGV...</span>&amp;<span class="variable">quot</span>;)     //&amp;<span class="begin-block">#x</span>6587;&amp;<span class="begin-block">#x</span>4<span class="variable">EF</span>6;&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>8<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FDB</span>;&amp;<span class="begin-block">#x</span>5236;&amp;<span class="begin-block">#x</span>6570;&amp;<span class="begin-block">#x</span>636<span class="variable">E</span>;&amp;<span class="begin-block">#xFF</span>0<span class="variable">C</span>;&amp;<span class="begin-block">#x</span>8<span class="variable">FD</span>9;&amp;<span class="begin-block">#x</span>91<span class="variable">CC</span>;&amp;<span class="begin-block">#x</span>7701;&amp;<span class="begin-block">#x</span>7565;&amp;<span class="begin-block">#x</span>4<span class="variable">E</span>86;&amp;<span class="begin-block">#x</span>5177;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>53;&amp;<span class="begin-block">#x</span>5185;&amp;<span class="begin-block">#x</span>5<span class="variable">BB</span>9;
}</span><span class="xml"></span>
</code></pre><p>&#x6587;&#x4EF6;&#x5B58;&#x5165;&#x5230;GridFS&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x5927;&#x4E8E;chunksize&#xFF0C;&#x5219;&#x628A;&#x6587;&#x4EF6;&#x5206;&#x5272;&#x6210;&#x591A;&#x4E2A;chunk&#xFF0C;&#x518D;&#x628A;&#x8FD9;&#x4E9B;chunk&#x4FDD;&#x5B58;&#x5230;fs.chunks&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x628A;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#x5B58;&#x5165;&#x5230;fs.files&#x4E2D;&#x3002;</p>
<p>&#x5728;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5148;&#x636E;&#x67E5;&#x8BE2;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x5728;fs.files&#x4E2D;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5408;&#x9002;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x5F97;&#x5230;&#x201C;_id&#x201D;&#x7684;&#x503C;&#xFF0C;&#x518D;&#x636E;&#x8FD9;&#x4E2A;&#x503C;&#x5230;fs.chunks&#x4E2D;&#x67E5;&#x627E;&#x6240;&#x6709;&#x201C;files_id&#x201D;&#x4E3A;&#x201C;_id&#x201D;&#x7684;chunk&#xFF0C;&#x5E76;&#x6309;&#x201C;n&#x201D;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x540E;&#x4F9D;&#x6B21;&#x8BFB;&#x53D6;chunk&#x4E2D;&#x201C;data&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FD8;&#x539F;&#x6210;&#x539F;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x3002; </p>
<h3 id="&#x5B89;&#x88C5;Install&#x4E0E;&#x914D;&#x7F6E;">&#x5B89;&#x88C5;Install&#x4E0E;&#x914D;&#x7F6E;</h3><p>1.&#x5B89;&#x88C5;mongoDb</p>
<p>&#x589E;&#x52A0;MongoDB Repository&#xFF0C;&#x4E0D;&#x6E05;&#x695A;vim&#xFF0C;&#x8BF7;&#x53C2;&#x8003; <a href="http://linux.chinaunix.net/techdoc/beginner/2009/12/20/1150108.shtml" target="_blank" rel="external">VIM</a></p>
<p>vim /etc/yum.repos.d/mongodb.repo</p>
<p>&#x5982;&#x679C;&#x662F;64bit&#x7684;</p>
<p>[mongodb]</p>
<p>name=MongoDB Repository</p>
<p>baseurl=<a href="http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/" target="_blank" rel="external">http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/</a></p>
<p>gpgcheck=0</p>
<p>enabled=1</p>
<p>32bit&#x7684;&#x7CFB;&#x7EDF;&#xFF1A;</p>
<p>[mongodb]</p>
<p>name=MongoDB Repository</p>
<p>baseurl=<a href="http://downloads-distro.mongodb.org/repo/redhat/os/i686/" target="_blank" rel="external">http://downloads-distro.mongodb.org/repo/redhat/os/i686/</a></p>
<p>gpgcheck=0</p>
<p>enabled=1</p>
<p>&#x7136;&#x540E;&#x5B89;&#x88C5;&#xFF0C;&#x4F1A;&#x63D0;&#x793A;Y/N&#xFF1A;</p>
<p>yum install mongo-10gen mongo-10gen-server</p>
<p>&#x542F;&#x52A8;&#xFF1A;</p>
<p>service mongod start</p>
<p>&#x67E5;&#x770B;&#x72B6;&#x6001;</p>
<p>service mongod status</p>
<p>&#x505C;&#x6B62;</p>
<p>service mongod stop</p>
<p>&#x66F4;&#x591A;&#xFF0C;&#x5173;&#x4E8E;3.0&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#xFF0C;&#x8BF7;&#x53C2;&#x8003;&#x5B98;&#x7F51;&#x3002;</p>
<p>2.&#x5B89;&#x88C5;nginx&#x53CA;nginx-gridfs</p>
<p>&#x4F9D;&#x8D56;&#x5E93;&#x3001;&#x5DE5;&#x5177;</p>
<h1 id="yum_-y_install_pcre-devel_openssl-devel_zlib-devel">yum -y install pcre-devel openssl-devel zlib-devel</h1><h1 id="yum_-y_install_gcc_gcc-c++">yum -y install gcc gcc-c++</h1><p>&#x4E0B;&#x8F7D;nginx-gridfs&#x6E90;&#x7801;</p>
<h1 id="git_clone_https://github-com/mdirolf/nginx-gridfs-git">git clone <a href="https://github.com/mdirolf/nginx-gridfs.git" target="_blank" rel="external">https://github.com/mdirolf/nginx-gridfs.git</a></h1><h1 id="cd_nginx-gridfs">cd nginx-gridfs</h1><h1 id="git_checkout_v0-8">git checkout v0.8</h1><h1 id="git_submodule_init">git submodule init</h1><h1 id="git_submodule_update">git submodule update</h1><p>&#x4E0B;&#x8F7D;nginx&#x6E90;&#x7801;&#xFF0C;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x3002;(&#x9AD8;&#x7248;&#x672C;&#x652F;&#x6301;&#x4E0D;&#x597D;)</p>
<h1 id="wget_http://nginx-org/download/nginx-1-4-7-tar-gz">wget <a href="http://nginx.org/download/nginx-1.4.7.tar.gz" target="_blank" rel="external">http://nginx.org/download/nginx-1.4.7.tar.gz</a></h1><h1 id="tar_zxvf_nginx-1-4-7-tar-gz">tar zxvf nginx-1.4.7.tar.gz</h1><h1 id="cd_nginx-1-4-7">cd nginx-1.4.7</h1><h1 id="-/configure_—with-openssl=/usr/include/openssl_—add-module=-/nginx-gridfs/">./configure —with-openssl=/usr/include/openssl —add-module=../nginx-gridfs/</h1><h1 id="make_-j8_&amp;&amp;_make_install_&#x2013;j8">make -j8 &amp;&amp; make install &#x2013;j8</h1><p>&#x6CE8;&#x610F;&#x84DD;&#x8272;&#x5B57;&#x7B26;&#x914D;&#x7F6E;&#x6210;&#x5BF9;&#x5E94;nginx-gridfs&#x7684;&#x8DEF;&#x5F84;</p>
<ol>
<li>&#x914D;&#x7F6E;nginx-gridfs</li>
</ol>
<p>vim /usr/local/nginx/conf/nginx.conf</p>
<p>&#x5728; server &#x8282;&#x70B9;&#x4E2D;&#x6DFB;&#x52A0; location &#x8282;&#x70B9;</p>
<p>location /img/ {</p>
<p>gridfs testdb</p>
<p>field=filename</p>
<p>type=string;</p>
<p>mongo 192.168.0.159:27017;</p>
<p>}</p>
<p>location /files/ {</p>
<p>gridfs testdb</p>
<p>field=_id</p>
<p>type=objectid;</p>
<p>mongo 192.168.0.159:27017;</p>
<p>}</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7684;mongo&#x670D;&#x52A1;&#x5728;IP 192.168.0.159&#x3002;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A; field&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; MongoDB &#x7684;&#x81EA;&#x589E;ID&#xFF0C;&#x4E14;type&#x4E3A;int </p>
<p>&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1A;</p>
<p>gridfs&#xFF1A;nginx&#x8BC6;&#x522B;&#x63D2;&#x4EF6;&#x7684;&#x5173;&#x952E;&#x5B57;</p>
<p>testdb&#xFF1A;db&#x540D;</p>
<p>[root_collection]: &#x9009;&#x62E9;collection&#xFF0C;&#x5982;root_collection=blog&#xFF0C; mongod&#x5C31;&#x4F1A;&#x53BB;&#x627E;blog.files&#x4E0E;blog.chunks&#x4E24;&#x4E2A;&#x5757;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;fs</p>
<p>[field]: &#x67E5;&#x8BE2;&#x5B57;&#x6BB5;&#xFF0C;&#x4FDD;&#x8BC1;mongdb&#x91CC;&#x6709;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x540D;&#xFF0C;&#x652F;&#x6301;_id, filename, &#x53EF;&#x7701;&#x7565;, &#x9ED8;&#x8BA4;&#x662F;_id</p>
<p>[type]: &#x89E3;&#x91CA;field&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x652F;&#x6301;objectid, int, string, &#x53EF;&#x7701;&#x7565;, &#x9ED8;&#x8BA4;&#x662F;int</p>
<p>[user]: &#x7528;&#x6237;&#x540D;, &#x53EF;&#x7701;&#x7565;</p>
<p>[pass]: &#x5BC6;&#x7801;, &#x53EF;&#x7701;&#x7565;</p>
<p>mongo: mongodb url</p>
<h3 id="&#x542F;&#x52A8;nginx&#x670D;&#x52A1;">&#x542F;&#x52A8;nginx&#x670D;&#x52A1;</h3><h1 id="/usr/local/nginx/sbin/nginx">/usr/local/nginx/sbin/nginx</h1><p>&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#xFF1A;Nginx [emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use) </p>
<p>&#x8FD9;&#x65F6;&#x53EF;&#x7528;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x5173;&#x95ED;&#x5360;&#x7528;80&#x7AEF;&#x53E3;&#x7684;&#x7A0B;&#x5E8F;</p>
<p>sudo fuser -k 80/tcp</p>
<h3 id="&#x7B80;&#x5355;&#x6D4B;&#x8BD5;">&#x7B80;&#x5355;&#x6D4B;&#x8BD5;</h3><p>&#x7528;&#x539F;&#x751F;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x4F20;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;</p>
<p>mongofiles put 937910.jpg —local ~/937910_100.jpg —host 192.168.0.159 —port 27017 —db testdb —type jpg</p>
<p>937910.jpg&#x662F;&#x6211;&#x4EEC;&#x63D0;&#x524D;&#x4E0B;&#x8F7D;&#x597D;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x6587;&#x4EF6;&#xFF0C;&#x6CE8;&#x610F;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x6307;&#x5B9A;collection&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;fs</p>
<p>&#x4ECE; <a href="http://www.robomongo.org/" target="_blank" rel="external">http://www.robomongo.org/</a> &#x5B89;&#x88C5;robomongo&#x7BA1;&#x7406;&#x5DE5;&#x5177;, &#x67E5;&#x770B;&#x521A;&#x521A;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6; </p>
<p><img src="http://taojinke.github.io/img/20150706/19a9b99.png" alt="image"></p>
<p>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x679C;&#x770B;&#x5230;&#x56FE;&#x7247;&#x5C31;OK&#x4E86;</p>
<p><a href="http://192.168.0.159/img/937910.jpg" target="_blank" rel="external">http://192.168.0.159/img/937910.jpg</a></p>
<p>&#x5BF9;&#x4E8E;.net&#x73AF;&#x5883;&#x4E0B;mongodb CSharpDriver&#xA0; 1.10.0 &#x4ECE;Nuget:</p>
<p>Install-Package mongocsharpdriver -Version 1.10.0</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x7247;&#x6BB5;&#x4EE3;&#x7801;:</p>
<pre><code>int nFileLen = fileUploadModel.<span class="class">FileBytes</span>.<span class="class">Length</span>;
<span class="class">MongoGridFSSettings</span> fsSetting = new <span class="class">MongoGridFSSettings</span>() { <span class="class">Root</span> = <span class="class">CollectionName</span> };
<span class="class">MongoGridFS</span> fs = new <span class="class">MongoGridFS</span>(mongoServer, <span class="class">MongoDatabaseName</span>, fsSetting);
//&amp;<span class="symbol">#x8C03</span>;&amp;<span class="symbol">#x7528</span>;<span class="class">Write</span>&amp;<span class="symbol">#x3001</span>;<span class="class">WriteByte</span>&amp;<span class="symbol">#x3001</span>;<span class="class">WriteLine</span>&amp;<span class="symbol">#x51FD</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x65F6</span>;&amp;<span class="symbol">#x9700</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x624B</span>;&amp;<span class="symbol">#x52A8</span>;&amp;<span class="symbol">#x8BBE</span>;&amp;<span class="symbol">#x7F6E</span>;&amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x4F20</span>;&amp;<span class="symbol">#x65F6</span>;&amp;<span class="symbol">#x95F4</span>;
//&amp;<span class="symbol">#x901A</span>;&amp;<span class="symbol">#x8FC7</span>;<span class="class">Metadata</span> &amp;<span class="symbol">#x6DFB</span>;&amp;<span class="symbol">#x52A0</span>;&amp;<span class="symbol">#x9644</span>;&amp;<span class="symbol">#x52A0</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;
<span class="class">MongoGridFSCreateOptions</span> option = new <span class="class">MongoGridFSCreateOptions</span>();
option.<span class="class">Id</span> = <span class="class">ObjectId</span>.<span class="class">GenerateNewId</span>();
var currentDate = <span class="class">DateTime</span>.<span class="class">Now</span>;
option.<span class="class">UploadDate</span> = currentDate;
option.<span class="class">Aliases</span> = alias;
<span class="class">BsonDocument</span> doc = new <span class="class">BsonDocument</span>();
//&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x6863</span>;&amp;<span class="symbol">#x9644</span>;&amp;<span class="symbol">#x52A0</span>;&amp;<span class="symbol">#x4FE1</span>;&amp;<span class="symbol">#x606F</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x50A8</span>;
if(fileUploadModel.<span class="class">DocExtraInfo</span>!=null&amp;amp;&amp;amp;fileUploadModel.<span class="class">DocExtraInfo</span>.<span class="class">Count</span>&amp;gt;<span class="number">0</span>)
{
    foreach(var obj in fileUploadModel.<span class="class">DocExtraInfo</span>)
    {
        if (!doc.<span class="class">Elements</span>.<span class="class">Any</span>(p =&amp;gt; p.<span class="class">Name</span> == obj.<span class="class">Key</span>))
        {
            doc.<span class="class">Add</span>(obj.<span class="class">Key</span>, obj.<span class="class">Value</span>);
        }
    }
}
option.<span class="class">Metadata</span> = doc;
//&amp;<span class="symbol">#x521B</span>;&amp;<span class="symbol">#x5EFA</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x5E76</span>;&amp;<span class="symbol">#x5B58</span>;&amp;<span class="symbol">#x50A8</span>;&amp;<span class="symbol">#x6570</span>;&amp;<span class="symbol">#x636E</span>;
using (<span class="class">MongoGridFSStream</span> gfs = fs.<span class="class">Create</span>(fileUploadModel.<span class="class">FileName</span>, option))
{
    gfs.<span class="class">Write</span>(fileUploadModel.<span class="class">FileBytes</span>, <span class="number">0</span>, nFileLen);
    gfs.<span class="class">Close</span>();
}
log.<span class="class">ErrorFormat</span>(&amp;quot;&amp;<span class="symbol">#x9644</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x6807</span>;&amp;<span class="symbol">#x8BC6</span>;&amp;<span class="symbol">#xFF1A</span>;{<span class="number">0</span>} &amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x540D</span>;&amp;<span class="symbol">#xFF1A</span>;{<span class="number">1</span>} &amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x4F20</span>;&amp;<span class="symbol">#x6210</span>;&amp;<span class="symbol">#x529F</span>;&amp;quot;, alias, fileUploadModel.<span class="class">FileName</span>);
return option.<span class="class">Id</span>.<span class="class">ToString</span>();
</code></pre><p>&#x6CE8;&#x610F;&#xFF0C;&#x76EE;&#x524D;gridfs-ngnix&#x4E0D;&#x652F;&#x6301;_id&#x7C7B;&#x578B;&#x662F;GUID&#x7684;&#xFF0C;&#x5173;&#x4E8E;ObjectId&#x53C2;&#x8003; <a href="http://docs.mongodb.org/manual/reference/object-id/" target="_blank" rel="external">&#x5B98;&#x7F51;</a> &#xFF0C;&#x5982;&#x4E0B;&#x56FE;: </p>
<p><img src="http://taojinke.github.io/img/20150706/19a9e0a.png" alt="mongodb-objectid"></p>
<p>mongodb&#x4EA7;&#x751F;objectid&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x5C31;&#x662F;mongodb&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x81EA;&#x8EAB;&#x7684;&#x670D;&#x52A1;&#x6765;&#x4EA7;&#x751F;objectid&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x6765;&#x4EA7;&#x751F;&#x3002;</p>
<h3 id="&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4F7F;&#x7528;Gridfs">&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4F7F;&#x7528;Gridfs</h3><p>&#x6765;&#x81EA;&#x5B98;&#x65B9;2.6.10&#x7248;&#x672C; &#x624B;&#x518C;&#x5185;&#x5BB9;</p>
<p>For documents in a MongoDB collection, you should always use GridFS for storing files <strong>larger than</strong> 16 MB.&#xA0; In some situations, storing large files may be more efficient in a MongoDB database than on a system-level filesystem. </p>
<p>&#x2022; If your filesystem limits the number of files in a directory, you can use GridFS to store as many files as needed.</p>
<p>&#x2022; When you want to keep your files and metadata automatically synced and deployed across a number of systems and facilities. When using geographically distributed replica sets MongoDB can distribute files and their metadata automatically to a number of mongod instances and&#xA0; facilities.</p>
<p>&#x2022; When you want to access information from portions of large files without having to load whole files into memory, you can use GridFS to recall sections of files without reading the entire file into memory.</p>
<p>Do not use GridFS if you need to update the content of the entire file atomically. As an alternative you can store multiple versions of each file and specify the current version of the file in the metadata. You can update the metadata field that indicates &#x201C;latest&#x201D; status in an atomic update after uploading the new version of the file, and later remove previous versions if needed.</p>
<p>Furthermore, if your files are all smaller the 16 MB BSON Document Size limit, consider storing the file manually within a single document. You may use the BinData data type to store the binary data. See your drivers documentation for details on using BinData.</p>
<h3 id="&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;">&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</h3><p>&#x539F;&#x7406;&#x56FE;</p>
<p><img src="http://taojinke.github.io/img/20150706/19aa07b.png" alt="mongodbre"></p>
<p>&#x4E0A;&#x56FE;&#x662F;MongoDB&#x91C7;&#x7528;Replica Sets&#x6A21;&#x5F0F;&#x7684;&#x540C;&#x6B65;&#x6D41;&#x7A0B;</p>
<ul>
<li>&#x7EA2;&#x8272;&#x7BAD;&#x5934;&#x8868;&#x793A;&#x5199;&#x64CD;&#x4F5C;&#x5199;&#x5230;Primary&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x5F02;&#x6B65;&#x540C;&#x6B65;&#x5230;&#x591A;&#x4E2A;Secondary&#x4E0A;</li>
<li>&#x84DD;&#x8272;&#x7BAD;&#x5934;&#x8868;&#x793A;&#x8BFB;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x4ECE;Primary&#x6216;Secondary&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x4E0A;&#x8BFB;</li>
<li>&#x5404;&#x4E2A;Primary&#x4E0E;Secondary&#x4E4B;&#x95F4;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x5FC3;&#x8DF3;&#x540C;&#x6B65;&#x68C0;&#x6D4B;&#xFF0C;&#x7528;&#x4E8E;&#x5224;&#x65AD;Replica Sets&#x7684;&#x72B6;&#x6001;</li>
</ul>
<h3 id="&#x6570;&#x636E;&#x5206;&#x7247;&#x673A;&#x5236;">&#x6570;&#x636E;&#x5206;&#x7247;&#x673A;&#x5236;</h3><p><img src="http://taojinke.github.io/img/20150706/19aa07b.png" alt="wlqvf"></p>
<ul>
<li>MongoDB&#x7684;&#x5206;&#x7247;&#x662F;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5206;&#x7247;key&#x6765;&#x8FDB;&#x884C;&#xFF0C;&#x6570;&#x636E;&#x6309;&#x8303;&#x56F4;&#x5206;&#x6210;&#x4E0D;&#x540C;&#x7684;chunk&#xFF0C;&#x6BCF;&#x4E2A;chunk&#x7684;&#x5927;&#x5C0F;&#x6709;&#x9650;&#x5236;</li>
<li>&#x6709;&#x591A;&#x4E2A;&#x5206;&#x7247;&#x8282;&#x70B9;&#x4FDD;&#x5B58;&#x8FD9;&#x4E9B;chunk&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4FDD;&#x5B58;&#x4E00;&#x90E8;&#x5206;&#x7684;chunk</li>
<li>&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x7247;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x4E00;&#x4E2A;Replica Sets&#xFF0C;&#x8FD9;&#x6837;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;chunk&#x8D85;&#x8FC7;&#x5176;&#x9650;&#x5236;&#x7684;&#x6700;&#x5927;&#x4F53;&#x79EF;&#x65F6;&#xFF0C;&#x4F1A;&#x5206;&#x88C2;&#x6210;&#x4E24;&#x4E2A;&#x5C0F;&#x7684;chunk</li>
<li>&#x5F53;chunk&#x5728;&#x5206;&#x7247;&#x8282;&#x70B9;&#x4E2D;&#x5206;&#x5E03;&#x4E0D;&#x5747;&#x8861;&#x65F6;&#xFF0C;&#x4F1A;&#x5F15;&#x53D1;chunk&#x8FC1;&#x79FB;&#x64CD;&#x4F5C;</li>
</ul>
<h3 id="&#x5206;&#x7247;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x89D2;&#x8272;">&#x5206;&#x7247;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x89D2;&#x8272;</h3><p><img src="http://taojinke.github.io/img/20150706/19aa2ec.png" alt="RArrX"></p>
<p>&#x4E0A;&#x9762;&#x8BB2;&#x4E86;&#x5206;&#x7247;&#x7684;&#x6807;&#x51C6;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x5177;&#x4F53;&#x5728;&#x5206;&#x7247;&#x65F6;&#x7684;&#x51E0;&#x79CD;&#x8282;&#x70B9;&#x89D2;&#x8272;</p>
<ul>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;&#x8DEF;&#x7531;&#x8282;&#x70B9;mongos&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x8BFB;&#x5199;</li>
<li>config&#x670D;&#x52A1;&#x5668;&#x4FDD;&#x5B58;&#x4E86;&#x4E24;&#x4E2A;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;key&#x503C;&#x7684;&#x533A;&#x95F4;&#x5BF9;&#x5E94;&#x54EA;&#x4E00;&#x4E2A;chunk&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;chunk&#x5B58;&#x5728;&#x54EA;&#x4E00;&#x4E2A;&#x5206;&#x7247;&#x8282;&#x70B9;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;</li>
<li>&#x8DEF;&#x7531;&#x8282;&#x70B9;&#x901A;&#x8FC7;config&#x670D;&#x52A1;&#x5668;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x627E;&#x5230;&#x771F;&#x6B63;&#x5B58;&#x653E;&#x6570;&#x636E;&#x7684;&#x5206;&#x7247;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5BF9;&#x5E94;&#x64CD;&#x4F5C;</li>
<li>&#x8DEF;&#x7531;&#x8282;&#x70B9;&#x8FD8;&#x4F1A;&#x5728;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#x5224;&#x65AD;&#x5F53;&#x524D;chunk&#x662F;&#x5426;&#x8D85;&#x51FA;&#x9650;&#x5B9A;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x51FA;&#xFF0C;&#x5C31;&#x5206;&#x5217;&#x6210;&#x4E24;&#x4E2A;chunk</li>
<li>&#x5BF9;&#x4E8E;&#x6309;&#x5206;&#x7247;key&#x8FDB;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x548C;update&#x64CD;&#x4F5C;&#x6765;&#x8BF4;&#xFF0C;&#x8DEF;&#x7531;&#x8282;&#x70B9;&#x4F1A;&#x67E5;&#x5230;&#x5177;&#x4F53;&#x7684;chunk&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x7684;&#x5DE5;&#x4F5C;</li>
<li>&#x5BF9;&#x4E8E;&#x4E0D;&#x6309;&#x5206;&#x7247;key&#x8FDB;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x548C;update&#x64CD;&#x4F5C;&#x6765;&#x8BF4;&#xFF0C;mongos&#x4F1A;&#x5BF9;&#x6240;&#x6709;&#x4E0B;&#x5C5E;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x5408;&#x5E76;</li>
</ul>
<h3 id="&#x5176;&#x5B83;&#x5173;&#x4E8E;mongodb_&#x7684;&#x4E00;&#x4E9B;&#x5C0F;&#x63D0;&#x793A;:">&#x5176;&#x5B83;&#x5173;&#x4E8E;mongodb &#x7684;&#x4E00;&#x4E9B;&#x5C0F;&#x63D0;&#x793A;:</h3><ul>
<li>&#x4E0D;&#x8981;&#x4F7F;&#x7528;32&#x4F4D;&#x7248;&#x672C;</li>
</ul>
<p>MongoDB&#x7684;32&#x4F4D;&#x7248;&#x672C;&#x4E5F;&#x662F;&#x4E0D;&#x5EFA;&#x8BAE;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x53EA;&#x80FD;&#x5904;&#x7406;2GB&#x5927;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x3002;&#x8FD8;&#x8BB0;&#x5F97;&#x7B2C;&#x4E00;&#x4E2A;&#x9650;&#x5236;&#x4E48;&#xFF1F;&#x8FD9;&#x662F;MongoDB&#x5173;&#x4E8E;&#x8BE5;&#x9650;&#x5236;&#x7684; <a href="http://blog.mongodb.org/post/137788967/32-bit-limitations" target="_blank" rel="external">&#x8BF4;&#x660E;</a> &#x3002; </p>
<ul>
<li>&#x4E86;&#x89E3;&#x5B98;&#x65B9;&#x7684;&#x9650;&#x5236;</li>
</ul>
<p>&#x8BA9;&#x6211;&#x611F;&#x5230;&#x60CA;&#x8BB6;&#x7684;&#x662F;&#xFF0C;&#x5F88;&#x5C11;&#x6709;&#x4EBA;&#x4F1A;&#x67E5;&#x8BE2;&#x5173;&#x4E8E;&#x4ED6;&#x4EEC;&#x5C06;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5DE5;&#x5177;&#x7684;&#x9650;&#x5236;&#x3002;&#x5E78;&#x597D;&#xFF0C;MongoDB&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53D1;&#x5E03;&#x4E86;&#x4E00;&#x7BC7;MongoDB&#x6240;&#x6709;&#x9650;&#x5236;&#x7684; <a href="http://docs.mongodb.org/manual/reference/limits/" target="_blank" rel="external">&#x535A;&#x5BA2;</a> &#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x524D;&#x4E86;&#x89E3;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x907F;&#x514D;&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x96BE;&#x582A;&#x3002; </p>
<ul>
<li>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x4E0D;&#x4F1A;&#x786E;&#x4FDD;&#x9AD8;&#x53EF;&#x7528;&#x6027;</li>
</ul>
<p>&#x5C3D;&#x7BA1;&#x5DF2;&#x7ECF;&#x4E0D;&#x5EFA;&#x8BAE;&#x88AB;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;MongoDB&#x8FD8;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x590D;&#x5236;&#x7B56;&#x7565;&#xFF0C;&#x5373;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x3002;&#x5B83;&#x89E3;&#x51B3;&#x4E86;12&#x4E2A;&#x8282;&#x70B9;&#x9650;&#x5236;&#x95EE;&#x9898;&#xFF0C;&#x4E0D;&#x8FC7;&#x5374;&#x4EA7;&#x751F;&#x4E86;&#x65B0;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x5982;&#x679C;&#x9700;&#x8981;&#x6539;&#x53D8;&#x96C6;&#x7FA4;&#x7684;&#x4E3B;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5FC5;&#x987B;&#x5F97;&#x624B;&#x5DE5;&#x5B8C;&#x6210;&#xFF0C;&#x611F;&#x5230;&#x60CA;&#x8BB6;&#xFF1F;&#x770B;&#x770B;&#x8FD9;&#x4E2A; <a href="http://docs.mongodb.org/manual/core/master-slave/" target="_blank" rel="external">&#x94FE;&#x63A5;</a> &#x5427;&#x3002; </p>
<ul>
<li>&#x901A;&#x8FC7;&#x590D;&#x5236;&#x96C6;&#x5B9E;&#x73B0;&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x6548;&#x679C;&#x975E;&#x5E38;&#x68D2;&#xFF0C;&#x4E0D;&#x8FC7;&#x4E5F;&#x6709;&#x9650;&#x5236;</li>
</ul>
<p>MongoDB&#x4E2D;&#x6570;&#x636E;&#x590D;&#x5236;&#x7684;&#x590D;&#x5236;&#x96C6;&#x7B56;&#x7565;&#x975E;&#x5E38;&#x68D2;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x914D;&#x7F6E;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x786E;&#x5B9E;&#x4E0D;&#x9519;&#x3002;&#x4F46;&#x5982;&#x679C;&#x96C6;&#x7FA4;&#x7684;&#x8282;&#x70B9;&#x6709;12&#x4E2A;&#x4EE5;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#x3002;MongoDB&#x4E2D;&#x7684;&#x590D;&#x5236;&#x96C6;&#x6709;12&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x95EE;&#x9898;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8FFD;&#x8E2A;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x770B;&#x770B;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>
<h3 id="&#x7ED3;&#x8BBA;">&#x7ED3;&#x8BBA;</h3><p>Gridfs&#x6700;&#x9002;&#x5408;&#x5927;&#x6587;&#x4EF6;&#x5B58;&#x50A8; &#xFF0C;&#x7279;&#x522B;&#x662F;&#x89C6;&#x9891;&#xFF0C;&#x97F3;&#x9891;&#xFF0C;&#x5927;&#x578B;&#x56FE;&#x7247;&#x8D85;&#x8FC7;16MB&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5C0F;&#x578B;&#x6587;&#x4EF6;&#x4E5F;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#xFF0C;&#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x4ED8;&#x51FA;2&#x6B21;&#x67E5;&#x8BE2;&#x4EE3;&#x4EF7;(metadata&#x4E0E;file content) [Tip#18 <a href="http://www.amazon.com/MongoDB-Developers-Kristina-Chodorow-published/dp/B00EKYSTNC/ref=sr_1_2?ie=UTF8&amp;qid=1436080688&amp;sr=8-2&amp;keywords=50+Tips+and+Tricks+for+MongoDB+Developers&amp;pebp=1436080699671&amp;perid=1AHGRNQ81QNF615GVVBC" target="_blank" rel="external">50 Tips and Tricks for MongoDB Developers</a> ]&#x3002;&#x4E0D;&#x8981;&#x4FEE;&#x6539;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x662F;&#x66F4;&#x65B0;&#x6587;&#x4EF6;&#x5143;&#x6570;&#x636E;&#x5982;&#x7248;&#x672C;&#xFF0C;&#x6216;&#x4E0A;&#x4F20;&#x65B0;&#x7248;&#x672C;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5220;&#x9664;&#x8001;&#x7248;&#x672C;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x91CF;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x8282;&#x70B9;&#xFF0C;&#x590D;&#x5236;&#xFF0C;&#x6570;&#x636E;&#x5206;&#x7247;&#x7B49;&#x3002;&#x522B;&#x57FA;&#x4E8E;nginx&#x8BBF;&#x95EE;&#x56FE;&#x7247;&#x6587;&#x4EF6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x6CA1;&#x6709;&#x7F13;&#x5B58;&#x3002; &#x4ECE;&#x4E92;&#x8054;&#x7F51;&#x5B58;&#x50A8;&#x56FE;&#x7247;&#x6848;&#x4F8B;&#x6765;&#x770B;&#xFF0C;&#x56FE;&#x7247;&#x5927;&#x90FD;&#x662F;jpg, png&#x4E0E;&#x7F29;&#x7565;&#x56FE;&#x6587;&#x4EF6;&#xFF0C;&#x5206;&#x5B58;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;(DFS)&#x4F1A;&#x662F;&#x66F4;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002; </p>
<h3 id="&#x8D44;&#x6E90;&#xFF1A;">&#x8D44;&#x6E90;&#xFF1A;</h3><p><a href="https://docs.mongodb.org/v2.6/core/gridfs/" target="_blank" rel="external">GridFS&#x5B98;&#x65B9;</a><a href="https://www.mongodb.com/blog/post/building-mongodb-applications-binary-files-using-gridfs-part-1?jmp=docs" target="_blank" rel="external">Building MongoDB Applications with Binary Files Using GridFS</a></p>
<p>&#x5E0C;&#x671B;&#x5BF9;&#x60A8;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x6709;&#x5E2E;&#x52A9;&#x3002; &#x5176;&#x5B83;&#x60A8;&#x53EF;&#x80FD;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x6587;&#x7AE0;&#xFF1A;</p>
<p><a href="http://www.cnblogs.com/wintersun/p/4573969.html" target="_blank" rel="external">&#x80FD;&#x529B;&#x7D20;&#x8D28;&#x6A21;&#x578B;&#x54A8;&#x8BE2;&#x5DE5;&#x5177;(Part1)</a><a href="http://www.cnblogs.com/wintersun/p/4192493.html" target="_blank" rel="external">&#x4F01;&#x4E1A;&#x5E94;&#x7528;&#x4E4B;&#x6027;&#x80FD;&#x5B9E;&#x65F6;&#x5EA6;&#x91CF;&#x7CFB;&#x7EDF;&#x6F14;&#x53D8;</a> &#x4E91;&#x8BA1;&#x7B97;&#x53C2;&#x8003;&#x67B6;&#x6784;&#x51E0;&#x4F8B; <a href="http://www.cnblogs.com/wintersun/p/3871433.html" target="_blank" rel="external">&#x667A;&#x80FD;&#x79FB;&#x52A8;&#x5BFC;&#x6E38;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7B80;&#x4ECB;</a><a href="http://www.cnblogs.com/wintersun/p/4279863.html" target="_blank" rel="external">&#x4EBA;&#x529B;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x6F14;&#x5316;</a>&#x5982;&#x6709;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x8F6F;&#x4EF6;,&#x7CFB;&#x7EDF; IT,&#x4F01;&#x4E1A;&#x4FE1;&#x606F;&#x5316; &#x8D44;&#x8BAF;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x8BA2;&#x9605;&#x53F7;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/19aa2ec.jpg" alt="MegadotnetMicroMsg_thumb1_thumb1_thu[1]"></p>
<p>&#x4F5C;&#x8005;&#xFF1A;Petter Liu </p>
<p>&#x51FA;&#x5904;&#xFF1A; <a href="http://www.cnblogs.com/wintersun/" target="_blank" rel="external">http://www.cnblogs.com/wintersun/</a></p>
<p>&#x672C;&#x6587;&#x7248;&#x6743;&#x5F52;&#x4F5C;&#x8005;&#x548C;&#x535A;&#x5BA2;&#x56ED;&#x5171;&#x6709;&#xFF0C;&#x6B22;&#x8FCE;&#x8F6C;&#x8F7D;&#xFF0C;&#x4F46;&#x672A;&#x7ECF;&#x4F5C;&#x8005;&#x540C;&#x610F;&#x5FC5;&#x987B;&#x4FDD;&#x7559;&#x6B64;&#x6BB5;&#x58F0;&#x660E;&#xFF0C;&#x4E14;&#x5728;&#x6587;&#x7AE0;&#x9875;&#x9762;&#x660E;&#x663E;&#x4F4D;&#x7F6E;&#x7ED9;&#x51FA;&#x539F;&#x6587;&#x8FDE;&#x63A5;&#xFF0C;&#x5426;&#x5219;&#x4FDD;&#x7559;&#x8FFD;&#x7A76;&#x6CD5;&#x5F8B;&#x8D23;&#x4EFB;&#x7684;&#x6743;&#x5229;&#x3002;</p>
<p>&#x8BE5;&#x6587;&#x7AE0;&#x4E5F;&#x540C;&#x65F6;&#x53D1;&#x5E03;&#x5728;&#x6211;&#x7684;&#x72EC;&#x7ACB;&#x535A;&#x5BA2;&#x4E2D;-Petter Liu Blog&#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/195223b/" title="MongoDB的学习--explain()和hint() -" itemprop="url">MongoDB的学习--explain()和hint() -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="Explain">Explain</h3><p>&#x4ECE;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;explain()&#x80FD;&#x591F;&#x63D0;&#x4F9B;&#x5927;&#x91CF;&#x4E0E;&#x67E5;&#x8BE2;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x4E8E;&#x901F;&#x5EA6;&#x6BD4;&#x8F83;&#x6162;&#x7684;&#x67E5;&#x8BE2;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x8BCA;&#x65AD;&#x5DE5;&#x5177;&#x4E4B;&#x4E00;&#x3002;&#x901A;&#x8FC7;&#x67E5;&#x770B;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x7684;explain()&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x4E86;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x4EE5;&#x53CA;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7684;&#x3002;</p>
<p>&#x6700;&#x5E38;&#x89C1;&#x7684;explain()&#x7684;&#x8F93;&#x51FA;&#x6709;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1A;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;&#x548C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;&#x3002;</p>
<p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;MongoDB&#x7684;&#x535A;&#x5BA2;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x7684;explain&#x5982;&#x4E0B;&#xFF1A;</p>
<ol>
<li><p>&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x65F6;</p>
<p> {</p>
<pre><code>&amp;quot;<span class="attribute">cursor</span>&amp;quot; <span class="value">: &amp;quot;</span>BasicCursor&amp;quot;,
&amp;quot;isMultiKey&amp;quot; <span class="value">: false,
&amp;quot;</span>n&amp;quot; <span class="value">: <span class="number">1</span>,
&amp;quot;</span>nscannedObjects&amp;quot; <span class="value">: <span class="number">1001</span>,
&amp;quot;</span>nscanned&amp;quot; <span class="value">: <span class="number">1001</span>,
&amp;quot;</span>nscannedObjectsAllPlans&amp;quot; <span class="value">: <span class="number">1001</span>,
&amp;quot;</span>nscannedAllPlans&amp;quot; <span class="value">: <span class="number">1001</span>,
&amp;quot;</span>scanAndOrder&amp;quot; <span class="value">: false,
&amp;quot;</span>indexOnly&amp;quot; <span class="value">: false,
&amp;quot;</span>nYields&amp;quot; <span class="value">: <span class="number">7</span>,
&amp;quot;</span>nChunkSkips&amp;quot; <span class="value">: <span class="number">0</span>,
&amp;quot;</span>millis&amp;quot; <span class="value">: <span class="number">1</span>,
&amp;quot;</span>server&amp;quot; <span class="value">: &amp;quot;</span>user<span class="value">:<span class="number">27017</span>&amp;quot;</span>,
&amp;quot;filterSet&amp;quot; <span class="value">: false</span>
</code></pre><p> }</p>
</li>
</ol>
<ol>
<li><p>&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x65F6;</p>
<p> {</p>
<pre><code>&amp;quot<span class="comment">;cursor&amp;quot; : &amp;quot;BtreeCursor username_1&amp;quot;,</span>
&amp;quot<span class="comment">;isMultiKey&amp;quot; : false,</span>
&amp;quot<span class="comment">;n&amp;quot; : 1,</span>
&amp;quot<span class="comment">;nscannedObjects&amp;quot; : 1,</span>
&amp;quot<span class="comment">;nscanned&amp;quot; : 1,</span>
&amp;quot<span class="comment">;nscannedObjectsAllPlans&amp;quot; : 1,</span>
&amp;quot<span class="comment">;nscannedAllPlans&amp;quot; : 1,</span>
&amp;quot<span class="comment">;scanAndOrder&amp;quot; : false,</span>
&amp;quot<span class="comment">;indexOnly&amp;quot; : false,</span>
&amp;quot<span class="comment">;nYields&amp;quot; : 0,</span>
&amp;quot<span class="comment">;nChunkSkips&amp;quot; : 0,</span>
&amp;quot<span class="comment">;millis&amp;quot; : 0,</span>
&amp;quot<span class="comment">;indexBounds&amp;quot; : {</span>
    &amp;quot<span class="comment">;username&amp;quot; : [</span>
        [
            &amp;quot<span class="comment">;user1000&amp;quot;,</span>
            &amp;quot<span class="comment">;user1000&amp;quot;</span>
        ]
    ]
},
&amp;quot<span class="comment">;server&amp;quot; : &amp;quot;user:27017&amp;quot;,</span>
&amp;quot<span class="comment">;filterSet&amp;quot; : false</span>
</code></pre><p> }</p>
</li>
</ol>
<p>&#x6211;&#x4EEC;&#x4EE5;&#x6709;&#x7D22;&#x5F15;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x4F8B;&#xFF0C;&#x6765;&#x4F9D;&#x6B21;&#x770B;&#x4E00;&#x4E0B;&#x8FD9;&#x4E9B;&#x5B57;&#x6BB5;&#x4EE3;&#x8868;&#x7684;&#x610F;&#x601D;</p>
<ul>
<li>&quot;cursor&quot; : &quot;BtreeCursor username_1&quot;<br>BtreeCursor&#x8868;&#x793A;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x4E86;&#x7D22;&#x5F15;&#xFF0C;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x201C;username&#x201D;&#x4E0A;&#x7684;&#x7D22;&#x5F15;{&#x201C;username&#x201D;&#xFF1A;1}&#x3002;&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x8981;&#x5BF9;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x9006;&#x5E8F;&#x904D;&#x5386;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E86;&#x591A;&#x952E;&#x7D22;&#x5F15;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x4E2D;&#x770B;&#x5230;&#x201C;reverse&#x201D;&#x548C;&#x201C;multi&#x201D;&#x8FD9;&#x6837;&#x7684;&#x503C;&#x3002;</li>
<li>&quot;isMultiKey&quot; : false<br>&#x7528;&#x4E8E;&#x8BF4;&#x660E;&#x672C;&#x6B21;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x4E86;&#x591A;&#x952E;&#x7D22;&#x5F15;&#x3002;</li>
<li>&quot;n&quot; : 1<br>&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;</li>
<li>&quot;nscannedObjects&quot; : 1<br>&#x8FD9;&#x662F;MongoDB&#x6309;&#x7167;&#x7D22;&#x5F15;&#x6307;&#x9488;&#x53BB;&#x78C1;&#x76D8;&#x4E0A;&#x67E5;&#x627E;&#x5B9E;&#x9645;&#x6587;&#x6863;&#x7684;&#x6B21;&#x6570;&#x3002;&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x5305;&#x542B;&#x7684;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x4E0D;&#x662F;&#x7D22;&#x5F15;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x8981;&#x6C42;&#x8FD4;&#x56DE;&#x4E0D;&#x5728;&#x7D22;&#x5F15;&#x5185;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;MongoDB&#x5C31;&#x5FC5;&#x987B;&#x4F9D;&#x6B21;&#x67E5;&#x627E;&#x6BCF;&#x4E2A;&#x7D22;&#x5F15;&#x6761;&#x76EE;&#x6307;&#x5411;&#x7684;&#x6587;&#x6863;&#x3002;</li>
<li>&quot;nscanned&quot; : 1<br>&#x5982;&#x679C;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x5C31;&#x662F;&#x67E5;&#x627E;&#x8FC7;&#x7684;&#x7D22;&#x5F15;&#x6761;&#x76EE;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x662F;&#x4E00;&#x6B21;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x5C31;&#x4EE3;&#x8868;&#x68C0;&#x67E5;&#x8FC7;&#x7684;&#x6587;&#x6863;&#x6570;&#x76EE;&#x3002;</li>
<li>&quot;scanAndOrder&quot; : false<br>MongoDB&#x662F;&#x5426;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5BF9;&#x7ED3;&#x679C;&#x96C6;&#x8FDB;&#x884C;&#x4E86;&#x6392;&#x5E8F;</li>
<li>&quot;indexOnly&quot; : false<br>MongoDB&#x662F;&#x5426;&#x53EA;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5C31;&#x80FD;&#x5B8C;&#x6210;&#x6B64;&#x6B21;&#x67E5;&#x8BE2;&#x3002;&#x5728;&#x672C;&#x4F8B;&#x4E2D;&#xFF0C;MongoDB&#x53EA;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5C31;&#x627E;&#x5230;&#x4E86;&#x5168;&#x90E8;&#x7684;&#x5339;&#x914D;&#x6587;&#x6863;&#xFF0C;&#x4ECE;&#x201C;nscanned&#x201D;&#x548C;&#x201C;n&#x201D;&#x76F8;&#x7B49;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x8981;&#x5C31;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5B57;&#x6BB5;&#xFF0C;&#x800C;&#x7D22;&#x5F15;&#x53EA;&#x5305;&#x542B;&#x201C;username&#x201D;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5982;&#x679C;&#x5C31;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x4FEE;&#x6539;&#x4E3A;{&quot;_id&quot;:0, &quot;username&quot;:1}&#xFF0C;&#x90A3;&#x4E48;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x7D22;&#x5F15;&#x8986;&#x76D6;&#x4E86;&#xFF0C;&quot;indexOnly&quot;&#x7684;&#x503C;&#x5C31;&#x4F1A;&#x662F;true&#x3002;</li>
<li>&quot;nYields&quot; : 0<br>&#x4E3A;&#x4E86;&#x8BA9;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#x80FD;&#x591F;&#x987A;&#x5229;&#x6267;&#x884C;&#xFF0C;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x6682;&#x505C;&#x6682;&#x505C;&#x7684;&#x6B21;&#x6570;&#x3002;&#x5982;&#x679C;&#x6709;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#x9700;&#x6C42;&#x5904;&#x7406;&#xFF0C;&#x67E5;&#x8BE2;&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x91CA;&#x653E;&#x4ED6;&#x4EEC;&#x7684;&#x9501;&#xFF0C;&#x4EE5;&#x4FBF;&#x5199;&#x5165;&#x80FD;&#x591F;&#x987A;&#x5229;&#x6267;&#x884C;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5728;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#xFF0C;&#x56E0;&#x6B64;&#x67E5;&#x8BE2;&#x6CA1;&#x6709;&#x6682;&#x505C;&#x8FC7;&#x3002;</li>
<li>&quot;millis&quot; : 0<br>&#x6570;&#x636E;&#x5E93;&#x6267;&#x884C;&#x672C;&#x6B21;&#x67E5;&#x8BE2;&#x6240;&#x8017;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#x3002;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x8D8A;&#x5C0F;&#xFF0C;&#x8BF4;&#x660E;&#x6548;&#x7387;&#x8D8A;&#x9AD8;&#x3002;</li>
<li>&quot;indexBounds&quot; : {…}<br>&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x63CF;&#x8FF0;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x7ED9;&#x51FA;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x904D;&#x5386;&#x8303;&#x56F4;&#x3002;&#x7531;&#x4E8E;&#x6B64;&#x6B21;&#x67E5;&#x8BE2;&#x662F;&#x7CBE;&#x786E;&#x5339;&#x914D;&#xFF0C;&#x6240;&#x4EE5;&#x6240;&#x4EE5;&#x53EA;&#x8981;&#x67E5;&#x201C;user1000&#x201D;&#x8FD9;&#x4E2A;&#x503C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</li>
</ul>
<h3 id="Hint_&#x867D;&#x7136;MongoDB&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x5668;&#x4E00;&#x822C;&#x5DE5;&#x4F5C;&#x7684;&#x5F88;&#x4E0D;&#x9519;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;hint()&#x6765;&#x5F3A;&#x8FEB;MongoDB&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4E0B;&#x67D0;&#x4E9B;&#x60C5;&#x5F62;&#x4E0B;&#x4F1A;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3002;&#x4E00;&#x4E2A;&#x6709;&#x7D22;&#x5F15;&#x7684;collection&#x5E76;&#x4E14;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x591A;&#x5B57;&#x6BB5;&#x7684;&#x67E5;&#x8BE2;&#x3002;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x5236;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5F3A;&#x8FEB;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x8BE5;&#x7D22;&#x5F15;&#x3002;">Hint &#x867D;&#x7136;MongoDB&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x5668;&#x4E00;&#x822C;&#x5DE5;&#x4F5C;&#x7684;&#x5F88;&#x4E0D;&#x9519;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;hint()&#x6765;&#x5F3A;&#x8FEB;MongoDB&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4E0B;&#x67D0;&#x4E9B;&#x60C5;&#x5F62;&#x4E0B;&#x4F1A;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3002;&#x4E00;&#x4E2A;&#x6709;&#x7D22;&#x5F15;&#x7684;collection&#x5E76;&#x4E14;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x591A;&#x5B57;&#x6BB5;&#x7684;&#x67E5;&#x8BE2;&#x3002;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x5236;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5F3A;&#x8FEB;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x8BE5;&#x7D22;&#x5F15;&#x3002;</h3><pre><code>db<span class="class">.users</span><span class="class">.find</span>({&amp;quot;username&amp;quot;<span class="value">:&amp;quot;</span>user1000&amp;quot;, &amp;quot;age&amp;quot;<span class="value">:<span class="number">30</span>}).<span class="function">hint</span>({&amp;quot;</span>username&amp;quot;<span class="value">:<span class="number">1</span>})</span>
</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x8BF7;&#x786E;&#x5B9A;&#x4F60;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x5728;users&#x4E0A;&#x6709;&#x4E2A;{&quot;a&quot;: 1, &quot;b&quot;: 1}&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x540D;&#x79F0;&#x662F;&quot;a_1_b_1&quot;&#xFF0C;&#x5219;&#x5982;&#x4E0B;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x7B49;&#x4EF7;&#xFF1A;</p>
<pre><code>db<span class="class">.users</span><span class="class">.find</span>({&amp;quot;<span class="tag">a</span>&amp;quot;<span class="value">: <span class="number">4</span>, &amp;quot;</span><span class="tag">b</span>&amp;quot;<span class="value">: <span class="number">5</span>, &amp;quot;</span>c&amp;quot;<span class="value">: <span class="number">6</span>}).<span class="function">hint</span>({&amp;quot;</span><span class="tag">a</span>&amp;quot;<span class="value">: <span class="number">1</span>, &amp;quot;</span><span class="tag">b</span>&amp;quot;<span class="value">: <span class="number">1</span>})
db.users.<span class="function">find</span>({&amp;quot;</span><span class="tag">a</span>&amp;quot;<span class="value">: <span class="number">4</span>, &amp;quot;</span><span class="tag">b</span>&amp;quot;<span class="value">: <span class="number">5</span>, &amp;quot;</span>c&amp;quot;<span class="value">: <span class="number">6</span>}).<span class="function">hint</span>(&amp;quot;</span>a_1_b_1&amp;quot;)
</code></pre><p>&#x4E5F;&#x53EF;&#x4EE5;&#x5F3A;&#x8FEB;&#x67E5;&#x8BE2;&#x4E0D;&#x9002;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x505A;&#x8868;&#x626B;&#x63CF;&#xFF1A;</p>
<pre><code>db<span class="class">.users</span><span class="class">.find</span>().<span class="function"><span class="title">hint</span><span class="params">({&amp;quot;<span class="variable">$natural</span>&amp;quot;:<span class="number">1</span>})</span></span>
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/194ea14/" title=".net Mongo Driver 1.0与2.0的对比与2.0的优化 -" itemprop="url">.net Mongo Driver 1.0与2.0的对比与2.0的优化 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h3><p>&#x6700;&#x8FD1;&#x95F2;&#x7684;&#x65F6;&#x95F4;&#x6709;&#x70B9;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x5199;&#x535A;&#x5BA2;&#x5427;&#x3002;</p>
<p>&#x6709;&#x4EBA;&#x8BF4;Mongo&#xA0;2.0&#x7684;&#x5199;&#x6CD5;&#x96BE;&#x4EE5;&#x628A;&#x63A7;&#xFF0C;&#x597D;&#x591A;&#x5730;&#x65B9;&#x4E0D;&#x77E5;&#x9053;&#x548B;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x575A;&#x6301;&#x7528;1.0(&#x4E0D;&#x613F;&#x610F;&#x53BB;&#x5C1D;&#x8BD5;2.0)&#xFF0C;&#x6211;&#x611F;&#x89C9;&#x4E0D;&#x53EF;&#x7406;&#xFFFD;&#xFFFD;&#xFFFD;&#x3002;&#x6240;&#x4EE5;&#x5199;&#x7BC7;&#x535A;&#x5BA2;&#x6BD4;&#x8F83;&#x4E0B;&#x3002;</p>
<p>Mongo C#&#x9A71;&#x52A8;1.0&#x5230;2.0&#x8BBE;&#x8BA1;&#x65B9;&#x9762;&#x7684;&#x5DEE;&#x522B;&#x975E;&#x5E38;&#x5927;&#x3002;</p>
<h3 id="&#x6B63;&#x6587;">&#x6B63;&#x6587;</h3><p> &#x5148;&#x8BF4;1.0&#x5427;&#xFF0C;&#x66F4;&#x50CF;&#x662F;Mongo &#x5404;&#x529F;&#x80FD;&#x7684;&#x76F4;&#x8BD1;&#xFF0C;&#x6240;&#x4EE5;&#x5199;&#x6CD5;&#x4E0E;mongo&#x539F;&#x751F;&#x67E5;&#x8BE2;&#x4FEE;&#x6539;&#x7B49;&#x6BD4;&#x8F83;&#x7C7B;&#x4F3C;&#xFF0C;&#x6613;&#x4E0A;&#x624B;&#x3002;&#x4F46;&#x662F;&#x8BBE;&#x8BA1;&#x4E0A;&#x786E;&#x5B9E;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x3002; &#x7B80;&#x5355;&#x8BF4;&#x51E0;&#x70B9;: </p>
<h4 id="a-&#x5728;query&#x7684;&#x6784;&#x5EFA;&#x65B9;&#x9762;&#xFF0C;&#x867D;&#x7136;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x52C9;&#x5F3A;&#x80FD;&#x63A5;&#x53D7;">a.&#x5728;query&#x7684;&#x6784;&#x5EFA;&#x65B9;&#x9762;&#xFF0C;&#x867D;&#x7136;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x52C9;&#x5F3A;&#x80FD;&#x63A5;&#x53D7;</h4><pre><code><span class="number">1</span>  <span class="built_in">var</span> modelCursor <span class="subst">=</span> collection<span class="built_in">.</span>Find(
<span class="number">2</span>                 Query<span class="built_in">.</span><span class="literal">And</span>(Query<span class="built_in">.</span>Matches(<span class="subst">&amp;</span>quot;Name<span class="subst">&amp;</span>quot;, <span class="subst">&amp;</span>quot;test<span class="subst">&amp;</span>quot;),Query<span class="built_in">.</span><span class="literal">EQ</span>(<span class="subst">&amp;</span>quot;Age<span class="subst">&amp;</span>quot;,<span class="number">10</span>),Query<span class="built_in">.</span><span class="keyword">In</span>(<span class="subst">&amp;</span>quot;id<span class="subst">&amp;</span>quot;,<span class="literal">new</span> BsonArray(){<span class="subst">&amp;</span>quot;<span class="number">123</span><span class="subst">&amp;</span>quot;,<span class="subst">&amp;</span>quot;<span class="number">456</span><span class="subst">&amp;</span>quot;,<span class="subst">&amp;</span>quot;sda<span class="subst">&amp;</span>quot;})));
<span class="number">3</span> <span class="built_in">var</span> modelCursor1 <span class="subst">=</span> collection<span class="built_in">.</span>Find(
<span class="number">4</span>                Query<span class="built_in">.</span><span class="literal">And</span>(Query<span class="subst">&amp;</span><span class="literal">lt</span>;TestData<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="built_in">.</span>Matches(t <span class="subst">=&amp;</span><span class="literal">gt</span>; t<span class="built_in">.</span>Name, <span class="subst">&amp;</span>quot;test<span class="subst">&amp;</span>quot;), Query<span class="subst">&amp;</span><span class="literal">lt</span>;TestData<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="built_in">.</span><span class="literal">EQ</span>(t<span class="subst">=&amp;</span><span class="literal">gt</span>;t<span class="built_in">.</span>Age, <span class="number">10</span>), Query<span class="subst">&amp;</span><span class="literal">lt</span>;TestData<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="built_in">.</span><span class="keyword">In</span>(t<span class="subst">=&amp;</span><span class="literal">gt</span>;t<span class="built_in">.</span>_id, <span class="literal">new</span> BsonArray() { <span class="subst">&amp;</span>quot;<span class="number">123</span><span class="subst">&amp;</span>quot;, <span class="subst">&amp;</span>quot;<span class="number">456</span><span class="subst">&amp;</span>quot;, <span class="subst">&amp;</span>quot;sda<span class="subst">&amp;</span>quot; })));
</code></pre><p>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x4EE3;&#x7801;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x786C;&#x5B57;&#x7B26;&#x4E32;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x4E07;&#x4E00;&#x6539;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x7EF4;&#x62A4;&#x96BE;&#x5EA6;&#x5927;</p>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#x4EE3;&#x7801;&#x7EF4;&#x62A4;&#x6027;&#x597D;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x771F;&#x662F;&#x70E6;&#x7410;&#xFF0C;&#x6BCF;&#x4E2A;query&#x90FD;&#x8981;&#x6765;&#x4E2A;&#x6CDB;&#x578B;&#x7EA6;&#x5B9A;,&#x5197;&#x4F59;&#x592A;&#x591A;&#x4E86;</p>
<p>b.&#x5927;&#x91CF;linq&#x65B9;&#x6CD5;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6267;&#x884C;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x6CD5;&#x6DF7;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x8FD9;&#x70B9;&#x662F;&#x53EF;&#x4EE5;&#x6539;&#x8FDB;&#x7684;&#x3002;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x4E00;&#x4E0B;&#x95EE;&#x9898;:</p>
<p>&#x5728;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E0A;MongoCursor&lt;TDefaultDocument&gt;&#x3002;&#x7EE7;&#x627F;IEnumerable&lt;T&gt;&#xFF0C;Find&#x65F6;&#x53EA;&#x662F;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x800C;&#x5DF2;&#xFF0C;&#x53EA;&#x6709;&#x8C03;&#x7528;GetEnumerator()&#x624D;&#x56DE;&#x53BB;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x3002;&#x4E5F;&#x5C31;&#x662F;ToList()&#x6216;&#x8005;foreach&#x7684;&#x65F6;&#x5019;&#x624D;&#x53BB;&#x67E5;&#x8BE2;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x8BBE;&#x8BA1;&#x7684;&#x6CA1;&#x9519;&#x8DDF;ef&#x4E00;&#x81F4;&#x7684;</p>
<p>&#x6267;&#x884C;&#x65B9;&#x5F0F;&#xFF0C;&#x770B;&#x770B;&#x6E90;&#x7801;&#x622A;&#x56FE;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194ad0b.png" alt=""></p>
<p>&#x8FD9;&#x6837;&#x770B;&#x8D77;&#x6765;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194b6cf.png" alt=""></p>
<p>&#x8FD9;&#x662F;&#x6BB5;&#x5E38;&#x7528;&#x7684;&#x5206;&#x9875;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x5929;&#x771F;&#x7684;&#x4EE5;&#x4E3A;&#x4ED6;&#x4F1A;&#x5C06;cursor.Skip().Take()&#x751F;&#x6210;&#x67E5;&#x8BE2;&#x53BB;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6267;&#x884C;&#x518D;&#x628A;200&#x6761;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x6211;&#x3002; <strong>&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#x7684;</strong></p>
<p>&#x5176;&#x5B9E;&#x5DF2;&#x7ECF;&#x628A;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x62FF;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528;&#x4E86;linq&#x7684;Skip&#x53BB;&#x8DF3;&#x8FC7;&#x800C;&#x5DF2;&#x3002;</p>
<p>&#x6B63;&#x786E;&#x7684;&#x7528;&#x6CD5;&#x662F;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194bbb1.png" alt=""></p>
<p>&#x8981;&#x4F7F;&#x7528;cursor&#x7684;Set&#x5F00;&#x5934;&#x7684;&#x65B9;&#x6CD5;&#x624D;&#x662F;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x5B66;ef&#x90A3;&#x4E5F;&#x5B66;&#x5F7B;&#x5E95;&#x70B9;&#x554A;&#xFF0C;&#x4E0D;&#x4FE1;&#x4F60;&#x770B; <strong>ef&#x67E5;&#x8BE2;&#x65F6;&#x7684;Skip</strong> &#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150706/194be22.png" alt=""></p>
<p>&#x4EBA;&#x5BB6;&#x628A;Skip Take&#x90FD;&#x201C;&#x91CD;&#x5199;&#x201D;&#x4E86;&#x597D;&#x5427;&#xFF0C;&#x6839;&#x672C;&#x6CA1;&#x4F7F;&#x7528;IEnumerable&lt;T&gt;&#x7684;Skip&#x3002; &#x8FD9;&#x4E00;&#x70B9;&#x60F3;&#x8BF4;&#x660E;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x5BFC;&#x81F4;&#x4E86;&#x5927;&#x91CF;&#x7684;linq&#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x4E0E;Mongo&#x670D;&#x52A1;&#x7AEF;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x6DF7;&#x6742;&#x7684;&#x95EE;&#x9898;</p>
<h4 id="c-&#x53E6;&#x5916;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x662F;&#x8BBE;&#x8BA1;&#x975E;&#x5E38;&#x4E0D;&#x597D;&#x7684;&#x3002;&#x6BD4;&#x5982;:">c.&#x53E6;&#x5916;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x662F;&#x8BBE;&#x8BA1;&#x975E;&#x5E38;&#x4E0D;&#x597D;&#x7684;&#x3002;&#x6BD4;&#x5982;:</h4><p><img src="http://taojinke.github.io/img/20150706/194c093.png" alt=""></p>
<p>&#x8BF7;&#x770B;GroupArgs&#x7684;&#x6CE8;&#x91CA;:</p>
<p>&#x77E5;&#x9053;&#x6211;&#x5199;&#x8FD9;&#x4E48;&#x591A;&#x6CE8;&#x91CA;&#xFF0C;&#x4E3A;&#x5565;&#x5417;&#xFF0C;&#x6211;&#x6015;&#x8FC7;&#x4E24;&#x5929;&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x548B;&#x7528;&#x7684;&#x4E86;&#x3002;&#x66F4;&#x522B;&#x8BF4;&#x8BA9;&#x5176;&#x4ED6;&#x540C;&#x4E8B;&#x7528;&#x4E86;&#x3002; <strong>&#x4E00;&#x4E2A;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x5C45;&#x7136;&#x8FD8;&#x8981;&#x5728;c#&#x4E2D;&#x5199;&#x539F;&#x59CB;&#x7684;js&#x4EE3;&#x7801;&#x6765;&#x5B9E;&#x73B0;</strong> &#x3002;&#x6240;&#x4EE5;&#x9A71;&#x52A8;&#x5728;&#x8FD9;&#x91CC;&#x7684;&#x5B9E;&#x73B0;&#x53EA;&#x662F; <strong>&#x534A;&#x6210;&#x54C1;</strong> &#x7684;&#x3002; </p>
<p> &#x5BF9;&#x6BD4;&#x7740;&#x518D;&#x8BF4;&#x8BF4;2.0&#x5427;,&#x9996;&#x5148;&#x4E0E;&#x65F6;&#x4FF1;&#x8FDB;&#x5927;&#x91CF;&#x91C7;&#x7528;&#x4E86;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x3002;&#x7136;&#x540E;&#x5BF9;lamda&#x8868;&#x8FBE;&#x5F0F;&#x4E0E;&#x5F3A;&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x90FD;&#x505A;&#x4E86;&#x6539;&#x8FDB;&#x3002;</p>
<p>a.&#x9996;&#x5148;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x662F;lamda&#x8868;&#x8FBE;&#x5F0F;&#x4E86;&#xFF0C;&#x8FD9;&#x6B21;&#x7B97;&#x662F;&#x628A;&#x67E5;&#x8BE2;&#x8FD9;&#x5757;&#x5F7B;&#x5E95;&#x672C;&#x5730;&#x5316;&#x4E86;&#x3002;&#x4E0D;&#x7528;&#x518D;&#x53BB;&#x8BB0;&#x4F4F;Mongo&#x67E5;&#x8BE2;&#x539F;&#x751F;&#x7684;&#x8BED;&#x6CD5;&#x4E86;&#xFF0C;&#x95E8;&#x69DB;&#x5F88;&#x4F4E;&#x4E86;&#x3002;&#x5982;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150706/194c304.png" alt=""></p>
<p>b.&#x91CD;&#x5199;&#x4E86;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#xFF0C;&#x53EB;&#x4EC0;&#x4E48;FindFluent&#x3002;&#x7FFB;&#x8BD1;&#x8FC7;&#x6765;&#x5C31;&#x662F; <strong>&#x53EF;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x7684;&#x4E1C;&#x4E1C;,&#x770B;&#x770B;&#x6E90;&#x7801;:</strong></p>
<p><img src="http://taojinke.github.io/img/20150706/194c575.png" alt=""></p>
<p>&#x679C;&#x7136;&#x90FD;&#x662F;&#x8FD4;&#x56DE;&#x7684;this&#x4FBF;&#x4E8E;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#xFF0C;&#x518D;&#x770B;&#x770B;&#x91CC;&#x9762;&#x7684;&#x65B9;&#x6CD5;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194c575.png" alt=""></p>
<p>2.0&#x4E0D;&#x518D;&#x7EE7;&#x627F;IEnumerable&#x63A5;&#x53E3;&#xFF0C;&#x91CC;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x5168;&#x90E8;&#x662F;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;:</p>
<p>findFluent.Skip(10).Limit(10).SortBy(t =&gt; t.Age);&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x987A;&#x624B;&#x591A;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x90FD;&#x662F;&#x5230;&#x6570;&#x636E;&#x5E93;&#x7AEF;&#x6267;&#x884C;&#x7684;.</p>
<p>&#x5C31;&#x8FDE;&#x53D6;&#x96C6;&#x5408;&#x7684;First&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x662F;&#x7ECF;&#x8FC7;&#x670D;&#x52A1;&#x7AEF;&#x5904;&#x7406;&#x7684;,&#x4E0D;&#x4FE1;&#x4F60;&#x770B;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194c7e6.png" alt=""></p>
<p>&#x4F60;&#x518D;&#x770B;&#x770B;Single&#x65B9;&#x6CD5;:</p>
<p><img src="http://taojinke.github.io/img/20150706/194c7e6.png" alt=""></p>
<p>&#x67E5;&#x8BE2;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x505A;&#x4E86;Limit&#x5904;&#x7406;&#xFF0C;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x4F46;&#x662F;&#x4F1A;&#x4E0D;&#x4F1A;&#x7A81;&#x7136;&#x5FC3;&#x5934;&#x4E00;&#x7D27;&#x3002;&#x600E;&#x4E48;Single&#x7684;&#x65F6;&#x5019;find.Limit(2)&#x554A;&#xFF0C;&#x592A;&#x5947;&#x602A;&#x4E86;&#x3002;&#x4E0D;&#x8FC7;&#x806A;&#x660E;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x60F3;&#x4E00;&#x4F1A;&#x513F;&#x5E94;&#x8BE5;&#x77E5;&#x9053;&#x548B;&#x56DE;&#x4E8B;&#x4E86;&#xFF0C;&#x54C8;&#x54C8;&#xFF01;</p>
<p>&#x518D;&#x770B;&#x770B;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#xFF0C;&#x6211;&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x628A;c#&#x91CC;&#x5199;js&#x4EE3;&#x7801;&#x7684;&#x90E8;&#x5206;&#x76F4;&#x63A5;&#x641E;&#x6389;&#x4E86;&#x3002;&#x4F7F;&#x7528;lamda&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x4E86;,&#x5982;&#x4E0B;&#xFF1A;</p>
<p>var dataGroup = collection.Aggregate().Group(t =&gt; t.Age, g =&gt; new { _id = g.Key, TotalAge = g.Sum(x =&gt; x.Age) });</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;2.0&#x90FD;&#x662F;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#xFF0C;&#x719F;&#x6089;&#x4E0B;&#x7528;&#x6CD5;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;.net4.5&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x6539;&#x53D8;:&#x628A;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x3002;</p>
<p>&#x5148;&#x5199;&#x8FD9;&#x4E48;&#x591A;&#x4E86;&#xFF0C;&#x90A3;&#x91CC;&#x8BF4;&#x7684;&#x4E0D;&#x5BF9;&#x7684;&#x5730;&#x65B9;&#x5927;&#x5BB6;&#x591A;&#x591A;&#x6307;&#x51FA;&#x3002;&#x53E6;&#x5916;&#x8EAB;&#x8FB9;&#x6709;&#x8C01;&#x8FD8;&#x575A;&#x6301;&#x7528;1.0&#x7684;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x5C1D;&#x8BD5;&#x7740;&#x53BB;&#x8BF4;&#x670D;&#x4ED6;&#x2026;&#x2026;&#x989D;&#x2026;&#x2026;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/1971447/" title="Mongodb和Hbase的对比 -" itemprop="url">Mongodb和Hbase的对比 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:29:59.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x539F;&#x6587;&#xFF1A; <a href="http://www.cnblogs.com/visionwang/archive/2012/11/17/2775469.html" target="_blank" rel="external">http://www.cnblogs.com/visionwang/archive/2012/11/17/2775469.html</a></p>
<p>1.Mongodb bson&#x6587;&#x6863;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x5728;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;hbase&#x662F;&#x5217;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;&#x65F6;&#x6BCF;&#x4E2A;familycolumn&#x4FDD;&#x5B58;&#x5728;&#x5355;&#x72EC;&#x7684;hdfs&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<p>2.Mongodb &#x4E3B;&#x952E;&#x662F;&#x201C;_id&#x201D;,&#x4E3B;&#x952E;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x4E0D;&#x5EFA;&#x7D22;&#x5F15;,&#x8BB0;&#x5F55;&#x63D2;&#x5165;&#x7684;&#x987A;&#x5E8F;&#x548C;&#x5B58;&#x653E;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x6837;&#xFF0C;hbase&#x7684;&#x4E3B;&#x952E;&#x5C31;&#x662F;row key&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#x4E32;(&#x6700;&#x5927;&#x957F;&#x5EA6;&#x662F; 64KB&#xFF0C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#x957F;&#x5EA6;&#x4E00;&#x822C;&#x4E3A; 10-100bytes)&#xFF0C;&#x5728;hbase&#x5185;&#x90E8;&#xFF0C;row key&#x4FDD;&#x5B58;&#x4E3A;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#x3002;&#x5B58;&#x50A8;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x6309;&#x7167;Row key&#x7684;&#x5B57;&#x5178;&#x5E8F;(byte order)&#x6392;&#x5E8F;&#x5B58;&#x50A8;&#x3002;&#x8BBE;&#x8BA1;key&#x65F6;&#xFF0C;&#x8981;&#x5145;&#x5206;&#x6392;&#x5E8F;&#x5B58;&#x50A8;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x5C06;&#x7ECF;&#x5E38;&#x4E00;&#x8D77;&#x8BFB;&#x53D6;&#x7684;&#x884C;&#x5B58;&#x50A8;&#x653E;&#x5230;&#x4E00;&#x8D77;&#x3002;</p>
<p>&#x5B57;&#x5178;&#x5E8F;&#x5BF9;int&#x6392;&#x5E8F;&#x7684;&#x7ED3;&#x679C;&#x662F;1,10,100,11,12,13,14,15,16,17,18,19,2,20,21,&#x2026;,9,91,92,93,94,95,96,97,98,99&#x3002;&#x8981;&#x4FDD;&#x6301;&#x6574;&#x5F62;&#x7684;&#x81EA;&#x7136;&#x5E8F;&#xFF0C;&#x884C;&#x952E;&#x5FC5;&#x987B;&#x7528;0&#x4F5C;&#x5DE6;&#x586B;&#x5145;&#x3002;3.Mongodb&#x652F;&#x6301;&#x4E8C;&#x7EA7;&#x7D22;&#x5F15;&#xFF0C;&#x800C;hbase&#x672C;&#x8EAB;&#x4E0D;&#x652F;&#x6301;&#x4E8C;&#x7EA7;&#x7D22;&#x5F15;4.Mongodb&#x652F;&#x6301;&#x96C6;&#x5408;&#x67E5;&#x627E;&#xFF0C;&#x6B63;&#x5219;&#x67E5;&#x627E;&#xFF0C;&#x8303;&#x56F4;&#x67E5;&#x627E;&#xFF0C;&#x652F;&#x6301;skip&#x548C;limit&#x7B49;&#x7B49;&#xFF0C;&#x662F;&#x6700;&#x50CF;mysql&#x7684;nosql&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;hbase&#x53EA;&#x652F;&#x6301;&#x4E09;&#x79CD;&#x67E5;&#x627E;&#xFF1A;&#x901A;&#x8FC7;&#x5355;&#x4E2A;row key&#x8BBF;&#x95EE;&#xFF0C;&#x901A;&#x8FC7;row key&#x7684;range&#xFF0C;&#x5168;&#x8868;&#x626B;&#x63CF;5.mongodb&#x7684;update&#x662F;update-in-place&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x539F;&#x5730;&#x66F4;&#x65B0;&#xFF0C;&#x9664;&#x975E;&#x539F;&#x5730;&#x5BB9;&#x7EB3;&#x4E0D;&#x4E0B;&#x66F4;&#x65B0;&#x540E;&#x7684;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x3002;&#x800C;hbase&#x7684;&#x4FEE;&#x6539;&#x548C;&#x6DFB;&#x52A0;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#xFF1A;put&#xFF0C;&#x5982;&#x679C;put&#x4F20;&#x5165;&#x7684;row key&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x5C31;&#x66F4;&#x65B0;&#x539F;&#x8BB0;&#x5F55;,&#x5B9E;&#x9645;&#x4E0A;hbase&#x5185;&#x90E8;&#x4E5F;&#x4E0D;&#x662F;&#x66F4;&#x65B0;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x5C06;&#x8FD9;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x5DF2;&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x800C;&#x5DF2;&#xFF0C;hbase&#x9ED8;&#x8BA4;&#x7684;&#x4FDD;&#x5B58;&#x7248;&#x672C;&#x7684;&#x5386;&#x53F2;&#x6570;&#x91CF;&#x662F;3&#x3002;6.mongodb&#x7684;delete&#x4F1A;&#x5C06;&#x8BE5;&#x884C;&#x7684;&#x6570;&#x636E;&#x6807;&#x793A;&#x4E3A;&#x5DF2;&#x5220;&#x9664;&#xFF0C;&#x56E0;&#x4E3A;mongodb&#x5728;&#x5220;&#x9664;&#x8BB0;&#x5F55;&#x65F6;&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x628A;&#x8BB0;&#x5F55;&#x4ECE;&#x5185;&#x5B58;&#x6216;&#x6587;&#x4EF6;&#x4E2D;remove&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x8BE5;&#x5220;&#x9664;&#x8BB0;&#x5F55;&#x6570;&#x636E;&#x7F6E;&#x7A7A;&#xFF08;&#x5199;0&#x6216;&#x7279;&#x6B8A;&#x6570;&#x5B57;&#x52A0;&#x4EE5;&#x6807;&#x8BC6;&#xFF09;&#x540C;&#x65F6;&#x5C06;&#x8BE5;&#x8BB0;&#x5F55;&#x6240;&#x5728;&#x5730;&#x5740;&#x653E;&#x5230;&#x4E00;&#x4E2A;list&#x5217;&#x8868;&#x201C;&#x91CA;&#x653E;&#x5217;&#x8868;&#x201D;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5C31;&#x662F;&#x5C31;&#x662F;&#x5982;&#x679C;&#x6709;&#x7528;&#x6237;&#x8981;&#x6267;&#x884C;&#x63D2;&#x5165;&#x8BB0;&#x5F55;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;mongodb&#x4F1A;&#x9996;&#x5148;&#x4ECE;&#x8BE5;&#x201C;&#x91CA;&#x653E;&#x5217;&#x8868;&#x201D;&#x4E2D;&#x83B7;&#x53D6;size&#x5408;&#x9002;&#x7684;&#x201C;&#x5DF2;&#x5220;&#x9664;&#x8BB0;&#x5F55;&#x201D;&#x5730;&#x5740;&#x8FD4;&#x56DE;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4F1A;&#x63D0;&#x5347;&#x6027;&#x80FD;&#xFF08;&#x907F;&#x514D;&#x4E86;malloc&#x5185;&#x5B58;&#x64CD;&#x4F5C;&#xFF09;&#xFF0C;&#x540C;&#x65F6;mongodb&#x4E5F;&#x4F7F;&#x7528;&#x4E86;bucket size&#x6570;&#x7EC4;&#x6765;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x5927;&#x5C0F;size&#x4E0D;&#x540C;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x4E8E;&#x5C06;&#x8981;&#x5220;&#x9664;&#x7684;&#x8BB0;&#x5F55;&#x6839;&#x636E;&#x5176;size&#x5927;&#x5C0F;&#x653E;&#x5230;&#x5408;&#x9002;&#x7684;&#x201C;&#x91CA;&#x653E;&#x5217;&#x8868;&#x201D;&#x4E2D;&#x3002;Hbase&#x7684;delete&#x662F;&#x5148;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A; <em>tombstone</em> markers&#xFF0C;&#x7136;&#x540E;&#x8BFB;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x548C; <em>tombstone</em> markers&#x505A;merge&#xFF0C;&#x5728; &#x53D1;&#x751F;major compaction&#x65F6;delete&#x7684;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x624D;&#x4F1A;&#x771F;&#x771F;&#x5220;&#x9664;&#x3002;7.mongodb&#x548C;hbase&#x90FD;&#x652F;&#x6301;mapreduce&#xFF0C;&#x4E0D;&#x8FC7;mongodb&#x7684;mapreduce&#x652F;&#x6301;&#x4E0D;&#x591F;&#x5F3A;&#x5927;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;mongodb&#x5206;&#x7247;&#xFF0C;mapreduce&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x662F;&#x5E76;&#x884C;&#x6267;&#x884C;&#x7684;8.mongodb&#x652F;&#x6301;shard&#x5206;&#x7247;&#xFF0C;hbase&#x6839;&#x636E;row key&#x81EA;&#x52A8;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x8FD9;&#x91CC;shard key&#x548C;row key&#x7684;&#x9009;&#x53D6;&#x5C3D;&#x91CF;&#x7528;&#x975E;&#x9012;&#x589E;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x5C3D;&#x91CF;&#x7528;&#x5206;&#x5E03;&#x5747;&#x8861;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x56E0;&#x4E3A;&#x5206;&#x7247;&#x90FD;&#x662F;&#x6839;&#x636E;&#x8303;&#x56F4;&#x6765;&#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x7684;&#x5B58;&#x53D6;server&#x7684;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x9012;&#x589E;&#x5B57;&#x6BB5;&#x5F88;&#x5BB9;&#x6613;&#x70ED;&#x70B9;server&#x7684;&#x4EA7;&#x751F;&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x6839;&#x636E;key&#x7684;&#x8303;&#x56F4;&#x6765;&#x81EA;&#x52A8;&#x5206;&#x7247;&#x7684;&#xFF0C;&#x5982;&#x679C;key&#x5206;&#x5E03;&#x4E0D;&#x5747;&#x8861;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x6709;&#x4E9B;key&#x6839;&#x672C;&#x5C31;&#x6CA1;&#x6CD5;&#x5207;&#x5206;&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x8D1F;&#x8F7D;&#x4E0D;&#x5747;&#x8861;&#x3002;9.mongodb&#x7684;&#x8BFB;&#x6548;&#x7387;&#x6BD4;&#x5199;&#x9AD8;&#xFF0C;hbase&#x9ED8;&#x8BA4;&#x9002;&#x5408;&#x5199;&#x591A;&#x8BFB;&#x5C11;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;hfile.block.cache.size&#x914D;&#x7F6E;&#xFF0C;&#x8BE5;&#x914D;&#x7F6E;storefile&#x7684;&#x8BFB;&#x7F13;&#x5B58;&#x5360;&#x7528;Heap&#x7684;&#x5927;&#x5C0F;&#x767E;&#x5206;&#x6BD4;&#xFF0C;0.2&#x8868;&#x793A;20%&#x3002;&#x8BE5;&#x503C;&#x76F4;&#x63A5;&#x5F71;&#x54CD;&#x6570;&#x636E;&#x8BFB;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5982;&#x679C;&#x5199;&#x6BD4;&#x8BFB;&#x5C11;&#x5F88;&#x591A;&#xFF0C;&#x5F00;&#x5230;0.4-0.5&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x3002;&#x5982;&#x679C;&#x8BFB;&#x5199;&#x8F83;&#x5747;&#x8861;&#xFF0C;0.3&#x5DE6;&#x53F3;&#x3002;&#x5982;&#x679C;&#x5199;&#x6BD4;&#x8BFB;&#x591A;&#xFF0C;&#x679C;&#x65AD;&#x9ED8;&#x8BA4;0.2&#x5427;&#x3002;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x540C;&#x65F6;&#x8981;&#x53C2;&#x8003;hbase.regionserver.global.memstore.upperLimit&#xFF0C;&#x8BE5;&#x503C;&#x662F;memstore&#x5360;heap&#x7684;&#x6700;&#x5927;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4E00;&#x4E2A;&#x5F71;&#x54CD;&#x8BFB;&#xFF0C;&#x4E00;&#x4E2A;&#x5F71;&#x54CD;&#x5199;&#x3002;&#x5982;&#x679C;&#x4E24;&#x503C;&#x52A0;&#x8D77;&#x6765;&#x8D85;&#x8FC7;80-90%&#xFF0C;&#x4F1A;&#x6709;OOM&#x7684;&#x98CE;&#x9669;&#xFF0C;&#x8C28;&#x614E;&#x8BBE;&#x7F6E;&#x3002; </p>
<p>10.hbase&#x91C7;&#x7528;&#x7684;LSM&#x601D;&#x60F3;(Log-Structured Merge-Tree)&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x66F4;&#x6539;hold&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x8FBE;&#x5230;&#x6307;&#x5B9A;&#x7684;threadhold&#x540E;&#x5C06;&#x8BE5;&#x6279;&#x66F4;&#x6539;merge&#x540E;&#x6279;&#x91CF;&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x8FD9;&#x6837;&#x5C06;&#x5355;&#x4E2A;&#x5199;&#x53D8;&#x6210;&#x4E86;&#x6279;&#x91CF;&#x5199;&#xFF0C;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x4E86;&#x5199;&#x5165;&#x901F;&#x5EA6;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x8BFB;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x8D39;&#x52B2;&#x4E86;&#xFF0C;&#x9700;&#x8981;merge disk&#x4E0A;&#x7684;&#x6570;&#x636E;&#x548C;memory&#x4E2D;&#x7684;&#x4FEE;&#x6539;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x964D;&#x4F4E;&#x4E86;&#x8BFB;&#x7684;&#x6027;&#x80FD;&#x3002;mongodb&#x91C7;&#x7528;&#x7684;&#x662F;mapfile+Journal&#x601D;&#x60F3;&#xFF0C;&#x5982;&#x679C;&#x8BB0;&#x5F55;&#x4E0D;&#x5728;&#x5185;&#x5B58;&#xFF0C;&#x5148;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x66F4;&#x6539;&#x540E;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#xFF0C;&#x7136;&#x540E;&#x9694;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6279;&#x91CF;&#x7684;&#x5199;&#x5165;data&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x8981;&#x6C42;&#x8F83;&#x9AD8;&#xFF0C;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x5BB9;&#x7EB3;&#x4E0B;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x548C;&#x7D22;&#x5F15;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/HBase/">HBase</a><a href="/tags/MongoDB/">MongoDB</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/df3df9b/" title="（一）spring MVC基本概念和流程 -" itemprop="url">（一）spring MVC基本概念和流程 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:28:21.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="MVC_&#x7684;&#x6982;&#x5FF5;_Model_&#xFF08;&#x6A21;&#x578B;&#xFF09;&#xFF1A;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x884C;&#x4E3A;&#x3002;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x4E00;&#x822C;&#x90FD;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF1A;Value_Object&#xFF08;&#x6570;&#x636E;&#xFF09;_&#x548C;_&#x670D;&#x52A1;&#x5C42;&#xFF08;&#x884C;&#x4E3A;&#xFF09;&#x3002;">MVC  &#x7684;&#x6982;&#x5FF5;  Model  &#xFF08;&#x6A21;&#x578B;&#xFF09;&#xFF1A;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x884C;&#x4E3A;&#x3002;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x4E00;&#x822C;&#x90FD;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF1A;Value Object&#xFF08;&#x6570;&#x636E;&#xFF09; &#x548C; &#x670D;&#x52A1;&#x5C42;&#xFF08;&#x884C;&#x4E3A;&#xFF09;&#x3002;</h3><p> View  &#xFF08;&#x89C6;&#x56FE;&#xFF09;&#xFF1A;&#x8D1F;&#x8D23;&#x8FDB;&#x884C;&#x6A21;&#x578B;&#x7684;&#x5C55;&#x793A;&#xFF0C;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;&#x7684;&#x754C;&#x9762;&#x3002;</p>
<p> Controller  &#xFF08;&#x63A7;&#x5236;&#x5668;&#xFF09;&#xFF1A;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#xFF0C;&#x59D4;&#x6258;&#x7ED9;&#x6A21;&#x578B;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#x540E;&#x628A;&#x8FD4;&#x56DE;&#x7684;&#x6A21;&#x578B;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7ED9;&#x89C6;&#x56FE;&#xFF0C;&#x7531;&#x89C6;&#x56FE;&#x8D1F;&#x8D23;&#x5C55;&#x793A;&#xFF0C;&#x8D77;&#x4E86;&#x8C03;&#x5EA6;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<h3 id="spring_MVC">spring MVC</h3><p> Spring MVC  &#x56F4;&#x7ED5;DispatcherServlet&#x8BBE;&#x8BA1;&#x3002;</p>
<p>&#x5904;&#x7406;&#x6D41;&#x7A0B;&#xFF1A;</p>
<ol>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;</li>
</ol>
<p>&#x5982;&#x679C;&#x5339;&#x914D;DispatcherServlet&#x7684;&#x8BF7;&#x6C42;&#x6620;&#x5C04;&#x8DEF;&#x5F84;(&#x5728;web.xml&#x4E2D;&#x6307;&#x5B9A;)&#xFF0C;Web&#x5BB9;&#x5668;&#x5C06;&#x8BE5;&#x8BF7;&#x6C42;&#x8F6C;&#x4EA4;&#x7ED9;DispatcherServlet&#x5904;&#x7406;&#x3002;</p>
<ol>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x63A5;&#x6536;&#x5230;&#x6B64;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x4FE1;&#x606F;  &#xFF08;URL&#x3001;HTTP&#x65B9;&#x6CD5;&#x3001;&#x8BF7;&#x6C42;&#x62A5;&#x5934;&#x6587;&#x3001;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x3001;Cookie&#x7B49;&#xFF09;  &#x53CA;HandleMapping&#x7684;&#x914D;&#x7F6E;&#x5339;&#x914D;Handler</p>
<p>&#x5339;&#x914D;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;HandlerExecutionChain&#x5BF9;&#x8C61;  &#xFF08;&#x5305;&#x542B;&#x4E00;&#x4E2A;Handler&#x5904;&#x7406;&#x5668;&#x5BF9;&#x8C61;&#x3001;&#x591A;&#x4E2A;HandlerInterceptor&#x62E6;&#x622A;&#x5668;&#xFF09;  &#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x5F97;&#x5230;Handler&#x540E;&#xFF0C;&#x628A;Handler&#x5C01;&#x88C5;&#x4E3A;&#x9002;&#x914D;&#x5668;</p>
<p>&#x4EE5;&#x9002;&#x914D;&#x5668;&#x63A5;&#x53E3;&#x771F;&#x6B63;&#x8C03;&#x7528;&#x4E86;&#x5904;&#x7406;&#x5668;&#x7684;&#x529F;&#x80FD;&#x5904;&#x7406;&#x65B9;&#x6CD5;  &#xFF08;&#x5148;&#x6267;&#x884C;&#x62E6;&#x622A;&#x5668;&#x7684;preHandler&#x65B9;&#x6CD5;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;ModelAndView  &#xFF08;&#x5982;&#x5176;&#x540D;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x89C6;&#x56FE;&#x903B;&#x8F91;&#x540D;&#x548C;&#x6A21;&#x578B;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF09;  &#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x501F;&#x7531;ViewResolver&#x5B8C;&#x6210;&#x903B;&#x8F91;&#x89C6;&#x56FE;&#x540D;&#x5230;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x7684;&#x89E3;&#x6790;&#x5DE5;&#x4F5C;&#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x5F97;&#x5230;&#x89C6;&#x56FE;&#x5BF9;&#x8C61;View&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x5BF9;ModelAndView&#x4E2D;&#x7684;&#x6A21;&#x578B;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x5BA2;&#x6237;&#x7AEF;&#x5F97;&#x5230;&#x54CD;&#x5E94;  &#xFF08;&#x53EF;&#x80FD;&#x662F;HTML&#x9875;&#x9762;&#x3001;XML&#x3001;JSON&#x4E32;&#x3001;PDF&#x2026;&#x2026;&#xFF09;</p>
</li>
</ol>
<p>&#x6574;&#x7406;&#x81EA;&#x300A;spring 3.x&#x4F01;&#x4E1A;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x5B9E;&#x6218;&#x300B;&#x4EE5;&#x53CA; &#x4E00;&#x4E9B;&#x535A;&#x5BA2;&#x2026;&#x2026;</p>
<p> P.S.  &#x6211;&#x7528;&#x7684;&#x662F; 4</p>
<p>&#x505A;&#x4E86;&#x4E00;&#x4E2A;spring MVC &#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6D41;&#x7A0B;&#x7684;&#x89C6;&#x9891;&#xFF0C; <a href="http://v.youku.com/v_show/id_XMTI1NjE0MjI0MA==.html" target="_blank" rel="external">spring MVC&#x6D41;&#x7A0B;</a></p>
<p> &#x6709;&#x70B9;&#x4E11;&#x4E0D;&#x8FC7;&#x5F88;&#x6E05;&#x695A;&#x5440;  &#xA0;~</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Spring-MVC/">Spring MVC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/df393ec/" title="Spring REST 异常处理 -" itemprop="url">Spring REST 异常处理 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:28:21.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x4E2D;&#x5199;&#x5230;&#x4E86;Spring MVC&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;SpringMVC&#x6355;&#x83B7;&#x5230;&#x5F02;&#x5E38;&#x4E4B;&#x540E;&#x4F1A;&#x8F6C;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x9519;&#x8BEF;&#x9875;&#x9762;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;REST API &#xFF0C;&#x4E00;&#x822C;&#x53EA;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x548C;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x6BD4;&#x5982;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#xFF0C;&#x53EA;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;500&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;REST API&#x8BBF;&#x95EE;&#xFF0C;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x9875;&#x9762;&#x7684;html&#x4EE3;&#x7801;&#x3002;&#x3002;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x505A;&#x5462;, &#x6211;&#x73B0;&#x5728;&#x6240;&#x77E5;&#x9053;&#x7684;&#x5C31;&#x4E24;&#x79CD;&#x505A;&#x6CD5;</p>
<h3 id="&#x901A;&#x8FC7;ResponseEntity">&#x901A;&#x8FC7;ResponseEntity</h3><p>&#x901A;&#x8FC7;ResponseEntity&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;HttpStatus.&#x4E3E;&#x4F8B;&#xFF1A; </p>
<pre><code>@RequestMapping(value<span class="subst">=&amp;</span>quot;/customer<span class="subst">/</span>{id}<span class="subst">&amp;</span>quot; )
<span class="keyword">public</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>; getCustomerById(@PathVariable <span class="built_in">String</span> id)
{
    Customer customer;
    try 
    {
        customer <span class="subst">=</span> customerService<span class="built_in">.</span>getCustomerDetail(id);
    } 
    catch (CustomerNotFoundException e) 
    {
        <span class="keyword">return</span> <span class="literal">new</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>;(HttpStatus<span class="built_in">.</span>NOT_FOUND);
    }

    <span class="keyword">return</span> <span class="literal">new</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>;(customer,HttpStatus<span class="built_in">.</span>OK);
    }
</code></pre><p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5F97;&#x5728;&#x6BCF;&#x4E2A;RequestMapping &#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x5165;try catch&#x8BED;&#x53E5;&#x5757;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x4E2A;&#x66F4;&#x7B80;&#x5355;&#x70B9;&#x7684;&#x65B9;&#x6CD5;</p>
<h2 id="&#x901A;&#x8FC7;ExceptionHandler&#x6CE8;&#x89E3;">&#x901A;&#x8FC7;ExceptionHandler&#x6CE8;&#x89E3;</h2><p>&#x8FD9;&#x91CC;&#x8DDF;&#x524D;&#x9762;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x89E3;&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;ResponseEntity&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8DF3;&#x8F6C;&#x7684;&#x9875;&#x9762;&#x3002;</p>
<pre><code><span class="annotation">@RequestMapping</span>(value=&amp;quot;/customer/{id}&amp;quot; )
<span class="annotation">@ResponseBody</span>
<span class="keyword">public</span> <span class="function">Customer <span class="title">getCustomerById</span><span class="params">(@PathVariable String id)</span> <span class="keyword">throws</span> CustomerNotFoundException
</span>{
    <span class="function"><span class="keyword">return</span> customerService.<span class="title">getCustomerDetail</span><span class="params">(id)</span></span>;
}

<span class="annotation">@ExceptionHandler</span>(CustomerNotFoundException.class)
<span class="keyword">public</span> ResponseEntity&amp;lt;ClientErrorInformation&amp;gt; rulesForCustomerNotFound(HttpServletRequest req, Exception e) 
{
    ClientErrorInformation <span class="keyword">error</span> = <span class="keyword">new</span> ClientErrorInformation(e.toString(), req.getRequestURI());
    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&amp;lt;ClientErrorInformation&amp;gt;(<span class="keyword">error</span>, HttpStatus.NOT_FOUND);

}
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;&#x8FD9;&#x91CC;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x65E2;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x4E2A;Controller&#x4E2D;&#x5B9A;&#x4E49;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6807;&#x6709;ControllerAdvice&#x6CE8;&#x89E3;&#x7684;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4ECE;&#x800C;&#x4F7F;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x5BF9;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x6709;&#x6548;&#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a><a href="/tags/REST/">REST</a><a href="/tags/Spring-MVC/">Spring MVC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/06/df36cdc/" title="SpringMVC 异常处理 -" itemprop="url">SpringMVC 异常处理 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-06T01:28:21.000Z" itemprop="datePublished"> 发表于 2015-07-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Using_HTTP_Status_Codes">Using HTTP Status Codes</h2><p>&#x5728;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5F02;&#x5E38;&#x4E0A;&#x4F7F;&#x7528;ResponseStatus&#x6CE8;&#x89E3;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x7684;Controller&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x88AB;&#x5904;&#x7406;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4ED6;&#x5C06;&#x8FD4;&#x56DE;HTTP STATUS &#x4E3A;&#x6307;&#x5B9A;&#x503C;&#x7684; HTTP RESPONSE&#x3002;&#x8FD9;&#x5728;&#x6211;&#x4EEC;&#x5199;REST API&#x7684;&#x65F6;&#x5019;&#x7ECF;&#x5E38;&#x7528;&#x5230;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre><code><span class="annotation">@ResponseStatus</span>(value=<span class="type">HttpStatus</span>.<span class="type">NOT_FOUND</span>, reason=&amp;quot;<span class="type">No</span> such <span class="type">Order</span>&amp;quot;)  <span class="comment">// 404</span>
public <span class="class"><span class="keyword">class</span> <span class="title">OrderNotFoundException</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">RuntimeException</span> {</span>
    <span class="comment">// ...</span>
}
</code></pre><p>&#x6211;&#x4EEC;&#x7684;Controller&#x4E3A;&#xFF1A;</p>
<pre><code>@RequestMapping(value=&amp;quot;/orders/<span class="comment">{id}</span>&amp;quot;, <span class="function"><span class="keyword">method</span>=<span class="title">GET</span>)
@<span class="title">ResponseBody</span>
<span class="title">public</span> <span class="title">String</span> <span class="title">getOrder</span><span class="params">(@PathVariable(&amp;quot;id&amp;quot;)</span> <span class="title">long</span> <span class="title">id</span>, <span class="title">Model</span> <span class="title">model</span>) <span class="comment">{
    Order order = orderRepository.findOrderById(id);
    if (order == null) {
        throw new OrderNotFoundException(id);
    }</span>
    <span class="title">return</span> <span class="title">order</span>;</span>
}
</code></pre><h2 id="Controller_Based_Exception_Handling">Controller Based Exception Handling</h2><p>&#x5728;&#x4E00;&#x4E2A;Controller&#x4E2D;&#xFF0C;</p>
<p>&#xFF0C;&#x6CE8;&#x610F;&#x8FD9;&#x79CD;&#x53EA;&#x5728;&#x5355;&#x4E2A;Controller&#x4E2D;&#x6709;&#x6548;&#x3002;&#x8FD9;&#x4E48;&#x505A;&#x53EF;&#x4EE5;&#xFF1A;</p>
<ol>
<li>&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x540E;&#xFF0C;&#x6539;&#x53D8;Response status&#xFF0C;&#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x8FD4;&#x56DE;HTTP STATUS 500.&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D8;&#x4E3A;&#x5176;&#x4ED6;&#x3002;</li>
<li>&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x540E;&#x8F6C;&#x5230;&#x9519;&#x8BEF;&#x9875;&#x9762;</li>
<li>&#x53EF;&#x4EE5;&#x4E3A;&#x4E0D;&#x540C;&#x5F02;&#x5E38;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x5904;&#x7406;&#xFF08;&#x5982;&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#x9875;&#x9762;&#xFF0C;&#x4E0D;&#x540C;&#x7684;Response status&#xFF09;</li>
</ol>
<p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</p>
<pre><code>@<span class="class">Controller</span>
public class <span class="class">ExceptionHandlingController</span> {

  // &amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x4EEC</span>;&amp;<span class="symbol">#x6807</span>;&amp;<span class="symbol">#x6CE8</span>;&amp;<span class="symbol">#x4E86</span>;@<span class="class">RequestMapping</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x65B9</span>;&amp;<span class="symbol">#x6CD5</span>;
  ...

  //&amp;<span class="symbol">#x5904</span>;&amp;<span class="symbol">#x7406</span>;&amp;<span class="symbol">#x5F02</span>;&amp;<span class="symbol">#x5E38</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x65B9</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x3002</span>;

  // &amp;<span class="symbol">#x628A</span>;&amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x4EEC</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x4E49</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x5F02</span>;&amp;<span class="symbol">#x5E38</span>;&amp;<span class="symbol">#x8F6C</span>;&amp;<span class="symbol">#x6362</span>;&amp;<span class="symbol">#x4E3A</span>;&amp;<span class="symbol">#x7279</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x7684</span>;<span class="class">Http</span> status code
  @<span class="class">ResponseStatus</span>(value=<span class="class">HttpStatus</span>.<span class="class">CONFLICT</span>, reason=&amp;quot;<span class="class">Data</span> integrity violation&amp;quot;)  // <span class="number">409</span>
  @<span class="class">ExceptionHandler</span>(<span class="class">DataIntegrityViolationException</span>.class)
  public void conflict() {
    // <span class="class">Nothing</span> to do
  }


  // &amp;<span class="symbol">#x6355</span>;&amp;<span class="symbol">#x83B7</span>;&amp;<span class="symbol">#x5230</span>;<span class="class">SQLException</span>&amp;<span class="symbol">#xFF0C</span>;<span class="class">DataAccessException</span>&amp;<span class="symbol">#x5F02</span>;&amp;<span class="symbol">#x5E38</span>;&amp;<span class="symbol">#x4E4B</span>;&amp;<span class="symbol">#x540E</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8F6C</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x7279</span>;&amp;<span class="symbol">#x5B9A</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x9875</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x3002</span>;
  @<span class="class">ExceptionHandler</span>({<span class="class">SQLException</span>.class,<span class="class">DataAccessException</span>.class})
  public <span class="class">String</span> databaseError() {
    //&amp;<span class="symbol">#x4EC5</span>;&amp;<span class="symbol">#x4EC5</span>;&amp;<span class="symbol">#x8F6C</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x9519</span>;&amp;<span class="symbol">#x8BEF</span>;&amp;<span class="symbol">#x9875</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x4EEC</span>;&amp;<span class="symbol">#x5728</span>;&amp;<span class="symbol">#x9875</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x4E0A</span>;&amp;<span class="symbol">#x5F97</span>;&amp;<span class="symbol">#x4E0D</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x4E2A</span>;<span class="class">Exception</span>&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x503C</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x8981</span>;&amp;<span class="symbol">#x5F97</span>;&amp;<span class="symbol">#x5230</span>;&amp;<span class="symbol">#x503C</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x6211</span>;&amp;<span class="symbol">#x4EEC</span>;&amp;<span class="symbol">#x53EF</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x901A</span>;&amp;<span class="symbol">#x8FC7</span>;&amp;<span class="symbol">#x4E0B</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x65B9</span>;&amp;<span class="symbol">#x6CD5</span>;&amp;<span class="symbol">#x5F97</span>;&amp;<span class="symbol">#x5230</span>;
    return &amp;quot;databaseError&amp;quot;;
  }

  // &amp;<span class="symbol">#x901A</span>;&amp;<span class="symbol">#x8FC7</span>;<span class="class">ModelAndView</span>&amp;<span class="symbol">#x8FD4</span>;&amp;<span class="symbol">#x56DE</span>;&amp;<span class="symbol">#x9875</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#xFF0C</span>;&amp;<span class="symbol">#x4EE5</span>;&amp;<span class="symbol">#x53CA</span>;&amp;<span class="symbol">#x5F80</span>;&amp;<span class="symbol">#x9875</span>;&amp;<span class="symbol">#x9762</span>;&amp;<span class="symbol">#x4F20</span>;&amp;<span class="symbol">#x76F8</span>;&amp;<span class="symbol">#x5E94</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x503C</span>;
  @<span class="class">ExceptionHandler</span>(<span class="class">Exception</span>.class)
  public <span class="class">ModelAndView</span> handleError(<span class="class">HttpServletRequest</span> req, <span class="class">Exception</span> exception) {
    logger.error(&amp;quot;<span class="class">Request</span>: &amp;quot; + req.getRequestURL() + &amp;quot; raised &amp;quot; + exception);

    <span class="class">ModelAndView</span> mav = new <span class="class">ModelAndView</span>();
    mav.addObject(&amp;quot;exception&amp;quot;, exception);
    mav.addObject(&amp;quot;url&amp;quot;, req.getRequestURL());
    mav.setViewName(&amp;quot;error&amp;quot;);
    return mav;
  }
}
</code></pre><h2 id="Global_Exception_Handling">Global Exception Handling</h2><p>&#x5728;&#x7C7B;&#x4E0A;&#x4F7F;&#x7528; @ControllerAdvice&#x6CE8;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x5904;&#x7406;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x4E2D;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x3002;</p>
<p>&#x4E3E;&#x4F8B;:</p>
<pre><code><span class="tag">class</span> <span class="tag">GlobalControllerExceptionHandler</span> {
    <span class="variable">@ResponseStatus</span>(HttpStatus.CONFLICT)  <span class="comment">// 409</span>
    <span class="variable">@ExceptionHandler</span>(DataIntegrityViolationException.class)
    public void <span class="function">handleConflict</span>() {
        <span class="comment">// Nothing to do</span>
    }
   <span class="comment">//&amp;#x8F6C;&amp;#x5230;&amp;#x7279;&amp;#x5B9A;&amp;#x9875;&amp;#x9762; &amp;#x3002;&amp;#x3002;&amp;#x3002;&amp;#x3002;&amp;#x3002;</span>
}
</code></pre><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8981;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x5F02;&#x5E38;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x505A;&#xFF1A;</p>
<pre><code><span class="annotation">@ControllerAdvice</span>
<span class="class"><span class="keyword">class</span> <span class="title">GlobalDefaultExceptionHandler</span> {</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_ERROR_VIEW = &amp;quot;error&amp;quot;;
    <span class="annotation">@ExceptionHandler</span>(value = Exception.<span class="keyword">class</span>)
    <span class="keyword">public</span> ModelAndView defaultErrorHandler(HttpServletRequest req, Exception e) <span class="keyword">throws</span> Exception {
        <span class="comment">// If the exception is annotated with @ResponseStatus rethrow it and let</span>
        <span class="comment">// the framework handle it - like the OrderNotFoundException example</span>
        <span class="comment">// at the start of this post.</span>
        <span class="comment">// AnnotationUtils is a Spring Framework utility class.</span>
        <span class="keyword">if</span> (AnnotationUtils.findAnnotation(e.getClass(), ResponseStatus.<span class="keyword">class</span>) != <span class="literal">null</span>) {
            <span class="keyword">throw</span> e;
        }
        <span class="comment">// Otherwise setup and send the user to a default error-view.</span>
        ModelAndView mav = <span class="keyword">new</span> ModelAndView();
        mav.addObject(&amp;quot;exception&amp;quot;, e);
        mav.addObject(&amp;quot;url&amp;quot;, req.getRequestURL());
        mav.setViewName(DEFAULT_ERROR_VIEW);
        <span class="keyword">return</span> mav;
    }
}
</code></pre><h2 id="Going_Deeper">Going Deeper</h2><p>&#x5B9E;&#x73B0;HandlerExceptionResolver&#x63A5;&#x53E3;&#xFF0C;SpringMvc&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4ED6;&#x6765;&#x5904;&#x7406;Controller&#x4E2D;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HandlerExceptionResolver</span> </span>{
    <span class="function">ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, 
            HttpServletResponse response, Object <span class="keyword">handler</span>, Exception ex)</span></span>;
}
</code></pre><p>SpringMvc&#x4F7F;&#x7528;&#x4E09;&#x79CD;&#x9ED8;&#x8BA4;&#x7684;HandlerExceptionResolver&#x6765;&#x5904;&#x7406;&#x6211;&#x4EEC;&#x7684;&#x5F02;&#x5E38;</p>
<ol>
<li>ExceptionHandlerExceptionResolver&#xFF1A;&#x3002;</li>
<li>ResponseStatusExceptionResolver&#xFF1A;</li>
<li>DefaultHandlerExceptionResolver&#xFF1A;&#x628A;Spring&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x4E9B;&#x6807;&#x51C6;&#x5F02;&#x5E38;&#xFF0C;&#x8F6C;&#x6362;&#x4E3A;HTTP STATUS CODE.</li>
</ol>
<p>Spring&#x5185;&#x7F6E;&#x7684;SimpleMappingExceptionResolver&#x5B9E;&#x73B0;&#x4E86;HandlerExceptionResolver&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#xFF0C;XML&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code><span class="subst">&amp;</span><span class="literal">lt</span>;bean id<span class="subst">=&amp;</span>quot;simpleMappingExceptionResolver<span class="subst">&amp;</span>quot;
      class<span class="subst">=&amp;</span>quot;org<span class="built_in">.</span>springframework<span class="built_in">.</span>web<span class="built_in">.</span>servlet<span class="built_in">.</span>handler<span class="built_in">.</span>SimpleMappingExceptionResolver<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;property name<span class="subst">=&amp;</span>quot;exceptionMappings<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;
        <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="built_in">map</span><span class="subst">&amp;</span><span class="literal">gt</span>;
            <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--</span> key<span class="subst">&amp;</span><span class="variable">#x4E3A</span>;<span class="subst">&amp;</span><span class="variable">#x5F02</span>;<span class="subst">&amp;</span><span class="variable">#x5E38</span>;<span class="subst">&amp;</span><span class="variable">#x7C7B</span>;<span class="subst">&amp;</span><span class="variable">#x578B</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;value<span class="subst">&amp;</span><span class="variable">#x4E3A</span>;<span class="subst">&amp;</span><span class="variable">#x8981</span>;<span class="subst">&amp;</span><span class="variable">#x8F6C</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x9875</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>; <span class="subst">--&amp;</span><span class="literal">gt</span>;
            <span class="subst">&amp;</span><span class="literal">lt</span>;entry key<span class="subst">=&amp;</span>quot;DatabaseException<span class="subst">&amp;</span>quot; value<span class="subst">=&amp;</span>quot;databaseError<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
            <span class="subst">&amp;</span><span class="literal">lt</span>;entry key<span class="subst">=&amp;</span>quot;InvalidCreditCardException<span class="subst">&amp;</span>quot; value<span class="subst">=&amp;</span>quot;creditCardError<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
        <span class="subst">&amp;</span><span class="literal">lt</span>;/<span class="built_in">map</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;/property<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--</span> <span class="subst">&amp;</span><span class="variable">#x9ED8</span>;<span class="subst">&amp;</span><span class="variable">#x8BA4</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x5F02</span>;<span class="subst">&amp;</span><span class="variable">#x5E38</span>;<span class="subst">&amp;</span><span class="variable">#x9875</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>; <span class="subst">--&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;property name<span class="subst">=&amp;</span>quot;defaultErrorView<span class="subst">&amp;</span>quot; value<span class="subst">=&amp;</span>quot;error<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--</span> <span class="subst">&amp;</span><span class="variable">#x5728</span>;<span class="subst">&amp;</span><span class="variable">#x9875</span>;<span class="subst">&amp;</span><span class="variable">#x9762</span>;<span class="subst">&amp;</span><span class="variable">#x6211</span>;<span class="subst">&amp;</span><span class="variable">#x4EEC</span>;<span class="subst">&amp;</span><span class="variable">#x53EF</span>;<span class="subst">&amp;</span><span class="variable">#x4EE5</span>;<span class="subst">&amp;</span><span class="variable">#x901A</span>;<span class="subst">&amp;</span><span class="variable">#x8FC7</span>;ex<span class="subst">&amp;</span><span class="variable">#x62FF</span>;<span class="subst">&amp;</span><span class="variable">#x5230</span>;<span class="subst">&amp;</span><span class="variable">#x5F02</span>;<span class="subst">&amp;</span><span class="variable">#x5E38</span>;<span class="subst">&amp;</span><span class="variable">#x4FE1</span>;<span class="subst">&amp;</span><span class="variable">#x606F</span>; <span class="subst">--&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;property name<span class="subst">=&amp;</span>quot;exceptionAttribute<span class="subst">&amp;</span>quot; value<span class="subst">=&amp;</span>quot;ex<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--</span> Name of logger <span class="keyword">to</span> use <span class="keyword">to</span> <span class="keyword">log</span> exceptions<span class="built_in">. </span>Unset <span class="keyword">by</span> default, so logging disabled <span class="subst">--&amp;</span><span class="literal">gt</span>;
     <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!--</span> <span class="keyword">log</span><span class="subst">&amp;</span><span class="variable">#x5F02</span>;<span class="subst">&amp;</span><span class="variable">#x5E38</span>;<span class="subst">&amp;</span><span class="variable">#x4FE1</span>;<span class="subst">&amp;</span><span class="variable">#x606F</span>;<span class="subst">&amp;</span><span class="variable">#xFF0C</span>;<span class="subst">&amp;</span><span class="variable">#x9ED8</span>;<span class="subst">&amp;</span><span class="variable">#x8BA4</span>;<span class="subst">&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x8BBE</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;<span class="subst">-&amp;</span><span class="variable">#x4E0D</span>;<span class="subst">&amp;</span><span class="variable">#x8BB0</span>;<span class="subst">&amp;</span><span class="variable">#x5F55</span>;<span class="subst">&amp;</span><span class="variable">#x5F02</span>;<span class="subst">&amp;</span><span class="variable">#x5E38</span>;<span class="subst">&amp;</span><span class="variable">#x4FE1</span>;<span class="subst">&amp;</span><span class="variable">#x606F</span>; <span class="subst">--&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;property name<span class="subst">=&amp;</span>quot;warnLogCategory<span class="subst">&amp;</span>quot; value<span class="subst">=&amp;</span>quot;example<span class="built_in">.</span>MvcLogger<span class="subst">&amp;</span>quot;<span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;/bean<span class="subst">&amp;</span><span class="literal">gt</span>;
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Spring-MVC/">Spring MVC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/6/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/61/">61</a><a class="extend next" rel="next" href="/page/8/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>606</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>42</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>10</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
