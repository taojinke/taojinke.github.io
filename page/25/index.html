
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/25/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9abf0cd/" title="gulp插件开发手札 -" itemprop="url">gulp插件开发手札 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>gulp</p>
<p>&#x4E00;&#x4E2A;&#x6BD4;grunt&#x4F7F;&#x7528;&#x66F4;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;Gulp&#x901A;&#x8FC7;&#x6D41;&#x548C;&#x4EE3;&#x7801;&#x4F18;&#x4E8E;&#x914D;&#x7F6E;&#x7B56;&#x7565;&#x6765;&#x5C3D;&#x91CF;&#x7B80;&#x5316;&#x4EFB;&#x52A1;&#x7F16;&#x5199;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x4E0D;&#x5728;&#x8D58;&#x8FF0;gulp&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x6CD5;&#x3002;&#x8BF7;&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank" rel="external">gulp getting-started</a></li>
<li><a href="http://segmentfault.com/a/1190000000711469" target="_blank" rel="external">gulp&#x9AD8;&#x7EA7;&#x6280;&#x5DE7;</a></li>
<li><a href="http://segmentfault.com/a/1190000002491282" target="_blank" rel="external">gulp vs grunt</a></li>
</ul>
<p>&#x9700;&#x6C42;</p>
<p>&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;gulp&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x63D2;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x538B;&#x7F29;&#xFF0C;md5&#x540E;&#x7F00;&#x7B49;&#x7B49;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4EC5;&#x5728;&#x79FB;&#x52A8;&#x7AEF;&#x8FD0;&#x884C;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x6027;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;js&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x538B;&#x7F29;&#x540E;&#x7684;js&#x6587;&#x4EF6;&#x4F53;&#x79EF;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x521B;&#x5EFA;script&#x6807;&#x7B7E;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x7B49;&#x9875;&#x9762;ready&#x4E86;&#x518D;&#x53BB;&#x52A0;&#x8F7D;js&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x4E86;md5&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x6B21;&#x538B;&#x7F29;&#x5B8C;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x90FD;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x800C;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684;&#x811A;&#x672C;&#x9700;&#x8981;&#x77E5;&#x9053;&#x538B;&#x7F29;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x624B;&#x90FD;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x63D2;&#x4EF6;&#x529F;&#x80FD;</p>
<p>&#x6240;&#x4EE5;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x662F;&#xFF0C;&#x5728;js&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x5408;&#x5E76;&#x4EE5;&#x540E;&#xFF0C;&#x5904;&#x7406;&#x9996;&#x9875;html.</p>
<p>&#x9996;&#x5148;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;gulp&#x63D2;&#x4EF6;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x82F1;&#x6587;)</a></li>
<li><a href="http://www.u396.com/gulp-plugin-guildlines.html" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x4E2D;&#x6587;)</a></li>
</ul>
<p>&#x56E0;&#x4E3A;&#x662F;&#x4E2A;&#x5C0F;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x5355;&#x72EC;&#x5C01;&#x88C5;&#x6210;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x662F;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x51FD;&#x6570;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#xFF1A;</p>
<p> JavaScript</p>
<pre><code><span class="function"><span class="keyword">function</span></span> asyncLoad() {

  console.<span class="built_in">log</span>(&amp;quot;Starting &amp;apos;async load&amp;apos;...&amp;quot;);

  <span class="keyword">return</span> through.obj(<span class="function"><span class="keyword">function</span><span class="params">(file,enc,cb)</span></span>{

    <span class="keyword">if</span>(<span class="keyword">file</span>.isNull()) {

      cb(null,<span class="keyword">file</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isBuffer()) {

      var <span class="type">data</span> = Buffer.concat([<span class="keyword">file</span>.contents]).toString();

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos;, &amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos; + statics + &amp;apos;/&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;img src=&amp;quot;./img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;, &amp;apos;&amp;lt;img src=&amp;quot;&amp;apos; +statics + &amp;apos;/img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;script src=&amp;quot;js/ionic.<span class="built_in">all</span>&amp;apos;,&amp;apos;&amp;lt;script src=&amp;quot;load.js&amp;quot; id=&amp;quot;asyncLoading&amp;quot; <span class="type">data</span>-asyncLoading=&amp;quot;&amp;apos;+ statics +&amp;apos;/js/ionic.<span class="built_in">all</span>&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;/head&amp;gt;&amp;apos;, &amp;apos;&amp;lt;script <span class="keyword">type</span>=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://tajs.qq.com/stats?sId=<span class="number">45760313</span>&amp;quot; charset=&amp;quot;UTF-<span class="number">8</span>&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;\n&amp;lt;/head&amp;gt;&amp;apos;);

      <span class="keyword">file</span>.contents = new Buffer(<span class="type">data</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isStream()) {

        console.<span class="built_in">log</span>(&amp;apos;async load error&amp;apos;);

    }

    cb(null, <span class="keyword">file</span>);

  });

}
</code></pre><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>&#x9700;&#x8981;&#x5B89;&#x88C5;through2&#x6A21;&#x5757;&#xFF1A; npm install throuth2 &#x2013;save-dev</li>
<li>Node&#x4E2D;buffer&#x7684;&#x4F7F;&#x7528; <ul>
<li><a href="http://blog.chinaunix.net/uid-26672038-id-4173346.html" target="_blank" rel="external">node&#x7684;buffer&#x4ECB;&#x7ECD;</a></li>
<li><a href="https://cnodejs.org/topic/5189ff4f63e9f8a54207f60c" target="_blank" rel="external">&#x6D45;&#x6790;nodejs&#x7684;buffer&#x7C7B;</a></li>
</ul>
</li>
</ul>
<p>&#x4F7F;&#x7528;</p>
<p>&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x8DDF;&#x666E;&#x901A;&#x7684;gulp&#x63D2;&#x4EF6;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E00;&#x6837;</p>
<p> JavaScript</p>
<pre><code>gulp.task<span class="params">(&amp;apos;usemin&amp;apos;, function<span class="params">(cd)</span> {

  return gulp.src<span class="params">(&amp;apos;./www/index.html&amp;apos;)</span>

    .pipe<span class="params">(usemin<span class="params">({

      css: [minifyCss<span class="params">()</span>, &amp;apos;concat&amp;apos;, rev<span class="params">()</span>],      

      js: [rev<span class="params">()</span>]

    })</span>)</span>

    .pipe<span class="params">(asyncLoad<span class="params">()</span>)</span>

    .pipe<span class="params">(gulp.dest<span class="params">(&amp;apos;./dest/&amp;apos;)</span>)</span>;

})</span>;
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;</p>
<p>&#x529F;&#x80FD;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;gulp&#x63D2;&#x4EF6;&#xFF0C;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x7136;&#x540E;&#x53C2;&#x770B;&#x4E86;&#x4E00;&#x4E9B;gulp&#x5B98;&#x7F51;&#x4E0A;&#x7684;&#x63D2;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x5199;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5B8C;&#x4E86;&#xFF0C;&#x540C;&#x4E8B;&#x9700;&#x8981;&#x77E5;&#x9053;nodejs&#x5982;&#x4F55;&#x64CD;&#x4F5C;buffer&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9afc63f/" title="【每日一博】Node.js 模块加载机制 Require -" itemprop="url">【每日一博】Node.js 模块加载机制 Require -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="&#x9898;&#x5916;&#x8BDD;">&#x9898;&#x5916;&#x8BDD;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x89E3;&#x4E00;&#x4E0B;&#x535A;&#x5BA2;&#x6807;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x7B2C;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x8BC4;&#x8BBA;&#x4E2D;&#xFF0C;&#x6709;&#x4EBA;&#x8D28;&#x7591;&#x79BB;&#x9898;&#x5F88;&#x8FDC;&#xFF0C;&#x8BF4;&#x4E86;&#x534A;&#x5929;&#x548C;Angular Material&#x6CA1;&#x6709;&#x534A;&#x6BDB;&#x5173;&#x7CFB;&#x3002;</p>
<ol>
<li>&#x6211;&#x7684;&#x91CD;&#x5FC3;&#x5728;&#x540E;&#x534A;&#x53E5;&#x300A;&#x4E32;&#x4E32;&#x5B66;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x300B;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x8FD9;&#x4E00;&#x5E74;&#x4EE5;&#x6765;&#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x7EA0;&#x7ED3;&#x548C;&#x6478;&#x7D22;&#x7684;&#x4E00;&#x4E2A;&#x603B;&#x7ED3;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x81EA;&#x4ECE;NodeJS&#x7684;&#x51FA;&#x73B0;&#x4EE5;&#x540E;&#xFF0C;&#x5DF2;&#x7ECF;&#x4EA7;&#x751F;&#x4E86;&#x5929;&#x7FFB;&#x5730;&#x8986;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x4E0D;&#x518D;&#x662F;&#x5728;html&#x4E2D;&#x5F15;&#x7528;js&#x6587;&#x4EF6;, &#x7528;alert&#x8C03;&#x8BD5;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;NodeJS&#x8BA9;javascript&#x6210;&#x4E00;&#x4E2A;&#x5B8C;&#x5907;&#x7684;&#x5F00;&#x53D1;&#x8BED;&#x8A00;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B8C;&#x5907;&#x5305;&#x62EC;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x548C;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x3002;&#x6240;&#x8C13;&#x7684;&#x300A;&#x4E32;&#x4E32;&#x5B66;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x300B;&#x5C31;&#x662F;&#x5C55;&#x793A;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;IDE&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF08;&#x73B0;&#x5728;&#x53EF;&#x7528;&#x7684;IDE&#x6709;WebStorm, Sublime &#x751A;&#x81F3;Visual Studio &#xFF0D; &#x662F;&#x7684;VS2015&#x5DF2;&#x7ECF;&#x80FD;&#x975E;&#x5E38;&#x597D;&#x7684;&#x652F;&#x6301;NodeJS&#x9879;&#x76EE;&#x5F00;&#x53D1;&#xFF09;&#x3002;&#x5728;&#x6211;&#x4E4B;&#x540E;&#x7684;&#x7CFB;&#x5217;&#x4E2D;&#xFF0C;&#x4F1A;&#x6162;&#x6162;&#x628A;&#x8FD9;&#x4E9B;&#x5C55;&#x73B0;&#x51FA;&#x6765;&#x3002;</li>
<li>&#x4E3A;&#x4EC0;&#x4E48;Angular Material&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x786E;&#x786E;&#x5B9E;&#x5B9E;&#x5728;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x6700;&#x65B0;&#x7684;&#x9879;&#x76EE;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x5168;&#x90E8;&#x6539;&#x7528;&#x5B83;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x73B0;&#x5728;&#x786E;&#x5B9E;&#x6709;&#x5F88;&#x591A;&#x5F00;&#x6E90;&#x7684;js&#x9879;&#x76EE;&#xFF0C;&#x4F46;&#x662F;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x6846;&#x67B6;&#x9879;&#x76EE;&#xFF0C;&#x5982;Angular Material&#x672C;&#x8EAB;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x7EC8;&#x7AEF;&#x5BA2;&#x6237;&#x9879;&#x76EE;(&#x5373;&#x5B9E;&#x9645;&#x7684;&#x7F51;&#x7AD9;&#x9879;&#x76EE;)&#x3002;&#x800C;&#x6700;&#x8FD1;&#x975E;&#x5E38;&#x51D1;&#x5DE7;&#x53D1;&#x73B0;Angular Material&#x6E90;&#x4EE3;&#x7801;&#x4E0D;&#x4EC5;&#x6709;&#x6846;&#x67B6;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x7F51;&#x7AD9;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x4E2A;&#x7F51;&#x7AD9;&#x4EE3;&#x7801;&#x672C;&#x8EAB;&#xFF0C;&#x5373;&#x5C55;&#x73B0;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;&#xFF0C;&#x4E5F;&#x5305;&#x542B;&#x4E86;&#x5BF9;&#x6846;&#x67B6;&#x7684;&#x6DF1;&#x5EA6;&#x4F7F;&#x7528;&#x3002;&#x6240;&#x8C13;&#xFF0C;&#x4E00;&#x7BAD;&#x53CC;&#x96D5;&#x975E;&#x5E38;&#x5B8C;&#x7F8E;&#xFF0C;&#x8FD9;&#x624D;&#x4FC3;&#x4F7F;&#x6211;&#x542F;&#x52A8;&#x5FF5;&#x5934;&#xFF0C;&#x5F00;&#x59CB;&#x5199;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x3002;</li>
<li>&#x5982;&#x4F55;&#x5B66;&#x4E60;&#xFF1F;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6781;&#x6D45;&#x53C8;&#x6781;&#x6DF1;&#x7684;&#x8BDD;&#x9898;&#x3002;&#x73B0;&#x5728;&#x4E0D;&#x4EC5;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;&#x7684;&#x9886;&#x57DF;&#x90FD;&#x6709;&#x592A;&#x591A;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x6211;&#x524D;&#x51E0;&#x5929;&#x8FD8;&#x548C;&#x670B;&#x53CB;&#x804A;&#x5230;&#xFF0C;&#x770B;&#x770B;github&#x5C31;&#x80FD;&#x611F;&#x89C9;&#x5230;&#xFF0C;&#x592A;&#x591A;&#x7684;js&#x6846;&#x67B6;&#xFF08;&#x8033;&#x719F;&#x80FD;&#x8BE6;&#x7684;&#x5C31;&#x6709;jQuery, underscore, AngularJS, ReactJS&#xFF0C;Grunt, Gulp &#x2026;), &#x6839;&#x672C;&#x5C31;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x548C;&#x7CBE;&#x529B;&#x4E00;&#x4E00;&#x638C;&#x63E1;&#x3002;&#x6211;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x72B9;&#x5982;&#x4E00;&#x7C92;&#x4E00;&#x7C92;&#x6563;&#x843D;&#x7684;&#x73E0;&#x5B50;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x4E00;&#x6839;&#x7EBF;&#x628A;&#x5B83;&#x4EEC;&#x4E32;&#x8D77;&#x6765;&#xFF0C;&#x5C31;&#x597D;&#x628A;&#x63E1;&#x591A;&#x4E86;&#x3002; &#x8FD9;&#x5C31;&#x662F;&#x6211;&#x6587;&#x7AE0;&#x6807;&#x9898;&#x7684;&#x771F;&#x6B63;&#x542B;&#x4E49;&#xFF1A;&#x6211;&#x8981;&#x7528;Angular Material&#x8FD9;&#x6839;&#x7EBF;&#x628A;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x5404;&#x4E2A;&#x65B9;&#x9762;&#x4E32;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x4E0D;&#x90A3;&#x4E48;&#x6563;&#xFF0C;&#x4E0D;&#x90A3;&#x4E48;&#x7D2F;&#x3002;</li>
<li>&#x5982;&#x679C;&#x6709;&#x4EBA;&#x53EA;&#x5BF9;ngMaterial&#x672C;&#x8EAB;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x6211;&#x5176;&#x4ED6;&#x7684;&#x6587;&#x7AE0;&#xFF1A; <a href="http://my.oschina.net/wonner/blog/401605" target="_blank" rel="external">&#x624B;&#x52BF;&#x6A21;&#x578B;&#x548C;Angular Material&#x7684;&#x5B9E;&#x73B0;</a><a href="http://www.cnblogs.com/Wonner/p/Material_Design_And_AngularJS_Implementation.html" target="_blank" rel="external">&#x62DF;&#x7269;&#x8BBE;&#x8BA1;&#x548C;Angular&#x7684;&#x5B9E;&#x73B0; - Material Design</a> &#x548C;&#x6DF1;&#x5165;&#x63A2;&#x7D22;AngularJS&#x3002;</li>
</ol>
<h3 id="require()">require()</h3><p>&#x4E0D;&#x8981;&#x628A;&#x8FD9;&#x91CC;&#x7684;Require&#xFF08;&#xFF09;&#x548C;RequireJS&#x6DF7;&#x4E3A;&#x4E00;&#x8C08;&#x3002;&#x4E0D;&#x8FC7;&#x6709;&#x610F;&#x601D;&#x7684;&#x662F;&#xFF0C;Typescript&#x7684;&#x6A21;&#x5757;&#x5B9A;&#x4E49;&#xFF0C;&#x751A;&#x81F3;&#x540C;&#x65F6;&#x652F;&#x6301;&#x8FD9;&#x4E24;&#x79CD;&#x6A21;&#x5757;&#x673A;&#x5236;&#x3002;</p>
<p>&#x5BFC;&#x5165;&#x548C;&#x4F7F;&#x7528;&#x5916;&#x90E8;&#x6A21;&#x5757;&#xFF0C;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x53E5; require() ,&#x770B;&#x770B;angular/material/docs&#x4E0B;&#x7684;&#x7F16;&#x8BD1;&#x6587;&#x4EF6;gulpfile.js&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x3002;&#x5BF9;&#x6A21;&#x5757;&#x5BFC;&#x5165;&#x548C;&#x4F7F;&#x7528;&#x6709;&#x4E2A;&#x76F4;&#x89C2;&#x7684;&#x611F;&#x89C9;&#x3002; </p>
<pre><code><span class="xml">var gulp = require(&amp;apos;gulp&amp;apos;);
var concat = require(&amp;apos;gulp-concat&amp;apos;);
var fs = require(&amp;apos;fs&amp;apos;);

... 

//&amp;#x5BF9;&amp;#x6A21;&amp;#x5757;gulp&amp;#x7684;&amp;#x4F7F;&amp;#x7528;
gulp.task(&amp;apos;demos&amp;apos;, function() </span><span class="expression">{ <span class="variable">...</span>  

//&amp;<span class="begin-block">#x</span>5<span class="variable">BF</span>9;&amp;<span class="begin-block">#x</span>6<span class="variable">A</span>21;&amp;<span class="begin-block">#x</span>5757;<span class="variable">gulp-concat</span>&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>7<span class="variable">F</span>;&amp;<span class="begin-block">#x</span>7528;
<span class="variable">gulp.src</span>([
    &amp;<span class="variable">apos</span>;<span class="variable">node</span>_<span class="variable">modules</span><span class="end-block">/angularytics</span><span class="end-block">/dist</span><span class="end-block">/angularytics.js</span>&amp;<span class="variable">apos</span>;,
    &amp;<span class="variable">apos</span>;<span class="variable">dist</span><span class="end-block">/docs</span><span class="end-block">/js</span>/**/*<span class="variable">.js</span>&amp;<span class="variable">apos</span>;
  ])
    <span class="variable">.pipe</span>(<span class="variable">concat</span>(&amp;<span class="variable">apos</span>;<span class="variable">docs.js</span>&amp;<span class="variable">apos</span>;))

//&amp;<span class="begin-block">#x</span>5<span class="variable">BF</span>9;&amp;<span class="begin-block">#x</span>6<span class="variable">A</span>21;&amp;<span class="begin-block">#x</span>5757;<span class="variable">fs</span>&amp;<span class="begin-block">#x</span>7684;&amp;<span class="begin-block">#x</span>4<span class="variable">F</span>7<span class="variable">F</span>;&amp;<span class="begin-block">#xFFFD</span>;&amp;<span class="begin-block">#xFFFD</span>;&amp;<span class="begin-block">#xFFFD</span>;
<span class="variable">fs.writeFileSync</span>(<span class="variable">dest</span> + &amp;<span class="variable">apos</span>;<span class="end-block">/demo-data.js</span>&amp;<span class="variable">apos</span>;, <span class="variable">file</span>);</span>
</code></pre><p>gulp.task &#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF1B; cancat &#x7528;&#x4E8E;&#x5408;&#x5E76;&#x6587;&#x4EF6;&#xFF1B;fs&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x7684;&#x6A21;&#x5757;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x6709;&#x6A21;&#x5757;&#x7684;&#x5F15;&#x5165;&#xFF0C;&#x4EE3;&#x7801;&#x66F4;&#x4E3A;&#x6E05;&#x6670;&#x800C;&#x660E;&#x786E;&#xFF0C;&#x8FD9;&#x4E9B;&#x5E38;&#x7528;&#x6A21;&#x5757;&#x76F8;&#x5F53;&#x4E8E;&#x5BF9;&#x57FA;&#x672C;&#x8BED;&#x8A00;&#x529F;&#x80FD;&#x7684;&#x6269;&#x5C55;&#x3002; </p>
<p>&#x8FD9;&#x91CC;&#xFF0C;&#x5173;&#x952E;&#x8BCD;require()&#x628A;&#x4E00;&#x5207;&#x8054;&#x7CFB;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x53E5;&#x7B80;&#x5355;&#x7684;&#x8BED;&#x53E5;&#x80CC;&#x540E;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#x4E8B;&#x60C5;&#x5462;&#xFF1F;</p>
<ol>
<li>require&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x8BED;&#x8A00;&#x7684;&#x5173;&#x952E;&#x8BCD;&#xFF0C;&#x5728;&#x6587;&#x7AE0;&#x540E;&#x9762;&#x7684;&#x7814;&#x7A76;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x3002;</li>
<li>&#x8FD8;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x8FC7;require()&#x6216;&#x8005;&#x5BF9;&#x5B83;&#x5B9E;&#x73B0;&#x673A;&#x5236;&#x4E0D;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x53EF;&#x4EE5;&#x7565;&#x4E2A;&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x786E;&#x5B9E;&#xFF0C;&#x540E;&#x9762;&#x5B9E;&#x73B0;&#x673A;&#x5236;&#x4E0D;&#x592A;&#x5F71;&#x54CD;&#x4F7F;&#x7528;&#x3002;</li>
</ol>
<p>&#x4EE5;&#x4E0B;&#x5927;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x90FD;&#x6765;&#x81EA;&#x539F;&#x6587;&#xFF1A; <a href="http://thenodeway.io/posts/how-require-actually-works/?utm_source=fredkschott.com&amp;utm_medium=referral" target="_blank" rel="external">How require() Actually Works</a></p>
<p>&#x56E0;&#x4E3A;NodeJS&#x662F;&#x5F00;&#x6E90;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FFD;&#x6EAF; require() &#x5230;node&#x7684;&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x4E2D;&#x53BB;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x7684;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;module.js&#x3002;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5B9E;&#x73B0;&#x4E86;node&#x7684;&#x6574;&#x4E2A;&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x7CFB;&#x7EDF;&#x3002;&#x6DB5;&#x76D6;&#x7684;&#x8FC7;&#x7A0B;&#x6709;&#x52A0;&#x8F7D;&#x3001;&#x7F16;&#x8BD1;&#x548C;&#x7F13;&#x5B58;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684; require() &#x53EA;&#x662F;&#x5176;&#x51B0;&#x4E0A;&#x4E00;&#x89D2;&#x3002; </p>
<h3 id="module-js">module.js</h3><pre><code><span class="function"><span class="keyword">function</span> <span class="title">Module</span><span class="params">(id, parent)</span> </span>{
    <span class="keyword">this</span>.id = id;
    <span class="keyword">this</span>.exports = {};
    <span class="keyword">this</span>.parent = parent;
    <span class="comment">//...</span>
</code></pre><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;module.js&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#xFF08;&#x51FD;&#x6570;&#xFF09;Module&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x6709;&#x4E24;&#x4E2A;&#x529F;&#x80FD;&#x3002;&#x4E00;&#x4E2A;&#xFF0C;&#x5B83;&#x662F;&#x6240;&#x6709;&#x6A21;&#x5757;&#x7684;&#x57FA;&#x7C7B;&#xFF0C;&#x4E4B;&#x540E;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x662F;&#x8FD9;&#x4E2A;Module&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x63A2;&#x8BA8;&#x7684; module.exports &#x6700;&#x7EC8;&#x6765;&#x6E90;&#x3002; </p>
<p>&#x8FD9;&#x4E2A;Module&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x5B8C;&#x6210;Node&#x6A21;&#x5757;&#x7684;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684; require() &#x6700;&#x7EC8;&#x5C31;&#x662F;&#x8C03;&#x7528;module.require&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53C8;&#x8C03;&#x7528;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x65B9;&#x6CD5;Module._load&#x3002;&#x6700;&#x7EC8;&#x7684;&#x8FD9;&#x4E2A;load&#x65B9;&#x6CD5;&#x624D;&#x662F;&#x771F;&#x6B63;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4E48;&#x5C06;&#x8981;&#x5206;&#x6790;&#x7814;&#x7A76;&#x7684;&#x3002; </p>
<h3 id="Module-_load">Module._load</h3><pre><code>Module._load = function(request, parent, isMain) {
    //1. <span class="operator"><span class="keyword">Check</span> <span class="keyword">Module</span>._cache <span class="keyword">for</span> the cached <span class="keyword">module</span>.
    //<span class="number">2.</span> <span class="keyword">Create</span> a new <span class="keyword">module</span> instance <span class="keyword">if</span> <span class="keyword">cache</span> empty
    //<span class="number">3.</span> Save it <span class="keyword">to</span> the <span class="keyword">cache</span>
    //<span class="number">4.</span> <span class="keyword">Call</span> <span class="keyword">module</span>.<span class="keyword">load</span>() <span class="keyword">with</span> your the given filename, this will <span class="keyword">call</span> <span class="keyword">module</span>.compile() <span class="keyword">after</span> reading the file contents.
    //<span class="number">5.</span> <span class="keyword">If</span> there was error loading /parsing the file, <span class="keyword">delete</span> the bad <span class="keyword">module</span> <span class="keyword">from</span> <span class="keyword">cache</span>.
    //<span class="number">6.</span> <span class="keyword">return</span> <span class="keyword">module</span>.exports
};</span>
</code></pre><p>Module._load&#x8D1F;&#x8D23;&#x88C5;&#x8F7D;&#x65B0;&#x6A21;&#x5757;&#x548C;&#x7BA1;&#x7406;&#x6A21;&#x5757;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x5728;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x8F7D;&#x5165;&#x65F6;&#x51CF;&#x5C11;&#x91CD;&#x590D;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5171;&#x4EAB;&#x6A21;&#x5757;&#x5B9E;&#x4F8B;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x5355;&#x4F8B;&#x6A21;&#x5757;&#x5728;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x4E2D;&#x4FDD;&#x7559;&#x72B6;&#x6001;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x8BE5;&#x6A21;&#x5757;&#xFF0C;Module._load&#x5C31;&#x4F1A;&#x4E3A;&#x8BE5;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Module&#x5B9E;&#x4F8B;&#x3002;&#x5E76;&#x7528;&#x8BE5;&#x5B9E;&#x4F8B;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x9001;&#x7ED9;Module._compile&#x3002;</p>
<p>&#x6CE8;&#x610F;&#x5230;&#x5728;&#x4E0A;&#x9762;&#x7B2C;6&#x6B65;&#xFF0C;&#x8FD4;&#x56DE;&#x4E86;module.exports&#x3002;&#x8FD9;&#x4E2A;&#x8FD4;&#x56DE;&#x8BED;&#x53E5;&#x53EF;&#x4EE5;&#x89E3;&#x91CA;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x4F60;&#x7684;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x4E2D;&#x8981;&#x628A;&#x516C;&#x5F00;&#x7684;&#x63A5;&#x53E3;&#xFF08;&#x65B9;&#x6CD5;&#xFF09;&#x8D4B;&#x7ED9;module.exports(&#x6216;&#x8005;&#x522B;&#x540D;exports)&#xFF1B;&#x8FD9;&#x4E5F;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;require()&#x8FD4;&#x56DE;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5BFC;&#x5165;&#x6A21;&#x5757;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5230;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x795E;&#x5947;&#x6216;&#x7279;&#x522B;&#x7684;&#x5730;&#x65B9;&#x3002;</p>
<h3 id="module-_compile">module._compile</h3><pre><code><span class="keyword">Module</span>.prototype._compile = <span class="function"><span class="keyword">function</span><span class="params">(content, filename)</span></span> {
    // <span class="number">1.</span> Create the standalone require <span class="function"><span class="keyword">function</span></span> that calls <span class="keyword">module</span> require.
    // <span class="number">2.</span> Attach other helper methods to require.
    // <span class="number">3.</span> Wraps the JS code <span class="type">in</span> a <span class="function"><span class="keyword">function</span></span> that provides require, <span class="keyword">module</span>, etc. variables locally to the <span class="keyword">module</span> scope.
    // <span class="number">4.</span> Run that <span class="function"><span class="keyword">function</span>.</span>
</code></pre><p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x521B;&#x5EFA;require&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x975E;&#x5E38;&#x719F;&#x6089;&#x7684;&#x90A3;&#x4E2A; require() (&#x6A21;&#x5757;&#x88C5;&#x8F7D;&#x673A;&#x5236;&#x4E0D;&#x4EC5;&#x4EC5;&#x6709;&#x8F7D;&#x5165;&#x6A21;&#x5757;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x6709;&#x5BFC;&#x5165;&#x548C;&#x8C03;&#x7528;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x8C03;&#x7528;&#x65B9;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x5982;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x7684;main.js)&#x3002;&#x800C;&#x8FD9;&#x4E2A;&#x4E2A;&#x51FD;&#x6570;&#x672C;&#x8EAB;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;&#x4E86;Module.require&#x548C;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;&#x5E2E;&#x52A9;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A; </p>
<ul>
<li>require() &#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;require()</li>
<li>require.main &#x4E3B;&#x6A21;&#x5757;</li>
<li>require.cache &#x6240;&#x6709;&#x7F13;&#x5B58;&#x7684;&#x6A21;&#x5757;</li>
<li>require.extensions &#x4E0D;&#x540C;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#xFF08;&#x540E;&#x7F00;&#xFF09;&#x7684;&#x7F16;&#x8BD1;&#x65B9;&#x6CD5;</li>
</ul>
<p>&#x5728;&#x6784;&#x5EFA;require&#x4E4B;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x539F;&#x6587;&#x4EF6;&#x7684;&#x4EE3;&#x7801;&#x88AB;&#x5C01;&#x88C5;&#x7684;&#x4E00;&#x4E2A;&#x65B0;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x628A;require,module,exports&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x3002; &#x8FD9;&#x4E5F;&#x53EF;&#x4EE5;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;require(),&#x4E3A;&#x4EC0;&#x4E48;exports&#x662F;module.exports&#x7684;&#x522B;&#x540D;&#x3002; </p>
<p>(function(exports,require, module, <strong>filename, </strong>dirname){<br>        //&#x539F;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x6CE8;&#x5165;&#x5728;&#x8FD9;<br>    });</p>
<p>&#x4E86;&#x89E3;&#x6A21;&#x5757;&#x6A21;&#x5F0F;(Module Pattern)&#x7684;&#x4EBA;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x770B;&#x51FA;&#x8FD9;&#x6BB5;&#x770B;&#x65F6;&#x6BEB;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x91CD;&#x65B0;&#x5206;&#x5E10;&#xFF0C;&#x5C31;&#x662F;&#x6A21;&#x5757;&#x6A21;&#x5F0F;&#xFF0C;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x6C61;&#x67D3;&#x7CFB;&#x7EDF;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF08;&#x8BB0;&#x4F4F;javascript&#x65F6;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF09;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x51FD;&#x6570;&#x76F4;&#x63A5;&#x88AB;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x5B8C;&#x6574;&#x6A21;&#x5757;&#x6A21;&#x5F0F;&#x7684;&#x4E00;&#x90E8;&#x5206;,&#x6700;&#x540E;&#x90A3;&#x5BF9;&#x7A7A;&#x62EC;&#x5F27;&#x5C31;&#x662F;&#x8FD0;&#x884C;&#x90E8;&#x5206;&#xFF1A;</p>
<p>(function(…){<br>        //…<br>    })();</p>
<p>&#x5982;&#x679C;&#x4E0D;&#x719F;&#x6089;&#x6A21;&#x5757;&#x6A21;&#x5F0F;(Module Patter)&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x53E6;&#x5916;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="http://kb.skight.com/&#x5BA2;&#x6237;&#x7AEF;/&#x6DF1;&#x5165;&#x63A2;&#x7D22;AngularJS.html" target="_blank" rel="external">&#x6DF1;&#x5165;&#x63A2;&#x7D22;AngularJS</a> &#x7684;&#x4E00;&#x4E2A;&#x7AE0;&#x8282;&#x300A;&#x6A21;&#x5757;&#x6A21;&#x5F0F; - Module Pattern&#x300B; </p>
<p>&#x5B8C;&#x6574;&#x5168;&#x6587;&#xFF1A; <a href="http://kb.skight.com/&#x5BA2;&#x6237;&#x7AEF;/&#x901A;&#x8FC7;Anuglar%20Material&#x4E32;&#x4E32;&#x5B66;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;.html" target="_blank" rel="external">&#x901A;&#x8FC7;ANUGLAR MATERIAL&#x4E32;&#x4E32;&#x5B66;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;</a></p>
<h3 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h3><p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8D70;&#x5B8C;&#x4E86;&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x7684;&#x5168;&#x90E8;&#x6D41;&#x7A0B;&#x3002;&#x4ECE;&#x521B;&#x5EFA;&#x6A21;&#x5757;module.exports&#x5230;&#x8C03;&#x7528;require,&#x4EE5;&#x53CA;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x7684;&#x5185;&#x90E8;&#x8FC7;&#x7A0B;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x4E9B;&#x5BF9;&#x4F60;&#x4EE3;&#x7801;&#x8FD8;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#xFF0C;&#x539F;&#x6765;&#x8BE5;&#x600E;&#x4E48;&#x505A;&#x8FD8;&#x600E;&#x4E48;&#x505A;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x5199;&#x540C;&#x6837;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x5FC3;&#x91CC;&#x66F4;&#x6709;&#x5E95;&#xFF0C;&#x4E0D;&#x518D;&#x5F3A;&#x884C;&#x8BB0;&#x5FC6;&#x6A21;&#x5757;&#x7684;&#x8BED;&#x6CD5;&#x3002;&#x6700;&#x91CD;&#x8981;&#x7684;&#x4E8B;&#x901A;&#x8FC7;&#x5B66;&#x4E60;&#x826F;&#x597D;&#x7684;&#x4EE3;&#x8D2D;&#x67B6;&#x6784;&#xFF0C;&#x63D0;&#x9AD8;&#x81EA;&#x5DF1;&#x7684;&#x67B6;&#x6784;&#x6C34;&#x5E73;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/AngularJS/">AngularJS</a><a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/6bb6a51/" title="gulp插件开发手札 -" itemprop="url">gulp插件开发手札 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:02:56.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>gulp</p>
<p>&#x4E00;&#x4E2A;&#x6BD4;grunt&#x4F7F;&#x7528;&#x66F4;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;Gulp&#x901A;&#x8FC7;&#x6D41;&#x548C;&#x4EE3;&#x7801;&#x4F18;&#x4E8E;&#x914D;&#x7F6E;&#x7B56;&#x7565;&#x6765;&#x5C3D;&#x91CF;&#x7B80;&#x5316;&#x4EFB;&#x52A1;&#x7F16;&#x5199;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x4E0D;&#x5728;&#x8D58;&#x8FF0;gulp&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x6CD5;&#x3002;&#x8BF7;&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank" rel="external">gulp getting-started</a></li>
<li><a href="http://segmentfault.com/a/1190000000711469" target="_blank" rel="external">gulp&#x9AD8;&#x7EA7;&#x6280;&#x5DE7;</a></li>
<li><a href="http://segmentfault.com/a/1190000002491282" target="_blank" rel="external">gulp vs grunt</a></li>
</ul>
<p>&#x9700;&#x6C42;</p>
<p>&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;gulp&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x63D2;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x538B;&#x7F29;&#xFF0C;md5&#x540E;&#x7F00;&#x7B49;&#x7B49;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4EC5;&#x5728;&#x79FB;&#x52A8;&#x7AEF;&#x8FD0;&#x884C;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x6027;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;js&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x538B;&#x7F29;&#x540E;&#x7684;js&#x6587;&#x4EF6;&#x4F53;&#x79EF;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x521B;&#x5EFA;script&#x6807;&#x7B7E;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x7B49;&#x9875;&#x9762;ready&#x4E86;&#x518D;&#x53BB;&#x52A0;&#x8F7D;js&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x4E86;md5&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x6B21;&#x538B;&#x7F29;&#x5B8C;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x90FD;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x800C;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684;&#x811A;&#x672C;&#x9700;&#x8981;&#x77E5;&#x9053;&#x538B;&#x7F29;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x624B;&#x90FD;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x63D2;&#x4EF6;&#x529F;&#x80FD;</p>
<p>&#x6240;&#x4EE5;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x662F;&#xFF0C;&#x5728;js&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x5408;&#x5E76;&#x4EE5;&#x540E;&#xFF0C;&#x5904;&#x7406;&#x9996;&#x9875;html.</p>
<p>&#x9996;&#x5148;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;gulp&#x63D2;&#x4EF6;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x82F1;&#x6587;)</a></li>
<li><a href="http://www.u396.com/gulp-plugin-guildlines.html" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x4E2D;&#x6587;)</a></li>
</ul>
<p>&#x56E0;&#x4E3A;&#x662F;&#x4E2A;&#x5C0F;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x5355;&#xFFFD;&#xFFFD;&#xFFFD;&#x5C01;&#x88C5;&#x6210;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x662F;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x51FD;&#x6570;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#xFF1A;</p>
<p> JavaScript</p>
<pre><code><span class="function"><span class="keyword">function</span></span> asyncLoad() {

  console.<span class="built_in">log</span>(&amp;quot;Starting &amp;apos;async load&amp;apos;...&amp;quot;);

  <span class="keyword">return</span> through.obj(<span class="function"><span class="keyword">function</span><span class="params">(file,enc,cb)</span></span>{

    <span class="keyword">if</span>(<span class="keyword">file</span>.isNull()) {

      cb(null,<span class="keyword">file</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isBuffer()) {

      var <span class="type">data</span> = Buffer.concat([<span class="keyword">file</span>.contents]).toString();

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos;, &amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos; + statics + &amp;apos;/&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;img src=&amp;quot;./img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;, &amp;apos;&amp;lt;img src=&amp;quot;&amp;apos; +statics + &amp;apos;/img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;script src=&amp;quot;js/ionic.<span class="built_in">all</span>&amp;apos;,&amp;apos;&amp;lt;script src=&amp;quot;load.js&amp;quot; id=&amp;quot;asyncLoading&amp;quot; <span class="type">data</span>-asyncLoading=&amp;quot;&amp;apos;+ statics +&amp;apos;/js/ionic.<span class="built_in">all</span>&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;/head&amp;gt;&amp;apos;, &amp;apos;&amp;lt;script <span class="keyword">type</span>=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://tajs.qq.com/stats?sId=<span class="number">45760313</span>&amp;quot; charset=&amp;quot;UTF-<span class="number">8</span>&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;\n&amp;lt;/head&amp;gt;&amp;apos;);

      <span class="keyword">file</span>.contents = new Buffer(<span class="type">data</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isStream()) {

        console.<span class="built_in">log</span>(&amp;apos;async load error&amp;apos;);

    }

    cb(null, <span class="keyword">file</span>);

  });

}
</code></pre><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>&#x9700;&#x8981;&#x5B89;&#x88C5;through2&#x6A21;&#x5757;&#xFF1A; npm install throuth2 &#x2013;save-dev</li>
<li>Node&#x4E2D;buffer&#x7684;&#x4F7F;&#x7528; <ul>
<li><a href="http://blog.chinaunix.net/uid-26672038-id-4173346.html" target="_blank" rel="external">node&#x7684;buffer&#x4ECB;&#x7ECD;</a></li>
<li><a href="https://cnodejs.org/topic/5189ff4f63e9f8a54207f60c" target="_blank" rel="external">&#x6D45;&#x6790;nodejs&#x7684;buffer&#x7C7B;</a></li>
</ul>
</li>
</ul>
<p>&#x4F7F;&#x7528;</p>
<p>&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x8DDF;&#x666E;&#x901A;&#x7684;gulp&#x63D2;&#x4EF6;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E00;&#x6837;</p>
<p> JavaScript</p>
<pre><code>gulp.task<span class="params">(&amp;apos;usemin&amp;apos;, function<span class="params">(cd)</span> {

  return gulp.src<span class="params">(&amp;apos;./www/index.html&amp;apos;)</span>

    .pipe<span class="params">(usemin<span class="params">({

      css: [minifyCss<span class="params">()</span>, &amp;apos;concat&amp;apos;, rev<span class="params">()</span>],      

      js: [rev<span class="params">()</span>]

    })</span>)</span>

    .pipe<span class="params">(asyncLoad<span class="params">()</span>)</span>

    .pipe<span class="params">(gulp.dest<span class="params">(&amp;apos;./dest/&amp;apos;)</span>)</span>;

})</span>;
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;</p>
<p>&#x529F;&#x80FD;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;gulp&#x63D2;&#x4EF6;&#xFF0C;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x7136;&#x540E;&#x53C2;&#x770B;&#x4E86;&#x4E00;&#x4E9B;gulp&#x5B98;&#x7F51;&#x4E0A;&#x7684;&#x63D2;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x5199;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5B8C;&#x4E86;&#xFF0C;&#x540C;&#x4E8B;&#x9700;&#x8981;&#x77E5;&#x9053;nodejs&#x5982;&#x4F55;&#x64CD;&#x4F5C;buffer&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2dd2875/" title="A Code Boot Camp for Underprivileged Kids -" itemprop="url">A Code Boot Camp for Underprivileged Kids -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>A science center in Johannesburg, South Africa, has opened the doors to a five-month course in Linux-based Web apps and entrepreneurial skills. The training is available free of charge to underprivileged students from nearby townships; if it&apos;s successful, it will be rolled out nationwide.The Sci-Bono Discovery Center, based in Newtown, has been a strong supporter of education for school children and youth of the townships since it opened in 2006. At first the curriculum focused on educational support in the traditional subjects of science and mathematics. As time passed, the Center began to teach IT skills to high school graduates who were applying to university. This week, it has taken a giant leap into the realm of Web development with a world-class training line-up.It&apos;s an opportunity that many of the Center&apos;s students otherwise never would see, with poverty levels in the townships making it impossible to attend courses run by commercial training providers.The intensive five-month course was developed by French skills development firm Simplon, which recently was involved in the highly successful Africa Code Week. The course focuses on Linux-based Web app stacks. The training starts with Linux administration, and then students learn to produce working Ruby on Rails apps. They will learn to develop with Node.js and Meteor.js as well. Along the way, they also will be learning front-end skills such as HTML, JavaScript and CSS. By the end, they will have a well-rounded foundation in full stack development and completed projects to show off in their portfolios.The project is based on the topics that Simplon uses in its French coding boot camps, which have been very successful in France. One third of Simplon&apos;s graduates are employed, and another third are involved in startups of their own (which explains Simplon&apos;s nickname: &quot;The Startup Factory&quot;).The choice of Linux, Ruby, Rails and Node.js means that these students will be learning to use technology that is cutting-edge and completely open source. That&apos;s not just a happy coincidence. On a continent with many developing economies, FOSS is not just a moral choice. For many startups, restrictive and expensive software licenses would make it impossible to operate at all.The project leaders are excited about the changes that will be stimulated by this project, especially if it is adopted in other science centers throughout the country. With computer hardware availability and Internet access improving across the continent, Africa already is the fastest growing ICT region on Earth. With a horde of newly trained developers, ready to work with a cutting-edge open-source software stack, this will be one big step to close the technology gap with the West. And, with so many new developers able to contribute to open-source projects, it&apos;s a move that will benefit all of us.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/Ruby/">Ruby</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2da3fd4/" title="Dealing with long paths -" itemprop="url">Dealing with long paths -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could&apos;ve run into this problem locally or on end users&apos; machines. We&apos;ve created a simple little module called <a href="https://github.com/Teamwork/gulp-path-length" target="_blank" rel="external">gulp-path-length</a> to give you a helping hand with this. </p>
<p><img src="http://taojinke.github.io/img/20150702/2da0f00.gif" alt=""></p>
<h2 id="npm">npm</h2><p>Neither this problem nor our solution is exclusive to <a href="https://nodejs.org/" target="_blank" rel="external">Node.js</a> , but a lot of the victims of the path length problem were probably running Node.js on Windows. Windows users know that they get left out in the cold often by <a href="https://www.npmjs.com/" target="_blank" rel="external">npm</a> package maintainers but even <a href="https://github.com/joyent/node/issues/6960#issuecomment-46704998" target="_blank" rel="external">the design of npm itself is a problem from the get-go</a> . </p>
<p>npm stores your dependencies (listed in your package.json ) in a node_modules directory. If those dependencies have dependencies of their own, they&apos;re stored in their own node_modules directory (i.e. your-project/node_modules/a/node_modules/b/ ) and so on recursively. It&apos;s nice, but in hindsight, it&apos;s obviously incompatible with Windows&apos;s path length limit. </p>
<h3 id="Delete_delete_delete">Delete delete delete</h3><p>Most people have probably been lucky enough to only have come across this problem when trying to delete dependencies and then Windows complains that the path is too long.</p>
<p>A simple way around this is to take a module halfway down deep into your dependency graph (i.e. node_modules/a/node_modules/b/node_modules/c/…/node_modules/h/ ) in Windows Explorer and move it somewhere closer to the root (e.g. node_modules/ ) to cut the file path down before trying to delete it again. This would have to be repeated for every culprit. </p>
<p>There are also some tools which could help. I&apos;ve noticed that you can delete really long paths while using <a href="http://www.7-zip.org/" target="_blank" rel="external">7-Zip</a> File Manager to browse files. </p>
<h3 id="Runtime_errors">Runtime errors</h3><p>If you&apos;ve ran into actual bugs caused by this, you could find a module halfway down the dependency graph and add it as a dependency to your project so it will be installed under the top level node_modules and not a node_modules directory n levels deep. Make sure to install the correct version and test thoroughly. </p>
<p>There are also a few Node modules out there which &quot;flatten&quot; your dependency graph. The downside to these modules is that if there is a conflict (package A depends on version 1.0.0 of package Z and package B depends on version 3.2.1 of package Z) then the latest version of the module (package Z) is used, which could be problematic. So, be careful.</p>
<h3 id="Can&apos;t_npm_fix_this?">Can&apos;t npm fix this?</h3><p>You might see people reference Windows APIs (which support long paths) as a possible fix but it is <a href="https://github.com/joyent/node/issues/6960#issuecomment-46704998" target="_blank" rel="external">very unlikely</a> this will be fixed in npm. <a href="https://docs.npmjs.com/cli/dedupe" target="_blank" rel="external">npm dedupe</a><em>should</em> help with this too but it&apos;s not reliable in my experience. This has been fixed as of <a href="https://github.com/npm/npm/releases/tag/v3.0.0" target="_blank" rel="external">npm 3.0.0</a> . </p>
<p>Your dependencies will now be installed <em>maximally</em> flat. Insofar as is possible, all of your dependencies, and their dependencies, and THEIR dependencies will be installed in your project&apos;s node_modules folder with no nesting. You&apos;ll only see modules nested underneath one another when two (or more) modules have conflicting dependencies. </p>
<p>Excuse me…</p>
<p><img src="http://taojinke.github.io/img/20150702/2da18c4.gif" alt=""></p>
<h2 id="Manually_checking_for_exceedingly_long_paths">Manually checking for exceedingly long paths</h2><p>Up until now, we&apos;ve had to routinely check for long paths using <a href="https://pathlengthchecker.codeplex.com/" target="_blank" rel="external">Path Length Checker</a> (on Windows) but a manual check is not good enough as stuff can still slip through the net. </p>
<h2 id="Introducing_gulp-path-length">Introducing gulp-path-length</h2><p>So, we&apos;ve created a simple <a href="http://gulpjs.com" target="_blank" rel="external">Gulp</a> plugin help with this; <a href="https://github.com/Teamwork/gulp-path-length" target="_blank" rel="external">gulp-path-length</a> . You could use it like this in a Gulp task: </p>
<pre><code><span class="keyword">var</span> gulp = <span class="keyword">require</span>(&amp;apos;gulp&amp;apos;);  
<span class="keyword">var</span> pathLength = <span class="keyword">require</span>(&amp;apos;gulp-path-length&amp;apos;);

gulp.task(&amp;apos;<span class="keyword">default</span>&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">()</span><span class="comment">{  
    gulp.src(&amp;apos;./example/path/to/directory/**&amp;apos;, {read: false}</span>)
        .<span class="title">pipe</span><span class="params">(pathLength()</span>);</span> 
});
</code></pre><p>If all is well, nothing will happen. If you have a path exceeding 256 characters, the Gulp task will stop and an error will reveal the offending path. This is really fast either way as Gulp doesn&apos;t need to read the contents of the files. The limit can be changed with a parameter; i.e. .pipe(pathLength({ maxLength: 50 }); . </p>
<p>This is fine if it&apos;s just for you locally, but there are bigger fish to fry.</p>
<h2 id="Distributed_long_paths">Distributed long paths</h2><p>What if there are multiple developers working on your project? What if a developer is using Mac OS X or Linux? There could easily be false positives. It&apos;s one thing having issues locally or within a team, it&apos;s a whole other thing to have path length problems in production on end users&apos; machines.</p>
<p>We&apos;ve run into this withTeamwork Chat for Windows as it&apos;s built on <a href="https://github.com/nwjs/nw.js" target="_blank" rel="external">NW.js</a> (formerly node-webkit) and can contain long paths (i.e. dependencies from npm). Depending on how long the current user&apos;s username was, the user might&apos;ve seen something like this when they tried to launch Teamwork Chat: </p>
<p><img src="http://taojinke.github.io/img/20150702/2da1da6.png" alt=""></p>
<p>A dummy application. None of our app code is executed. This means no error reports and no way the app could even auto-update once a patch was released. As a maintainer of <a href="https://github.com/mllrsohn/node-webkit-builder" target="_blank" rel="external">node-webkit-builder</a> , I know we&apos;re not the only ones who have faced this problem. </p>
<h3 id="Is_there_anything_we_can_do?">Is there anything we can do?</h3><p>Once the code is shipped, it&apos;s too late. Luckily, we have a rough idea where the files will exist on end users machines thanks to our Windows installer. We&apos;ve added a rewrite option to gulp-path-length for simulating paths to prevent this problem ever ocurring again; </p>
<pre><code><span class="keyword">var</span> gulp = <span class="keyword">require</span>(&amp;apos;gulp&amp;apos;);  
<span class="keyword">var</span> pathLength = <span class="keyword">require</span>(&amp;apos;gulp-path-length&amp;apos;);
gulp.task(&amp;apos;<span class="keyword">default</span>&amp;apos;, <span class="function"><span class="keyword">function</span><span class="params">()</span><span class="comment">{  
    gulp.src(&amp;apos;./example/path/to/directory/**&amp;apos;, {read: false}</span>)
        .<span class="title">pipe</span><span class="params">(pathLength({
            rewrite: {
                match: &amp;apos;./example/path/<span class="keyword">to</span>/directory/&amp;apos;,
                replacement: &amp;apos;C:\\Users\\a-long-username-here\\AppData\\<span class="keyword">And</span>\\So\\<span class="keyword">On</span>&amp;apos;
            }
        })</span>);</span> 
});
</code></pre><p>So, it doesn&apos;t matter where you are on your filesystem or which operating system you&apos;re using, it will test the length of files (which belong to the given rewrite.match directory) as if they&apos;re in a specific directory on Windows (i.e. rewrite.replacement ). The outcome would be the same for any developer on the team. </p>
<p>You could run this before you ship your code but we&apos;ve added this to a compilation build step so we catch it as early as possible. If a Mac developer adds really long paths to the project (like an npm dependency which depends on a chain of <a href="https://lodash.com/" target="_blank" rel="external">lodash</a> modules), they&apos;ll see right away that this will break stuff for some Windows users. For good measure, we also run it in a continuous integration step. </p>
<p>Are we missing anything here? Feel free to send us a pull-request or create an issue over at the gulp-path-length <a href="https://github.com/Teamwork/gulp-path-length" target="_blank" rel="external">GitHub repository</a> . </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a><a href="/tags/Windows/">Windows</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2db7372/" title="What&#39;s coming in Meteor 1.2, and beyond -" itemprop="url">What&#39;s coming in Meteor 1.2, and beyond -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> Universal JavaScript: Adopting ECMAScript 2015 (aka&#xA0;ES6) </p>
<p><a href="http://www.ecma-international.org/ecma-262/6.0/index.html" target="_blank" rel="external">ECMAScript 2015</a> , also known as ES6, is going to be huge for the JavaScript community and for JavaScript adoption. The new version of the language is &quot;the best JavaScript we&apos;ve ever had,&quot; with classes, block scoping, and many other additions. &#xA0;We&apos;re excited that it will bring many new developers to JavaScript by addressing the objections that developers from other backgrounds sometimes raise. </p>
<p>We think anyone writing an app in JavaScript should be using ES2015. &#xA0;So we are making ES2105&#xA0;the official JavaScript of the Meteor platform. &#xA0;Our goal is to make Meteor the best way to use ES2015, and to provide a seamless ES2015 experience across the whole platform and across the client and the server. &#xA0;Meteor 1.2 will be the first step in making that seamless development experience: we&apos;re adding support for all its features except for modules, automatically transpiling JS files with <a href="https://babeljs.io/" target="_blank" rel="external">Babel</a> so they work on all of Meteor&apos;s supported devices and browsers, and changing all our examples and documentation to ES2015. </p>
<p>We hope that you&apos;ll make the switch to ES2015 today, especially given how easy this new support makes it. It really is a huge improvement on JavaScript. But if you&apos;re not ready to switch, or want to transition your codebase gradually, you&apos;ll have that option. You can write some parts of your app in ES2015, some parts without, and adopt ES2015 at your own pace.</p>
<p>Special thanks to <a href="https://twitter.com/benjamn" target="_blank" rel="external">Ben Newman</a> , Meteor core developer and&#xA0; <a href="http://www.ecma-international.org/memento/TC39.htm" target="_blank" rel="external">Ecma TC39</a> standards committee member, for his leadership in this area. </p>
<p>Reactive Rendering: First-class support for Angular and React </p>
<p>Users expect a reactive and responsive app experience, so it&apos;s not surprising there is significant excitement in reactive rendering frameworks and growing momentum behind options like Angular and React. This is great news for developers using JavaScript, and we want to ensure whether you&apos;re using Blaze, React, or Angular you have a great experience with Meteor.</p>
<p>Meteor goes with Angular/React like peanut butter goes with jelly. Reactive rendering is only part of the solution for a fully reactive app with an &apos;Optimistic UI&apos;. &#xA0;Meteor provides everything else that you need to build a complete app, from secure server logic, to a full-stack reactive data system, to PhoneGap build support. &#xA0;And unlike BaaS options, it&apos;s open source. </p>
<p>So Angular and React are joining Blaze as official, supported view layers for Meteor. In fact, the official Meteor tutorial is already available in bothBlazeand&#xA0;Angulareditions, with React coming soon.&#xA0; For more information on the Angular integration, see the&#xA0;Angular Meteor&#xA0;site.  &#xA0; For more on React + Meteor, see our&#xA0; <a href="http://react-in-meteor.readthedocs.org/en/latest/" target="_blank" rel="external">Getting started with React in Meteor</a>&#xA0;page and Sashko&apos;s&#xA0;forum post.</p>
<p>Developer Experience: Faster and more flexible build pipeline </p>
<p>We are always focused on ensuring a great developer experience, which means having a great toolchain. For 1.2, we&apos;re working on making Meteor&apos;s build toolchain faster and more flexible.</p>
<p>Faster is about supporting bigger, more complicated apps, plus ensuring we can accommodate advanced JS build tasks like ES2015&#xA0;and JSX. And we&apos;re building a sophisticated caching system, so even if there is lots of transpiling happening, Meteor does the minimum number of build steps to get your app up to date.</p>
<p>More flexible is about deeper, richer hooks into the build process for plugin authors. This opens up new opportunities for package authors to extend Meteor, like an awesomely integrated way to do custom Bootstrap builds right from inside your Meteor codebase, or linters (code style checkers) that you drop into your app just by adding a package. It also allows us to fix a long-standing limitation with LESS includes that required an awkward workaround.</p>
<p>This toolchain work isn&apos;t always the most glamorous work, but often has some of the most striking impact in delivering a complete end to end solution that takes care of all of the details and works right out of the box, and the great experience that comes with that.</p>
<h3 id="Timeframe_for_Meteor_1-2">Timeframe for Meteor 1.2</h3><p>Meteor 1.2 will ship later this summer. Along the way, you can see our progress and try the new features by following our PRs on GitHub and checking in on theMeteor forums. </p>
<h3 id="Considering_the_road_ahead">Considering the road ahead</h3><p>Beyond what&apos;s in the box for Meteor 1.2, there are many other areas of focus that we&apos;re investigating.</p>
<h3 id="Integration">Integration</h3><p><strong>SQL. &#xA0;</strong> Official SQL support opens up Meteor to another large population of developers. Expect SQL support to be released incrementally, starting with SQL&#xA0;<code>observeChanges</code>&#xA0;and building up to Meteor&apos;s customary full-stack treatment. </p>
<p> <strong>REST and microservices patterns.</strong>  &#xA0; We&apos;ll be looking into better ways of working with data that is coming out of existing backend services. This may take the form of core features or it may take the form of connector packages and pattern guidance. </p>
<h3 id="Application_Architecture">Application Architecture</h3><p> <strong>Building up the stack.</strong> We&apos;ll be pulling features such as routing into core and taking a more opinionated stance on how to structure large Meteor apps. These opinions will be optional but available for teams that want them. Our approach here is to look at package popularity on Atmosphere and the production codebases of&#xA0; <a href="https://www.meteor.com/services/subscription" target="_blank" rel="external">Meteor Developer Subscription</a> customers, and &quot;pave the cowpaths&quot; &#x2013; while also providing any necessary new features that would make life easier. </p>
<p> <strong>ES15 modules.</strong> We will replace Meteor&apos;s homegrown, pre-ES15 namespacing system with shiny, modern ES15 modules. We&apos;re going to try to do this in a way that preserves Rails-style &quot;do what I mean&quot; automatic symbol resolution for developers that want it, while also allowing strict, explicit control of namespacing in situations where that is preferable. </p>
<p> <strong>Testing improvements.</strong> We plan to move Velocity into core and simplify and streamline it. </p>
<p> <strong>Mobile advances.</strong> There are many exciting possibilities in the mobile build toolchain, from new technologies like React Native to a wide range of tooling opportunities relating to cross-platform building and debugging. </p>
<p>With your help, we&apos;ll have more to say about these over the coming months.</p>
<h3 id="Getting_involved">Getting involved</h3><p>We want to hear from you. &#xA0;Please let us know what you think on theMeteor forumsand chime in on&#xA0; <a href="https://github.com/meteor/meteor/pulls?q=is%3Aopen+is%3Apr" target="_blank" rel="external">Meteor PRs</a> . &#xA0;The best way to explore most new ideas is to publish an&#xA0; <a href="https://atmospherejs.com/" target="_blank" rel="external">Atmosphere package;</a> check in on the forums to let everyone know what you&apos;re writing and see what others think. </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Meteor/">Meteor</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2dbe631/" title="Node.js 1.0可以在GitHub和VMs上使用了 -" itemprop="url">Node.js 1.0可以在GitHub和VMs上使用了 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>[&#x539F;&#x6587;&#x53D1;&#x8868;&#x5730;&#x5740;]<a href="http://blogs.msdn.com/b/visualstudio/archive/2015/04/24/node-js-tools-1-0-on-github-and-vms-available.aspx" target="_blank" rel="external"><strong>Node.js Tools 1.0 on GitHub and VMs Available</strong></a></p>
<p>[&#x539F;&#x6587;&#x53D1;&#x8868;&#x65F6;&#x95F4;]24 Apr 2015 8:30 AM</p>
<p>&#x968F;&#x7740;&#x65B0;&#x4E00;&#x5B63;&#x7684;&#x738B;&#x5EA7;&#x6E38;&#x620F;&#x7684;&#x5F00;&#x59CB;&#xFF0C;&#x4EBA;&#x4EEC;&#x5DF2;&#x7ECF;&#x7FD8;&#x9996;&#x4EE5;&#x5F85;&#x63A5;&#x4E0B;&#x6765;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x3002;&#x4E0D;&#x50CF;&#x4F3C;&#x4E4E;&#x65E0;&#x5904;&#x53EF;&#x53BB;&#x7684;Khaleesi&#xFF0C;Visual Studio&#x4E2D;&#x7684;Node.js&#x6700;&#x8FD1;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x5F88;&#x5927;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x56DE;&#x987E;&#x8FC7;&#x53BB;&#x7684;&#x4E00;&#x4E2A;&#x6708;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x5E03;&#x4E86;<a href="http://blogs.msdn.com/b/visualstudio/archive/2015/03/25/node-js-tools-1-0-for-visual-studio.aspx" target="_blank" rel="external">Node.js Tools 1.0 for Visual Studio</a>&#xFF0C;&#x52A0;&#x5165;&#x4E86;&#x5728;GitHub&#x5BCC;&#x6709;&#x6D3B;&#x529B;&#x7684;&#x5F00;&#x6E90;&#x793E;&#x533A;&#xFF0C;&#x5E76;&#x4E14;&#x521B;&#x5EFA;&#x4E86;VM&#x4EE5;&#x4FBF;&#x6240;&#x6709;&#x4EBA;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x4F7F;&#x7528;NTVS.</p>
<p>1.0&#x53D1;&#x5E03;&#x7248;&#x672C;</p>
<p>&#x6211;&#x4EEC;&#x5728;NTVS&#x4E0A;&#x7684;&#x76EE;&#x6807;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x6211;&#x4EEC;&#x60F3;&#x628A;Visual Studio&#x4E2D;&#x7684;&#x5F3A;&#x5927;&#x4E4B;&#x5904;&#x5E26;&#x5230;Node.js&#x4E2D;&#x4EE5;&#x4FBF;&#x4F60;&#x4EEC;&#x53EF;&#x4EE5;&#x6BD4;&#x4EE5;&#x524D;&#x66F4;&#x5FEB;&#x901F;&#x5730;&#x8FD0;&#x884C;&#xFF0C;&#x8C03;&#x8BD5;&#xFF0C;&#x5E76;&#x4E14;&#x90E8;&#x7F72;&#x4E00;&#xFFFD;&#xFFFD;&#xFFFD;&#x5DE5;&#x4F5C;&#x7A0B;&#x5E8F;&#x3002;&#x7528;&#x6211;&#x4EEC;&#x7684;<a href="https://www.visualstudio.com/en-us/features/node-js-vs.aspx" target="_blank" rel="external">&#x9AD8;&#x7EA7;&#x7684;debugging&#x548C;profilling&#x4F53;&#x9A8C;</a>(&#x5C31;&#x50CF;&#x5141;&#x8BB8;&#x65AD;&#x70B9;&#x8D70;&#x5F88;&#x957F;&#x7684;&#x8DEF;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x7684;&#x751F;&#x4EA7;&#x529B;&#x4E00;&#x6837;&#x7B80;&#x5355;&#xFF01;) &#x5BF9;console.log(&#x2026;)&#x8BF4;&#x518D;&#x89C1;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5B66;&#x5230;&#x66F4;&#x591A;&#x5173;&#x4E8E;NTVS 1.0&#x7248;&#x672C;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;<a href="https://www.visualstudio.com/features/node-js-vs" target="_blank" rel="external">&#x8BBF;&#x95EE;Node.js Tools for Visual Studio</a>&#x3002;&#x5982;&#x679C;&#x4F60;&#x559C;&#x6B22;&#x770B;&#x89C6;&#x9891;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;<a href="https://www.youtube.com/watch?v=W_1_UqUDx2s" target="_blank" rel="external">Node.js Tools 1.0 for Visual Studio&#x7EB5;&#x89C8;</a></p>
<p>&#x52A0;&#x5165;GitHub&#x4FF1;&#x4E50;&#x90E8;</p>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x542C;&#x4E86;&#x4F60;&#x4EEC;&#x7684;&#x5E76;&#x4E14;&#x5F00;&#x59CB;&#x628A;&#x6211;&#x4EEC;&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x8F6C;&#x63A5;&#x5230;<a href="https://github.com/Microsoft/nodejstools" target="_blank" rel="external">GitHub</a>&#x4E0A;&#x3002;&#x6700;&#x7E41;&#x5FD9;&#x7684;JavaScript&#x6210;&#x5458;&#x548C;Node.js&#x793E;&#x533A;&#x5DF2;&#x7ECF;&#x5728;GitHub&#x4E0A;&#x5F00;&#x59CB;&#x4E92;&#x52A8;&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x5F88;&#x9AD8;&#x5174;&#x6210;&#x4E3A;&#x8BA8;&#x8BBA;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5F7B;&#x5E95;&#x88AB;&#x6765;&#x81EA;&#x793E;&#x533A;&#x7684;<a href="https://github.com/Microsoft/nodejstools/issues?q=is%3Aissue+is%3Aopen" target="_blank" rel="external">&#x53CD;&#x9988;</a>&#x6240;&#x6FC0;&#x52B1; &#x2013; &#x8C22;&#x8C22;&#x4F60;&#x4EEC;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x7684;&#x8FD9;&#x4E2A;&#x65C5;&#x7A0B;&#x3002;</p>
<p>&#x8BF7;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x7684;<a href="https://github.com/Microsoft/nodejstools/tree/master/Nodejs/Product/Analysis" target="_blank" rel="external">&#x9759;&#x6001;&#x5206;&#x6790;&#x5F15;&#x64CE;</a>&#xFF0C;<a href="https://github.com/Microsoft/nodejstools/issues?q=is%3Aissue+is%3Aopen" target="_blank" rel="external">&#x586B;&#x5199;&#x95EE;&#x9898;</a>&#xFF0C;&#x548C;<a href="https://github.com/Microsoft/nodejstools/pulls?q=is%3Apr+is%3Aclosed" target="_blank" rel="external">&#x4ED4;&#x7EC6;&#x9605;&#x8BFB;&#x6211;&#x4EEC;&#x7684;&#x8BF7;&#x6C42;</a>&#xFF08;&#x6216;&#x8005;&#x66F4;&#x597D;&#x7684;&#x662F;<a href="https://github.com/Microsoft/nodejstools/labels/easy" target="_blank" rel="external">&#x89E3;&#x51B3;&#x4E00;&#x4E2A;&#x6293;&#x4F4F;&#x7684;&#x95EE;&#x9898;</a>&#xFF09;</p>
<p>&#x8BA9;&#x2019;n&#x2019;&#x4E0E;&#x6211;&#x4EEC;&#x7684;VM&#x76F8;&#x4E92;&#x5339;&#x914D;</p>
<p>&#x4F60;&#x6CA1;&#x6709;Windows&#x5417;&#xFF1F;&#x90A3;&#x4E0D;&#x662F;&#x95EE;&#x9898;&#x3002;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x88AB;&#x6B22;&#x8FCE;&#x6765;&#x73A9;Visual Studio&#x4E0A;&#x7684;Node.js&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;Visual Studio Community 2013&#x4E0A;&#x7684;Azure&#x4E0A;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;VM&#x955C;&#x50CF;&#xFF0C;Node.js&#x548C;NTVS&#x90FD;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#xFF0C;&#x5728;&#x8C03;&#x914D;&#x8FD9;&#x4E9B;VM&#x8D44;&#x6E90;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x4E14;&#x628A;&#x5B83;&#x8FD0;&#x884C;&#x5728;NTVS&#x4E0A;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x6211;&#x4EEC;<a href="https://www.visualstudio.com/features/node-js-vs" target="_blank" rel="external">&#x652F;&#x6301;&#x7684;&#x7279;&#x6027;</a>&#x53BB;&#x5B9E;&#x9A8C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x8D26;&#x6237;&#x767B;&#x5F55;&#x5F97;&#x5230;<a href="http://azure.microsoft.com/en-us/" target="_blank" rel="external">Azure&#x95E8;&#x6237;</a>&#xFF08;&#x8BF7;&#x5355;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x4E2D;&#x7684;&#x95E8;&#x6237;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;<a href="http://azure.microsoft.com/en-us/pricing/free-trial/" target="_blank" rel="external">&#x6CE8;&#x518C;</a>&#x4E00;&#x4E2A;&#x514D;&#x8D39;&#x7684;Azure&#x8D26;&#x6237;&#xFF0C;&#x5728;&#x95E8;&#x6237;&#x7684;&#x5DE6;&#x4FA7;&#x9762;&#x677F;&#x4E2D;&#x9009;&#x62E9;&#x865A;&#x62DF;&#x673A;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x70B9;&#x51FB;&#x9875;&#x9762;&#x5E95;&#x90E8;&#x7684;&#x201C;+New&#x201D;&#x521B;&#x5EFA;&#x4E00;&#x53F0;&#x65B0;&#x7684;&#x865A;&#x62DF;&#x673A;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150702/2db932f.png" alt="Create a new VM"></p>
<p><img src="http://taojinke.github.io/img/20150702/2dba446.png" alt="NTVS1.0-VM-Select a VM from the gallery"></p>
<p>&#x5BFC;&#x822A;&#x8FDB;&#x5165;Visual Studio&#x5E76;&#x4E14;&#x9009;&#x62E9;&#x201C;Visual Studio Community 2013 Update 4 with Tools for Node.js&#x201D;&#x3002;&#x73B0;&#x5728;&#x53EA;&#x8981;&#x542F;&#x52A8;Visual Studio &#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x51C6;&#x5907;&#x5F00;&#x59CB;&#x4E86;&#xFF01;</p>
<p><img src="http://taojinke.github.io/img/20150702/2dbab99.png" alt="NTVS1.0-VM-Choose an image"></p>
<p>&#x770B;&#x770B;&#x865A;&#x62DF;&#x53CA;&#x6587;&#x6863;<a href="http://azure.microsoft.com/en-us/documentation/services/virtual-machines/" target="_blank" rel="external">&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x8C03;&#x914D;&#x4F60;&#x7684;&#x865A;&#x62DF;&#x673A;</a>&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x5728;Azure&#x4E0A;&#x7684;VMs&#x6216;&#x8005;<a href="https://www.visualstudio.com/en-us/features/node-js-vs.aspx" target="_blank" rel="external">&#x4ECA;&#x65E5;&#x4E0B;&#x8F7D;</a>&#x4E0A;&#x7684;&#xFF01;&#x8BA9;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x505A;&#x901A;&#x8FC7;<a href="https://github.com/Microsoft/nodejstools/issues?q=is%3Aissue+is%3Aopen" target="_blank" rel="external">&#x5728;GitHub&#x586B;&#x5199;&#x95EE;&#x9898;</a>&#xFF0C;&#x6216;&#x8005;&#x5230;&#x6211;&#x4EEC;&#x7684;<a href="https://twitter.com/NT4VS" target="_blank" rel="external">Twitter</a>&#x4E0A;&#x9AD8;&#x8BC9;&#x6211;&#x4EEC;.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a><a href="/tags/GitHub/">GitHub</a><a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2dc73cb/" title="nodejs爬虫数据抓取乱码问题总结 -" itemprop="url">nodejs爬虫数据抓取乱码问题总结 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="&#x4E00;&#x3001;&#x975E;UTF-8&#x9875;&#x9762;&#x5904;&#x7406;">&#x4E00;&#x3001;&#x975E;UTF-8&#x9875;&#x9762;&#x5904;&#x7406;</h2><h2 id="1-&#x80CC;&#x666F;">1.&#x80CC;&#x666F;</h2><p>windows-1251&#x7F16;&#x7801;</p>
<p>&#x6BD4;&#x5982;&#x4FC4;&#x8BED;&#x7F51;&#x7AD9;&#xFF1A; <a href="https://vk.com/cciinniikk" target="_blank" rel="external">https://vk.com/cciinniikk</a></p>
<p>&#x53EF;&#x803B;&#x5730;&#x53D1;&#x73B0;&#x662F;&#x8FD9;&#x79CD;&#x7F16;&#x7801;</p>
<p><img src="http://taojinke.github.io/img/20150702/2dc4a4a.png" alt=""></p>
<p>&#x6240;&#x6709;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8BF4;&#x7684;&#x662F; Windows-1251&#xFF08;cp1251&#xFF09;&#x7F16;&#x7801;&#x4E0E;utf-8&#x7F16;&#x7801;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x5982; gbk&#x5C31;&#x5148;&#x4E0D;&#x8003;&#x8651;&#x5728;&#x5185;&#x4E86;~</p>
<h2 id="2-&#x89E3;&#x51B3;&#x65B9;&#x6848;">2.&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><h4 id="1-">1.</h4><h4 id="&#x4F7F;&#x7528;js&#x539F;&#x751F;&#x7F16;&#x7801;&#x8F6C;&#x6362;">&#x4F7F;&#x7528;js&#x539F;&#x751F;&#x7F16;&#x7801;&#x8F6C;&#x6362;</h4><p>&#x4F46;&#x662F;&#x6211;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x627E;&#x5230;&#x529E;&#x6CD5;&#x54C8;..</p>
<p>&#x5982;&#x679C;&#x662F;utf-8&#x8F6C;window-1251&#x8FD8;&#x53EF;&#x4EE5; <a href="http://stackoverflow.com/questions/2696481/encoding-conversation-utf-8-to-1251-in-javascript" target="_blank" rel="external">http://stackoverflow.com/questions/2696481/encoding-conversation-utf-8-to-1251-in-javascript</a></p>
<pre><code><span class="keyword">var</span> DMap = {<span class="number">0</span>: <span class="number">0</span>, <span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">3</span>, <span class="number">4</span>: <span class="number">4</span>, <span class="number">5</span>: <span class="number">5</span>, <span class="number">6</span>: <span class="number">6</span>, <span class="number">7</span>: <span class="number">7</span>, <span class="number">8</span>: <span class="number">8</span>, <span class="number">9</span>: <span class="number">9</span>, <span class="number">10</span>: <span class="number">10</span>, <span class="number">11</span>: <span class="number">11</span>, <span class="number">12</span>: <span class="number">12</span>, <span class="number">13</span>: <span class="number">13</span>, <span class="number">14</span>: <span class="number">14</span>, <span class="number">15</span>: <span class="number">15</span>, <span class="number">16</span>: <span class="number">16</span>, <span class="number">17</span>: <span class="number">17</span>, <span class="number">18</span>: <span class="number">18</span>, <span class="number">19</span>: <span class="number">19</span>, <span class="number">20</span>: <span class="number">20</span>, <span class="number">21</span>: <span class="number">21</span>, <span class="number">22</span>: <span class="number">22</span>, <span class="number">23</span>: <span class="number">23</span>, <span class="number">24</span>: <span class="number">24</span>, <span class="number">25</span>: <span class="number">25</span>, <span class="number">26</span>: <span class="number">26</span>, <span class="number">27</span>: <span class="number">27</span>, <span class="number">28</span>: <span class="number">28</span>, <span class="number">29</span>: <span class="number">29</span>, <span class="number">30</span>: <span class="number">30</span>, <span class="number">31</span>: <span class="number">31</span>, <span class="number">32</span>: <span class="number">32</span>, <span class="number">33</span>: <span class="number">33</span>, <span class="number">34</span>: <span class="number">34</span>, <span class="number">35</span>: <span class="number">35</span>, <span class="number">36</span>: <span class="number">36</span>, <span class="number">37</span>: <span class="number">37</span>, <span class="number">38</span>: <span class="number">38</span>, <span class="number">39</span>: <span class="number">39</span>, <span class="number">40</span>: <span class="number">40</span>, <span class="number">41</span>: <span class="number">41</span>, <span class="number">42</span>: <span class="number">42</span>, <span class="number">43</span>: <span class="number">43</span>, <span class="number">44</span>: <span class="number">44</span>, <span class="number">45</span>: <span class="number">45</span>, <span class="number">46</span>: <span class="number">46</span>, <span class="number">47</span>: <span class="number">47</span>, <span class="number">48</span>: <span class="number">48</span>, <span class="number">49</span>: <span class="number">49</span>, <span class="number">50</span>: <span class="number">50</span>, <span class="number">51</span>: <span class="number">51</span>, <span class="number">52</span>: <span class="number">52</span>, <span class="number">53</span>: <span class="number">53</span>, <span class="number">54</span>: <span class="number">54</span>, <span class="number">55</span>: <span class="number">55</span>, <span class="number">56</span>: <span class="number">56</span>, <span class="number">57</span>: <span class="number">57</span>, <span class="number">58</span>: <span class="number">58</span>, <span class="number">59</span>: <span class="number">59</span>, <span class="number">60</span>: <span class="number">60</span>, <span class="number">61</span>: <span class="number">61</span>, <span class="number">62</span>: <span class="number">62</span>, <span class="number">63</span>: <span class="number">63</span>, <span class="number">64</span>: <span class="number">64</span>, <span class="number">65</span>: <span class="number">65</span>, <span class="number">66</span>: <span class="number">66</span>, <span class="number">67</span>: <span class="number">67</span>, <span class="number">68</span>: <span class="number">68</span>, <span class="number">69</span>: <span class="number">69</span>, <span class="number">70</span>: <span class="number">70</span>, <span class="number">71</span>: <span class="number">71</span>, <span class="number">72</span>: <span class="number">72</span>, <span class="number">73</span>: <span class="number">73</span>, <span class="number">74</span>: <span class="number">74</span>, <span class="number">75</span>: <span class="number">75</span>, <span class="number">76</span>: <span class="number">76</span>, <span class="number">77</span>: <span class="number">77</span>, <span class="number">78</span>: <span class="number">78</span>, <span class="number">79</span>: <span class="number">79</span>, <span class="number">80</span>: <span class="number">80</span>, <span class="number">81</span>: <span class="number">81</span>, <span class="number">82</span>: <span class="number">82</span>, <span class="number">83</span>: <span class="number">83</span>, <span class="number">84</span>: <span class="number">84</span>, <span class="number">85</span>: <span class="number">85</span>, <span class="number">86</span>: <span class="number">86</span>, <span class="number">87</span>: <span class="number">87</span>, <span class="number">88</span>: <span class="number">88</span>, <span class="number">89</span>: <span class="number">89</span>, <span class="number">90</span>: <span class="number">90</span>, <span class="number">91</span>: <span class="number">91</span>, <span class="number">92</span>: <span class="number">92</span>, <span class="number">93</span>: <span class="number">93</span>, <span class="number">94</span>: <span class="number">94</span>, <span class="number">95</span>: <span class="number">95</span>, <span class="number">96</span>: <span class="number">96</span>, <span class="number">97</span>: <span class="number">97</span>, <span class="number">98</span>: <span class="number">98</span>, <span class="number">99</span>: <span class="number">99</span>, <span class="number">100</span>: <span class="number">100</span>, <span class="number">101</span>: <span class="number">101</span>, <span class="number">102</span>: <span class="number">102</span>, <span class="number">103</span>: <span class="number">103</span>, <span class="number">104</span>: <span class="number">104</span>, <span class="number">105</span>: <span class="number">105</span>, <span class="number">106</span>: <span class="number">106</span>, <span class="number">107</span>: <span class="number">107</span>, <span class="number">108</span>: <span class="number">108</span>, <span class="number">109</span>: <span class="number">109</span>, <span class="number">110</span>: <span class="number">110</span>, <span class="number">111</span>: <span class="number">111</span>, <span class="number">112</span>: <span class="number">112</span>, <span class="number">113</span>: <span class="number">113</span>, <span class="number">114</span>: <span class="number">114</span>, <span class="number">115</span>: <span class="number">115</span>, <span class="number">116</span>: <span class="number">116</span>, <span class="number">117</span>: <span class="number">117</span>, <span class="number">118</span>: <span class="number">118</span>, <span class="number">119</span>: <span class="number">119</span>, <span class="number">120</span>: <span class="number">120</span>, <span class="number">121</span>: <span class="number">121</span>, <span class="number">122</span>: <span class="number">122</span>, <span class="number">123</span>: <span class="number">123</span>, <span class="number">124</span>: <span class="number">124</span>, <span class="number">125</span>: <span class="number">125</span>, <span class="number">126</span>: <span class="number">126</span>, <span class="number">127</span>: <span class="number">127</span>, <span class="number">1027</span>: <span class="number">129</span>, <span class="number">8225</span>: <span class="number">135</span>, <span class="number">1046</span>: <span class="number">198</span>, <span class="number">8222</span>: <span class="number">132</span>, <span class="number">1047</span>: <span class="number">199</span>, <span class="number">1168</span>: <span class="number">165</span>, <span class="number">1048</span>: <span class="number">200</span>, <span class="number">1113</span>: <span class="number">154</span>, <span class="number">1049</span>: <span class="number">201</span>, <span class="number">1045</span>: <span class="number">197</span>, <span class="number">1050</span>: <span class="number">202</span>, <span class="number">1028</span>: <span class="number">170</span>, <span class="number">160</span>: <span class="number">160</span>, <span class="number">1040</span>: <span class="number">192</span>, <span class="number">1051</span>: <span class="number">203</span>, <span class="number">164</span>: <span class="number">164</span>, <span class="number">166</span>: <span class="number">166</span>, <span class="number">167</span>: <span class="number">167</span>, <span class="number">169</span>: <span class="number">169</span>, <span class="number">171</span>: <span class="number">171</span>, <span class="number">172</span>: <span class="number">172</span>, <span class="number">173</span>: <span class="number">173</span>, <span class="number">174</span>: <span class="number">174</span>, <span class="number">1053</span>: <span class="number">205</span>, <span class="number">176</span>: <span class="number">176</span>, <span class="number">177</span>: <span class="number">177</span>, <span class="number">1114</span>: <span class="number">156</span>, <span class="number">181</span>: <span class="number">181</span>, <span class="number">182</span>: <span class="number">182</span>, <span class="number">183</span>: <span class="number">183</span>, <span class="number">8221</span>: <span class="number">148</span>, <span class="number">187</span>: <span class="number">187</span>, <span class="number">1029</span>: <span class="number">189</span>, <span class="number">1056</span>: <span class="number">208</span>, <span class="number">1057</span>: <span class="number">209</span>, <span class="number">1058</span>: <span class="number">210</span>, <span class="number">8364</span>: <span class="number">136</span>, <span class="number">1112</span>: <span class="number">188</span>, <span class="number">1115</span>: <span class="number">158</span>, <span class="number">1059</span>: <span class="number">211</span>, <span class="number">1060</span>: <span class="number">212</span>, <span class="number">1030</span>: <span class="number">178</span>, <span class="number">1061</span>: <span class="number">213</span>, <span class="number">1062</span>: <span class="number">214</span>, <span class="number">1063</span>: <span class="number">215</span>, <span class="number">1116</span>: <span class="number">157</span>, <span class="number">1064</span>: <span class="number">216</span>, <span class="number">1065</span>: <span class="number">217</span>, <span class="number">1031</span>: <span class="number">175</span>, <span class="number">1066</span>: <span class="number">218</span>, <span class="number">1067</span>: <span class="number">219</span>, <span class="number">1068</span>: <span class="number">220</span>, <span class="number">1069</span>: <span class="number">221</span>, <span class="number">1070</span>: <span class="number">222</span>, <span class="number">1032</span>: <span class="number">163</span>, <span class="number">8226</span>: <span class="number">149</span>, <span class="number">1071</span>: <span class="number">223</span>, <span class="number">1072</span>: <span class="number">224</span>, <span class="number">8482</span>: <span class="number">153</span>, <span class="number">1073</span>: <span class="number">225</span>, <span class="number">8240</span>: <span class="number">137</span>, <span class="number">1118</span>: <span class="number">162</span>, <span class="number">1074</span>: <span class="number">226</span>, <span class="number">1110</span>: <span class="number">179</span>, <span class="number">8230</span>: <span class="number">133</span>, <span class="number">1075</span>: <span class="number">227</span>, <span class="number">1033</span>: <span class="number">138</span>, <span class="number">1076</span>: <span class="number">228</span>, <span class="number">1077</span>: <span class="number">229</span>, <span class="number">8211</span>: <span class="number">150</span>, <span class="number">1078</span>: <span class="number">230</span>, <span class="number">1119</span>: <span class="number">159</span>, <span class="number">1079</span>: <span class="number">231</span>, <span class="number">1042</span>: <span class="number">194</span>, <span class="number">1080</span>: <span class="number">232</span>, <span class="number">1034</span>: <span class="number">140</span>, <span class="number">1025</span>: <span class="number">168</span>, <span class="number">1081</span>: <span class="number">233</span>, <span class="number">1082</span>: <span class="number">234</span>, <span class="number">8212</span>: <span class="number">151</span>, <span class="number">1083</span>: <span class="number">235</span>, <span class="number">1169</span>: <span class="number">180</span>, <span class="number">1084</span>: <span class="number">236</span>, <span class="number">1052</span>: <span class="number">204</span>, <span class="number">1085</span>: <span class="number">237</span>, <span class="number">1035</span>: <span class="number">142</span>, <span class="number">1086</span>: <span class="number">238</span>, <span class="number">1087</span>: <span class="number">239</span>, <span class="number">1088</span>: <span class="number">240</span>, <span class="number">1089</span>: <span class="number">241</span>, <span class="number">1090</span>: <span class="number">242</span>, <span class="number">1036</span>: <span class="number">141</span>, <span class="number">1041</span>: <span class="number">193</span>, <span class="number">1091</span>: <span class="number">243</span>, <span class="number">1092</span>: <span class="number">244</span>, <span class="number">8224</span>: <span class="number">134</span>, <span class="number">1093</span>: <span class="number">245</span>, <span class="number">8470</span>: <span class="number">185</span>, <span class="number">1094</span>: <span class="number">246</span>, <span class="number">1054</span>: <span class="number">206</span>, <span class="number">1095</span>: <span class="number">247</span>, <span class="number">1096</span>: <span class="number">248</span>, <span class="number">8249</span>: <span class="number">139</span>, <span class="number">1097</span>: <span class="number">249</span>, <span class="number">1098</span>: <span class="number">250</span>, <span class="number">1044</span>: <span class="number">196</span>, <span class="number">1099</span>: <span class="number">251</span>, <span class="number">1111</span>: <span class="number">191</span>, <span class="number">1055</span>: <span class="number">207</span>, <span class="number">1100</span>: <span class="number">252</span>, <span class="number">1038</span>: <span class="number">161</span>, <span class="number">8220</span>: <span class="number">147</span>, <span class="number">1101</span>: <span class="number">253</span>, <span class="number">8250</span>: <span class="number">155</span>, <span class="number">1102</span>: <span class="number">254</span>, <span class="number">8216</span>: <span class="number">145</span>, <span class="number">1103</span>: <span class="number">255</span>, <span class="number">1043</span>: <span class="number">195</span>, <span class="number">1105</span>: <span class="number">184</span>, <span class="number">1039</span>: <span class="number">143</span>, <span class="number">1026</span>: <span class="number">128</span>, <span class="number">1106</span>: <span class="number">144</span>, <span class="number">8218</span>: <span class="number">130</span>, <span class="number">1107</span>: <span class="number">131</span>, <span class="number">8217</span>: <span class="number">146</span>, <span class="number">1108</span>: <span class="number">186</span>, <span class="number">1109</span>: <span class="number">190</span>}
<span class="function"><span class="keyword">function</span> <span class="title">UnicodeToWin1251</span>(<span class="params">s</span>) </span>{
    <span class="keyword">var</span> L = []
    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&amp;lt;s.length; i++) {
        <span class="keyword">var</span> ord = s.charCodeAt(i)
        <span class="keyword">if</span> (!(ord <span class="keyword">in</span> DMap))
            <span class="keyword">throw</span> &amp;quot;Character &amp;quot;+s.charAt(i)+&amp;quot; isn&amp;apos;t supported by win1251!&amp;quot;
        L.push(<span class="built_in">String</span>.fromCharCode(DMap[ord]))
    }
    <span class="keyword">return</span> L.join(&amp;apos;&amp;apos;)
}
</code></pre><p>&#x55EF;&#xFF0C;&#x8FD9;&#x662F;&#x4E2A;&#x597D;&#x529E;&#x6CD5;&#xFF0C;Dmap&#x50A8;&#x5B58;&#x7684;&#x5176;&#x5B9E;&#x5C31;&#x662F;window-1251&#x7F16;&#x7801;&#x548C;unicode&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB; <a href="http://blog.csdn.net/yao_guet/article/details/7070364" target="_blank" rel="external">http://blog.csdn.net/yao_guet/article/details/7070364</a></p>
<p><img src="http://taojinke.github.io/img/20150702/2dc4a4a.png" alt=""></p>
<p>&#x6240;&#x4EE5;&#x672C;&#x6253;&#x7B97;&#x53EA;&#x8981;&#x53CD;&#x7740;&#x6765;&#x5C31;&#x884C;</p>
<p>&#x4F46;&#x4E00;&#x53CD;&#xFF0C;&#x624D;&#x53D1;&#x73B0; charCodeAt &#x65B9;&#x6CD5;&#x53EA;&#x5BF9; unicode&#x6709;&#x6548;&#xFF0C;&#x5176;&#x4ED6;&#x7F16;&#x7801;&#x662F;&#x5982;&#x4F55;&#x6316;&#x6398;&#x51FA;&#x5176;&#x7801;&#x6BB5;&#xFF1F; &#x56E0;&#x4E3A;&#x7528;&#x7684;&#x662F;nodejs &#x6240;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x6A21;&#x5757;</p>
<h4 id="2-">2.</h4><p>&#x5B89;&#x88C5;&#x4F7F;&#x7528;nodejs&#x6A21;&#x5757;iconv-lite&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x89C1;&#xA0; <a href="https://www.npmjs.com/package/iconv-lite" target="_blank" rel="external">https://www.npmjs.com/package/iconv-lite</a></p>
<p>&#x6309;&#x7167;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x7C7B;&#x4F3C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;</p>
<pre><code><span class="built_in">var</span> iconv <span class="subst">=</span> <span class="keyword">require</span>(<span class="subst">&amp;</span>apos;iconv<span class="attribute">-lite</span><span class="subst">&amp;</span>apos;);
<span class="built_in">var</span> Buffer <span class="subst">=</span> <span class="keyword">require</span>(<span class="subst">&amp;</span>apos;buffer<span class="subst">&amp;</span>apos;)<span class="built_in">.</span>Buffer;
<span class="comment">// Convert from an encoded windows-1251 to utf-8</span>
<span class="built_in">var</span> str1 <span class="subst">=</span> <span class="subst">&amp;</span>apos;<span class="subst">&amp;</span><span class="variable">#x446</span>;<span class="subst">&amp;</span><span class="variable">#x435</span>;<span class="subst">&amp;</span><span class="variable">#x43D</span>;<span class="subst">&amp;</span><span class="variable">#x43D</span>;<span class="subst">&amp;</span><span class="variable">#x43E</span>;<span class="subst">&amp;</span><span class="variable">#x441</span>;<span class="subst">&amp;</span><span class="variable">#x442</span>;<span class="subst">&amp;</span><span class="variable">#x438</span>; <span class="subst">&amp;</span><span class="variable">#x43D</span>;<span class="subst">&amp;</span><span class="variable">#x438</span>; <span class="subst">&amp;</span><span class="variable">#x432</span>; <span class="subst">&amp;</span>apos;;
<span class="built_in">var</span> buf <span class="subst">=</span> <span class="literal">new</span> Buffer(str1);
<span class="built_in">var</span> str2 <span class="subst">=</span> iconv<span class="built_in">.</span>decode(buf, <span class="subst">&amp;</span>apos;win1251<span class="subst">&amp;</span>apos;);

console<span class="built_in">.</span><span class="keyword">log</span>(str2);
</code></pre><p><img src="http://taojinke.github.io/img/20150702/2dc4cbb.png" alt=""></p>
<p>&#x4F46;&#x51FA;&#x5947;&#x5730;&#x53D1;&#x73B0;&#xFF0C;&#x62A5;&#x9519;&#x65E0;win1251&#x7F16;&#x7801;&#xFF1F;&#x6539;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#x51E0;&#x79CD;&#x4E5F;&#x4E0D;&#x884C;..&#x5B98;&#x65B9;&#x5E94;&#x8BE5;&#x6CA1;&#x9519;&#x5427;..&#x4E8E;&#x662F;&#x4F7F;&#x7528; iconv&#x6A21;&#x5757;</p>
<h4 id="3-">3.</h4><p>&#x5B89;&#x88C5;&#x4F7F;&#x7528;nodejs&#x6A21;&#x5757;iconv&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x89C1;&#xA0; <a href="https://github.com/bnoordhuis/node-iconv" target="_blank" rel="external">https://github.com/bnoordhuis/node-iconv</a></p>
<p>&#x4E00;&#x822C;&#x7B80;&#x5355;&#x4F7F;&#x7528;&#x540E;&#xFF0C;&#x8FD8;&#x662F;&#x4E71;&#x7801; &#x5F62;&#x5982;&#xFF1A; &#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405; &#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405; &#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;&#x43F;&#x457;&#x405;</p>
<p><a href="http://stackoverflow.com/questions/8693400/nodejs-convertinf-from-windows-1251-to-utf-8" target="_blank" rel="external">http://stackoverflow.com/questions/8693400/nodejs-convertinf-from-windows-1251-to-utf-8</a></p>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x4E3A;&#x8F6C;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#x8BFB;&#x53D6;&#x6570;&#x636E; encoding&#xFF1A;binary &#xA0;&#xFF08;&#x9ED8;&#x8BA4;&#x7684;encoding&#x662F;utf-8)</p>
<pre><code>request<span class="list">({ 
    uri: website_url,
    method: <span class="keyword">&amp;apos</span><span class="comment">;GET&amp;apos;,</span>
    encoding: <span class="keyword">&amp;apos</span><span class="comment">;binary&amp;apos;</span>
}, function <span class="list">(<span class="keyword">error</span>, response, body)</span> {
    body = new Buffer<span class="list">(<span class="keyword">body</span>, <span class="keyword">&amp;apos</span><span class="comment">;binary&amp;apos;);</span>
    conv = new iconv.Iconv<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;WINDOWS-1251&amp;apos;, &amp;apos;utf8&amp;apos;);</span>
    body = conv.convert<span class="list">(<span class="keyword">body</span>)</span>.toString<span class="list">()</span><span class="comment">;</span>
    }
})</span><span class="comment">;</span></span></span>
</code></pre><p>—&gt;&#x53E6;&#x5916;&#x8981;&#x8BF4;&#x7684;&#x662F;&#xFF0C;iconv&#x7684;&#x4F7F;&#x7528;&#x65F6;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x73AF;&#x5883;&#x4F9D;&#x8D56;&#x7684;&#xFF0C;&#x89C1;&#x5B98;&#x65B9;&#x8BF4;&#x660E;&#xFF1A; <a href="https://github.com/TooTallNate/node-gyp" target="_blank" rel="external">https://github.com/TooTallNate/node-gyp</a></p>
<p><img src="http://taojinke.github.io/img/20150702/2dc4cbb.png" alt=""></p>
<p>&#x6240;&#x4EE5;&#xFF1A;</p>
<p>&#x7B2C;&#x4E00;&#x9700;&#x8981; <a href="https://www.python.org/downloads/" target="_blank" rel="external">python</a> &#x5BF9;&#x5E94;&#x7248;&#x672C;(&#x5982;2.7&#xFF09;&#x7684;&#x652F;&#x6301; &#xFF1B; </p>
<p>&#x7B2C;&#x4E8C;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x7684;&#x652F;&#x6301;&#xFF08;windows&#x4E0B;&#x51FA;&#x9519;&#x6700;&#x591A;&#xFF09;</p>
<p>&#x51FA;&#x9519;&#x7C7B;&#x4F3C;&#x8FD9;&#x79CD;</p>
<p><img src="http://taojinke.github.io/img/20150702/2dc519d.gif" alt=""></p>
<p>node&#xFF0C;&#x5982;&#x65E0;&#x7279;&#x5B9A;&#x7248;&#x672C;&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;vs2005&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#xFF08;&#x6240;&#x4EE5;&#x51FA;&#x9519;&#x63D0;&#x793A;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x4E00;&#x822C;&#x4E3A;&#x6309;&#x7167;vs2005&#x548C;framwork sdk2.0)</p>
<p>&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<p>1.&#x5B89;&#x88C5;visual stutio 2010</p>
<p>2.&#x6307;&#x5B9A;vs&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x7248;&#x672C;&#xFF08;&#x5982;&#x679C;&#x662F;vs2012&#x5C31;&#x662F;2012&#xFF09;</p>
<p>&#xFF08;&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x4F1A;&#x81EA;&#x52A8;&#x6307;&#x5B9A;&#xFF0C;&#x6240;&#x6709;&#x4E5F;&#x4E0D;&#x4E00;&#x5B9A;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4; npm config set msvs_version 2010 —global&#xFF09;</p>
<p><img src="http://taojinke.github.io/img/20150702/2dc540e.pn" alt=""></p>
<p>3.&#x5982;&#x82E5;&#x8FD8;&#x662F;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230; framwork sdk&#xFF0C;&#x53EF;&#x5C06;&#x5176;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#x6DFB;&#x52A0;&#x5230;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x53D8;&#x91CF;path&#x4E2D;</p>
<p>&#xFF08;2010&#x5BF9;&#x5E94;sdk4.0&#x7248;&#x672C;,&#x7C7B;&#x4F3C;&#x7684; 2008 sdj3.5 &#xA0;2012 sdk4.5?&#xFF09;</p>
<p><img src="http://taojinke.github.io/img/20150702/2dc567f.pn" alt=""></p>
<h2 id="&#x4E8C;&#x3001;gzip&#x9875;&#x9762;&#x5904;&#x7406;">&#x4E8C;&#x3001;gzip&#x9875;&#x9762;&#x5904;&#x7406;</h2><p>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x662F;&#x6B63;&#x5E38;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6A21;&#x62DF;&#x8BF7;&#x6C42;&#x56DE;&#x6765;&#x5C31;&#x4E71;&#x7801;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x6D4F;&#x89C8;&#x5668;&#x8BF7;&#x6C42;&#x7684;Response&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x6709;Content-Encoding:gzip&#xFF0C;&#x6781;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x9875;&#x9762;&#x88AB;gzip&#x538B;&#x7F29;&#x4E86;&#xFF0C;&#x8FD9;&#x65F6;&#x8BF7;&#x6C42;&#x65F6;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x53C2;&#x6570;</p>
<p>gzip:true</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2ddbaf1/" title="在业余项目使用 Node.js -" itemprop="url">在业余项目使用 Node.js -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="&#x672C;&#x6587;&#x662F;&#x7FFB;&#x8BD1;&#xFF0C;&#x7248;&#x6743;&#x5F52;&#x539F;&#x4F5C;&#x8005;&#x6240;&#x6709;">&#x672C;&#x6587;&#x662F;&#x7FFB;&#x8BD1;&#xFF0C;&#x7248;&#x6743;&#x5F52;&#x539F;&#x4F5C;&#x8005;&#x6240;&#x6709;</h4><ul>
<li>&#x539F;&#x6587;&#x5730;&#x5740;&#xFF08;original source&#xFF09;&#xFF1A; <a href="http://jkchu.com/2015/06/23/node-js-for-side-projects/" target="_blank" rel="external">http://jkchu.com/2015/06/23/node-js-for-side-projects/</a></li>
</ul>
<p>&#x6709;&#x4E00;&#x79CD;&#x4E1C;&#x897F;&#xFF0C;&#x628A;&#x8F6F;&#x4EF6;&#x884C;&#x4E1A;&#x7684;&#x4EBA;&#x4EEC;&#x8054;&#x7CFB;&#x5728;&#x4E86;&#x4E00;&#x8D77;&#xFF1A;&#x6211;&#x4EEC;&#x559C;&#x6B22;&#x521B;&#x9020;&#x80FD;&#x591F;&#x8FD0;&#x884C;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x3001;&#x6216;&#x521A;&#x597D;&#x7B26;&#x5408;&#x9884;&#x671F;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x662F;&#x6700;&#x8BA9;&#x4EBA;&#x6EE1;&#x610F;&#x7684;&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x7684;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#xFF08;side projects&#xFF09;&#xFF0C;&#x6211;&#x70ED;&#x7231;&#x5B66;&#x4E60;&#x65B0;&#x6846;&#x67B6;&#x3001;&#x6280;&#x672F;&#x548C;&#x8BED;&#x8A00;&#x3002;&#x4F46;&#x662F;&#x5230;&#x4E86;&#x6700;&#x540E;&#xFF0C;&#x6700;&#x6709;&#x6536;&#x83B7;&#x548C;&#x6B23;&#x6170;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x662F;&#x5B8C;&#x6210;&#x4E86;&#x9879;&#x76EE;&#x5E76;&#x5BF9;&#x5916;&#x53D1;&#x5E03;&#x4E86;&#x67D0;&#x4E9B;&#x4E1C;&#x897F;&#x3002;&#x8001;&#x5B9E;&#x8BB2;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6709;&#x5168;&#x804C;&#x5DE5;&#x4F5C;&#xFF0C; <a href="http://www.labazhou.net/2014/09/work-life-imbalance/" target="_blank" rel="external">&#x62C5;&#x5FC3;&#x953B;&#x70BC;&#x8EAB;&#x4F53;&#x3001;&#x6742;&#x4E8B;&#x548C;&#x53EF;&#x80FD;&#x8FD8;&#x8981;&#x7761;&#x89C9;</a> &#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x5E38;&#x5E38;&#x96BE;&#x4EE5;&#x627E;&#x5230;&#x5B8C;&#x6210;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5F53;&#x6211;&#x8C08;&#x5230;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x7406;&#x89E3;&#x7684;&#x3002;&#x501F;&#x52A9;&#x63D0;&#x524D;&#x89C4;&#x5212;&#xFF0C;&#x6216;&#x8BB8;&#x5229;&#x7528;&#x4E00;&#x4E9B;&#x4E0D;&#x9519;&#x7684;&#x9879;&#x76EE;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x81EA;&#x5DF1;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x6280;&#x672F;&#x6808;&#x600E;&#x4E48;&#x6837;&#xFF1F;&#x5982;&#x679C;&#x5B8C;&#x6210;&#x5E76;&#x53D1;&#x5E03;&#x9879;&#x76EE;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x90A3;&#x4E48;&#x6311;&#x9009;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x8F83;&#x597D;&#x9002;&#x5E94;&#x5FEB;&#x901F;&#x5F00;&#x53D1;&#x7684;&#x6280;&#x672F;&#x6808;&#x5C31;&#x663E;&#x5F97;&#x5341;&#x5206;&#x91CD;&#x8981;&#x4E86;&#x3002; </p>
<p><a href="https://nodejs.org/" target="_blank" rel="external">Node.js</a> &#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x6D41;&#x884C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5E73;&#x53F0;&#xFF0C;&#x7528;&#x4F5C;&#x5F88;&#x591A;&#x73B0;&#x4EE3; web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; web &#x670D;&#x52A1;&#x5668;&#x3002;&#x5728;&#x5F00;&#x53D1; Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x4F60;&#x5C06;&#x4F7F;&#x7528; JavaScript &#x7F16;&#x5199;&#x6240;&#x6709;&#x4E1C;&#x897F;&#xFF0C;&#x8FD8;&#x80FD;&#x591F;&#x5728;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF08;Windows&#x3001;Mac &#x6216; Linux&#xFF09;&#x4E0A;&#x8FD0;&#x884C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;Node.js &#x7531;&#x5927;&#x91CF;&#x7684;&#x9650;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x6A21;&#x5757;&#xFF08;module&#xFF09; &#x548C; &#x5305;&#xFF08;package&#xFF09; &#x7EC4;&#x6210;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x5229;&#x7528;&#x8D77;&#x6765;&#x3002;&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x4F60;&#x6700;&#x597D;&#x53D6;&#x4F60;&#x6240;&#x9700;&#xFF0C;&#x786E;&#x4FDD;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x8F7B;&#x91CF;&#x7EA7;&#x3002;&#x5728;&#x4E00;&#x5929;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4EAB;&#x53D7;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#xFF0C;Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5199;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x6709;&#x4E50;&#x8DA3;&#x3002; </p>
<h3 id="1-Node-js_&#x7A76;&#x7ADF;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;">1.Node.js &#x7A76;&#x7ADF;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3><p>Node.js &#x672C;&#x8EAB;&#x53EA;&#x662F;&#x4E00;&#x79CD;&#x8FD0;&#x884C;&#x65F6;&#x73AF;&#x5883;&#xFF0C;&#x9002;&#x5408;&#x4F7F;&#x7528; JavaScript &#x6765;&#x7F16;&#x5199;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002; Node.js &#x4E0D;&#x662F; JavaScript &#x6846;&#x67B6;&#xFF0C;&#x4F46;&#x662F;&#x5927;&#x90E8;&#x5206; Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x4E86;&#x6846;&#x67B6; &#x3002; <a href="http://expressjs.com/" target="_blank" rel="external">Express.js</a> &#x662F;&#x6700;&#x53D7;&#x6B22;&#x8FCE;&#x7684; Node.js &#x6846;&#x67B6;&#xFF0C;&#x6709;&#x7740;&#x51FA;&#x8272;&#x7684;&#x6587;&#x6863;&#x548C;&#x6D77;&#x91CF;&#x7684;&#x4F18;&#x79C0;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E; Node.js web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6808;&#x800C;&#x8A00;&#xFF0C;&#x4F60;&#x5E94;&#x5B89;&#x88C5; Node.js &#x548C; Express.js &#x6765;&#x8FD0;&#x884C;&#x4F60;&#x7684; web &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FD9;&#x5C06;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x4E2D;&#x95F4;&#x4EBA;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x5728;&#x4F60;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x8FC5;&#x901F;&#x5730;&#x4F20;&#x9012;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x3002; </p>
<h3 id="2-&#x4F60;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;_Node-js_&#x7684;&#x573A;&#x666F;">2.&#x4F60;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; Node.js &#x7684;&#x573A;&#x666F;</h3><p>&#x5728;&#x6211;&#x4EEC;&#x6DF1;&#x5165; Node.js &#x5F00;&#x53D1;&#x7684;&#x7CBE;&#x5F69;&#x90E8;&#x5206;&#x4E4B;&#x524D;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8BF4;&#x6E05;&#x695A;&#x4F60;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; Node.js &#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x8981;&#x5F00;&#x53D1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6D89;&#x53CA;&#x5230; CPU &#x5BC6;&#x96C6;&#x578B;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F60;&#x5C31;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; Node.js&#x3002;Node.js &#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x8981;&#x8017;&#x8D39;&#x592A;&#x957F;&#x65F6;&#x95F4;&#xFF0C;&#x4F1A;&#x62D6;&#x57AE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4EFB;&#x4F55;&#x79CD;&#x7C7B;&#x7684;&#x5927;&#x6570;&#x636E;&#x96C6;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x4E0D;&#x5E94;&#x8BE5;&#x5904;&#x7406;&#x5B83;&#x4EEC;&#x3002;&#x8981;&#x4E48;&#x628A;&#x8FD9;&#x90E8;&#x5206;&#x5DE5;&#x4F5C;&#x8F6C;&#x79FB;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8981;&#x4E48;&#x7C97;&#x66B4;&#x5730;&#x5207;&#x6362;&#x5230;&#x66F4;&#x9002;&#x5408;&#x7684;&#x5E73;&#x53F0;&#x4E0A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x559C;&#x6B22; JavaScript &#x5F00;&#x53D1;&#xFF0C;&#x4F60;&#x5C31;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; Node.js&#x3002;&#x4F60;&#x5E94;&#x8BE5;&#x4EAB;&#x53D7;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x8981;&#x56E0;&#x4E3A;&#x7F51;&#x4E0A;&#x6709;&#x4EBA;&#x544A;&#x8BC9;&#x4F60;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x5C31;&#x628A;&#x4E0D;&#x6109;&#x5FEB;&#x7684;&#x4E1C;&#x897F;&#x5F3A;&#x52A0;&#x7ED9;&#x81EA;&#x5DF1;&#x3002;&#x4F46;&#x662F;&#x5728;&#x4F60;&#x653E;&#x5F03;&#x4E4B;&#x524D;&#xFF0C;&#x542C;&#x6211;&#x628A;&#x8BDD;&#x8BF4;&#x5B8C;&#xFF0C;&#x6211;&#x9047;&#x5230;&#x8FC7;&#x5F88;&#x591A;&#x4EBA;&#xFF0C;&#x4ED6;&#x4EEC;&#x6F20;&#x89C6;&#x7740; JavaScript&#xFF0C;&#x751A;&#x81F3;&#x6CA1;&#x6709;&#x7ED9; JavaScript &#x4E00;&#x4E2A;&#x516C;&#x5E73;&#x7684;&#x673A;&#x4F1A;&#x3002;&#x521A;&#x5F00;&#x59CB;&#x65F6;&#xFF0C;JavaScript &#x8C8C;&#x4F3C;&#x72C2;&#x91CE;&#x3001;&#x96BE;&#x4EE5;&#x9A7E;&#x9A6D;&#xFF0C;&#x4E0D;&#x8FC7;&#x5F53;&#x4F60;&#x5B66;&#x4F1A;&#x4E86;&#x5982;&#x4F55;&#x6B63;&#x786E;&#x5730;&#x4F7F;&#x7528;&#xFF0C;&#x4F60;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x5B83;&#x7684;&#x529B;&#x91CF;&#x6709;&#x591A;&#x5927;&#x4E86;&#x3002;JavaScript &#x662F;&#x5E94;&#x7528;&#x6700;&#x5E7F;&#x6CDB;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E4B;&#x4E00;&#xFF0C;&#x968F;&#x7740; <a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">ECMAScript 6</a> &#x7684;&#x53D1;&#x5E03;&#xFF0C;&#x5B83;&#x5C06;&#x53D8;&#x5F97;&#x66F4;&#x597D;&#x3002; </p>
<h3 id="3-JavaScript_&#x2014;&#x2014;&#x524D;&#x7AEF;&#x548C;&#x540E;&#x7AEF;">3.JavaScript &#x2014;&#x2014;&#x524D;&#x7AEF;&#x548C;&#x540E;&#x7AEF;</h3><p>&#x8BA9;&#x6211;&#x4EEC;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#xFF0C;Node.js &#x6700;&#x5927;&#x5316;&#x4F60;&#x7684;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#x751F;&#x4EA7;&#x529B;&#x7684;&#x65B9;&#x5F0F;&#x3002;JavaScript &#x5DF2;&#x7ECF;&#x63A5;&#x7BA1;&#x4E86;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x4E0D;&#x518D;&#x5355;&#x7EAF;&#x7528;&#x4E8E;&#x7410;&#x788E;&#x529F;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x5F88;&#x591A;&#x73B0;&#x4EE3; web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FD0;&#x884C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x662F;&#x7531; JavaScript &#x63D0;&#x4F9B;&#x7684;&#x3002;&#x9664;&#x4E86;&#x6539;&#x5584;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x5B83;&#x8FD8;&#x4ECE; web &#x670D;&#x52A1;&#x5668;&#x5206;&#x62C5;&#x4E86;&#x5927;&#x91CF;&#x5DE5;&#x4F5C;&#x3002;&#x8FD8;&#x8BB0;&#x5F97;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x8BA8;&#x8BBA;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5417;&#xFF1F;&#x8BA9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x627F;&#x62C5;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x591F;&#x5145;&#x5206;&#x5229;&#x7528; Node.js &#x7684;&#x6700;&#x5927;&#x529B;&#x91CF;&#x2014;&#x2014;&#x51CF;&#x8F7B;&#x5FEB;&#x6377;&#x7684; I/O&#x3002;</p>
<p>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x5728;&#x524D;&#x540E;&#x7AEF;&#x4E4B;&#x95F4;&#x4F20;&#x64AD;&#xFF1B;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x4E9B; Node.js &#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5E78;&#x8FD0;&#x5730;&#x5728;&#x524D;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x3002;&#x5927;&#x90E8;&#x5206;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5BF9;&#x4E8E;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x7684;&#x6210;&#x672C;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x8BA4;&#x8BC6;&#x3002;&#x4E0D;&#x5F97;&#x4E0D;&#x628A;&#x4F60;&#x7684;&#x601D;&#x7EF4;&#x91CD;&#x65B0;&#x805A;&#x7126;&#x548C;&#x8C03;&#x6574;&#x5728;&#x65B0;&#x4EFB;&#x52A1;&#x3001;&#x65B0;&#x8BED;&#x8A00;&#x3001;&#x4EE5;&#x53CA;&#x65B0;&#x95EE;&#x9898;&#x4E0A;&#xFF0C;&#x5E38;&#x5E38;&#x4F1A;&#x8BA9;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8017;&#x8D39;&#x4E00;&#x4E9B;&#x5B9D;&#x8D35;&#x7684;&#x6709;&#x6548;&#x7387;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x51CF;&#x5C11;&#x4E0A;&#x4E0B;&#x6587;&#x4E4B;&#x95F4;&#x5207;&#x6362;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x4F7F;&#x6211;&#x4EEC;&#x5728;&#x5404;&#x79CD;&#x4EFB;&#x52A1;&#x7684;&#x5904;&#x7406;&#x4E0A;&#x6E38;&#x5203;&#x6709;&#x4F59;&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x4E5F;&#x66F4;&#x52A0;&#x8FC5;&#x901F;&#x3002;</p>
<h3 id="4-JSON&#x2014;&#x2014;&#x6570;&#x636E;&#x4E1B;&#x6797;&#x4E4B;&#x738B;">4.JSON&#x2014;&#x2014;&#x6570;&#x636E;&#x4E1B;&#x6797;&#x4E4B;&#x738B;</h3><p>&#x5BF9;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#xFF0C;JSON&#xFF08;JavaScript Object Notation&#xFF09;&#x3010;&#x6CE8;1&#x3011;&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x4E8B;&#x5B9E;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x3002;&#x6839;&#x636E;&#x6211;&#x5728;&#x5176;&#x5B83;&#x5E73;&#x53F0;&#x4E0A;&#x5F00;&#x53D1; web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7ECF;&#x5386;&#xFF0C;&#x628A;&#x4F60;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x6210;&#x5404;&#x79CD;&#x683C;&#x5F0F;&#x548C;&#x6A21;&#x578B;&#xFF0C;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x662F;&#x76F8;&#x5F53;&#x60CA;&#x4EBA;&#x7684;&#x3002;&#x5BF9;&#x4E8E; Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;JSON &#x53EF;&#x4EE5;&#x7528;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6240;&#x6709;&#x4E09;&#x4E2A;&#x9886;&#x57DF;&#x2014;&#x2014;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x548C;&#x6570;&#x636E;&#x5E93;&#x3002; <a href="https://www.mongodb.org/" target="_blank" rel="external">MongoDB</a> &#x548C; <a href="http://couchdb.apache.org/" target="_blank" rel="external">CouchDB</a> &#x662F;&#x6D41;&#x884C;&#x7684; NoSQL &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F7F;&#x7528; JSON &#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002; <a href="http://www.postgresql.org/" target="_blank" rel="external">PostgreSQL</a> &#xFF0C;&#x4E00;&#x4E2A;&#x6D41;&#x884C;&#x7684;&#x5F00;&#x6E90;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E5F;&#x652F;&#x6301;&#x5B58;&#x50A8; JSON &#x5BF9;&#x8C61;&#x3002;&#x5FAE;&#x8F6F;&#x751A;&#x81F3; <a href="http://blogs.msdn.com/b/jocapc/archive/2015/05/16/json-support-in-sql-server-2016.aspx" target="_blank" rel="external">&#x5BA3;&#x5E03;</a> SQL Server 2016 &#x5C06;&#x652F;&#x6301; JSON&#x3002;&#x6709;&#x5982;&#x6B64;&#x4E30;&#x5BCC;&#x7684;&#x53EF;&#x9009;&#x9879;&#xFF0C;&#x5C31;&#x53EF;&#x8F7B;&#x677E;&#x5730;&#x7ED9;&#x4F60;&#x7684; Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6311;&#x9009;&#x4E00;&#x79CD;&#x53EF;&#x9760;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4EE5;&#x6324;&#x51FA;&#x6BCF;&#x4E00;&#x70B9;&#x751F;&#x4EA7;&#x529B;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x8F6C;&#x6362;&#x3002; </p>
<h3 id="5-&#x6A21;&#x5757;&#x2014;&#x2014;&#x53D6;&#x4F60;&#x6240;&#x9700;">5.&#x6A21;&#x5757;&#x2014;&#x2014;&#x53D6;&#x4F60;&#x6240;&#x9700;</h3><p>&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#x7684;&#x4E00;&#x4E2A;&#x7ECF;&#x9A8C;&#x6CD5;&#x5219;&#x5C31;&#x662F;&#x4FDD;&#x6301;&#x5C0F;&#x800C;&#x4E13;&#x6CE8;&#x3002;&#x8BE5;&#x6CD5;&#x5219;&#x6709;&#x52A9;&#x4E8E;&#x786E;&#x4FDD;&#x771F;&#x6B63;&#x5730;&#x5B8C;&#x6210;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x3002;&#x540C;&#x6837;&#x7684;&#x6982;&#x5FF5;&#x53EF;&#x5728; Node.js &#x9879;&#x76EE;&#x4E2D;&#x627E;&#x5230;&#x2014;&#x2014;&#x4F60;&#x53EA;&#x4F7F;&#x7528;&#x90A3;&#x4E9B;&#x771F;&#x6B63;&#x9700;&#x8981;&#x7684;&#x6A21;&#x5757;&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8DB3;&#x591F;&#x8F7B;&#x91CF;&#x7EA7;&#x3002;&#x548C;&#x5176;&#x5B83;&#x90A3;&#x4E9B;&#x4EE5;&#x4F01;&#x4E1A;&#x4E3A;&#x4E2D;&#x5FC3;&#x7684;&#x5E73;&#x53F0;&#x4E0D;&#x540C;&#xFF0C;&#x4F60;&#x4E0D;&#x4F1A;&#x6709;&#x5927;&#x91CF;&#x6839;&#x672C;&#x7528;&#x4E0D;&#x5230;&#x7684;&#x989D;&#x5916;&#x4E1C;&#x4E1C;&#x3002;&#x4F60;&#x7684;&#x5F00;&#x53D1;&#x548C;&#x90E8;&#x7F72;&#x5C06;&#x66F4;&#x8FC5;&#x901F;&#xFF0C;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5C06;&#x5360;&#x7528;&#x66F4;&#x5C11;&#x7A7A;&#x95F4;&#xFF0C;&#x9879;&#x76EE;&#x91CC;&#x7684;&#x6BCF;&#x6837;&#x4E1C;&#x897F;&#x6070;&#x6070;&#x90FD;&#x662F;&#x4F60;&#x9700;&#x8981;&#x7684;&#xFF0C;&#x4F60;&#x660E;&#x767D;&#x8FD9;&#x4E9B;&#xFF0C;&#x5185;&#x5FC3;&#x611F;&#x5230;&#x5E73;&#x9759;&#x3002; <a href="https://www.npmjs.com/" target="_blank" rel="external">NPM</a> &#xFF08;Node Package Manager&#xFF09;&#x3010;&#x6CE8;2&#x3011;&#x662F; Node.js &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E00;&#x5927;&#x5356;&#x70B9;&#x3002;&#x5B83;&#x8BA9;&#x4F60;&#x7B80;&#x5355;&#x5FEB;&#x6377;&#x5730;&#x8BBF;&#x95EE;&#x6240;&#x6709;&#x516C;&#x5171; Node &#x6A21;&#x5757;&#xFF0C;&#x9009;&#x62E9;&#x8303;&#x56F4;&#x8D85;&#x8FC7;&#x4E86; 150,000 &#x4E2A;&#x5305;&#x3002;&#x51CF;&#x5C11;&#x5F00;&#x53D1;&#x65F6;&#x95F4;&#x3001;&#x5229;&#x7528;&#x5DF2;&#x6709;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x548C;&#x5DE5;&#x5177;&#xFF0C;&#x4ECE;&#x672A;&#x5982;&#x6B64;&#x7B80;&#x5355;&#x8FC7;&#x3002; </p>
<h3 id="6-&#x603B;&#x7ED3;">6.&#x603B;&#x7ED3;</h3><p>Node.js &#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E86;&#x4E0D;&#x8D77;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x5176;&#x9AD8; I/O &#x9700;&#x6C42;&#x800C;&#x771F;&#x6B63;&#x80DC;&#x51FA;&#x7684; web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6253;&#x7B97;&#x5728;&#x4E0B;&#x4E00;&#x4E2A;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#x4F7F;&#x7528; Node.js&#xFF0C;&#x5C31;&#x5C3D;&#x91CF;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7684; web &#x670D;&#x52A1;&#x5668; API&#xFF0C;&#x4EE5;&#x6700;&#x5C0F;&#x5316;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;&#x771F;&#x6B63;&#x8D1F;&#x8F7D;&#x3002;Node.js &#x6781;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5B66;&#x4E60;&#x548C;&#x638C;&#x63E1;&#x8D77;&#x6765;&#xFF0C;&#x76F8;&#x5BF9;&#x5BB9;&#x6613;&#x4E9B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x5462;&#xFF1F;</p>
<h3 id="7-&#x6211;&#x7684;&#x4E0B;&#x4E00;&#x6B65;&#x89C4;&#x5212;">7.&#x6211;&#x7684;&#x4E0B;&#x4E00;&#x6B65;&#x89C4;&#x5212;</h3><p>&#x6211;&#x60F3;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x4F18;&#x79C0;&#x8D44;&#x6E90;&#x7684;&#x7B80;&#x5355;&#x6E05;&#x5355;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x638C;&#x63E1; Node.js&#x3002;</p>
<ul>
<li><a href="https://thinkster.io/mean-stack-tutorial/" target="_blank" rel="external">https://thinkster.io/mean-stack-tutorial/</a> &#xFF1A;&#x5B83;&#x662F;&#x5BF9;&#x6211;&#x5E2E;&#x52A9;&#x6700;&#x5927;&#x7684;&#x6559;&#x7A0B;&#x3002;&#x8BE5;&#x6559;&#x7A0B;&#x7ED3;&#x6784;&#x7CBE;&#x5999;&#xFF0C;&#x8986;&#x76D6;&#x4E86;&#x6781;&#x6709;&#x4EF7;&#x503C;&#x7684;&#x6D77;&#x91CF;&#x5185;&#x5BB9;&#x3002;&#x8BE5;&#x6559;&#x7A0B;&#x514D;&#x8D39;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x8FD8;&#x80FD;&#x4ED8;&#x8D39;&#xFF0C;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x6E90;&#x4EE3;&#x7801;&#x548C;&#x89C6;&#x9891;&#xFF08;&#x5F53;&#x65F6;&#x6211;&#x4E3A;&#x6E90;&#x4EE3;&#x7801;&#x652F;&#x4ED8;&#x4E86; 25 &#x7F8E;&#x5143;&#xFF0C;&#x4E0D;&#x8FC7;&#x4ED6;&#x4EEC;&#x597D;&#x50CF;&#x53D8;&#x6210;&#x4E86;&#x6BCF;&#x6708; 20 &#x7F8E;&#x5143;&#x7684;&#x8BA2;&#x9605;&#xFF0C;&#x5C31;&#x53EF;&#x770B;&#x5230;&#x4ED6;&#x4EEC;&#x7684;&#x6240;&#x6709;&#x6559;&#x7A0B;&#xFF09;&#x3002;</li>
<li><p><a href="http://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js" target="_blank" rel="external">http://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js</a> &#xFF1A;&#x4E00;&#x7BC7;&#x5199;&#x5F97;&#x4E0D;&#x9519;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x7406;&#x89E3;&#x4E86; Node.js &#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;&#x3002;</p>
</li>
<li><p>&#x6CE8;1&#xFF1A;JSON&#xFF08;JavaScript Object Notation&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x7531;&#x9053;&#x683C;&#x62C9;&#x65AF;&#xB7;&#x514B;&#x7F57;&#x514B;&#x798F;&#x7279;&#x6784;&#x60F3;&#x8BBE;&#x8BA1;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x8BED;&#x8A00;&#xFF0C;&#x4EE5;&#x6587;&#x5B57;&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x4E14;&#x6613;&#x4E8E;&#x8BA9;&#x4EBA;&#x9605;&#x8BFB;&#x3002;&#x5C3D;&#x7BA1;JSON&#x662F;Javascript&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#xFF0C;&#x4F46;JSON&#x662F;&#x72EC;&#x7ACB;&#x4E8E;&#x8BED;&#x8A00;&#x7684;&#x6587;&#x672C;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x4E14;&#x91C7;&#x7528;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;C&#x8BED;&#x8A00;&#x5BB6;&#x65CF;&#x7684;&#x4E00;&#x4E9B;&#x4E60;&#x60EF;&#x3002; <a href="https://zh.wikipedia.org/wiki/JSON" target="_blank" rel="external">https://zh.wikipedia.org/wiki/JSON</a></p>
</li>
<li>&#x6CE8;2&#xFF1A;Node&#x5305;&#x7BA1;&#x7406;&#x5668;&#xFF08;Node Package Manager&#xFF09;&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;javascript&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x9ED8;&#x8BA4;&#x73AF;&#x5883;&#x4E3A;Node.js&#xFF0C;&#x4ECE;Node.js0.6.3&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;npm&#x88AB;&#x81EA;&#x52A8;&#x9644;&#x5E26;&#x5728;&#x5B89;&#x88C5;&#x5305;&#x4E2D;&#x3002; <a href="https://zh.wikipedia.org/wiki/Node%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8" target="_blank" rel="external">https://zh.wikipedia.org/wiki/Node%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/2ddebc5/" title="Limiting Parallelism In Meteor -" itemprop="url">Limiting Parallelism In Meteor -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:01:12.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> In thelatest blog post we&apos;ve touched the topic of parallelism in the <a href="https://www.meteor.com/" target="_blank" rel="external">Meteor framework</a> using <a href="https://github.com/laverdet/node-fibers" target="_blank" rel="external">node-fibers</a> . We&apos;ve shown how to do multiple HTTP requests at the same time. </p>
<p>As we&apos;ve seen, unbounded parallelism in Meteor is relatively easy. There are, however, cases when you wish to limit the degree of concurrency (akin to async&apos;s <a href="https://github.com/caolan/async#eachSeries" target="_blank" rel="external">eachSeries</a> ). For example when issuing a lot of HTTP requests or accessing the file system; there&apos;s only so much open files and/or sockets one can have at the same time. How would one do that with blocking fibers? </p>
<p>Turns out it&apos;s not that hard either! Let&apos;s have a look at a simple implementation. What we want is something like this:</p>
<pre><code>Future.task(() =&amp;<span class="keyword">gt</span>; {  
  <span class="regexp">//</span> Call <span class="string">`getRandomGif`</span> <span class="number">50</span> <span class="keyword">times</span> but <span class="keyword">use</span> max <span class="number">5</span> connections at the same <span class="keyword">time</span>.
  <span class="keyword">return</span> eachWithLimit(<span class="number">_</span>.<span class="keyword">times</span>(<span class="number">50</span>, () =&amp;<span class="keyword">gt</span>; getRandomGif), <span class="number">5</span>);
}).resolve(() =&amp;<span class="keyword">gt</span>; console.<span class="keyword">log</span>(&amp;apos;I have a lot of GIFs now.&amp;apos;))
</code></pre><p>where getRandomGif returns a future for the result of HTTP GET request to a service that returns random GIFs. Now this here&apos;s a simple way to implement eachWithLimit : </p>
<pre><code>const eachWithLimit = (futureFuns, limit = Number.MAX_VALUE) =&amp;gt; {  
  <span class="variable"><span class="keyword">var</span> info</span> = {
    blockedTasks: [],
    futures: [],
    running: <span class="number">0</span>,
    limit
  }

  <span class="comment">// Queue up our tasks.</span>
  futureFuns.forEach((<span class="function"><span class="keyword">fun</span>) =&amp;gt; {</span>
    addTask(<span class="function"><span class="keyword">fun</span>, info)</span>
  });

  <span class="comment">// Wait for the results.</span>
  let fut, results = [];
  <span class="keyword">while</span> (fut = info.futures.shift()) {
    results.push(fut.wait());
  }

  <span class="keyword">return</span> results;
};
</code></pre><p>And here&apos;s how we could implement the addTask function that takes care of scheduling and running the actual parallel jobs. </p>
<pre><code><span class="variable"><span class="keyword">var</span> addTask</span> = (<span class="function"><span class="keyword">fun</span>, info) =&amp;gt; {  </span>
  <span class="keyword">if</span> (info.running &amp;gt;= info.limit) {
    <span class="comment">// We&amp;apos;ve hit the concurrency limit. Wait up.</span>
    info.blockedTasks.push(<span class="function"><span class="keyword">fun</span>);</span>
    <span class="keyword">return</span>;
  }

  ++info.running;

  <span class="comment">// Run the task in a future.</span>
  let fut = <span class="function"><span class="title">fun</span><span class="params">()</span>;</span>
  info.futures.push(fut);

  <span class="comment">// Wait for the task to finish.</span>
  fut.resolve((err, <span class="variable"><span class="keyword">val</span>)</span> =&amp;gt; {
    --info.running;
    <span class="comment">// Schedule the next waiting task in the queue.</span>
    <span class="keyword">if</span> (info.blockedTasks.length &amp;gt; <span class="number">0</span>) {
      addTask(info.blockedTasks.shift(), info);
    }
  });
}
</code></pre><p>Everything is pretty straightforward here. We queue up the jobs if we reach the concurrency limit and every time a job is done, we schedule the next one from the blockedTasks queue. When they&apos;re all done, blockedTasks will become empty rendering the while cycle condition in eachWithLimit falsy and returning an array with results. This way we can easily run N jobs in parallel and limit the concurrency to acceptable level. Easy enough right? </p>
<p>For a mature implementation of concurrency throttling with fibers, I recommend you check out the very fine <a href="https://github.com/scriby/asyncblock/blob/master/docs/maxparallel.md" target="_blank" rel="external">asyncblock</a> and <a href="https://github.com/sethyuan/asyncflow/wiki/Tutorial#concurrency-limit" target="_blank" rel="external">asyncflow</a> libraries. </p>
<p>Have fun with Meteor and fibers! I&apos;m <a href="https://twitter.com/tomas_brambora" target="_blank" rel="external">@tomas_brambora</a> . </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Meteor/">Meteor</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/24/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><a class="page-number" href="/page/27/">27</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><a class="extend next" rel="next" href="/page/26/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>472</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>73</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>61</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>52</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>30</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Mac-OS-X/" title="Mac OS X">Mac OS X<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Ubuntu/" title="Ubuntu">Ubuntu<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Kafka/" title="Kafka">Kafka<sup>7</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
