
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/42/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/13be9a9/" title="（一）spring MVC基本概念和流程 -" itemprop="url">（一）spring MVC基本概念和流程 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:51:22.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="MVC_&#x7684;&#x6982;&#x5FF5;_Model_&#xFF08;&#x6A21;&#x578B;&#xFF09;&#xFF1A;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x884C;&#x4E3A;&#x3002;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x4E00;&#x822C;&#x90FD;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF1A;Value_Object&#xFF08;&#x6570;&#x636E;&#xFF09;_&#x548C;_&#x670D;&#x52A1;&#x5C42;&#xFF08;&#x884C;&#x4E3A;&#xFF09;&#x3002;">MVC  &#x7684;&#x6982;&#x5FF5;  Model  &#xFF08;&#x6A21;&#x578B;&#xFF09;&#xFF1A;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x884C;&#x4E3A;&#x3002;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x4E00;&#x822C;&#x90FD;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF1A;Value Object&#xFF08;&#x6570;&#x636E;&#xFF09; &#x548C; &#x670D;&#x52A1;&#x5C42;&#xFF08;&#x884C;&#x4E3A;&#xFF09;&#x3002;</h3><p> View  &#xFF08;&#x89C6;&#x56FE;&#xFF09;&#xFF1A;&#x8D1F;&#x8D23;&#x8FDB;&#x884C;&#x6A21;&#x578B;&#x7684;&#x5C55;&#x793A;&#xFF0C;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;&#x7684;&#x754C;&#x9762;&#x3002;</p>
<p> Controller  &#xFF08;&#x63A7;&#x5236;&#x5668;&#xFF09;&#xFF1A;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#xFF0C;&#x59D4;&#x6258;&#x7ED9;&#x6A21;&#x578B;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#x540E;&#x628A;&#x8FD4;&#x56DE;&#x7684;&#x6A21;&#x578B;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7ED9;&#x89C6;&#x56FE;&#xFF0C;&#x7531;&#x89C6;&#x56FE;&#x8D1F;&#x8D23;&#x5C55;&#x793A;&#xFF0C;&#x8D77;&#x4E86;&#x8C03;&#x5EA6;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<h3 id="spring_MVC">spring MVC</h3><p> Spring MVC  &#x56F4;&#x7ED5;DispatcherServlet&#x8BBE;&#x8BA1;&#x3002;</p>
<p>&#x5904;&#x7406;&#x6D41;&#x7A0B;&#xFF1A;</p>
<ol>
<li>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;</li>
</ol>
<p>&#x5982;&#x679C;&#x5339;&#x914D;DispatcherServlet&#x7684;&#x8BF7;&#x6C42;&#x6620;&#x5C04;&#x8DEF;&#x5F84;(&#x5728;web.xml&#x4E2D;&#x6307;&#x5B9A;)&#xFF0C;Web&#x5BB9;&#x5668;&#x5C06;&#x8BE5;&#x8BF7;&#x6C42;&#x8F6C;&#x4EA4;&#x7ED9;DispatcherServlet&#x5904;&#x7406;&#x3002;</p>
<ol>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x63A5;&#x6536;&#x5230;&#x6B64;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x4FE1;&#x606F;  &#xFF08;URL&#x3001;HTTP&#x65B9;&#x6CD5;&#x3001;&#x8BF7;&#x6C42;&#x62A5;&#x5934;&#x6587;&#x3001;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x3001;Cookie&#x7B49;&#xFF09;  &#x53CA;HandleMapping&#x7684;&#x914D;&#x7F6E;&#x5339;&#x914D;Handler</p>
<p>&#x5339;&#x914D;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;HandlerExecutionChain&#x5BF9;&#x8C61;  &#xFF08;&#x5305;&#x542B;&#x4E00;&#x4E2A;Handler&#x5904;&#x7406;&#x5668;&#x5BF9;&#x8C61;&#x3001;&#x591A;&#x4E2A;HandlerInterceptor&#x62E6;&#x622A;&#x5668;&#xFF09;  &#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x5F97;&#x5230;Handler&#x540E;&#xFF0C;&#x628A;Handler&#x5C01;&#x88C5;&#x4E3A;&#x9002;&#x914D;&#x5668;</p>
<p>&#x4EE5;&#x9002;&#x914D;&#x5668;&#x63A5;&#x53E3;&#x771F;&#x6B63;&#x8C03;&#x7528;&#x4E86;&#x5904;&#x7406;&#x5668;&#x7684;&#x529F;&#x80FD;&#x5904;&#x7406;&#x65B9;&#x6CD5;  &#xFF08;&#x5148;&#x6267;&#x884C;&#x62E6;&#x622A;&#x5668;&#x7684;preHandler&#x65B9;&#x6CD5;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;ModelAndView  &#xFF08;&#x5982;&#x5176;&#x540D;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x89C6;&#x56FE;&#x903B;&#x8F91;&#x540D;&#x548C;&#x6A21;&#x578B;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF09;  &#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x501F;&#x7531;ViewResolver&#x5B8C;&#x6210;&#x903B;&#x8F91;&#x89C6;&#x56FE;&#x540D;&#x5230;&#x771F;&#x5B9E;&#x5BF9;&#x8C61;&#x7684;&#x89E3;&#x6790;&#x5DE5;&#x4F5C;&#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   DispacherServlet  &#x5F97;&#x5230;&#x89C6;&#x56FE;&#x5BF9;&#x8C61;View&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x5BF9;ModelAndView&#x4E2D;&#x7684;&#x6A21;&#x578B;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x3002;</p>
</li>
<li><p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x5BA2;&#x6237;&#x7AEF;&#x5F97;&#x5230;&#x54CD;&#x5E94;  &#xFF08;&#x53EF;&#x80FD;&#x662F;HTML&#x9875;&#x9762;&#x3001;XML&#x3001;JSON&#x4E32;&#x3001;PDF&#x2026;&#x2026;&#xFF09;</p>
</li>
</ol>
<p>&#x6574;&#x7406;&#x81EA;&#x300A;spring 3.x&#x4F01;&#x4E1A;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x5B9E;&#x6218;&#x300B;&#x4EE5;&#x53CA; &#x4E00;&#x4E9B;&#x535A;&#x5BA2;&#x2026;&#x2026;</p>
<p> P.S.  &#x6211;&#x7528;&#x7684;&#x662F; 4</p>
<p>&#x505A;&#x4E86;&#x4E00;&#x4E2A;spring MVC &#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6D41;&#x7A0B;&#x7684;&#x89C6;&#x9891;&#xFF0C; <a href="http://v.youku.com/v_show/id_XMTI1NjE0MjI0MA==.html" target="_blank" rel="external">spring MVC&#x6D41;&#x7A0B;</a></p>
<p> &#x6709;&#x70B9;&#x4E11;&#x4E0D;&#x8FC7;&#x5F88;&#x6E05;&#x695A;&#x5440;  &#xA0;~</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Spring-MVC/">Spring MVC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/13ae6df/" title="Spring REST 异常处理 -" itemprop="url">Spring REST 异常处理 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:51:22.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x4E2D;&#x5199;&#x5230;&#x4E86;Spring MVC&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;SpringMVC&#x6355;&#x83B7;&#x5230;&#x5F02;&#x5E38;&#x4E4B;&#x540E;&#x4F1A;&#x8F6C;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x9519;&#x8BEF;&#x9875;&#x9762;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;REST API &#xFF0C;&#x4E00;&#x822C;&#x53EA;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x548C;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x6BD4;&#x5982;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#xFF0C;&#x53EA;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;500&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;REST API&#x8BBF;&#x95EE;&#xFF0C;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x9875;&#x9762;&#x7684;html&#x4EE3;&#x7801;&#x3002;&#x3002;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#x600E;&#x4E48;&#x505A;&#x5462;, &#x6211;&#x73B0;&#x5728;&#x6240;&#x77E5;&#x9053;&#x7684;&#x5C31;&#x4E24;&#x79CD;&#x505A;&#x6CD5;</p>
<h3 id="&#x901A;&#x8FC7;ResponseEntity">&#x901A;&#x8FC7;ResponseEntity</h3><p>&#x901A;&#x8FC7;ResponseEntity&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;HttpStatus.&#x4E3E;&#x4F8B;&#xFF1A; </p>
<pre><code>@RequestMapping(value<span class="subst">=&amp;</span>quot;/customer<span class="subst">/</span>{id}<span class="subst">&amp;</span>quot; )
<span class="keyword">public</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>; getCustomerById(@PathVariable <span class="built_in">String</span> id)
{
    Customer customer;
    try 
    {
        customer <span class="subst">=</span> customerService<span class="built_in">.</span>getCustomerDetail(id);
    } 
    catch (CustomerNotFoundException e) 
    {
        <span class="keyword">return</span> <span class="literal">new</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>;(HttpStatus<span class="built_in">.</span>NOT_FOUND);
    }

    <span class="keyword">return</span> <span class="literal">new</span> ResponseEntity<span class="subst">&amp;</span><span class="literal">lt</span>;Customer<span class="subst">&amp;</span><span class="literal">gt</span>;(customer,HttpStatus<span class="built_in">.</span>OK);
    }
</code></pre><p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5F97;&#x5728;&#x6BCF;&#x4E2A;RequestMapping &#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x5165;try catch&#x8BED;&#x53E5;&#x5757;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x4E2A;&#x66F4;&#x7B80;&#x5355;&#x70B9;&#x7684;&#x65B9;&#x6CD5;</p>
<h2 id="&#x901A;&#x8FC7;ExceptionHandler&#x6CE8;&#x89E3;">&#x901A;&#x8FC7;ExceptionHandler&#x6CE8;&#x89E3;</h2><p>&#x8FD9;&#x91CC;&#x8DDF;&#x524D;&#x9762;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x89E3;&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;ResponseEntity&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8DF3;&#x8F6C;&#x7684;&#x9875;&#x9762;&#x3002;</p>
<pre><code><span class="annotation">@RequestMapping</span>(value=&amp;quot;/customer/{id}&amp;quot; )
<span class="annotation">@ResponseBody</span>
<span class="keyword">public</span> <span class="function">Customer <span class="title">getCustomerById</span><span class="params">(@PathVariable String id)</span> <span class="keyword">throws</span> CustomerNotFoundException
</span>{
    <span class="function"><span class="keyword">return</span> customerService.<span class="title">getCustomerDetail</span><span class="params">(id)</span></span>;
}

<span class="annotation">@ExceptionHandler</span>(CustomerNotFoundException.class)
<span class="keyword">public</span> ResponseEntity&amp;lt;ClientErrorInformation&amp;gt; rulesForCustomerNotFound(HttpServletRequest req, Exception e) 
{
    ClientErrorInformation <span class="keyword">error</span> = <span class="keyword">new</span> ClientErrorInformation(e.toString(), req.getRequestURI());
    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&amp;lt;ClientErrorInformation&amp;gt;(<span class="keyword">error</span>, HttpStatus.NOT_FOUND);

}
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;&#x8FD9;&#x91CC;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x65E2;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x4E2A;Controller&#x4E2D;&#x5B9A;&#x4E49;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6807;&#x6709;ControllerAdvice&#x6CE8;&#x89E3;&#x7684;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4ECE;&#x800C;&#x4F7F;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x5BF9;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x6709;&#x6548;&#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a><a href="/tags/REST/">REST</a><a href="/tags/Spring-MVC/">Spring MVC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f487ba8/" title="分析一个Java Class文件 -" itemprop="url">分析一个Java Class文件 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:30.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Java&#x6E90;&#x7801;&#x6587;&#x4EF6;TestClass.java&#xFF1A;</p>
<pre><code><span class="keyword">package</span> jvm.chapter6;
<span class="comment">//P166</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestClass</span> </span>{
    <span class="keyword">private</span> <span class="keyword">int</span> m;
    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">inc</span><span class="params">()</span></span>{
        <span class="keyword">return</span> m+<span class="number">1</span>;
    }
}
</code></pre><p>&#x5C55;&#x793A;&#x8FD9;&#x4E2A;Class&#x6587;&#x4EF6;&#x7684;16&#x8FDB;&#x5236;&#x5185;&#x5BB9;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150702/f485e5c.png" alt=""></p>
<p>&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x5206;&#x6790;=&gt;</p>
<p>ca fe ba be &#xFF1A;magic number;</p>
<p>00 00 00 34 : &#x7248;&#x672C;&#x53F7;&#x662F;1.8.0;</p>
<p>00 16: &#x8BF4;&#x660E;&#x5E38;&#x91CF;&#x6C60;&#x6709;21&#x4E2A;&#x5E38;&#x91CF;&#xFF0C;1-21&#xFF0C; index&#x7559;&#x505A;&#x4ED6;&#x7528;&#xFF1B;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x5206;&#x522B;&#x8FD9;21&#x4E2A;&#x5E38;&#x91CF;&#x7684;&#x63CF;&#x8FF0;&#xFF1A;</p>
<p>07/00 02 &#xFF1A;CONSTANT_Class_info &#x5E38;&#x91CF;&#xFF0C;&#x7C7B;&#x540D;&#x7D22;&#x5F15;&#x662F;&#x8BE5;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;2&#x9879;&#xFF1B;</p>
<p>01/00 16/6a 76 6d 2f 63 68 61 70 &#xA0;74 65 72 36 2f 54 65 73 74 43 6c 61 73 73 &#xFF1A;&#x8FD9;&#x662F;&#x8BE5;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;2&#x9879;&#xFF0C;CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x957F;&#x5EA6;&#x662F;22&#xFF08;0x0016&#xFF09;,&#x6B63;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x201C;jvm/chapter6/TestClass&#x201D;&#xFF1B;</p>
<p>07/00 &#xA0;04&#xFF1A;CONSTANT_Class_info &#x5E38;&#x91CF;&#xFF0C;&#x7C7B;&#x540D;&#x7D22;&#x5F15;&#x662F;&#x8BE5;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;4&#x9879;&#xFF1B;</p>
<p>01/00 10/6a 61 76 61 2f 6c 61 6e 67 2f 4f 62 6a 65 63 74:&#x8FD9;&#x662F;&#x8BE5;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;4&#x9879;&#xFF0C;CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x957F;&#x5EA6;&#x662F;16&#xFF08;0x0010&#xFF09;,&#x6B63;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x201C;java/lang/Object&#x201D;&#xFF1B;</p>
<p>01/00 01/6d :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;m&quot;;</p>
<p>01/00 01/49 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;m&quot;;</p>
<p>01/00 06/3c &#xA0;69 6e 69 74 3e :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;&lt;init&gt;&quot;;</p>
<p>01/00 03/28 29 56 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;()V&quot;;</p>
<p>01/00 04/43 6f &#xA0;64 65 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;Code&quot;;</p>
<p>0a/00 03/00 0b: tag=10,&#x8868;&#x793A;CONSTANT_Methodref_info&#x5E38;&#x91CF;&#xFF0C;&#x58F0;&#x660E;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x7C7B;&#x540D;&#x79F0;&#x4F4D;&#x4E8E;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;3&#x9879;&#xFF0C;&#x5373;java/lang/Object&#xFF0C;&#x65B9;&#x6CD5;&#x540D;&#x548C;&#x7C7B;&#x578B;NameAndType=&quot;&lt;init&gt;&quot;:()V&#xFF1B;</p>
<p>0c/00 07/00 08&#xFF1A; &#x63A5;&#x4E0B;&#x6765;tag=12&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x521A;&#x8BF4;&#x9053;&#x7684;CONSTANT_NameAndType_info&#x7C7B;&#x578B;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E24;&#x4E2A;&#x7D22;&#x5F15;&#x5206;&#x522B;&#x6307;&#x5411;&#x65B9;&#x6CD5;&#x540D;&#x548C;&#x63CF;&#x8FF0;&#x7B26;&#x5373;&quot;&lt;init&gt;&quot;&#x548C;&#x201C;()V&#x201D;&#xFF0C;</p>
<p>01/00 0f/4c 69 6e 65 4e 75 6d 62 65 72 54 61 62 6c 65 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;LineNumberTable&quot;;</p>
<p>01/00 12/4c 6f 63 61 6c 56 61 72 69 61 62 6c 65 54 61 &#xA0;62 6c 65 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;LocalVariableTable&quot;;</p>
<p>01/00 04/74 68 &#xA0;69 73 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;this&quot;;</p>
<p>01/00 18/4c 6a 76 6d 2f 63 68 61 70 74 65 72 36 2f 54 65 73 74 43 6c 61 73 73 3b:CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;Ljvm/chapter6/TestClass;&quot;;</p>
<p>01/00 03 69 6e 63 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;inc&quot;;</p>
<p>01/00 03 28 29 49 :CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;()I&quot;;</p>
<p>09/00 01/00 13:&#x4EE3;&#x8868;Fieldref&#x5E38;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x63A5;&#x4E0B;&#x6765;&#x4E24;&#x4E2A;u2&#x5206;&#x522B;&#x8868;&#x793A;&#x58F0;&#x660E;&#x8BE5;&#x5B57;&#x6BB5;&#x7684;&#x7C7B;&#x548C;NameAndType&#x7684;&#x7D22;&#x5F15;&#xFF1B;</p>
<p>0c/00 05/00 06&#xFF1A;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x521A;&#x4F7F;&#x7528;&#x7684;NameAndType&#x5E38;&#x91CF;&#xFF1B;</p>
<p>01/00 0a/53 6f 75 72 63 65 46 69 6c 65 &#xFF1A;CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;SourceFile&quot;;</p>
<p>01 00 0e 54 65 73 74 43 &#xA0;6c 61 73 73 2e 6a 61 76 61&#xFF1A;&#xFF1A;CONSTANT_Utf8_info&#x5E38;&#x91CF;&#xFF0C;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&quot;TestClass.java&quot;;</p>
<p>&#x4E0A;&#x9762;&#x5C31;&#x5206;&#x6790;&#x5B8C;&#x4E86;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;</p>
<p>00 21 : access_flags= ACC_PUBLIC | ACC_SUPER = 0x0021;</p>
<p>00 01 00 03 00 &#xA0;00:&#x7C7B;&#x7D22;&#x5F15; &#x7236;&#x7C7B;&#x7D22;&#x5F15; &#x548C;&#x63A5;&#x53E3;&#x7D22;&#x5F15;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x7B2C;3&#x9879;&#x8868;&#x793A;&#x7684;&#x662F;Object&#xFF0C;&#x8BF4;&#x660E;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;&#x7236;&#x7C7B;&#x5C31;&#x662F;Object,&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;interfaces_count=0;</p>
<p>00 01/00 02/00 05/00 06/00 00: &#x63A5;&#x4E0B;&#x6765;&#x7684;&#x662F;&#x5B57;&#x6BB5;&#x8868;&#x96C6;&#x5408;(fields_info)&#xFF0C;fields_count=1,access_flags=0x0002=ACC_PRIVATE, &#x4EE3;&#x8868;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x7684;name_index=5&#xFF08;&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;5&#x9879;&#x662F;CONSTANT_Utf8_info&#x7C7B;&#x578B;&#x7684;&#x5B57;&#x7B26;&#x4E32;m&#xFF09;&#xFF0C;&#x5B57;&#x6BB5;&#x63CF;&#x8FF0;&#x7B26;descriptor_index=0x0006(&#x5E38;&#x91CF;&#x6C60;&#x7684;&#x7B2C;5&#x9879;&#x662F;CONSTANT_Utf8_info&#x7C7B;&#x578B;&#x7684;&#x5B57;&#x7B26;&#x4E32;I),&#x6700;&#x540E;atributes_count=0,&#x8BF4;&#x660E;&#x4E0D;&#x5305;&#x542B;&#x989D;&#x5916;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x603B;&#x4E0A;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x6B63;&#x662F;&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x6BB5;&#x201C;private int m&#x201D;&#xFF1B;</p>
<p>00 02/00 01/00 &#xA0;07/00 08/00 01/00 09/00 00 00 2f/00 01/00 01/00 &#xA0;00 00 05/2a b7 00 0a b1&#xFF1A;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x662F;&#x65B9;&#x6CD5;&#x96C6;&#x5408;(methods_info)&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#x662F;0x0001=ACC_PUBLIC&#xFF0C;&#x540D;&#x79F0;&#x7D22;&#x5F15;&#x662F;0x0007&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&lt;init&gt;&#xFF0C;&#x63CF;&#x8FF0;&#x7B26;&#x7D22;&#x5F15;&#x503C;&#x662F;0x0008&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&quot;()V&quot;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C5E;&#x6027;&#x8868;&#x8BA1;&#x6570;&#x5668;attributes_count=1,&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x7D22;&#x5F15;&#x662F;0x0009&#x5BF9;&#x5E94;&#x7684;&#x662F;&#x201C;Code&#x201D;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;Code&#x5C5E;&#x6027;&#x8868;&#x7684;&#x7ED3;&#x6784;&#xFF1A;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x957F;&#x5EA6;attribute_length=0x2f;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#x7684;&#x6700;&#x5927;&#x6DF1;&#x5EA6;&#x548C;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x8868;&#x7684;&#x5BB9;&#x91CF;&#x90FD;&#x662F;0x0001&#xFF1B;&#x5B57;&#x8282;&#x7801;&#x6307;&#x4EE4;&#x957F;&#x5EA6;&#x662F;5&#xFF0C;&#x7FFB;&#x8BD1;&#x201C;2a b7 00 0a b1&#x201D;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#xFF1A;</p>
<p>1&#xFF09;&#x8BFB;&#x5165;2a&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x662F;aload_0 &#xFF0C;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x63A8;&#x9001;&#x5230;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#x9876;&#xFF1B;</p>
<p>2&#xFF09;&#x8BFB;&#x5165;b7&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x662F;invokespecial,&#x4F5C;&#x7528;&#x662F;&#x8C03;&#x7528;&#x4EE5;&#x6808;&#x9876;&#x7684;reference&#x7C7B;&#x578B;&#x6240;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x5668;&#x65B9;&#x6CD5; &#x5B9E;&#x4F8B;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5; &#x79C1;&#x6709;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6709;&#x4E00;&#x4E2A;u2&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#x5177;&#x4F53;&#x8C03;&#x7528;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x4E00;&#x4E2A;CONSTANT_Methodref_info&#x7684;&#x5E38;&#x91CF;&#xFF0C;&#x5373;&#x90A3;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#xFF1B;</p>
<p>3)00 0a&#x6B63;&#x662F;&#x4E0A;&#x9762;invokespecial&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;Methodref&#x5E38;&#x91CF;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5E94;&#x8BE5;&#x662F;Object.init()&#x65B9;&#x6CD5;&#xFF1B;</p>
<p>4)b1,&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x662F;return,&#x5E76;&#x4E14;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x662F;oid&#xFF0C;&#x5F53;&#x524D;&#x65B9;&#x6CD5;&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x7ED3;&#x675F;&#x3002;</p>
<p>&#x7EE7;&#x7EED;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;</p>
<p>00 00/00 02/00 0c/00 00 00 06/00 01/00 00/00 03|00 0d/00 00 00 0c/00 01|00 00/00 05/00 0e/00 0f/00 00&#xFF1A;exception_table_length=0,&#x8BE5;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x7136;&#x540E;attributes_count=2&#xFF0C;&#x8BE5;Code&#x5C5E;&#x6027;&#x6709;&#x4FE9;&#x5C5E;&#x6027;&#xFF1A;0x000c&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x201C;LineNumberTable&#x201D;&#xFF0C;attribute_length=6,line_number_table_length=1,&#x5C31;&#x662F;&#x8BB0;&#x5F55;&#x4E86;&#x4E00;&#x5BF9;java&#x6E90;&#x7801;&#x884C;&#x53F7;&#x548C;&#x5B57;&#x8282;&#x7801;&#x884C;&#x53F7;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF08;3&#xFF1A;0&#xFF09;&#xFF1B;0x000d&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x201C;LocalVariableTable&#x201D;&#xFF0C;attribute_length=12,local_variable_table_length=1(&#x4EE3;&#x8868;&#x4E86;&#x4E00;&#x4E2A;&#x6808;&#x5E27;&#x548C;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x5173;&#x8054;&#x5173;&#x7CFB;)&#xFF0C;start_pc=0x0000,length=0x0005&#x8868;&#x5F81;&#x8BE5;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x5728;&#x5B57;&#x8282;&#x7801;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#xFF08;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5185;&#xFF09;&#xFF0C;name_index=0x000e, descriptor_index=0x000f&#x8868;&#x793A;&#x8BE5;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x540D;&#x79F0;&#x53CA;&#x5176;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;&#x5373;&#x4E3A;&#x201C;this&#x201D;, &quot;Ljvm/chapter6/TestClass&quot;;&#x901A;&#x8FC7;javap&#x7684;&#x8F93;&#x51FA;&#x90FD;&#x53EF;&#x4EE5;&#x4E00;&#x76EE;&#x4E86;&#x7136;&#x3002;index=0x0000&#x4EE3;&#x8868;&#x8BE5;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x5728;&#x6808;&#x5E27;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x8868;&#x4E2D;Slot&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x7B2C;&#x4E8C;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;</p>
<p>00 01/00 10/00 11/00 01/00 09/00 00 00 31/00 02/00 01/00 00 00 07/2a b4 00 12 04 60 ac/&#xFF1A;&#x65B9;&#x6CD5;&#x7684;&#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#x662F;0x0001=ACC_PUBLIC&#xFF0C;&#x540D;&#x79F0;&#x7D22;&#x5F15;&#x662F;16&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x201C;inc&#x201D;&#xFF0C;&#x63CF;&#x8FF0;&#x7B26;&#x7D22;&#x5F15;&#x503C;&#x662F;0x0011&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&quot;()I&quot;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C5E;&#x6027;&#x8868;&#x8BA1;&#x6570;&#x5668;attributes_count=1,&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x7D22;&#x5F15;&#x662F;0x0009&#x5BF9;&#x5E94;&#x7684;&#x662F;&#x201C;Code&#x201D;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;Code&#x5C5E;&#x6027;&#x8868;&#x7684;&#x7ED3;&#x6784;&#xFF1A;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x957F;&#x5EA6;attribute_length=0x31;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#x7684;&#x6700;&#x5927;&#x6DF1;&#x5EA6;&#x662F;2&#xFF0C;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x8868;&#x7684;&#x5BB9;&#x91CF;&#x662F;1&#xFF1B;&#x5B57;&#x8282;&#x7801;&#x6307;&#x4EE4;&#x957F;&#x5EA6;&#x662F;7&#xFF0C;&#x7FFB;&#x8BD1;&#x201C;2a b4 00 12 04 60 ac&#x201D;&#x7684;&#x8FC7;&#x7A0B;&#x662F;&#xFF1A;</p>
<p>1&#xFF09;&#x8BFB;&#x5165;2a&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x662F;aload_0 &#xFF0C;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x63A8;&#x9001;&#x5230;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#x9876;&#xFF1B;</p>
<p>2&#xFF09;&#x8BFB;&#x5165;b4&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x662F;getfield,&#x83B7;&#x5F97;&#x5B9E;&#x4F8B;&#x57DF;&#xFF0C;&#x5E76;&#x538B;&#x5165;&#x6808;&#x9876;&#xFF0C;&#x4ED6;&#x9700;&#x8981;&#x53C2;&#x6570;&#x7528;&#x6765;&#x8BF4;&#x660E;&#x628A;&#x54EA;&#x4E2A;&#x53D8;&#x91CF;&#x5165;&#x6808;&#xFF0C;&#x5373;&#x4E0B;&#x9762;&#xFF1B;</p>
<p>3&#xFF09;&#x8BFB;&#x5165;00 12&#xFF0C;&#x7528;&#x6765;&#x6307;&#x660E;getfield &#x54EA;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;Fieldref&#x5E38;&#x91CF;&#xFF0C;&#x201C;jvm/chapter6/TestClass.m:I&#x201D;&#xFF1B;</p>
<p>4&#xFF09;&#x8BFB;&#x5165;04&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x662F;iconst_1,&#x5C06;int&#x7C7B;&#x578B;&#x7684;1&#x63A8;&#x81F3;&#x6808;&#x9876;&#xFF1B;</p>
<p>5&#xFF09;&#x8BFB;&#x5165;60&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x662F;iadd,&#x5C06;&#x6808;&#x9876;&#x4E24;&#x4E2A;int&#x7C7B;&#x578B;&#x7684;&#x6570;&#x503C;&#x76F8;&#x52A0;&#x5E76;&#x628A;&#x7ED3;&#x679C;&#x538B;&#x5165;&#x6808;&#x9876;&#xFF1B;</p>
<p>6)&#x8BFB;&#x5165;ac,&#x5BF9;&#x5E94;&#x7684;&#x6307;&#x4EE4;&#x662F;ireturn,&#x4ECE;&#x5F53;&#x524D;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;int&#xFF0C;&#x7ED3;&#x675F;&#x3002;</p>
<p>&#x540E;&#x9762;&#x7684;&#x4FE9;&#x5C5E;&#x6027;&#x5C31;&#x548C;&#x5206;&#x6790;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#x3002;</p>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x5C31;&#x5206;&#x6790;&#x5B8C;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Class&#x6587;&#x4EF6;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x6E05;&#x6670;&#x4E86;&#x5F88;&#x591A;&#x3002;</p>
<p>&#x9644;&#xFF1A;</p>
<p>Javap TestClass.class&#x7684;&#x7ED3;&#x679C;&#xFF1A;$ javap -verbose TestClass.class</p>
<p>Classfile /home/vonzhou/GitHub/JavaProject/learning-java/bin/jvm/chapter6/TestClass.class</p>
<p>Last modified Apr 29, 2015; size 379 bytes</p>
<p>MD5 checksum 70a67e773b621619d03f9d1b5ac91af6</p>
<p>Compiled from &quot;TestClass.java&quot;</p>
<p>public class jvm.chapter6.TestClass</p>
<p>SourceFile: &quot;TestClass.java&quot;</p>
<p>minor version: 0</p>
<p>major version: 52</p>
<p>flags: ACC_PUBLIC, ACC_SUPER</p>
<p>Constant pool:</p>
<h1 id="1_=_Class_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;#2;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;//_&#xA0;jvm/chapter6/TestClass">1 = Class &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;#2; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;// &#xA0;jvm/chapter6/TestClass</h1><h1 id="2_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_jvm/chapter6/TestClass;">2 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; jvm/chapter6/TestClass;</h1><h1 id="3_=_Class_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;#4;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;//_&#xA0;java/lang/Object">3 = Class &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;#4; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;// &#xA0;java/lang/Object</h1><h1 id="4_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_java/lang/Object;">4 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; java/lang/Object;</h1><h1 id="5_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_m;">5 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; m;</h1><h1 id="6_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_I;">6 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I;</h1><h1 id="7_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&lt;init&gt;;">7 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;init&gt;;</h1><h1 id="8_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_()V;">8 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ()V;</h1><h1 id="9_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_Code;">9 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Code;</h1><h1 id="10_=_Methodref_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;#3-#11;_&#xA0;_&#xA0;_&#xA0;_&#xA0;//_&#xA0;java/lang/Object-&quot;&lt;init&gt;&quot;:()V">10 = Methodref &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;#3.#11; &#xA0; &#xA0; &#xA0; &#xA0;// &#xA0;java/lang/Object.&quot;&lt;init&gt;&quot;:()V</h1><h1 id="11_=_NameAndType_&#xA0;_&#xA0;_&#xA0;_&#xA0;#7:#8;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_//_&#xA0;&quot;&lt;init&gt;&quot;:()V">11 = NameAndType &#xA0; &#xA0; &#xA0; &#xA0;#7:#8; &#xA0; &#xA0; &#xA0; &#xA0; // &#xA0;&quot;&lt;init&gt;&quot;:()V</h1><h1 id="12_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_LineNumberTable;">12 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; LineNumberTable;</h1><h1 id="13_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_LocalVariableTable;">13 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; LocalVariableTable;</h1><h1 id="14_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_this;">14 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; this;</h1><h1 id="15_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_Ljvm/chapter6/TestClass;;">15 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Ljvm/chapter6/TestClass;;</h1><h1 id="16_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_inc;">16 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; inc;</h1><h1 id="17_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_()I;">17 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ()I;</h1><h1 id="18_=_Fieldref_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_#1-#19;_&#xA0;_&#xA0;_&#xA0;_&#xA0;//_&#xA0;jvm/chapter6/TestClass-m:I">18 = Fieldref &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; #1.#19; &#xA0; &#xA0; &#xA0; &#xA0;// &#xA0;jvm/chapter6/TestClass.m:I</h1><h1 id="19_=_NameAndType_&#xA0;_&#xA0;_&#xA0;_&#xA0;#5:#6;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_//_&#xA0;m:I">19 = NameAndType &#xA0; &#xA0; &#xA0; &#xA0;#5:#6; &#xA0; &#xA0; &#xA0; &#xA0; // &#xA0;m:I</h1><h1 id="20_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_SourceFile;">20 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; SourceFile;</h1><h1 id="21_=_Utf8_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_&#xA0;_TestClass-java;">21 = Utf8 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; TestClass.java;</h1><p>{</p>
<p>public jvm.chapter6.TestClass();</p>
<p>flags: ACC_PUBLIC</p>
<p>Code:</p>
<p>stack=1, locals=1, args_size=1</p>
<p>0: aload_0 &#xA0; &#xA0; &#xA0;&#xA0;</p>
<p>1: invokespecial #10; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</p>
<p>4: return &#xA0; &#xA0; &#xA0; &#xA0;</p>
<p>LineNumberTable:</p>
<p>line 3: 0</p>
<p>LocalVariableTable:</p>
<p>Start &#xA0;Length &#xA0;Slot &#xA0;Name &#xA0; Signature</p>
<p>0 &#xA0; &#xA0; &#xA0; 5 &#xA0; &#xA0; &#xA0; 0 &#xA0; &#xA0;this &#xA0; Ljvm/chapter6/TestClass;</p>
<p>public int inc();</p>
<p>flags: ACC_PUBLIC</p>
<p>Code:</p>
<p>stack=2, locals=1, args_size=1</p>
<p>0: aload_0 &#xA0; &#xA0; &#xA0;&#xA0;</p>
<p>1: getfield &#xA0; &#xA0; &#xA0;#18; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;// Field m:I</p>
<p>4: iconst_1 &#xA0; &#xA0; &#xA0;</p>
<p>5: iadd &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;</p>
<p>6: ireturn &#xA0; &#xA0; &#xA0;&#xA0;</p>
<p>LineNumberTable:</p>
<p>line 6: 0</p>
<p>LocalVariableTable:</p>
<p>Start &#xA0;Length &#xA0;Slot &#xA0;Name &#xA0; Signature</p>
<p>0 &#xA0; &#xA0; &#xA0; 7 &#xA0; &#xA0; &#xA0;0 &#xA0; &#xA0; this &#xA0; Ljvm/chapter6/TestClass;</p>
<p>}</p>
<p>&#x4F5C;&#x8005;&#xFF1A;vonzhoufz &#x53D1;&#x8868;&#x4E8E;2015/5/1 9:34:11 <a href="http://blog.csdn.net/vonzhoufz/article/details/45417725" target="_blank" rel="external">&#x539F;&#x6587;&#x94FE;&#x63A5;</a></p>
<p>&#x9605;&#x8BFB;&#xFF1A;66 &#x8BC4;&#x8BBA;&#xFF1A;1 <a href="http://blog.csdn.net/vonzhoufz/article/details/45417725#comments" target="_blank" rel="external">&#x67E5;&#x770B;&#x8BC4;&#x8BBA;</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f482d88/" title="深入JVM内部了解Java线程的创建与执行 -" itemprop="url">深入JVM内部了解Java线程的创建与执行 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:30.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="&#x6DF1;&#x5165;JVM&#x5185;&#x90E8;&#x4E86;&#x89E3;Java&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x6267;&#x884C;">&#x6DF1;&#x5165;JVM&#x5185;&#x90E8;&#x4E86;&#x89E3;Java&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x6267;&#x884C;</h2><p><a href="https://github.com/liuxinglanyue/blog/edit/gh-pages/_posts/2015-05-04-jvm_native_thread.markdown" target="_blank" rel="external">&#x7EA0;&#x9519;</a> 04 May 2015 </p>
<p>&#x9996;&#x5148;&#x79D1;&#x666E;&#x4E0B;linux&#x7EBF;&#x7A0B;&#x77E5;&#x8BC6;&#xFF0C;linux&#x4E0B;&#x6709;&#x4E24;&#x79CD;&#x7EBF;&#x7A0B;&#xFF0C;&#x7528;&#x6237;&#x5C42;&#x7684;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#xFF0C;&#x5185;&#x6838;&#x5C42;&#x7684;&#x5185;&#x6838;&#x7EBF;&#x7A0B;</p>
<p>&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#x7684;&#x8C03;&#x5EA6;&#x662F;&#x4EE5;&#x8FDB;&#x7A0B;&#x4E3A;&#x5355;&#x4F4D;&#x7684;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5206;&#x914D;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x5C31;&#x5F88;&#x5C11;</p>
<p>&#x5185;&#x6838;&#x7EBF;&#x7A0B;&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x7684;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x3001;&#x8C03;&#x5EA6;&#x548C;&#x7BA1;&#x7406;</p>
<p>&#x5BF9;pthread&#x6765;&#x8BF4;&#xFF0C; Linux&#x5185;&#x6838;2.6&#x4E4B;&#x524D;&#x662F;&#x7528;&#x6237;&#x7EBF;&#x7A0B;&#xFF0C;2.6&#x5F00;&#x59CB;&#x6539;&#x4E3A;NPTL&#x3002;</p>
<p>NPTL&#x662F;&#x4E00;&#x4E2A;1*1&#x7684;&#x7EBF;&#x7A0B;&#x5E93;&#xFF0C;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;&#x4F60;&#x4F7F;&#x7528;pthread_create()&#x8C03;&#x7528;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x540E;&#xFF0C;&#x5728;&#x5185;&#x6838;&#x91CC;&#x5C31;&#x76F8;&#x5E94;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x8C03;&#x5EA6;&#x5B9E;&#x4F53;&#xFF0C;&#x5728;linux&#x91CC;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x65B0;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6700;&#x5927;&#x53EF;&#x80FD;&#x7684;&#x7B80;&#x5316;&#x4E86;&#x7EBF;&#x7A0B;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#xFF08;&#x53C2;&#x8003; <a href="http://blog.csdn.net/guosha/article/details/2960186" target="_blank" rel="external">&#x4ECB;&#x7ECD;NPTL</a> &#xFF09; </p>
<p>—————————————————————&#x5206;&#x5272;&#x7EBF;————————————————————————</p>
<p>&#x6267;&#x884C;Thread&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;start()&#x65B9;&#x6CD5;</p>
<pre><code><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>{
    <span class="keyword">if</span> (threadStatus != <span class="number">0</span>)
        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalThreadStateException();
    group.add(<span class="keyword">this</span>);
    <span class="keyword">boolean</span> started = <span class="keyword">false</span>;
    <span class="keyword">try</span> {
        start0();
        started = <span class="keyword">true</span>;
    } <span class="keyword">finally</span> {
        <span class="keyword">try</span> {
            <span class="keyword">if</span> (!started) {
                group.threadStartFailed(<span class="keyword">this</span>);
            }
        } <span class="keyword">catch</span> (Throwable ignore) {
            <span class="comment">/* do nothing. If start0 threw a Throwable then
              it will be passed up the call stack */</span>
        }
    }
}
<span class="keyword">private</span> <span class="keyword">native</span> <span class="function"><span class="keyword">void</span> <span class="title">start0</span><span class="params">()</span></span>;
</code></pre><p>&#x6700;&#x7EC8;&#x4F1A;&#x8C03;&#x7528;native&#x65B9;&#x6CD5;start0()</p>
<p>Jdk&#x672C;&#x5730;&#x5B9E;&#x73B0;</p>
<p>src/share/native/java/lang/Thread.c</p>
<pre><code>static JNINativeMethod methods[] = {
    {&amp;quot;start0&amp;quot;,           &amp;quot;<span class="params">()</span>V&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_StartThread},
    {&amp;quot;stop0&amp;quot;,            &amp;quot;<span class="params">(&amp;quot; OBJ &amp;quot;)</span>V&amp;quot;, <span class="params">(void *)</span>&amp;amp;JVM_StopThread},
    {&amp;quot;isAlive&amp;quot;,          &amp;quot;<span class="params">()</span>Z&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_IsThreadAlive},
    {&amp;quot;suspend0&amp;quot;,         &amp;quot;<span class="params">()</span>V&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_SuspendThread},
    {&amp;quot;resume0&amp;quot;,          &amp;quot;<span class="params">()</span>V&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_ResumeThread},
    {&amp;quot;setPriority0&amp;quot;,     &amp;quot;<span class="params">(I)</span>V&amp;quot;,       <span class="params">(void *)</span>&amp;amp;JVM_SetThreadPriority},
    {&amp;quot;yield&amp;quot;,            &amp;quot;<span class="params">()</span>V&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_Yield},
    {&amp;quot;sleep&amp;quot;,            &amp;quot;<span class="params">(J)</span>V&amp;quot;,       <span class="params">(void *)</span>&amp;amp;JVM_Sleep},
    {&amp;quot;currentThread&amp;quot;,    &amp;quot;<span class="params">()</span>&amp;quot; THD,     <span class="params">(void *)</span>&amp;amp;JVM_CurrentThread},
    {&amp;quot;countStackFrames&amp;quot;, &amp;quot;<span class="params">()</span>I&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_CountStackFrames},
    {&amp;quot;interrupt0&amp;quot;,       &amp;quot;<span class="params">()</span>V&amp;quot;,        <span class="params">(void *)</span>&amp;amp;JVM_Interrupt},
    {&amp;quot;isInterrupted&amp;quot;,    &amp;quot;<span class="params">(Z)</span>Z&amp;quot;,       <span class="params">(void *)</span>&amp;amp;JVM_IsInterrupted},
    {&amp;quot;holdsLock&amp;quot;,        &amp;quot;<span class="params">(&amp;quot; OBJ &amp;quot;)</span>Z&amp;quot;, <span class="params">(void *)</span>&amp;amp;JVM_HoldsLock},
    {&amp;quot;getThreads&amp;quot;,        &amp;quot;<span class="params">()</span>[&amp;quot; THD,   <span class="params">(void *)</span>&amp;amp;JVM_GetAllThreads},
    {&amp;quot;dumpThreads&amp;quot;,      &amp;quot;<span class="params">([&amp;quot; THD &amp;quot;)</span>[[&amp;quot; STE, <span class="params">(void *)</span>&amp;amp;JVM_DumpThreads},
};
</code></pre><p>&#x7136;&#x540E;&#x8C03;&#x7528;JVM_StartThread src/share/vm/prims/jvm.cpp</p>
<pre><code>JVM_ENTRY(<span class="literal">void</span>, JVM_StartThread(JNIEnv<span class="subst">*</span> env, jobject jthread))
  JVMWrapper(<span class="subst">&amp;</span>quot;JVM_StartThread<span class="subst">&amp;</span>quot;);
  JavaThread <span class="subst">*</span>native_thread <span class="subst">=</span> <span class="built_in">NULL</span>;

  <span class="comment">// We cannot hold the Threads_lock when we throw an exception,</span>
  <span class="comment">// due to rank ordering issues. Example:  we might need to grab the</span>
  <span class="comment">// Heap_lock while we construct the exception.</span>
  bool throw_illegal_thread_state <span class="subst">=</span> <span class="literal">false</span>;

  <span class="comment">// We must release the Threads_lock before we can post a jvmti event</span>
  <span class="comment">// in Thread::start.</span>
  {
    <span class="comment">// Ensure that the C++ Thread and OSThread structures aren&amp;apos;t freed before</span>
    <span class="comment">// we operate.</span>
    MutexLocker mu(Threads_lock);

    <span class="comment">// Since JDK 5 the java.lang.Thread threadStatus is used to prevent</span>
    <span class="comment">// re-starting an already started thread, so we should usually find</span>
    <span class="comment">// that the JavaThread is null. However for a JNI attached thread</span>
    <span class="comment">// there is a small window between the Thread object being created</span>
    <span class="comment">// (with its JavaThread set) and the update to its threadStatus, so we</span>
    <span class="comment">// have to check for this</span>
    <span class="keyword">if</span> (java_lang_Thread<span class="tag">::thread</span>(JNIHandles<span class="tag">::resolve_non_null</span>(jthread)) <span class="subst">!=</span> <span class="built_in">NULL</span>) {
      throw_illegal_thread_state <span class="subst">=</span> <span class="literal">true</span>;
    } <span class="keyword">else</span> {
      <span class="comment">// We could also check the stillborn flag to see if this thread was already stopped, but</span>
      <span class="comment">// for historical reasons we let the thread detect that itself when it starts running</span>

      jlong size <span class="subst">=</span>
             java_lang_Thread<span class="tag">::stackSize</span>(JNIHandles<span class="tag">::resolve_non_null</span>(jthread));
      <span class="comment">// Allocate the C++ Thread structure and create the native thread.  The</span>
      <span class="comment">// stack size retrieved from java is signed, but the constructor takes</span>
      <span class="comment">// size_t (an unsigned type), so avoid passing negative values which would</span>
      <span class="comment">// result in really large stacks.</span>
      size_t sz <span class="subst">=</span> size <span class="subst">&amp;</span><span class="literal">gt</span>; <span class="number">0</span> <span class="subst">?</span> (size_t) size : <span class="number">0</span>;
      native_thread <span class="subst">=</span> <span class="literal">new</span> JavaThread(<span class="subst">&amp;</span>amp;thread_entry, sz);

      <span class="comment">// At this point it may be possible that no osthread was created for the</span>
      <span class="comment">// JavaThread due to lack of memory. Check for this situation and throw</span>
      <span class="comment">// an exception if necessary. Eventually we may want to change this so</span>
      <span class="comment">// that we only grab the lock if the thread was created successfully -</span>
      <span class="comment">// then we can also do this check and throw the exception in the</span>
      <span class="comment">// JavaThread constructor.</span>
      <span class="keyword">if</span> (native_thread<span class="subst">-&amp;</span><span class="literal">gt</span>;osthread() <span class="subst">!=</span> <span class="built_in">NULL</span>) {
        <span class="comment">// <span class="doctag"><span class="keyword">Note</span></span>: the current thread is not being used within &amp;quot;prepare&amp;quot;.</span>
        native_thread<span class="subst">-&amp;</span><span class="literal">gt</span>;prepare(jthread);
      }
    }
  }

  <span class="keyword">if</span> (throw_illegal_thread_state) {
    THROW(vmSymbols<span class="tag">::java_lang_IllegalThreadStateException</span>());
  }

  assert(native_thread <span class="subst">!=</span> <span class="built_in">NULL</span>, <span class="subst">&amp;</span>quot;Starting <span class="built_in">null</span> <span class="keyword">thread</span><span class="subst">?&amp;</span>quot;);

  <span class="keyword">if</span> (native_thread<span class="subst">-&amp;</span><span class="literal">gt</span>;osthread() <span class="subst">==</span> <span class="built_in">NULL</span>) {
    <span class="comment">// No one should hold a reference to the &amp;apos;native_thread&amp;apos;.</span>
    delete native_thread;
    <span class="keyword">if</span> (JvmtiExport<span class="tag">::should_post_resource_exhausted</span>()) {
      JvmtiExport<span class="tag">::post_resource_exhausted</span>(
        JVMTI_RESOURCE_EXHAUSTED_OOM_ERROR <span class="subst">|</span> JVMTI_RESOURCE_EXHAUSTED_THREADS,
        <span class="subst">&amp;</span>quot;unable <span class="keyword">to</span> create <span class="literal">new</span> native <span class="keyword">thread</span><span class="subst">&amp;</span>quot;);
    }
    THROW_MSG(vmSymbols<span class="tag">::java_lang_OutOfMemoryError</span>(),
              <span class="subst">&amp;</span>quot;unable <span class="keyword">to</span> create <span class="literal">new</span> native <span class="keyword">thread</span><span class="subst">&amp;</span>quot;);
  }

  <span class="keyword">Thread</span><span class="tag">::start</span>(native_thread);

JVM_END
</code></pre><p>&#x4E0A;&#x9762;&#x65B9;&#x6CD5;&#x91CC;native <em>thread = new JavaThread(&amp;thread</em> entry, sz); &#x521B;&#x5EFA;JavaThread&#xFF0C;sz&#x4E3A;&#x7EBF;&#x7A0B;&#x6808;&#x5927;&#x5C0F; </p>
<p>Thread::start(native_thread);&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;</p>
<p>JavaThread&#x65B9;&#x6CD5;&#x5728;&#xFF1A;src/share/vm/runtime/thread.cpp</p>
<pre><code>JavaThread::JavaThread(ThreadFunction entry_point, <span class="keyword">size_t</span> stack_sz) :
  Thread()
<span class="preprocessor">#ifndef SERIALGC</span>
  , _satb_mark_queue(&amp;amp;_satb_mark_queue_set),
  _dirty_card_queue(&amp;amp;_dirty_card_queue_set)
<span class="preprocessor">#<span class="keyword">endif</span> <span class="comment">// !SERIALGC</span></span>
{
  <span class="keyword">if</span> (TraceThreadEvents) {
    tty-&amp;gt;print_cr(&amp;quot;creating thread %p&amp;quot;, <span class="keyword">this</span>);
  }
  initialize();
  _jni_attach_state = _not_attaching_via_jni;
  set_entry_point(entry_point);
  <span class="comment">// Create the native thread itself.</span>
  <span class="comment">// %<span class="doctag"><span class="keyword">note</span></span> runtime_23</span>
  os::ThreadType <span class="keyword">thr_t</span>ype = os::<span class="keyword">java_t</span>hread;
  <span class="keyword">thr_t</span>ype = entry_point == &amp;amp;<span class="keyword">compiler_t</span>hread_entry ? os::<span class="keyword">compiler_t</span>hread :
                                                     os::<span class="keyword">java_t</span>hread;
  os::<span class="keyword">create_t</span>hread(<span class="keyword">this</span>, <span class="keyword">thr_t</span>ype, stack_sz);
  _safepoint_visible = <span class="keyword">false</span>;
  <span class="comment">// The _osthread may be NULL here because we ran out of memory (too many threads active).</span>
  <span class="comment">// We need to throw and OutOfMemoryError - however we cannot do this here because the caller</span>
  <span class="comment">// may hold a lock and all locks must be unlocked before throwing the exception (throwing</span>
  <span class="comment">// the exception consists of creating the exception object &amp;amp; initializing it, initialization</span>
  <span class="comment">// will leave the VM via a JavaCall and then all locks must be unlocked).</span>
  <span class="comment">//</span>
  <span class="comment">// The thread is still suspended when we reach here. Thread must be explicit started</span>
  <span class="comment">// by creator! Furthermore, the thread must also explicitly be added to the Threads list</span>
  <span class="comment">// by calling Threads:add. The reason why this is not done here, is because the thread</span>
  <span class="comment">// object must be fully initialized (take a look at JVM_Start)</span>
}
</code></pre><p>&#x4E0A;&#x9762;&#x65B9;&#x6CD5;&#x4E2D;os::create <em>thread(this, thr</em> type, stack_sz);&#x8C03;&#x7528;os&#x521B;&#x5EFA;&#x7EBF;&#x7A0B; </p>
<pre><code>void Thread::<span class="operator"><span class="keyword">start</span>(Thread* thread) {
  trace(&amp;quot;</span><span class="operator"><span class="keyword">start</span>&amp;quot;</span>, thread);
  // <span class="operator"><span class="keyword">Start</span> <span class="keyword">is</span> different <span class="keyword">from</span> resume <span class="keyword">in</span> that its safety <span class="keyword">is</span> guaranteed <span class="keyword">by</span> context <span class="keyword">or</span>
  // being called <span class="keyword">from</span> a Java method synchronized <span class="keyword">on</span> the Thread object.
  <span class="keyword">if</span> (!DisableStartThread) {
    <span class="keyword">if</span> (thread-&amp;gt;</span>is_Java_thread()) {
      // Initialize the thread state to RUNNABLE before starting this thread.
      // Can not <span class="operator"><span class="keyword">set</span> it <span class="keyword">after</span> the thread started because we <span class="keyword">do</span> <span class="keyword">not</span> know the
      // exact thread state <span class="keyword">at</span> that <span class="keyword">time</span>. It could be <span class="keyword">in</span> MONITOR_WAIT <span class="keyword">or</span>
      // <span class="keyword">in</span> SLEEPING <span class="keyword">or</span> <span class="keyword">some</span> other state.
      java_lang_Thread::set_thread_status(((JavaThread*)thread)-&amp;gt;</span>threadObj(),
                                          java_lang_Thread::RUNNABLE);
    }
    os::start_thread(thread);
  }
}
</code></pre><p>&#x8FD9;&#x91CC;&#x8C03;&#x7528;os::start_thread(thread);&#x6267;&#x884C;&#x7EBF;&#x7A0B;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x4E0B;os::create_thread&#x7684;&#x5B9E;&#x73B0;</p>
<p>src/os/linux/vm/os_linux.cpp</p>
<p>src/os/bsd/vm/os_bsd.cpp</p>
<p>src/os/posix/vm/os_posix.cpp</p>
<p>src/os/solaris/vm/os_solaris.cpp</p>
<p>src/os/windows/vm/os_windows.cpp</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x770B;&#x4E0B;linux&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4EE3;&#x7801;&#x6709;&#x4E9B;&#x957F;</p>
<p>int ret = pthread_create(&amp;tid, &amp;attr, (void<em> (</em>)(void*)) java_start, thread);</p>
<p>&#x73A9;linux&#x7684;&#x90FD;&#x77E5;&#x9053;pthread.h&#xFF0C;&#x4E0D;&#x591A;&#x8BF4;</p>
<pre><code>bool os<span class="tag">::create_thread</span>(<span class="keyword">Thread</span><span class="subst">*</span> <span class="keyword">thread</span>, ThreadType thr_type, size_t stack_size) {
  assert(<span class="keyword">thread</span><span class="subst">-&amp;</span><span class="literal">gt</span>;osthread() <span class="subst">==</span> <span class="built_in">NULL</span>, <span class="subst">&amp;</span>quot;caller responsible<span class="subst">&amp;</span>quot;);

  <span class="comment">// Allocate the OSThread object</span>
  OSThread<span class="subst">*</span> osthread <span class="subst">=</span> <span class="literal">new</span> OSThread(<span class="built_in">NULL</span>, <span class="built_in">NULL</span>);
  <span class="keyword">if</span> (osthread <span class="subst">==</span> <span class="built_in">NULL</span>) {
    <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="comment">// set the correct thread state</span>
  osthread<span class="subst">-&amp;</span><span class="literal">gt</span>;set_thread_type(thr_type);

  <span class="comment">// Initial state is ALLOCATED but not INITIALIZED</span>
  osthread<span class="subst">-&amp;</span><span class="literal">gt</span>;set_state(ALLOCATED);

  <span class="keyword">thread</span><span class="subst">-&amp;</span><span class="literal">gt</span>;set_osthread(osthread);

  <span class="comment">// init thread attributes</span>
  pthread_attr_t attr;
  pthread_attr_init(<span class="subst">&amp;</span>amp;attr);
  pthread_attr_setdetachstate(<span class="subst">&amp;</span>amp;attr, PTHREAD_CREATE_DETACHED);

  <span class="comment">// stack size</span>
  <span class="keyword">if</span> (os<span class="tag">::Linux</span><span class="tag">::supports_variable_stack_size</span>()) {
    <span class="comment">// calculate stack size if it&amp;apos;s not specified by caller</span>
    <span class="keyword">if</span> (stack_size <span class="subst">==</span> <span class="number">0</span>) {
      stack_size <span class="subst">=</span> os<span class="tag">::Linux</span><span class="tag">::default_stack_size</span>(thr_type);

      switch (thr_type) {
      <span class="keyword">case</span> os<span class="tag">::java_thread</span>:
        <span class="comment">// Java threads use ThreadStackSize which default value can be</span>
        <span class="comment">// changed with the flag -Xss</span>
        assert (JavaThread<span class="tag">::stack_size_at_create</span>() <span class="subst">&amp;</span><span class="literal">gt</span>; <span class="number">0</span>, <span class="subst">&amp;</span>quot;this should be <span class="built_in">set</span><span class="subst">&amp;</span>quot;);
        stack_size <span class="subst">=</span> JavaThread<span class="tag">::stack_size_at_create</span>();
        break;
      <span class="keyword">case</span> os<span class="tag">::compiler_thread</span>:
        <span class="keyword">if</span> (CompilerThreadStackSize <span class="subst">&amp;</span><span class="literal">gt</span>; <span class="number">0</span>) {
          stack_size <span class="subst">=</span> (size_t)(CompilerThreadStackSize <span class="subst">*</span> K);
          break;
        } <span class="comment">// else fall through:</span>
          <span class="comment">// use VMThreadStackSize if CompilerThreadStackSize is not defined</span>
      <span class="keyword">case</span> os<span class="tag">::vm_thread</span>:
      <span class="keyword">case</span> os<span class="tag">::pgc_thread</span>:
      <span class="keyword">case</span> os<span class="tag">::cgc_thread</span>:
      <span class="keyword">case</span> os<span class="tag">::watcher_thread</span>:
        <span class="keyword">if</span> (VMThreadStackSize <span class="subst">&amp;</span><span class="literal">gt</span>; <span class="number">0</span>) stack_size <span class="subst">=</span> (size_t)(VMThreadStackSize <span class="subst">*</span> K);
        break;
      }
    }

    stack_size <span class="subst">=</span> MAX2(stack_size, os<span class="tag">::Linux</span><span class="tag">::min_stack_allowed</span>);
    pthread_attr_setstacksize(<span class="subst">&amp;</span>amp;attr, stack_size);
  } <span class="keyword">else</span> {
    <span class="comment">// let pthread_create() pick the default value.</span>
  }

  <span class="comment">// glibc guard page</span>
  pthread_attr_setguardsize(<span class="subst">&amp;</span>amp;attr, os<span class="tag">::Linux</span><span class="tag">::default_guard_size</span>(thr_type));

  ThreadState state;

  {
    <span class="comment">// Serialize thread creation if we are running with fixed stack LinuxThreads</span>
    bool lock <span class="subst">=</span> os<span class="tag">::Linux</span><span class="tag">::is_LinuxThreads</span>() <span class="subst">&amp;</span>amp;<span class="subst">&amp;</span>amp; <span class="subst">!</span>os<span class="tag">::Linux</span><span class="tag">::is_floating_stack</span>();
    <span class="keyword">if</span> (lock) {
      os<span class="tag">::Linux</span><span class="tag">::createThread_lock</span>()<span class="subst">-&amp;</span><span class="literal">gt</span>;lock_without_safepoint_check();
    }

    pthread_t tid;
    int ret <span class="subst">=</span> pthread_create(<span class="subst">&amp;</span>amp;tid, <span class="subst">&amp;</span>amp;attr, (<span class="literal">void</span><span class="subst">*</span> (<span class="subst">*</span>)(<span class="literal">void</span><span class="subst">*</span>)) java_start, <span class="keyword">thread</span>);

    pthread_attr_destroy(<span class="subst">&amp;</span>amp;attr);

    <span class="keyword">if</span> (ret <span class="subst">!=</span> <span class="number">0</span>) {
      <span class="keyword">if</span> (PrintMiscellaneous <span class="subst">&amp;</span>amp;<span class="subst">&amp;</span>amp; (Verbose <span class="subst">||</span> WizardMode)) {
        perror(<span class="subst">&amp;</span>quot;pthread_create()<span class="subst">&amp;</span>quot;);
      }
      <span class="comment">// Need to clean up stuff we&amp;apos;ve allocated so far</span>
      <span class="keyword">thread</span><span class="subst">-&amp;</span><span class="literal">gt</span>;set_osthread(<span class="built_in">NULL</span>);
      delete osthread;
      <span class="keyword">if</span> (lock) os<span class="tag">::Linux</span><span class="tag">::createThread_lock</span>()<span class="subst">-&amp;</span><span class="literal">gt</span>;unlock();
      <span class="keyword">return</span> <span class="literal">false</span>;
    }

    <span class="comment">// Store pthread info into the OSThread</span>
    osthread<span class="subst">-&amp;</span><span class="literal">gt</span>;set_pthread_id(tid);

    <span class="comment">// Wait until child thread is either initialized or aborted</span>
    {
      Monitor<span class="subst">*</span> sync_with_child <span class="subst">=</span> osthread<span class="subst">-&amp;</span><span class="literal">gt</span>;startThread_lock();
      MutexLockerEx ml(sync_with_child, Mutex<span class="tag">::_no_safepoint_check_flag</span>);
      <span class="keyword">while</span> ((state <span class="subst">=</span> osthread<span class="subst">-&amp;</span><span class="literal">gt</span>;get_state()) <span class="subst">==</span> ALLOCATED) {
        sync_with_child<span class="subst">-&amp;</span><span class="literal">gt</span>;wait(Mutex<span class="tag">::_no_safepoint_check_flag</span>);
      }
    }

    <span class="keyword">if</span> (lock) {
      os<span class="tag">::Linux</span><span class="tag">::createThread_lock</span>()<span class="subst">-&amp;</span><span class="literal">gt</span>;unlock();
    }
  }

  <span class="comment">// Aborted due to thread limit being reached</span>
  <span class="keyword">if</span> (state <span class="subst">==</span> ZOMBIE) {
      <span class="keyword">thread</span><span class="subst">-&amp;</span><span class="literal">gt</span>;set_osthread(<span class="built_in">NULL</span>);
      delete osthread;
      <span class="keyword">return</span> <span class="literal">false</span>;
  }

  <span class="comment">// The thread is returned suspended (in state INITIALIZED),</span>
  <span class="comment">// and is started higher up in the call chain</span>
  assert(state <span class="subst">==</span> INITIALIZED, <span class="subst">&amp;</span>quot;race condition<span class="subst">&amp;</span>quot;);
  <span class="keyword">return</span> <span class="literal">true</span>;
}
</code></pre><p>&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x8D34;&#x4E00;&#x4E0B;</p>
<pre><code><span class="comment">// The first routine called by a new Java thread</span>
<span class="keyword">void</span> JavaThread::run() {
  <span class="comment">// initialize thread-local alloc buffer related fields</span>
  <span class="keyword">this</span>-&amp;gt;<span class="keyword">initialize_t</span>lab();

  <span class="comment">// used to test validitity of stack trace backs</span>
  <span class="keyword">this</span>-&amp;gt;record_base_of_stack_pointer();

  <span class="comment">// Record real stack base and size.</span>
  <span class="keyword">this</span>-&amp;gt;record_stack_base_and_size();

  <span class="comment">// Initialize thread local storage; set before calling MutexLocker</span>
  <span class="keyword">this</span>-&amp;gt;<span class="keyword">initialize_t</span>hread_local_storage();

  <span class="keyword">this</span>-&amp;gt;create_stack_guard_pages();

  <span class="keyword">this</span>-&amp;gt;cache_global_variables();

  <span class="comment">// Thread is now sufficient initialized to be handled by the safepoint code as being</span>
  <span class="comment">// in the VM. Change thread state from _thread_new to _thread_in_vm</span>
  ThreadStateTransition::transition_and_fence(<span class="keyword">this</span>, <span class="keyword">_t</span>hread_new, <span class="keyword">_t</span>hread_in_vm);

  assert(JavaThread::current() == <span class="keyword">this</span>, &amp;quot;sanity check&amp;quot;);
  assert(!Thread::current()-&amp;gt;owns_locks(), &amp;quot;sanity check&amp;quot;);

  DTRACE_THREAD_PROBE(start, <span class="keyword">this</span>);

  <span class="comment">// This operation might block. We call that after all safepoint checks for a new thread has</span>
  <span class="comment">// been completed.</span>
  <span class="keyword">this</span>-&amp;gt;set_active_handles(JNIHandleBlock::allocate_block());

  <span class="keyword">if</span> (JvmtiExport::<span class="keyword">should_post_t</span>hread_life()) {
    JvmtiExport::<span class="keyword">post_t</span>hread_start(<span class="keyword">this</span>);
  }

  EventThreadStart event;
  <span class="keyword">if</span> (event.should_commit()) {
     event.set_javalangthread(java_lang_Thread::thread_id(<span class="keyword">this</span>-&amp;gt;threadObj()));
     event.commit();
  }

  <span class="comment">// We call another function to do the rest so we are sure that the stack addresses used</span>
  <span class="comment">// from there will be lower than the stack base just computed</span>
  thread_main_inner();

  <span class="comment">// <span class="doctag">Note</span>, thread is no longer valid at this point!</span>
}
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a><a href="/tags/线程/">线程</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f4808e9/" title="java程序性能优化 -" itemprop="url">java程序性能优化 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:30.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> <img src="http://taojinke.github.io/img/20150702/f47b376.png" alt=""></p>
<p>  Java&#x7A0B;&#x5E8F;&#x8C03;&#x4F18;&#x5165;&#x95E8;&#x7EA7;&#x6559;&#x7A0B;&#xFF0C;&#x770B;&#x4F3C;&#x5F88;&#x539A;&#xFF0C;&#x5176;&#x5B9E;&#x4E66;&#x5F88;&#x8584;&#xFF0C;&#x56FD;&#x5185;&#x9AD8;&#x624B;&#x5199;&#x7684;&#xFF0C;&#x5F53;&#x7136;&#x6709;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#x6709;&#x6284;&#x88AD;&#x7684;&#x5ACC;&#x7591;&#xFF0C;&#x9002;&#x5408;java&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#x4E0D;&#x592A;&#x8DB3;&#x7684;&#xFF0C;&#xFFFD;&#xFFFD;&#xFFFD;&#x822C;&#x7684;&#x9AD8;&#x624B;&#xFF0C;&#x6B64;&#x7C7B;&#x6280;&#x80FD;&#x5E94;&#x8BE5;&#x5FC5;&#x987B;&#x5177;&#x5907;&#x4E86;&#x3002;&#x6211;&#x770B;&#x7684;&#x65F6;&#x5019;&#x82B1;&#x4E86;&#x4E24;&#x5468;&#xFF0C;&#x603B;&#x7ED3;&#x8D77;&#x6765;&#x5982;&#x4E0B;&#xFF0C;&#x7EAF;&#x5E72;&#x8D27;&#xFF08;&#x4E0D;&#x5305;&#x62EC;JVM&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x4E3A;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;JVM&#x5B66;&#x4E60;&#x770B;&#x300A;  &#x6DF1;&#x5165;&#x7406;&#x89E3;Java&#x865A;&#x62DF;&#x673A; &#x300B;&#xFF09;&#xFF1A;</p>
<ol>
<li><p>&#x5E38;&#x89C1;&#x7684;&#x7CFB;&#x7EDF;&#x74F6;&#x9888;&#x56E0;&#x7D20;&#xFF1A;&#x78C1;&#x76D8;  I/O,  &#x7F51;&#x7EDC;&#x64CD;&#x4F5C;  ,CPU,java  &#x5F02;&#x5E38;&#x6355;&#x83B7;&#x53CA;&#x5904;&#x7406;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x8BFB;&#x5199;&#xFF0C;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;  GC</p>
</li>
<li><p>&#x52A0;&#x901F;&#x6BD4;  Speedup&lt;=1/(F+(1-F)/N),F  &#x4E3A;&#x4E32;&#x884C;&#x8BA1;&#x7B97;&#x7684;&#x6BD4;&#x4F8B;  ,N  &#x4E3A;  CPU  &#x903B;&#x8F91;&#x6570;</p>
</li>
<li><p>&#x8C03;&#x4F18;&#x5C42;&#x6B21;&#xFF1A;  &#x8BBE;&#x8BA1;&#x8C03;&#x4F18;  —-&gt;  &#x4EE3;&#x7801;&#x8C03;&#x4F18;  —-&gt;JVM  &#x53C2;&#x6570;&#x8C03;&#x4F18;  —-&gt;  &#x6570;&#x636E;&#x5E93;&#x8C03;&#x4F18;  —-&gt;OS  &#x8C03;&#x4F18;&#xFF0C;&#x5F53;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x51FA;&#x73B0;&#x74F6;&#x9888;&#x9700;&#x8981;&#x8C03;&#x4F18;&#x65F6;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x6B65;&#x9AA4;&#x662F;&#xFF1A;&#x4EE3;&#x7801;  —-&gt;JVM  &#x53C2;&#x6570;  —-&gt;  &#x6570;&#x636E;&#x5E93;  —-&gt;OS—-&gt;  &#x5E94;&#x7528;&#x67B6;&#x6784;  (  &#x8BBE;&#x8BA1;  )</p>
</li>
<li><p>&#x8BBE;&#x8BA1;&#x8C03;&#x4F18;&#x7684;&#x5E38;&#x89C1;&#x62DB;&#xFFFD;&#xFFFD;&#xFFFD;&#xFF1A;</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1  &#xFF1A;&#x591A;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;  (  &#x5355;&#x4F8B;  ,  &#x4EAB;&#x5143;  ,  &#x89C2;&#x5BDF;&#x8005;  ,  &#x8BBF;&#x95EE;&#x8005;  ,  &#x88C5;&#x9970;&#x8005;  ,  &#x4EE3;&#x7406;&#x7B49;  )</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 2  &#xFF1A;  Buffer/Cache  &#xFF0C;&#x7F13;&#x51B2;  /  &#x7F13;&#x5B58;&#x601D;&#x60F3;</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3  &#xFF1A;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x4EE3;&#x66FF;&#x4E32;&#x884C;  (  &#x8981;&#x6C42;&#x4E00;&#x822C;&#x4E32;&#x884C;&#x95F4;&#x6CA1;&#x6709;&#x56E0;&#x679C;&#x6216;&#x524D;&#x540E;&#x5173;&#x7CFB;  )</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4  &#xFF1A;&#x5E94;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;  (JVM  &#x7EA7;  ,  &#x9700;&#x8981;&#x5904;&#x7406;&#x597D;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;  )</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 5  &#xFF1A;&#x65F6;&#x95F4;  /  &#x7A7A;&#x95F4;&#x7684;&#x8F6C;&#x6362;</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 6  &#xFF1A;&#x4F7F;&#x7528;  ValueObject  &#x51CF;&#x5C11;&#x8BA1;&#x7B97;&#x6216;&#x8BF7;&#x6C42;&#x6B21;&#x6570;</p>
</li>
<li><p>&#x4EE3;&#x7801;&#x4F18;&#x5316;&#x7684;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x5207;&#x5165;&#x70B9;&#xFF1A;</p>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   0):  &#x4E0D;&#x8981;&#x5728;&#x5FAA;&#x73AF;&#x4F53;&#x91CC;&#x5B9A;&#x4E49;&#x5F15;&#x7528;&#x5E76;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;  ,  &#x5C06;&#x5B9A;&#x4E49;&#x5F15;&#x7528;&#x653E;&#x5230;&#x5916;&#x9762;</p>
<p>Object obj = null; </p>
</li>
</ol>
<p>for (int i = 0; i &lt; 10000; ++i) {</p>
<p>  &#xA0;  &#xA0;   (Object)  obj = new Object();</p>
<p> System.out.println(&quot;obj= &quot;+ obj); </p>
<p>}</p>
<p> 1):  &#x907F;&#x514D;&#x91CD;&#x590D;&#x521D;&#x59CB;&#x5316;&#x5BF9;&#x8C61;</p>
<p>public class A {</p>
<p>  &#xA0; private Hashtable table = new Hashtable (); </p>
<p> public A() { &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; table = new Hashtable(); //  &#x5C06;  Hashtable  &#x5BF9;&#x8C61;  table  &#x521D;&#x59CB;&#x5316;&#x4E86;&#x4E24;&#x6B21;</p>
<p> } </p>
<p>}</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1)  &#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#x4F18;&#x5316;&#x7684;&#x51E0;&#x4E2A;&#x5730;&#x65B9;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; a:substring()  &#x65B9;&#x6CD5;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;  ,  &#x4F46;&#x662F;&#x5BB9;&#x6613;&#x5F15;&#x8D77;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x95EE;&#x9898;  ,  &#x56E0;&#x4E3A;&#x4F1A;&#x4FDD;&#x7559;&#x5BF9;&#x539F;&#x4E32;&#x7684;&#x5F15;&#x7528;  ,  &#x6240;&#x4EE5;&#x5EFA;&#x8BAE;&#x7528;  new String(<em>*</em>.substring(  &#x53C2;&#x6570;  ))  &#x7684;&#x6A21;&#x5F0F;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; b:  &#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x622A;&#x53D6;&#x53EF;&#x7528;  split,  &#x4F46;&#x901F;&#x5EA6;&#x5FEB;&#x7684;&#x53EF;&#x4EE5;&#x8003;&#x8651;  StringTokenizer(sun  &#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;  ),  &#x6700;&#x597D;&#x7528;  indexOf+substring  &#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x622A;&#x53D6;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; c:  &#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5F00;&#x5934;  /  &#x7ED3;&#x5C3E;&#x5B50;&#x4E32;&#x5224;&#x65AD;&#x4E00;&#x822C;&#x7528;  startsWith/endsWith,  &#x7531;&#x4E8E;&#x4ED6;&#x4EEC;&#x548C;  split  &#x4E00;&#x6837;&#x662F;&#x57FA;&#x4E8E;&#x6B63;&#x5219;&#x7684;  ,  &#x6240;&#x6709;&#x6700;&#x597D;&#x7528;  charAt  &#x6765;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x66F4;&#x5FEB;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; d:  &#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x76F8;&#x52A0;&#xFF0C;  StringBuild  &#x6700;&#x4F18;  ,StringBuffer  &#x6B21;&#x4E4B;  (  &#x7EBF;&#x7A0B;&#x5B89;&#x5168;  ),String.concat  &#x518D;&#x6B21;&#x4E4B;  ,+/+=  &#x6700;&#x6B21;  (  &#x4E0D;&#x8003;&#x8651;&#x9759;&#x6001;&#x5E38;&#x91CF;&#x7F16;&#x8BD1;&#x5668;&#x7684;&#x4F18;&#x5316;  )</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 2)  &#xFF1A;  ArrayList(Vector)  &#x4E0E;  LinkedList  &#x6BD4;&#x8F83;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; a:ArrayList  &#x57FA;&#x4E8E;&#x6570;&#x7EC4;  (  &#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;  ),LinkedList  &#x57FA;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;  ,  &#x56E0;&#x6B64;  ArrayList  &#x7684;&#x4E3B;&#x8981;&#x6027;&#x80FD;&#x8017;&#x5728;&#x6269;&#x5C55;&#x7A7A;&#x95F4;&#x65F6;&#x6570;&#x636E;&#x590D;&#x5236;  ,  &#x800C;  LinkedList  &#x8017;&#x5728;&#x6570;&#x636E;&#x904D;&#x5386;  (  &#x5C24;&#x5176;&#x662F;&#x627E;&#x4E2D;&#x95F4;&#x7684;&#x6570;&#x636E;  )</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; b:  &#x5934;&#x5C3E;&#x7684;&#x65B0;&#x589E;  /  &#x5220;&#x9664;&#x5BF9;  LinkedList  &#x6CA1;&#x6709;&#x538B;&#x529B;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x6B21;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x9700;&#x8981;&#x4ECE;&#x5934;&#x67E5;&#x627E;&#xFF0C;&#x4F1A;&#x8981;&#x4EB2;&#x547D;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; c:  &#x5728;&#x5C3E;&#x90E8;&#x6DFB;&#x52A0;&#x5BF9;  ArrayList  &#x6CA1;&#x6709;&#x538B;&#x529B;&#xFF0C;&#x4F46;&#x4ECE;&#x5934;&#x90E8;&#x5220;&#x9664;&#x90FD;&#x4F1A;&#x6570;&#x7EC4;&#x590D;&#x5236;&#xFF0C;&#x4F1A;&#x8981;&#x4EB2;&#x547D;&#x3002;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; d:  &#x5BF9;  LinkedList  &#x7684;&#x904D;&#x5386;&#xFF0C;&#x8981;&#x4E48;&#x7528;  for-Each,  &#x8981;&#x4E48;  Iterator  &#xFF0C;&#x4E0D;&#x8981;&#x7528;&#x666E;&#x901A;&#x7684;  ini i=0;i&lt;size;i++  &#xFF0C;&#x56E0;&#x4E3A;  get(i)  &#x662F;&#x968F;&#x673A;&#x67E5;&#x627E;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x4ECE;&#x5934;&#x6216;&#x5C3E;&#x904D;&#x5386;&#xFF0C;&#x4F1A;&#x8981;&#x4EB2;&#x547D;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; e:  &#x4E00;&#x822C;&#x5B9E;&#x73B0;&#x4E86;  RandomAccess  &#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x5982;  ArrayList  &#xFF0C;  Vector  &#x624D;&#x53EF;&#x4EE5;&#x5728;&#x904D;&#x5386;&#x65F6;&#x653E;&#x5FC3;&#x4F7F;&#x7528;  get  &#xFF0C;&#x800C;&#x4E14;&#x904D;&#x5386;&#x65F6;&#x8981;&#x5C3D;&#x91CF;&#x51CF;&#x5C11;&#x91CD;&#x590D;&#x7684;&#x83B7;&#x53D6;  size  &#x6216;&#x5143;&#x7D20;&#xFF0C;&#x7528;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#x7F13;&#x5B58;&#x4E4B;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3  )  &#xFF1A;  HashMap  &#x5982;&#x679C;  key  &#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x91CD;&#x5199;&#x4E86;  hashCode  &#x65B9;&#x6CD5;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6B64;  hashCode  &#x65B9;&#x6CD5;&#x653E;&#x56DE;&#x76F8;&#x540C;&#x7684;  int  &#x503C;&#xFF0C;&#x5219;&#x6BCF;&#x6B21;&#x653E;&#x5165;&#x4E0D;&#x540C;&#x5BF9;&#x8C61;&#x4F1A;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E0B;&#xFF0C;&#x904D;&#x5386;&#x67E5;&#x627E;&#x5F88;&#x6162;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4)  &#xFF1A;  HashMap  &#x5E95;&#x5C42;&#x7528;&#x4E86;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x4F7F;&#x7528;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;  initialCapacity  &#x5E76;&#x4E14;&#x662F;  2  &#x7684;&#x6307;&#x6570;&#x6B21;&#x5E42;&#x4F5C;&#x4E3A;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#xFF0C;  threshold  &#x4E3A;&#x5F53;&#x524D;&#x6570;&#x7EC4;&#x603B;&#x5BB9;&#x91CF;&#x4E0E;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x4E58;&#x79EF;&#xFF0C;&#x5373;&#x9600;&#x503C;&#xFF0C;&#x5F53;&#x5B9E;&#x9645;&#x5BB9;&#x91CF;&#x8D85;&#x9600;&#x503C;   &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x65F6;&#x4F1A;&#x8FDB;&#x884C;&#x6570;&#x7EC4;&#x6269;&#x5C55;&#x590D;&#x5236;&#xFF0C;&#x56E0;&#x6B64;&#x9002;&#x5F53;&#x7684;  initialCapacity  &#x6709;&#x5229;&#x4E8E;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 5)  &#xFF1A;  LinkedHashMap  &#x57FA;&#x4E8E;&#x5143;&#x7D20;&#x8FDB;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x88AB;&#x8BBF;&#x95EE;&#x5148;&#x540E;&#x987A;&#x5E8F;  (  &#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5230;&#x6700;&#x540E;  ),  &#x800C;  TreeMap  &#x57FA;&#x4E8E;&#x4F20;&#x5165;&#x7684;  Comparetor  &#x53C2;&#x6570;&#x6216;&#x5B9E;&#x73B0;&#x4E86;  Comparable  &#x7684;  key  &#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x9002;&#x7528;&#x8303;&#x56F4;   &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x4E0D;&#x4E00;&#x6837;&#x3002;  HashSet,LinkedHashSet,TreeSet  &#x662F;&#x5BF9;&#x5E94;  Map  &#x7684;&#x7B80;&#x5355;&#x5C01;&#x88C5;&#x3002;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 6)  &#xFF1A;&#x4F7F;&#x7528;  NIO(ByteBuffer+Channel)  &#x53EF;&#x4EE5;&#x63D0;&#x5347;  I/O  &#x8BFB;&#x5199;&#x901F;&#x7387;&#xFF0C;&#x6CE8;&#x610F;  duplicate(),asReadOnlyBuffer(),slice()  &#x90FD;&#x662F;&#x5171;&#x4EAB;&#x539F;&#x59CB;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x6587;&#x4EF6;&#x5185;&#x5B58;&#x6620;&#x5C04;  MappedByteBuffer,  &#x7ED3;&#x6784;   &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x5316;&#x6563;&#x5C04;&#x63A5;&#x53E3;  ScatteringByteChannel  &#xFF0C;&#x7ED3;&#x6784;&#x5316;&#x805A;&#x96C6;&#x63A5;&#x53E3;  GatheringByteChannel  &#x5C06;&#x591A;&#x4E2A;  ByteBuffer  &#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4E00;&#x6B21;&#x5199;&#x5165;&#xFF0C;&#x7528;  DirectBuffer  &#x4EE3;&#x66FF;  ByteBuffer  &#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BFB;&#x5199;&#x90FD;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6548;   &#xA0;&#xA0;   &#x7387;&#xFF0C;&#x4F46;  DirectBuffer  &#x662F;&#x76F4;&#x63A5;&#x5F00;&#x8F9F;  OS  &#x5185;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x9891;&#x7E41;&#x65B0;&#x5EFA;&#x56DE;&#x6536;&#xFF0C;&#x6027;&#x80FD;&#x53CD;&#x800C;&#x4E0D;&#x5982;  ByteBuffer  &#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;&#x76F8;&#x540C;&#x64CD;&#x4F5C;  .</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 7)  &#xFF1A;  4  &#x4E2A;&#x5F15;&#x7528;&#x7EA7;&#x522B;&#xFF1A;&#x5F3A;&#xFF0C;&#x8F6F;&#xFF0C;&#x5F31;&#xFF0C;&#x865A;&#xFF0C;&#x5176;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x4E0D;&#x540C;&#xFF0C;&#x4E00;&#x822C;&#x8F6F;&#x548C;&#x5F31;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x6848;&#x907F;&#x514D;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#xFF0C;&#x800C;&#x865A;&#x66F4;&#x591A;&#x7528;&#x4E8E;&#x8DDF;&#x8E2A;&#x5BF9;&#x8C61;&#x56DE;&#x6536;&#x65F6;&#x673A;&#xFF0C;&#x5F31;&#x5F15;&#x7528;  WeakHashMap  &#x53EF;&#x4EE5;   &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x4F5C;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x7F13;&#x5B58;&#x5BF9;&#x8C61;&#x3002;</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 8)  &#xFF1A;&#x4E0D;&#x5728;&#x5FAA;&#x73AF;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;  try-catch,  &#x5C3D;&#x91CF;&#x653E;&#x5230;&#x5FAA;&#x73AF;&#x4F53;&#x5916;&#xFF0C;&#x591A;&#x7528;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x6216;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x503C;&#x4EE5;&#x907F;&#x514D;&#x91CD;&#x590D;&#x8BA1;&#x7B97;  ,  &#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5728;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x4E2D;&#x505A;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;&#x51CF;&#x5C11;&#x5FAA;&#x73AF;&#x6B21;&#x6570;  (i+1,i+2,i+3…),  &#x591A;   &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x7528;  &quot;  &#x963B;&#x65AD;&#x6027;  &quot;  &#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x5982;  &amp;&amp;  &#x6765;&#x4EE3;&#x66FF;&#x4F4D;&#x8FD0;&#x7B97;&#x5982;  &amp;(  &#x5F53;&#x7136;&#x4E00;&#x822C;&#x4E5F;&#x4E0D;&#x5EFA;&#x8BAE;&#x5229;&#x7528;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x6765;&#x505A;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x540E;&#x9762;&#x7684;&#x5224;&#x65AD;&#x9ED8;&#x8BA4;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x4E0D;&#x53BB;&#x8FD0;&#x884C;&#x7684;  )</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 9)  &#xFF1A;&#x591A;&#x7528;&#x4E00;&#x7EF4;&#x6570;&#x7EC4;&#x4EE3;&#x66FF;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF1B;&#x4F7F;&#x7528;  Buffer  &#x8FDB;&#x884C;  I/O;  &#x5BF9;&#x6784;&#x9020;&#x6210;&#x672C;&#x5927;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x7528;  clone  &#x4EE3;&#x66FF;  new(  &#x6CE8;&#x610F;&#x8BE5;&#x7C7B;&#x5B9E;&#x73B0;  Cloneable  &#xFF0C;&#x5E76;&#x4E14;&#x9ED8;&#x8BA4;&#x662F;&#x6D45;&#x590D;&#x5236;&#xFF0C;&#x6DF1;&#x590D;&#x5236;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x91CD;&#x5199;  Object  &#x7684;  clone &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;   &#x65B9;&#x6CD5;  )</p>
<p>  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 10)  &#xFF1A;&#x6280;&#x5DE7;&#xFF1A;&#x7528;&#x4F4D;&#x8FD0;&#x7B97;&#x4EE3;&#x66FF;  2  &#x6B21;&#x5E42;&#x7684;&#x4E58;&#x9664;&#xFF1B;&#x591A;&#x7528;  static  &#x9759;&#x6001;&#x65B9;&#x6CD5;&#x800C;&#x4E0D;&#x662F;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#xFF1B;&#x591A;&#x7528;  native  &#x65B9;&#x6CD5;&#x5982;  arrayCopy  &#x7B49;  ;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f495762/" title="OSChina 开源周刊第32期 —— Go 的插件化开发 Pingo -" itemprop="url">OSChina 开源周刊第32期 —— Go 的插件化开发 Pingo -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:30.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="&#x6BCF;&#x5468;&#x6280;&#x672F;&#x62A2;&#x5148;&#x770B;&#xFF0C;&#x603B;&#x6709;&#x4F60;&#x60F3;&#x8981;&#x7684;&#xFF01;">&#x6BCF;&#x5468;&#x6280;&#x672F;&#x62A2;&#x5148;&#x770B;&#xFF0C;&#x603B;&#x6709;&#x4F60;&#x60F3;&#x8981;&#x7684;&#xFF01;</h4><p>&#x79FB;&#x52A8;&#x5F00;&#x53D1; </p>
<ul>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/u/2340880/blog/404605" target="_blank" rel="external"><strong>IOS &#x8868;&#x89C6;&#x56FE;(UITableView)&#x4F7F;&#x7528;&#x8BE6;&#x89E3;</strong></a> UITableView&#x89C6;&#x56FE;&#x662F;IOS&#x5F00;&#x53D1;&#x4E2D;&#x5E38;&#x7528;&#x800C;&#x597D;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#x63A7;&#x4EF6;&#x3002; <a href="http://my.oschina.net/u/2340880/blog/403996" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>
<h4 id="&#x524D;&#x7AEF;&#x5F00;&#x53D1;">&#x524D;&#x7AEF;&#x5F00;&#x53D1;</h4><ul>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/nginfinitescroll" target="_blank" rel="external"><strong>AngularJS &#x65E0;&#x9650;&#x6EDA;&#x52A8;&#x6307;&#x4EE4; ngInfiniteScroll</strong></a> ngInfiniteScroll &#x662F;&#xFFFD;&#xFFFD;&#xFFFD;&#x4E2A; AngularJS &#x7684;&#x6269;&#x5C55;&#x6307;&#x4EE4;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x7F51;&#x9875;&#x7684;&#x65E0;&#x9650;&#x6EDA;&#x52A8;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x76F8;&#x5F53;&#x4E8E;&#x9875;&#x9762;&#x6EDA;&#x52A8;&#x5230;&#x6700;&#x5E95;&#x90E8;&#x7684;&#x65F6;&#x5019;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x3002; <a href="http://www.oschina.net/p/nginfinitescroll" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/u/2342955/blog/408889" target="_blank" rel="external"><strong>Angular&#x5B66;&#x4E60;&#x5FC3;&#x5F97;&#x4E4B;directive&#x2014;&#x2014;scope&#x9009;&#x9879;&#x4E0E;&#x7ED1;&#x5B9A;&#x7B56;&#x7565;</strong></a> &#x5927;&#x5BB6;&#x77E5;&#x9053;&#xFF0C;&#x5F53;scope&#x9009;&#x9879;&#x5199;&#x4E3A;scope:{}&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x5DF2;&#x7ECF;&#x4E3A;&#x6307;&#x4EE4;&#x751F;&#x6210;&#x4E86;&#x9694;&#x79BB;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x7ED1;&#x5B9A;&#x7B56;&#x7565;&#x7684;&#x4E09;&#x79CD;&#x5F62;&#x5F0F;&#xFF1A;&amp; &#x3001;= &#x3001;@&#x3002; <a href="http://my.oschina.net/u/2342955/blog/408889" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>
<h4 id="&#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x53D1;/&#x7BA1;&#x7406;">&#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x53D1;/&#x7BA1;&#x7406;</h4><ul>
<li><strong>&#x3010;&#x7FFB;&#x8BD1;&#x3011;</strong> <a href="http://www.oschina.net/translate/zero-downtime-haproxy-reloads" target="_blank" rel="external"><strong>&#x771F;&#x6B63;&#x96F6;&#x505C;&#x673A; HAProxy &#x91CD;&#x8F7D;</strong></a> &#x6211;&#x4EEC;&#x559C;&#x6B22;&#x5728;&#x53D1;&#x5C55; SOA &#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; SmartStack &#x7ED9;&#x6211;&#x4EEC;&#x5E26;&#x6765;&#x7684;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x7075;&#x6D3B;&#x6027;&#x662F;&#x6709;&#x4EE3;&#x4EF7;&#x7684;&#x3002;&#x901A;&#x5E38;&#x5F53;&#x670D;&#x52A1;&#x6216;&#x5728;&#x670D;&#x52A1;&#x540E;&#x7AEF;&#x6267;&#x884C;&#x589E;&#x52A0;&#x6216;&#x6C38;&#x4E45;&#x5220;&#x9664;&#x547D;&#x4EE4;&#x7684;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6574;&#x4E2A;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x4E0D;&#x5F97;&#x4E0D;&#x91CD;&#x65B0;&#x52A0;&#x8F7D; HAProxy &#x3002; <a href="http://www.oschina.net/translate/zero-downtime-haproxy-reloads" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x7FFB;&#x8BD1;&#x3011;</strong> <a href="http://www.oschina.net/translate/beyond-storm-for-streaming-data-applications" target="_blank" rel="external"><strong>Storm &#x5E76;&#x975E;&#x5B8C;&#x5168;&#x9002;&#x5408;&#x6240;&#x6709;&#x5B9E;&#x65F6;&#x5E94;&#x7528;</strong></a> &#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#xFF0C;&#x5229;&#x7528;&#x5B9E;&#x65F6;&#x4E2A;&#x6027;&#x5316;&#x6280;&#x672F;&#x6539;&#x8FDB;&#x5728;&#x7EBF;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x5F15;&#x5165;&#x4E86;&#x6D41;&#x6570;&#x636E;&#x6280;&#x672F;&#x3002;&#x5BF9;&#x4E8E;&#x6D41;&#x6570;&#x636E;&#x5E94;&#x7528;&#x7684;&#x5B9A;&#x4E49;&#x591A;&#x79CD;&#x591A;&#x6837;&#xFF0C;&#x4F46;&#x90FD;&#x5305;&#x542B;&#x4E09;&#x4E2A;&#x57FA;&#x672C;&#x529F;&#x80FD;&#xFF1A;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF0C;&#x5B9E;&#x65F6;&#x5206;&#x6790;&#x548C;&#x81EA;&#x52A8;&#x5316;&#x51B3;&#x7B56;&#x3002; <a href="http://www.oschina.net/translate/beyond-storm-for-streaming-data-applications" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x7FFB;&#x8BD1;&#x3011;</strong> <a href="http://www.oschina.net/translate/deploying-rails-applications-with-the-puma-web-server" target="_blank" rel="external"><strong>&#x4F7F;&#x7528; Puma Web &#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72; Rails &#x5E94;&#x7528;</strong></a> &#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x6B21;&#x53EA;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5E76;&#x53D1;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x80FD;&#x591F;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x8D44;&#x6E90;&#x3002;Puma&#xA0;&#x662F;&#x548C; Unicorn &#x76F8;&#x7ADE;&#x4E89;&#x7684; Web &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x5904;&#x7406;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x3002; <a href="http://www.oschina.net/translate/deploying-rails-applications-with-the-puma-web-server" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x7FFB;&#x8BD1;&#x3011;</strong> <a href="http://www.oschina.net/translate/running-kafka-scale" target="_blank" rel="external"><strong>LinkedIn &#x2014;&#x2014; Apache Kafka &#x7684;&#x4F38;&#x7F29;&#x6269;&#x5C55;&#x80FD;&#x529B;</strong></a> &#x5982;&#x679C;&#x6570;&#x636E;&#x662F;&#x9AD8;&#x79D1;&#x6280;&#x7684;&#x751F;&#x547D;&#x7EBF;&#x7684;&#x8BDD;&#xFF0C;Apache Kafka &#x5C31;&#x662F; LinkedIn &#x516C;&#x53F8;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x4E2D;&#x7684;&#x5FAA;&#x73AF;&#x7CFB;&#x7EDF;&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528; Kafka &#x5728;&#x591A;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x642C;&#x79FB;&#x5404;&#x7C7B;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x51E0;&#x4E4E;&#x6BCF;&#x4E00;&#x5929;&#x90FD;&#x63A5;&#x89E6;&#x6BCF;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x3002; <a href="http://www.oschina.net/translate/running-kafka-scale" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/caddy" target="_blank" rel="external"><strong>HTTP/2 Web &#x670D;&#x52A1;&#x5668; Caddy</strong></a> Caddy &#x662F;&#x4E00;&#x4E2A;&#x652F;&#x6301; HTTP/2 &#x7684;&#x8DE8;&#x5E73;&#x53F0; Web &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F7F;&#x7528;&#x548C;&#x914D;&#x7F6E;&#x90FD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;Caddy &#x652F;&#x6301; HTTP/2, IPv6, Markdown, WebSockets, FastCGI, &#x6A21;&#x677F;&#x7B49;&#x7B49;&#x3002; <a href="http://www.oschina.net/p/caddy" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>
<h4 id="&#x7F16;&#x7A0B;&#x8BED;&#x8A00;">&#x7F16;&#x7A0B;&#x8BED;&#x8A00;</h4><ul>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/freecache" target="_blank" rel="external"><strong>Go &#x8BED;&#x8A00;&#x7684;&#x7F13;&#x5B58;&#x5E93; FreeCache</strong></a> FreeCache &#x662F;&#x4E00;&#x4E2A; Go &#x8BED;&#x8A00;&#x7684;&#x7F13;&#x5B58;&#x5E93;&#xFF0C;&#x65E0;&#x989D;&#x5916;&#x7684; GC &#x8D1F;&#x8377;&#x3002;&#x6570;&#x767E;&#x4E07;&#x5BF9;&#x8C61;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5EF6;&#x8FDF;&#x4EC5;&#x5728;&#x6570;&#x767E;&#x6BEB;&#x79D2;&#x3002; <a href="http://www.oschina.net/p/freecache" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/pingo" target="_blank" rel="external"><strong>Go &#x7684;&#x63D2;&#x4EF6;&#x5316;&#x5F00;&#x53D1; Pingo</strong></a> Pingo &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x4E3A; Go &#x7A0B;&#x5E8F;&#x7F16;&#x5199;&#x63D2;&#x4EF6;&#x7684;&#x7B80;&#x5355;&#x72EC;&#x7ACB;&#x5E93;&#xFF0C;&#x56E0;&#x4E3A; Go &#x672C;&#x8EAB;&#x662F;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709;&#x63D2;&#x4EF6;&#x90FD;&#x4EE5;&#x5916;&#x90E8;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x5B58;&#x5728;&#x3002; <a href="http://www.oschina.net/p/pingo" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x7FFB;&#x8BD1;&#x3011;</strong> <a href="http://www.oschina.net/translate/robovm-1-0-released-commercial-licenses-a-look-under-the-hood" target="_blank" rel="external"><strong>RoboVM 1.0 &#x53D1;&#x5E03; &#x2014;&#x2014; &#x5546;&#x4E1A;&#x8BB8;&#x53EF;&#x548C;&#x65B0;&#x529F;&#x80FD;&#x4ECB;&#x7ECD;</strong></a> &#x7ECF;&#x8FC7;&#x6570;&#x6708;&#x7684;&#x8270;&#x82E6;&#x5DE5;&#x4F5C;&#x6211;&#x4EEC;&#x5F88;&#x81EA;&#x8C6A;&#x7684;&#x5BA3;&#x5E03;&#x6211;&#x4EEC;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7A33;&#x5B9A;&#x7248; RoboVM 1.0 &#x53D1;&#x5E03;&#x4E86;&#xFF01; <a href="http://www.oschina.net/translate/robovm-1-0-released-commercial-licenses-a-look-under-the-hood" target="_blank" rel="external">&#x8BE6;&#x7EC6;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/benhaile/blog/408377" target="_blank" rel="external"><strong>Java 8 &#x91CC;&#x9762; lambda &#x6700;&#x4F73;&#x5B9E;&#x8DF5;</strong></a> &#x5728; Java 8 &#x91CC;&#x9762;Lambda&#x662F;&#x6700;&#x706B;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x56E0;&#x4E3A;&#x8BED;&#x6CD5;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x662F;&#x5E26;&#x6765;&#x4E86;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x4F18;&#x79C0;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x6709;&#x5FC5;&#x8981;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x601D;&#x60F3;&#x4EE5;&#x5F00;&#x9614;&#x601D;&#x8DEF;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x804A;&#x804A;Lambda&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x6027;&#x80FD;&#xFF0C;&#x4E5F;&#x4F1A;&#x63D0;&#x53CA;&#x4E0B;&#x4E0D;&#x597D;&#x7684;&#x4E00;&#x9762;&#x3002; <a href="http://my.oschina.net/benhaile/blog/408377" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>
<h4 id="&#x6570;&#x636E;&#x5E93;">&#x6570;&#x636E;&#x5E93;</h4><ul>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/torodb" target="_blank" rel="external"><strong>JSON &#x6587;&#x6863;&#x6570;&#x636E;&#x5E93; ToroDB</strong></a> ToroDB &#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x9762;&#x5411;&#x6587;&#x6863;&#x7684; JSON &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x57FA;&#x4E8E; PostgreSQL &#x8FD0;&#x884C;&#x3002;JSON &#x6587;&#x6863;&#x5173;&#x7CFB;&#x5316;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x975E; blob/jsonb &#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x663E;&#x8457;&#x63D0;&#x5347;&#x5B58;&#x50A8;&#x548C; IO&#xFF0C;&#x517C;&#x5BB9; MongoDB&#x3002; <a href="http://www.oschina.net/p/torodb" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/Suregogo/blog/406798" target="_blank" rel="external"><strong>PostgreSQL &#x7528; C &#x5B8C;&#x6210;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x4F8B;&#x5B50;</strong></a> &#x6700;&#x8FD1;&#x7ED9;&#x5BA2;&#x6237;&#x5199;&#x4E86;&#x4E00;&#x4E2A;PG&#x7528;C&#x5199;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5728;&#x6B64;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#x3002; <a href="http://my.oschina.net/Suregogo/blog/406798" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/Kenyon/blog/407093" target="_blank" rel="external"><strong>PostgreSQL 9.4 &#x7684;&#x7269;&#x5316;&#x89C6;&#x56FE;&#x66F4;&#x65B0;</strong></a> PostgreSQL &#x7684;9.4&#x7248;&#x672C;&#x51FA;&#x6765;&#x6709;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x4E5F;&#x66F4;&#x65B0;&#x4E86;&#x5F88;&#x591A;&#x5185;&#x5BB9;&#xFF0C;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#x662F;&#x6BD4;&#x8F83;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x7269;&#x5316;&#x89C6;&#x56FE;&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x5BF9;&#x6BD4;&#x539F;&#x5148;&#x7684;&#x7269;&#x5316;&#x89C6;&#x56FE;&#x8BED;&#x6CD5;&#xFF0C;&#x65B0;&#x589E;&#x4E86;&#x4E00;&#x4E2A;CONCURRENTLY&#x53C2;&#x6570;&#x3002; <a href="http://my.oschina.net/Kenyon/blog/407093" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>
<h4 id="&#x5176;&#x4ED6;&#x7C7B;&#x578B;">&#x5176;&#x4ED6;&#x7C7B;&#x578B;</h4><ul>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/docker-gitlab" target="_blank" rel="external"><strong>Docker Gitlab &#x2014;&#x2014; Gitlab &#x7684; Docker &#x6620;&#x50CF;</strong></a> Docker Gitlab &#x662F;&#x63D0;&#x4F9B; Gitlab &#x73AF;&#x5883;&#x7684; Docker &#x6620;&#x50CF;&#xFF0C;&#x53EF;&#x65B9;&#x4FBF;&#x7684;&#x5728; Docker &#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C; Gitlab &#x7CFB;&#x7EDF;&#x3002; <a href="http://www.oschina.net/p/docker-gitlab" target="_blank" rel="external">&#x8BE6;&#x7EC6;</a></li>
<li><strong>&#x3010;&#x8F6F;&#x4EF6;&#x3011;</strong> <a href="http://www.oschina.net/p/jphp" target="_blank" rel="external"><strong>JVM &#x7684; PHP &#x7F16;&#x8BD1;&#x5668; JPHP</strong></a> JPHP &#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E; JVM &#x7684; PHP &#x7F16;&#x8BD1;&#x5668;&#x3002;&#x652F;&#x6301; PHP 5.6+ &#x7684;&#x5F88;&#x591A;&#x65B0;&#x7279;&#x6027;&#x3002;JPHP &#x7C7B;&#x4F3C; javac &#xFF0C;&#x53EF;&#x4EE5;&#x5C06; PHP &#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x6210; JVM &#x7684;&#x5B57;&#x8282;&#x7801;&#x5E76;&#x5728; JVM &#x4E2D;&#x6267;&#x884C;&#x3002; <a href="http://www.oschina.net/p/jphp" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/u/1024767/blog/406566" target="_blank" rel="external"><strong>ffmpeg &#x5B9E;&#x73B0;&#x672C;&#x5730;&#x6444;&#x50CF;&#x5934;&#x7684;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;</strong></a> fserver&#x662F;&#x4E00;&#x4E2A;&#x97F3;&#x9891;&#x548C;&#x89C6;&#x9891;&#x7684;&#x6D41;&#x5F0F;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5B83;&#x901A;&#x8FC7;&#x5728;&#x542F;&#x52A8;&#x65F6;&#x8BFB;&#x5165;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B8C;&#x6210;&#x914D;&#x7F6E;&#xFF0C;&#x4E0D;&#x6307;&#x5B9A;&#x65F6;&#x7528;&#x9ED8;&#x8BA4;&#x7684;/etc/ffserver.conf&#x6587;&#x4EF6;&#x3002; ffserver&#x63A5;&#x53D7;&#x4E00;&#x4E9B;&#x6216;&#x8005;FFM&#x6D41;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x7136;&#x540E;&#x901A;&#x8FC7;RTP/RTSP/HTTP&#x63A8;&#x6D41;&#x3002; <a href="http://my.oschina.net/u/1024767/blog/406566" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><strong>&#x3010;&#x535A;&#x5BA2;&#x3011;</strong> <a href="http://my.oschina.net/robinyao/blog/408285" target="_blank" rel="external"><strong>BenchMark &#x5DE5;&#x5177; - JMH &#x4ECB;&#x7ECD;</strong></a> java Benchmark&#x5DE5;&#x5177; JMH,&#x7531;OpenJDK&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x4F7F;&#x7528;&#x5F88;&#x65B9;&#x4FBF;&#x3002; <a href="http://my.oschina.net/robinyao/blog/408285" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><p><strong>&#x3010;&#x8D44;&#x8BAF;&#x3011;</strong> <a href="http://www.oschina.net/news/61986/windows-10-can-run-android-and-ios-app" target="_blank" rel="external"><strong>&#x5FAE;&#x8F6F;&#x75AF;&#x4E86;&#xFF1A;iOS/&#x5B89;&#x5353;&#x5E94;&#x7528;&#x4E00;&#x952E;&#x79FB;&#x690D;Windows 10&#xFF01;</strong></a> &#x4E00;&#x76F4;&#x4EE5;&#x6765;&#x90FD;&#x6709;&#x4F20;&#x95FB;&#x79F0;&#xFF0C;Windows 10&#x5C06;&#x4F1A;&#x517C;&#x5BB9;&#x5B89;&#x5353;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x770B;&#x4E0A;&#x53BB;&#x4F3C;&#x4E4E;&#x662F;&#x5929;&#x65B9;&#x591C;&#x8C2D;&#xFF0C;&#x4F46;&#x5FAE;&#x8F6F;&#x771F;&#x7684;&#x505A;&#x5230;&#x4E86;&#xFF0C;&#x4EE5;&#x4E00;&#x79CD;&#x5F88;&#x7279;&#x522B;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x4EC5;&#x662F;&#x5B89;&#x5353;&#xFF0C;&#x8FD8;&#x6709;iOS&#xFF01; <a href="http://www.oschina.net/news/61986/windows-10-can-run-android-and-ios-app" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></p>
<p><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350;</strong></p>
</li>
<li><p><a href="https://git.oschina.net/hanguofeng/gocaptcha" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; Go &#x8BED;&#x8A00;&#x9A8C;&#x8BC1;&#x7801;&#x670D;&#x52A1;&#x5668;</strong></a> Go &#x8BED;&#x8A00;&#x9A8C;&#x8BC1;&#x7801;&#x670D;&#x52A1;&#x5668;&#x652F;&#x6301;&#x4E2D;&#x6587;&#x9A8C;&#x8BC1;&#x7801; &#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x8BCD;&#x5E93;&#x3001;&#x5B57;&#x5E93; &#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x6EE4;&#x955C;&#x673A;&#x5236;&#xFF0C;&#x901A;&#x8FC7;&#x6EE4;&#x955C;&#x6765;&#x589E;&#x52A0;&#x5E72;&#x6270;&#xFF0C;&#x52A0;&#x5927;&#x8BC6;&#x522B;&#x96BE;&#x5EA6;&#x3002; <a href="https://git.oschina.net/hanguofeng/gocaptcha" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></p>
</li>
<li><a href="https://git.oschina.net/long_608/docker_wordpress" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; WordPress &#x7684; Docker &#x6620;&#x50CF;</strong></a> &#x4F7F;&#x7528;&#x7684;wordpress&#x4E2D;&#x6587;&#x7248;&#x672C;&#xFF0C;4.1 &#x4E2D;&#x6587;&#x7248;&#x672C;&#x7684;&#x7F51;&#x7AD9;&#x4E3A;&#xFF1A; cn.wordpress.org&#x3002; <a href="https://git.oschina.net/long_608/docker_wordpress" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><a href="https://git.oschina.net/596392912/JFinal-event" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; JFinal-event &#x6D88;&#x606F;&#x63D2;&#x4EF6;</strong></a> &#x6A21;&#x4EFF;&#x7684;Spring&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;&#xFF1A;&#x8BE6;&#x89E3;Spring&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x6A21;&#x578B; &#xA0;JFinalevent &#x63D2;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;&#x8BF7;&#x67E5;&#x770B;test~&#x3002; <a href="https://git.oschina.net/596392912/JFinal-event" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><a href="https://git.oschina.net/xutongle/Yui.Compressor" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; &#x56FE;&#x5F62;&#x5316; YUI &#x538B;&#x7F29;&#x5668;</strong></a> &#x7528;C# &#x5199;&#x7684; Yui.Compressor &#x7684; GUI,&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x5E93;&#x3002; <a href="https://git.oschina.net/xutongle/Yui.Compressor" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><a href="http://git.oschina.net/876973190/JsoupX" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; JsoupX (JSoup &#x6269;&#x5C55;&#xFF09;</strong></a> JsoupX &#x662F;&#x4E3A;&#x94FE;&#x8BD5;&#x4F7F;&#x7528;Jsoup &#x800C;&#x5C01;&#x88C5;&#x7684;&#x5C0F;&#x5DE5;&#x5177;&#x96C6;&#xFF0C; &#x76EE;&#x7684;&#x662F;&#x4E3A;&#x5FEB;&#x6377;&#x7684;&#x8FC7;&#x8651;&#x51FA;&#x9700;&#x8981;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x65B9;&#x4FBF;&#x7F16;&#x5199;&#x6570;&#x636E;&#x6293;&#x53D6;&#x4EE3;&#x7801;&#x7B49;&#x3002; <a href="http://git.oschina.net/876973190/JsoupX" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><a href="http://git.oschina.net/mooshroom/modal" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; &#x57FA;&#x4E8E; Avalon &#x7684;&#x5F39;&#x51FA;&#x6846;</strong></a> modal.js&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;avalon&#x7684;&#x5F39;&#x51FA;&#x6846;&#x7EC4;&#x4EF6;,&#x7279;&#x70B9;&#x662F;&#x4ED6;&#x4F1A;&#x5728;&#x70B9;&#x51FB;&#x89E6;&#x53D1;&#x6309;&#x94AE;&#x7684;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5F39;&#x51FA;&#x3002;&#x52A8;&#x753B;&#x57FA;&#x4E8E;css3&#x3002; <a href="http://git.oschina.net/mooshroom/modal" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
<li><a href="http://git.oschina.net/iknown/Q.js" target="_blank" rel="external"><strong>Git@OSC &#x9879;&#x76EE;&#x63A8;&#x8350; &#x2014;&#x2014; Q.js &#x7B80;&#x5355;&#x7684;js&#x5E93;</strong></a> &#x7B80;&#x5355;&#x7684;js&#x5E93;&#xFF0C; &#x7EDD;&#x5BF9;&#x5E94;&#x7528;&#x7EA7;&#x7684;&#xFF0C; &#x9664;&#x4E86;wndx&#xFF08;&#x5F39;&#x51FA;&#x7A97;&#x53E3;&#x7C7B;&#xFF09;&#x4E4B;&#x5916;&#x51E0;&#x4E4E;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x7EE7;&#x627F;&#x548C;&#x6269;&#x5C55;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x771F;&#x6B63;&#x9700;&#x8981;&#x7684;&#x4EBA;&#x624D;&#x4F1A;&#x53BB;&#x505A;&#x6269;&#x5C55;&#x3002; <a href="http://git.oschina.net/iknown/Q.js" target="_blank" rel="external">&#x8BE6;&#x60C5;</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Apache-HTTP-Server/">Apache HTTP Server</a><a href="/tags/GitLab/">GitLab</a><a href="/tags/开源/">开源</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f48ee67/" title="JAVA深入研究——Method的Invoke方法。 -" itemprop="url">JAVA深入研究——Method的Invoke方法。 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:30.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Method&#x7684;invoke&#x65B9;&#x6CD5;</p>
<p>1.&#x5148;&#x68C0;&#x67E5;&#xA0;AccessibleObject&#x7684;override&#x5C5E;&#x6027;&#x662F;&#x5426;&#x4E3A;true&#x3002;</p>
<p>AccessibleObject&#x662F;Method,Field,Constructor&#x7684;&#x7236;&#x7C7B;&#xFF0C;override&#x5C5E;&#x6027;&#x9ED8;&#x8BA4;&#x4E3A;false,&#x53EF;&#x8C03;&#x7528;setAccessible&#x65B9;&#x6CD5;&#x6539;&#x53D8;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;true,&#x5219;&#xFFFD;&#xFFFD;&#xFFFD;&#x793A;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<p>2.&#x5982;&#x679C;&#x4E0D;&#x662F;ture,&#x5219;&#x8981;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x68C0;&#x6D4B;&#x3002;&#x7528;Reflection&#x7684;quickCheckMemberAccess&#x65B9;&#x6CD5;&#x5148;&#x68C0;&#x67E5;&#x662F;&#x4E0D;&#x662F;public&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x518D;&#x7528;Reflection.getCallerClass(1)&#x65B9;&#x6CD5;&#x83B7;</p>
<p>&#x5F97;&#x5230;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;Class,&#x7136;&#x540E;&#x505A;&#x662F;&#x5426;&#x6709;&#x6743;&#x9650;&#x8BBF;&#x95EE;&#x7684;&#x6821;&#x9A8C;&#xFF0C;&#x6821;&#x9A8C;&#x4E4B;&#x540E;&#x7F13;&#x5B58;&#x4E00;&#x6B21;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0B;&#x6B21;&#x5982;&#x679C;&#x8FD8;&#x662F;&#x8FD9;&#x4E2A;&#x7C7B;&#x6765;&#x8C03;&#x7528;&#x5C31;&#x4E0D;&#x7528;&#x53BB;&#x505A;&#x6821;&#x9A8C;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x7528;&#x4E0A;&#x6B21;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#xFF08;&#x5F88;&#x5947;&#x602A;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7F13;&#x5B58;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5982;&#x679C;&#x4E0B;&#x6B21;&#x6362;&#x4E2A;&#x7C7B;&#x6765;&#x8C03;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4E0D;&#x7528;&#x4F1A;&#x7F13;&#x5B58;&#x4E86;&#xFF0C;&#x800C;&#x518D;&#x9A8C;&#x8BC1;&#x4E00;&#x904D;&#xFF0C;&#x628A;&#x8FD9;&#x6B21;&#x7684;&#x7ED3;&#x679C;&#x505A;&#x4E3A;&#x7F13;&#x5B58;&#xFF0C;&#x4F46;&#x4E0A;&#x4E00;&#x6B21;&#x7684;&#x7F13;&#x5B58;&#x7ED3;&#x679C;&#x5C31;&#x88AB;&#x51B2;&#x6389;&#x4E86;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x7F13;&#x51B2;&#x673A;&#x5236;&#xFF0C;&#x53EA;&#x9002;&#x7528;&#x4E8E;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x91CD;&#x590D;&#x8C03;&#x7528;)&#x3002;</p>
<p>3.&#x8C03;&#x7528;MethodAccessor&#x7684;invoke&#x65B9;&#x6CD5;&#x3002;&#x6BCF;&#x4E2A;Method&#x5BF9;&#x8C61;&#x5305;&#x542B;&#x4E00;&#x4E2A;root&#x5BF9;&#x8C61;&#xFF0C;root&#x5BF9;&#x8C61;&#x91CC;&#x6301;&#x6709;&#x4E00;&#x4E2A;MethodAccessor&#x5BF9;&#x8C61;&#x3002;&#x6211;&#x4EEC;&#x83B7;&#x5F97;&#x7684;Method&#x72EC;&#x4EAB;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;root&#x5BF9;&#x8C61;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x6240;&#x6709;&#x8FD9;&#x7C7B;Method&#x5171;&#x4EAB;root&#x91CC;&#x7684;MethodAccessor&#x5BF9;&#x8C61;,(&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7531;ReflectionFactory&#x65B9;&#x6CD5;&#x751F;&#x6210;,ReflectionFactory&#x5BF9;&#x8C61;&#x5728;Method&#x7C7B;&#x4E2D;&#x662F;static&#xA0;final&#x7684;&#x7531;native&#x65B9;&#x6CD5;&#x5B9E;&#x4F8B;&#x5316;)&#x3002;</p>
<p>ReflectionFactory&#x751F;&#x6210;MethodAccessor&#xFF1A;&#x5982;&#x679C;noInflation&#x7684;&#x5C5E;&#x6027;&#x4E3A;true&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;MethodAccessorGenerator&#x521B;&#x5EFA;&#x7684;&#x4E00;&#x4E2A;MethodAccessor&#x3002;</p>
<p>&#x5426;&#x5219;&#x8FD4;&#x56DE;DelegatingMethodAccessorImpl&#xFF0C;&#x5E76;&#x5C06;&#x4ED6;&#x4E0E;&#x4E00;&#x4E2A;NativeMethodAccessorImpl&#x4E92;&#x76F8;&#x5F15;&#x7528;&#x3002;&#x4F46;DelegatingMethodAccessorImpl&#x6267;&#x884C;invoke&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#x53C8;&#x59D4;&#x6258;&#x7ED9;NativeMethodAccessorImpl&#x4E86;&#x3002;</p>
<p>&#x518D;&#x4E00;&#x6B65;&#x6DF1;&#x5165;</p>
<p>4.NativeMethodAccessorImpl&#x7684;invkoe&#x65B9;&#x6CD5;:</p>
<p>&#x8C03;&#x7528;natiave&#x65B9;&#x6CD5;invoke0&#x6267;&#x884C;&#x65B9;&#x6CD5;&#x8C03;&#x7528;.</p>
<p>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;numInvocations&#xFF0C;&#x6BCF;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x65B9;&#x6CD5;+1,&#x5F53;&#x6BD4;&#xA0;ReflectionFactory.inflationThreshold(15)&#x5927;&#x7684;&#x65F6;&#x5019;,&#x7528;MethodAccessorGenerator&#x521B;&#x5EFA;&#x4E00;&#x4E2A;MethodAccessor,&#x5E76;&#x628A;&#x4E4B;&#x524D;&#x7684;DelegatingMethodAccessorImpl&#x5F15;&#x7528;&#x66FF;&#x6362;&#x4E3A;&#x73B0;&#x5728;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x3002;&#x4E0B;&#x4E00;&#x6B21;DelegatingMethodAccessorImpl&#x5C31;&#x4E0D;&#x4F1A;&#x518D;&#x4EA4;&#x7ED9;NativeMethodAccessorImpl&#x6267;&#x884C;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x4EA4;&#x7ED9;&#x65B0;&#x751F;&#x6210;&#x7684;java&#x5B57;&#x8282;&#x7801;&#x7684;MethodAccessor&#x3002;</p>
<p>MethodAccessorGenerator&#x4F7F;&#x7528;&#x4E86;asm&#x5B57;&#x8282;&#x7801;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x6280;&#x672F;&#xFF0C;&#x6682;&#x4E0D;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x3002;</p>
<p>&#x603B;&#x7ED3;&#xA0;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x751F;&#x6210;&#x591A;&#x4E2A;Method&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x53EA;&#x6709;&#x4E00;&#x4E2A;root&#x5BF9;&#x8C61;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x6301;&#x6709;&#x4E00;&#x4E2A;MethodAccessor&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x662F;static&#x7684;&#x3002;&#x56E0;&#x4E3A;Method&#x7684;invoke&#x662F;&#x4EA4;&#x7ED9;MethodAccessor&#x6267;&#x884C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x6240;&#x60F3;&#x8981;&#x77E5;&#x9053;&#x7684;&#x7B54;&#x6848;&#x5728;MethodAccessor&#x7684;invoke&#x4E2D;&#xFF0C;&#x6DF1;&#x5165;MethodAccessor&#xFF1A;</p>
<p>—————————————————————MethodAccessor————————————————-</p>
<p>&#x5047;&#x5982;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7C7B;A&#xFF1A;&#xA0;</p>
<p>public class A {</p>
<p>public void foo(String name) {</p>
<p>System.out.println(&quot;Hello, &quot; + name);</p>
<p>}</p>
<p>}</p>
<p>&#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7C7B;&#x6765;&#x53CD;&#x5C04;&#x8C03;&#x7528;A&#x4E0A;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p>import java.lang.reflect.Method;</p>
<p>public class TestClassLoad {</p>
<p>public static void main(String[] args) throws Exception {</p>
<p>Class&lt;?&gt; clz = Class.forName(&quot;A&quot;);</p>
<p>Object o = clz.newInstance();</p>
<p>Method m = clz.getMethod(&quot;foo&quot;, String.class);</p>
<p>for (int i = 0; i &lt; 16; i++) {</p>
<p>m.invoke(o, Integer.toString(i));</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>&#x6CE8;&#x610F;&#x5230;TestClassLoad&#x7C7B;&#x4E0A;&#x4E0D;&#x4F1A;&#x6709;&#x5BF9;&#x7C7B;A&#x7684;&#x7B26;&#x53F7;&#x4F9D;&#x8D56;&#x2014;&#x2014;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x52A0;&#x8F7D;&#x5E76;&#x521D;&#x59CB;&#x5316;TestClassLoad&#x7C7B;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x7C7B;A&#x7684;&#x5B58;&#x5728;&#x4E0E;&#x5426;&#xFF0C;&#x800C;&#x662F;&#x7B49;&#x5230;main()&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5230;&#x8C03;&#x7528;Class.forName()&#x65F6;&#x624D;&#x8BD5;&#x56FE;&#x5BF9;&#x7C7B;A&#x505A;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#xFF1B;&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7248;&#x7684;forName()&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x65B9;&#x6CD5;&#x6240;&#x5728;&#x7C7B;&#x7684;ClassLoader&#x6765;&#x52A0;&#x8F7D;&#xFF0C;&#x5E76;&#x4E14;&#x521D;&#x59CB;&#x5316;&#x65B0;&#x52A0;&#x8F7D;&#x7684;&#x7C7B;&#x3002;&#x2026;&#x2026;&#x597D;&#x5427;&#x8FD9;&#x4E2A;&#x7EC6;&#x8282;&#x8DDF;&#x4E3B;&#x9898;&#x6CA1;&#x5565;&#x5173;&#x7CFB;&#x3002;&#xA0;</p>
<p>&#x56DE;&#x5230;&#x4E3B;&#x9898;&#x3002;&#x8FD9;&#x6B21;&#x6211;&#x7684;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x662F;Sun&#x7684;JDK 1.6.0 update 13 build 03&#x3002;&#x7F16;&#x8BD1;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x5728;&#x6267;&#x884C;TestClassLoad&#x65F6;&#x52A0;&#x5165;-XX:+TraceClassLoading&#x53C2;&#x6570;&#xFF08;&#x6216;&#x8005;-verbose:class&#x6216;&#x8005;&#x76F4;&#x63A5;-verbose&#x90FD;&#x884C;&#xFF09;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x63A7;&#x5236;&#x53F0;&#x547D;&#x4EE4;</p>
<p>java&#xA0;-XX:+TraTestClassLoad &#xA0;ceClassLoading&#xA0;</p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8F93;&#x51FA;&#x4E86;&#x4E00;&#x5927;&#x5806;log&#xFF0C;&#x628A;&#x5176;&#x4E2D;&#x76F8;&#x5173;&#x7684;&#x90E8;&#x5206;&#x622A;&#x53D6;&#x51FA;&#x6765;&#x5982;&#x4E0B;&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f489412.gif" alt=""></p>
<pre><code>[Loaded TestClassLoad from file:/D:/temp_code/test_java_classload/]
[Loaded A from file:/D:/temp_code/test_java_classload/]
[Loaded sun<span class="class">.reflect</span><span class="class">.NativeMethodAccessorImpl</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.DelegatingMethodAccessorImpl</span> from shared objects file]
Hello, <span class="number">0</span>
Hello, <span class="number">1</span>
Hello, <span class="number">2</span>
Hello, <span class="number">3</span>
Hello, <span class="number">4</span>
Hello, <span class="number">5</span>
Hello, <span class="number">6</span>
Hello, <span class="number">7</span>
Hello, <span class="number">8</span>
Hello, <span class="number">9</span>
Hello, <span class="number">10</span>
Hello, <span class="number">11</span>
Hello, <span class="number">12</span>
Hello, <span class="number">13</span>
Hello, <span class="number">14</span>
[Loaded sun<span class="class">.reflect</span><span class="class">.ClassFileConstants</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.AccessorGenerator</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.MethodAccessorGenerator</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ByteVectorFactory</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ByteVector</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ByteVectorImpl</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ClassFileAssembler</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.UTF8</span> from shared objects file]
[Loaded java<span class="class">.lang</span><span class="class">.Void</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.Label</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.Label</span><span class="variable">$PatchInfo</span> from shared objects file]
[Loaded java<span class="class">.util</span><span class="class">.AbstractList</span><span class="variable">$Itr</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.MethodAccessorGenerator</span>$<span class="number">1</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ClassDefiner</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.ClassDefiner</span>$<span class="number">1</span> from shared objects file]
[Loaded sun<span class="class">.reflect</span><span class="class">.GeneratedMethodAccessor1</span> from __JVM_DefineClass__]
Hello, <span class="number">15</span>
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f489412.gif" alt=""></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x524D;15&#x6B21;&#x53CD;&#x5C04;&#x8C03;&#x7528;A.foo()&#x65B9;&#x6CD5;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7A00;&#x5947;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x4F46;&#x5728;&#x7B2C;16&#x6B21;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65F6;&#x4F3C;&#x4E4E;&#x6709;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#x88AB;&#x89E6;&#x53D1;&#x4E86;&#xFF0C;&#x5BFC;&#x81F4;JVM&#x65B0;&#x52A0;&#x8F7D;&#x4E86;&#x4E00;&#x5806;&#x7C7B;&#xFF0C;&#x5176;&#x4E2D;&#x5C31;&#x5305;&#x62EC;[Loaded sun.reflect.GeneratedMethodAccessor1 from <strong>JVM_DefineClass</strong>]&#x8FD9;&#x4E48;&#x4E00;&#x884C;&#x3002;&#x8FD9;&#x662F;&#x54EA;&#x91CC;&#x6765;&#x7684;&#x5462;&#xFF1F;</p>
<p>&#x5148;&#x6765;&#x770B;&#x770B;JDK&#x91CC;Method.invoke()&#x662F;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x7684;&#x3002;java.lang.reflect.Method&#xFF1A;&#xA0; </p>
<p> <img src="http://taojinke.github.io/img/20150702/f489683.gif" alt=""></p>
<pre><code><span class="keyword">public</span> <span class="keyword">final</span>
    <span class="class"><span class="keyword">class</span> <span class="title">Method</span> <span class="keyword">extends</span> <span class="title">AccessibleObject</span> <span class="keyword">implements</span> <span class="title">GenericDeclaration</span>, 
                             <span class="title">Member</span> </span>{
    <span class="comment">// ...</span>
    <span class="keyword">private</span> <span class="keyword">volatile</span> MethodAccessor methodAccessor;
    <span class="comment">// For sharing of MethodAccessors. This branching structure is</span>
    <span class="comment">// currently only two levels deep (i.e., one root Method and</span>
    <span class="comment">// potentially many Method objects pointing to it.)</span>
    <span class="keyword">private</span> Method              root;
    <span class="comment">// ...</span>
    <span class="keyword">public</span> <span class="function">Object <span class="title">invoke</span><span class="params">(Object obj, Object... args)</span>
            <span class="keyword">throws</span> IllegalAccessException, IllegalArgumentException,
            InvocationTargetException
    </span>{
        <span class="keyword">if</span> (!override) {
            <span class="keyword">if</span> (!Reflection.quickCheckMemberAccess(clazz, modifiers)) {
                Class caller = Reflection.getCallerClass(<span class="number">1</span>);
                Class targetClass = ((obj == <span class="keyword">null</span> || !Modifier.isProtected(modifiers))
                                     ? clazz
                                     : obj.getClass());
                <span class="keyword">boolean</span> cached;
                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {
                    cached = (securityCheckCache == caller)
                        &amp;amp;&amp;amp; (securityCheckTargetClassCache == targetClass);
                }
                <span class="keyword">if</span> (!cached) {
                    Reflection.ensureMemberAccess(caller, clazz, obj, modifiers);
                    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {
                    securityCheckCache = caller;
                    securityCheckTargetClassCache = targetClass;
                    }
                }
            }
        }
        <span class="keyword">if</span> (methodAccessor == <span class="keyword">null</span>) acquireMethodAccessor();
        <span class="function"><span class="keyword">return</span> methodAccessor.<span class="title">invoke</span><span class="params">(obj, args)</span></span>;
    }
    <span class="comment">// <span class="doctag">NOTE</span> that there is no synchronization used here. It is correct</span>
    <span class="comment">// (though not efficient) to generate more than one MethodAccessor</span>
    <span class="comment">// for a given Method. However, avoiding synchronization will</span>
    <span class="comment">// probably make the implementation more scalable.</span>
    <span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">acquireMethodAccessor</span><span class="params">()</span> </span>{
        <span class="comment">// First check to see if one has been created yet, and take it</span>
        <span class="comment">// if so</span>
        MethodAccessor tmp = <span class="keyword">null</span>;
        <span class="keyword">if</span> (root != <span class="keyword">null</span>) tmp = root.getMethodAccessor();
        <span class="keyword">if</span> (tmp != <span class="keyword">null</span>) {
            methodAccessor = tmp;
            <span class="keyword">return</span>;
        }
        <span class="comment">// Otherwise fabricate one and propagate it up to the root</span>
        tmp = reflectionFactory.newMethodAccessor(<span class="keyword">this</span>);
        setMethodAccessor(tmp);
    }
    <span class="comment">// ...</span>
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f4898f4.gif" alt=""></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;Method.invoke()&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x903B;&#x8F91;&#xFF0C;&#x800C;&#x662F;&#x59D4;&#x6258;&#x7ED9;sun.reflect.MethodAccessor&#x6765;&#x5904;&#x7406;&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x5B9E;&#x9645;&#x7684;Java&#x65B9;&#x6CD5;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;Method&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;root&#xFF0C;&#x3002;&#x8FD9;&#x4E2A;root&#x662F;&#x4E0D;&#x4F1A;&#x66B4;&#x9732;&#x7ED9;&#x7528;&#x6237;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x6BCF;&#x6B21;&#x5728;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x83B7;&#x53D6;Method&#x5BF9;&#x8C61;&#x65F6;&#x65B0;&#x521B;&#x5EFA;Method&#x5BF9;&#x8C61;&#x628A;root&#x5305;&#x88C5;&#x8D77;&#x6765;&#x518D;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;Java&#x65B9;&#x6CD5;&#x5BF9;&#x5E94;&#x5F97;Method&#x5BF9;&#x8C61;&#x7684;invoke()&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#xFF0C;&#x5B9E;&#x73B0;&#x8C03;&#x7528;&#x903B;&#x8F91;&#x7684;MethodAccessor&#x5BF9;&#x8C61;&#x8FD8;&#x6CA1;&#x521B;&#x5EFA;&#xFF1B;&#x7B49;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x624D;&#x65B0;&#x521B;&#x5EFA;MethodAccessor&#x5E76;&#x66F4;&#x65B0;&#x7ED9;root&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;MethodAccessor.invoke()&#x771F;&#x6B63;&#x5B8C;&#x6210;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x3002;&#xA0;</p>
<p>&#x90A3;&#x4E48;MethodAccessor&#x662F;&#x5565;&#x5462;&#xFF1F;&#xA0;</p>
<p>sun.reflect.MethodAccessor&#xFF1A;</p>
<pre><code><span class="keyword">public</span> <span class="interface"><span class="keyword">interface</span> MethodAccessor </span>{
    <span class="comment">/** Matches specification in {@link java.lang.reflect.Method} */</span>
    <span class="keyword">public</span> <span class="built_in">Object</span> invoke(<span class="built_in">Object</span> obj, <span class="built_in">Object</span>[] args)
        throws IllegalArgumentException, InvocationTargetException;
}
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x65B9;&#x6CD5;&#x63A5;&#x53E3;&#xFF0C;&#x5176;invoke()&#x65B9;&#x6CD5;&#x4E0E;Method.invoke()&#x7684;&#x5BF9;&#x5E94;&#x3002;</p>
<p>&#x521B;&#x5EFA;MethodAccessor&#x5B9E;&#x4F8B;&#x7684;&#x662F;ReflectionFactory&#x3002;</p>
<p>sun.reflect.ReflectionFactory&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f489b65.gif" alt=""></p>
<pre><code>public class <span class="type">ReflectionFactory</span> {
    private <span class="keyword">static</span> boolean initted = <span class="literal">false</span>;
    // ...
    //
    // &amp;quot;<span class="type">Inflation</span>&amp;quot; mechanism. <span class="type">Loading</span> bytecodes to implement
    // <span class="type">Method</span>.invoke() <span class="keyword">and</span> <span class="type">Constructor</span>.newInstance() currently costs
    // <span class="number">3</span>-<span class="number">4</span>x more than an invocation via native code <span class="keyword">for</span> the first
    // invocation (though subsequent invocations have been benchmarked
    // to be over <span class="number">20</span>x faster). <span class="type">Unfortunately</span> this cost increases
    // startup time <span class="keyword">for</span> certain applications that use reflection
    // intensively (but only once per class) to bootstrap themselves.
    // <span class="type">To</span> avoid this penalty we reuse the existing <span class="type">JVM</span> entry points
    // <span class="keyword">for</span> the first few invocations <span class="keyword">of</span> <span class="type">Methods</span> <span class="keyword">and</span> <span class="type">Constructors</span> <span class="keyword">and</span>
    // then switch to the bytecode-based implementations.
    //
    // <span class="type">Package</span>-private to be accessible to <span class="type">NativeMethodAccessorImpl</span>
    // <span class="keyword">and</span> <span class="type">NativeConstructorAccessorImpl</span>
    private <span class="keyword">static</span> boolean noInflation        = <span class="literal">false</span>;
    private <span class="keyword">static</span> <span class="type">int</span>     inflationThreshold = <span class="number">15</span>;
    // ...
    /** <span class="type">We</span> have to defer full initialization <span class="keyword">of</span> this class until after
        the <span class="keyword">static</span> initializer <span class="keyword">is</span> run since java.lang.reflect.<span class="type">Method</span>&amp;apos;s
        <span class="keyword">static</span> initializer (more properly, that <span class="keyword">for</span>
        java.lang.reflect.<span class="type">AccessibleObject</span>) causes this class&amp;apos;s to be
        run, before the system properties are <span class="type">set</span> up. */
    private <span class="keyword">static</span> <span class="type">void</span> checkInitted() {
        <span class="keyword">if</span> (initted) <span class="keyword">return</span>;
        <span class="type">AccessController</span>.doPrivileged(new <span class="type">PrivilegedAction</span>() {
                public <span class="type">Object</span> run() {
                    // <span class="type">Tests</span> to ensure the system properties table <span class="keyword">is</span> fully
                    // initialized. <span class="type">This</span> <span class="keyword">is</span> needed because reflection code <span class="keyword">is</span>
                    // called very early <span class="keyword">in</span> the initialization process (before
                    // command-line arguments have been parsed <span class="keyword">and</span> therefore
                    // these user-settable properties installed.) <span class="type">We</span> assume that
                    // <span class="keyword">if</span> <span class="type">System</span>.<span class="keyword">out</span> <span class="keyword">is</span> non-null then the <span class="type">System</span> class has been
                    // fully initialized <span class="keyword">and</span> that the bulk <span class="keyword">of</span> the startup code
                    // has been run.
                    <span class="keyword">if</span> (<span class="type">System</span>.<span class="keyword">out</span> == null) {
                        // java.lang.<span class="type">System</span> <span class="keyword">not</span> yet fully initialized
                        <span class="keyword">return</span> null;
                    }
                    <span class="type">String</span> val = <span class="type">System</span>.getProperty(&amp;quot;sun.reflect.noInflation&amp;quot;);
                    <span class="keyword">if</span> (val != null &amp;amp;&amp;amp; val.equals(&amp;quot;<span class="literal">true</span>&amp;quot;)) {
                        noInflation = <span class="literal">true</span>;
                    }
                    val = <span class="type">System</span>.getProperty(&amp;quot;sun.reflect.inflationThreshold&amp;quot;);
                    <span class="keyword">if</span> (val != null) {
                        <span class="keyword">try</span> {
                            inflationThreshold = <span class="type">Integer</span>.parseInt(val);
                        } catch (<span class="type">NumberFormatException</span> e) {
                            throw (<span class="type">RuntimeException</span>) 
                                new <span class="type">RuntimeException</span>(&amp;quot;<span class="type">Unable</span> to parse property sun.reflect.inflationThreshold&amp;quot;).
                                    initCause(e);
                        }
                    }
                    initted = <span class="literal">true</span>;
                    <span class="keyword">return</span> null;
                }
            });
    }
    // ...
    public <span class="type">MethodAccessor</span> newMethodAccessor(<span class="type">Method</span> <span class="keyword">method</span>) {
        checkInitted();
        <span class="keyword">if</span> (noInflation) {
            <span class="keyword">return</span> new <span class="type">MethodAccessorGenerator</span>().
                generateMethod(<span class="keyword">method</span>.getDeclaringClass(),
                               <span class="keyword">method</span>.getName(),
                               <span class="keyword">method</span>.getParameterTypes(),
                               <span class="keyword">method</span>.getReturnType(),
                               <span class="keyword">method</span>.getExceptionTypes(),
                               <span class="keyword">method</span>.getModifiers());
        } <span class="keyword">else</span> {
            <span class="type">NativeMethodAccessorImpl</span> acc =
                new <span class="type">NativeMethodAccessorImpl</span>(<span class="keyword">method</span>);
            <span class="type">DelegatingMethodAccessorImpl</span> res =
                new <span class="type">DelegatingMethodAccessorImpl</span>(acc);
            acc.setParent(res);
            <span class="keyword">return</span> res;
        }
    }
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f489dd6.gif" alt=""></p>
<p>&#x8FD9;&#x91CC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6709;&#x8DA3;&#x7684;&#x5730;&#x65B9;&#x4E86;&#x3002;&#x5982;&#x6CE8;&#x91CA;&#x6240;&#x8FF0;&#xFF0C;&#x5B9E;&#x9645;&#x7684;MethodAccessor&#x5B9E;&#x73B0;&#x6709;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;Java&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;native code&#x5B9E;&#x73B0;&#x7684;&#x3002;Java&#x5B9E;&#x73B0;&#x7684;&#x7248;&#x672C;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x9700;&#x8981;&#x8F83;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x957F;&#x4E45;&#x6765;&#x8BF4;&#x6027;&#x80FD;&#x8F83;&#x597D;&#xFF1B;native&#x7248;&#x672C;&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x542F;&#x52A8;&#x65F6;&#x76F8;&#x5BF9;&#x8F83;&#x5FEB;&#xFF0C;&#x4F46;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#x4E4B;&#x540E;&#x901F;&#x5EA6;&#x5C31;&#x6BD4;&#x4E0D;&#x8FC7;Java&#x7248;&#x4E86;&#x3002;&#x8FD9;&#x662F;HotSpot&#x7684;&#x4F18;&#x5316;&#x65B9;&#x5F0F;&#x5E26;&#x6765;&#x7684;&#x6027;&#x80FD;&#x7279;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x8BB8;&#x591A;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5171;&#x540C;&#x70B9;&#xFF1A;&#x8DE8;&#x8D8A;native&#x8FB9;&#x754C;&#x4F1A;&#x5BF9;&#x4F18;&#x5316;&#x6709;&#x963B;&#x788D;&#x4F5C;&#x7528;&#xFF0C;&#x5B83;&#x5C31;&#x50CF;&#x4E2A;&#x9ED1;&#x7BB1;&#x4E00;&#x6837;&#x8BA9;&#x865A;&#x62DF;&#x673A;&#x96BE;&#x4EE5;&#x5206;&#x6790;&#x4E5F;&#x5C06;&#x5176;&#x5185;&#x8054;&#xFF0C;&#x4E8E;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#x4E4B;&#x540E;&#x53CD;&#x800C;&#x662F;&#x6258;&#x7BA1;&#x7248;&#x672C;&#x7684;&#x4EE3;&#x7801;&#x66F4;&#x5FEB;&#x4E9B;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x6743;&#x8861;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x6027;&#x80FD;&#xFF0C;Sun&#x7684;JDK&#x4F7F;&#x7528;&#x4E86;&#x201C;inflation&#x201D;&#x7684;&#x6280;&#x5DE7;&#xFF1A;&#x8BA9;Java&#x65B9;&#x6CD5;&#x5728;&#x88AB;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5F00;&#x5934;&#x82E5;&#x5E72;&#x6B21;&#x4F7F;&#x7528;native&#x7248;&#xFF0C;&#x7B49;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x8D85;&#x8FC7;&#x9608;&#x503C;&#x65F6;&#x5219;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4E13;&#x7528;&#x7684;MethodAccessor&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x751F;&#x6210;&#x5176;&#x4E2D;&#x7684;invoke()&#x65B9;&#x6CD5;&#x7684;&#x5B57;&#x8282;&#x7801;&#xFF0C;&#x4EE5;&#x540E;&#x5BF9;&#x8BE5;Java&#x65B9;&#x6CD5;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;Java&#x7248;&#x3002;&#xA0;</p>
<p>Sun&#x7684;JDK&#x662F;&#x4ECE;1.4&#x7CFB;&#x5F00;&#x59CB;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x4F18;&#x5316;&#x7684;&#x3002;</p>
<p>PS.&#x53EF;&#x4EE5;&#x5728;&#x542F;&#x52A8;&#x547D;&#x4EE4;&#x91CC;&#x52A0;&#x4E0A;-D <em>sun.reflect.noInflation</em> =true&#xFF0C;&#x5C31;&#x4F1A;RefactionFactory&#x7684;noInflation&#x5C5E;&#x6027;&#x5C31;&#x53D8;&#x6210;true&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x7528;&#x7B49;&#x5230;15&#x8C03;&#x7528;&#x540E;&#xFF0C;&#x7A0B;&#x5E8F;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x4F1A;&#x7528;java&#x7248;&#x7684;MethodAccessor&#x4E86;&#x3002; </p>
<p>&#x4E0A;&#x9762;&#x770B;&#x5230;&#x4E86;ReflectionFactory.newMethodAccessor()&#x751F;&#x4EA7;MethodAccessor&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5728;&#x201C;&#x5F00;&#x5934;&#x82E5;&#x5E72;&#x6B21;&#x201D;&#x65F6;&#x7528;&#x5230;&#x7684;DelegatingMethodAccessorImpl&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>sun.reflect.DelegatingMethodAccessorImpl&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f489dd6.gif" alt=""></p>
<pre><code><span class="comment">/** Delegates its invocation to another MethodAccessorImpl and can
    change its delegate at run time. */</span>
<span class="class"><span class="keyword">class</span> <span class="title">DelegatingMethodAccessorImpl</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">MethodAccessorImpl</span> {</span>
    <span class="keyword">private</span> <span class="type">MethodAccessorImpl</span> delegate;
    <span class="type">DelegatingMethodAccessorImpl</span>(<span class="type">MethodAccessorImpl</span> delegate) {
        setDelegate(delegate);
    }    
    public <span class="type">Object</span> invoke(<span class="type">Object</span> obj, <span class="type">Object</span>[] args)
        <span class="keyword">throws</span> <span class="type">IllegalArgumentException</span>, <span class="type">InvocationTargetException</span>
    {
        <span class="keyword">return</span> delegate.invoke(obj, args);
    }
    void setDelegate(<span class="type">MethodAccessorImpl</span> delegate) {
        <span class="keyword">this</span>.delegate = delegate;
    }
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48a047.gif" alt=""></p>
<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x95F4;&#x63A5;&#x5C42;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;native&#x4E0E;Java&#x7248;&#x7684;MethodAccessor&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x5207;&#x6362;&#x3002;</p>
<p>&#x7136;&#x540E;&#x4E0B;&#x9762;&#x5C31;&#x662F;native&#x7248;MethodAccessor&#x7684;Java&#x4E00;&#x4FA7;&#x7684;&#x58F0;&#x660E;:</p>
<p>sun.reflect.NativeMethodAccessorImpl&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f48a047.gif" alt=""></p>
<pre><code>/** <span class="type">Used</span> only <span class="keyword">for</span> the first few invocations <span class="keyword">of</span> a <span class="type">Method</span>; afterward,
    switches to bytecode-based implementation */
class <span class="type">NativeMethodAccessorImpl</span> extends <span class="type">MethodAccessorImpl</span> {
    private <span class="type">Method</span> <span class="keyword">method</span>;
    private <span class="type">DelegatingMethodAccessorImpl</span> parent;
    private <span class="type">int</span> numInvocations;
    <span class="type">NativeMethodAccessorImpl</span>(<span class="type">Method</span> <span class="keyword">method</span>) {
        this.<span class="keyword">method</span> = <span class="keyword">method</span>;
    }    
    public <span class="type">Object</span> invoke(<span class="type">Object</span> obj, <span class="type">Object</span>[] args)
        throws <span class="type">IllegalArgumentException</span>, <span class="type">InvocationTargetException</span>
    {
        <span class="keyword">if</span> (++numInvocations &amp;gt; <span class="type">ReflectionFactory</span>.inflationThreshold()) {
            <span class="type">MethodAccessorImpl</span> acc = (<span class="type">MethodAccessorImpl</span>)
                new <span class="type">MethodAccessorGenerator</span>().
                    generateMethod(<span class="keyword">method</span>.getDeclaringClass(),
                                   <span class="keyword">method</span>.getName(),
                                   <span class="keyword">method</span>.getParameterTypes(),
                                   <span class="keyword">method</span>.getReturnType(),
                                   <span class="keyword">method</span>.getExceptionTypes(),
                                   <span class="keyword">method</span>.getModifiers());
            parent.setDelegate(acc);
        }
        <span class="keyword">return</span> invoke0(<span class="keyword">method</span>, obj, args);
    }
    <span class="type">void</span> setParent(<span class="type">DelegatingMethodAccessorImpl</span> parent) {
        this.parent = parent;
    }
    private <span class="keyword">static</span> native <span class="type">Object</span> invoke0(<span class="type">Method</span> m, <span class="type">Object</span> obj, <span class="type">Object</span>[] args);
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48a2b8.gif" alt=""></p>
<p>&#x6BCF;&#x6B21;NativeMethodAccessorImpl.invoke()&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x770B;&#x8D85;&#x8FC7;&#x9608;&#x503C;&#x6CA1;&#x6709;&#xFF1B;&#x4E00;&#x65E6;&#x8D85;&#x8FC7;&#xFF0C;&#x5219;&#x8C03;&#x7528;MethodAccessorGenerator.generateMethod()&#x6765;&#x751F;&#x6210;Java&#x7248;&#x7684;MethodAccessor&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x6539;&#x53D8;DelegatingMethodAccessorImpl&#x6240;&#x5F15;&#x7528;&#x7684;MethodAccessor&#x4E3A;Java&#x7248;&#x3002;&#x540E;&#x7EED;&#x7ECF;&#x7531;DelegatingMethodAccessorImpl.invoke()&#x8C03;&#x7528;&#x5230;&#x7684;&#x5C31;&#x662F;Java&#x7248;&#x7684;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#x5230;&#x5173;&#x952E;&#x7684;invoke0()&#x65B9;&#x6CD5;&#x662F;&#x4E2A;native&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x5728;HotSpot VM&#x91CC;&#x662F;&#x7531;JVM_InvokeMethod()&#x51FD;&#x6570;&#x6240;&#x652F;&#x6301;&#x7684;&#xFF1A;</p>
<p>&#x7531;C&#x7F16;&#x5199;</p>
<pre><code>JNIEXPORT jobject JNICALL Java_sun_reflect_NativeMethodAccessorImpl_invoke0
(JNIEnv *env, jclass unused, jobject <span class="keyword">m</span>, jobject obj, jobjectArray <span class="keyword">args</span>)
{
    <span class="keyword">return</span> JVM_InvokeMethod(env, <span class="keyword">m</span>, obj, <span class="keyword">args</span>);
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48a529.gif" alt=""></p>
<pre><code><span class="type">JVM_ENTRY</span>(jobject, <span class="type">JVM_InvokeMethod</span>(<span class="type">JNIEnv</span> *env, jobject <span class="keyword">method</span>, jobject obj, jobjectArray args0))
  <span class="type">JVMWrapper</span>(&amp;quot;<span class="type">JVM_InvokeMethod</span>&amp;quot;);
  <span class="type">Handle</span> method_handle;
  <span class="keyword">if</span> (thread-&amp;gt;stack_available((address) &amp;amp;method_handle) &amp;gt;= <span class="type">JVMInvokeMethodSlack</span>) {
    method_handle = <span class="type">Handle</span>(<span class="type">THREAD</span>, <span class="type">JNIHandles</span>::resolve(<span class="keyword">method</span>));
    <span class="type">Handle</span> receiver(<span class="type">THREAD</span>, <span class="type">JNIHandles</span>::resolve(obj));
    objArrayHandle args(<span class="type">THREAD</span>, objArrayOop(<span class="type">JNIHandles</span>::resolve(args0)));
    oop <span class="literal">result</span> = <span class="type">Reflection</span>::invoke_method(method_handle(), receiver, args, <span class="type">CHECK_NULL</span>);
    jobject res = <span class="type">JNIHandles</span>::make_local(env, <span class="literal">result</span>);
    <span class="keyword">if</span> (<span class="type">JvmtiExport</span>::should_post_vm_object_alloc()) {
      oop ret_type = java_lang_reflect_Method::return_type(method_handle());
      assert(ret_type != <span class="type">NULL</span>, &amp;quot;sanity check: ret_type oop must <span class="keyword">not</span> be <span class="type">NULL</span>!&amp;quot;);
      <span class="keyword">if</span> (java_lang_Class::is_primitive(ret_type)) {
        // <span class="type">Only</span> <span class="keyword">for</span> primitive <span class="keyword">type</span> vm allocates memory <span class="keyword">for</span> java <span class="keyword">object</span>.
        // <span class="type">See</span> box() <span class="keyword">method</span>.
        <span class="type">JvmtiExport</span>::post_vm_object_alloc(<span class="type">JavaThread</span>::current(), <span class="literal">result</span>);
      }
    }
    <span class="keyword">return</span> res;
  } <span class="keyword">else</span> {
    <span class="type">THROW_0</span>(vmSymbols::java_lang_StackOverflowError());
  }
<span class="type">JVM_END</span>
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48a529.gif" alt=""></p>
<p>&#x5176;&#x4E2D;&#x7684;&#x5173;&#x952E;&#x53C8;&#x662F;Reflection::invoke_method()&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f48a79a.gif" alt=""></p>
<pre><code><span class="comment">// This would be nicer if, say, java.lang.reflect.Method was a subclass</span>
<span class="comment">// of java.lang.reflect.Constructor</span>

oop Reflection::invoke_method(oop method_mirror, Handle receiver, objArrayHandle args, TRAPS) <span class="comment">{
  oop mirror             = java_lang_reflect_Method::clazz(method_mirror);
  int slot               = java_lang_reflect_Method::slot(method_mirror);
  bool override          = java_lang_reflect_Method::override(method_mirror) != 0;
  objArrayHandle ptypes(THREAD, objArrayOop(java_lang_reflect_Method::parameter_types(method_mirror)));

  oop return_type_mirror = java_lang_reflect_Method::return_type(method_mirror);
  BasicType rtype;
  if (java_lang_Class::is_primitive(return_type_mirror)) {
    rtype = basic_type_mirror_to_basic_type(return_type_mirror, CHECK_NULL);
  }</span> <span class="keyword">else</span> <span class="comment">{
    rtype = T_OBJECT;
  }</span>

  instanceKlassHandle klass(THREAD, java_lang_Class::as_klassOop(mirror));
  methodOop m = klass-&amp;gt;method_with_idnum(slot);
  <span class="keyword">if</span> (m == NULL) <span class="comment">{
    THROW_MSG_0(vmSymbols::java_lang_InternalError(), &amp;quot;invoke&amp;quot;);
  }</span>
  methodHandle <span class="function"><span class="keyword">method</span><span class="params">(THREAD, m)</span>;</span>

  return invoke(klass, <span class="function"><span class="keyword">method</span>, <span class="title">receiver</span>, <span class="title">override</span>, <span class="title">ptypes</span>, <span class="title">rtype</span>, <span class="title">args</span>, <span class="title">true</span>, <span class="title">THREAD</span>);</span>
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48a79a.gif" alt=""></p>
<p>&#x518D;&#x4E0B;&#x53BB;&#x5C31;&#x6DF1;&#x5165;&#x5230;HotSpot VM&#x7684;&#x5185;&#x90E8;&#x4E86;&#xFF0C;&#x672C;&#x6587;&#x5C31;&#x5728;&#x8FD9;&#x91CC;&#x6253;&#x4F4F;&#x5427;&#x3002;&#x6709;&#x540C;&#x5B66;&#x6709;&#x5174;&#x8DA3;&#x6DF1;&#x7A76;&#x7684;&#x8BDD;&#x4EE5;&#x540E;&#x53EF;&#x4EE5;&#x518D;&#x5199;&#x4E00;&#x7BC7;&#x8BA8;&#x8BBA;native&#x7248;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x56DE;&#x5230;Java&#x7684;&#x4E00;&#x4FA7;&#x3002;MethodAccessorGenerator&#x957F;&#x5565;&#x6837;&#x5462;&#xFF1F;&#x7531;&#x4E8E;&#x4EE3;&#x7801;&#x592A;&#x957F;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5B8C;&#x6574;&#x8D34;&#x4E86;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x5230;OpenJDK 6&#x7684;Mercurial&#x4ED3;&#x5E93;&#x770B;&#xFF1A; <a href="http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/b202c79afde3/src/share/classes/sun/reflect/MethodAccessorGenerator.java" target="_blank" rel="external">OpenJDK 6 build 17&#x7684;MethodAccessorGenerator</a> &#x3002;&#x5B83;&#x7684;&#x57FA;&#x672C;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#x5728;&#x5185;&#x5B58;&#x91CC;&#x751F;&#x6210;&#x65B0;&#x7684;&#x4E13;&#x7528;Java&#x7C7B;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x52A0;&#x8F7D;&#x3002;&#x5C31;&#x8D34;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A; </p>
<p> <img src="http://taojinke.github.io/img/20150702/f48aa0b.gif" alt=""></p>
<pre><code><span class="keyword">private</span> static synchronized <span class="built_in">String</span> generateName(<span class="built_in">boolean</span> isConstructor,
                                                <span class="built_in">boolean</span> forSerialization)
{
    <span class="keyword">if</span> (isConstructor) {
        <span class="keyword">if</span> (forSerialization) {
            int num = ++serializationConstructorSymnum;
            <span class="keyword">return</span> &amp;quot;sun/reflect/GeneratedSerializationConstructorAccessor&amp;quot; + num;
        } <span class="keyword">else</span> {
            int num = ++<span class="constructor">constructorSymnum;
            <span class="keyword">return</span> &amp;quot;sun/reflect/GeneratedConstructorAccessor&amp;quot; + num;
        }
    } <span class="keyword">else</span> </span>{
        int num = ++methodSymnum;
        <span class="keyword">return</span> &amp;quot;sun/reflect/GeneratedMethodAccessor&amp;quot; + num;
    }
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48aa0b.gif" alt=""></p>
<p>&#x53BB;&#x9605;&#x8BFB;&#x6E90;&#x7801;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;MethodAccessorGenerator&#x662F;&#x5982;&#x4F55;&#x4E00;&#x70B9;&#x70B9;&#x628A;Java&#x7248;&#x7684;MethodAccessor&#x5B9E;&#x73B0;&#x7C7B;&#x751F;&#x4EA7;&#x51FA;&#x6765;&#x7684;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x5230;GeneratedMethodAccessor+&#x6570;&#x5B57;&#x8FD9;&#x79CD;&#x540D;&#x5B57;&#x662F;&#x4ECE;&#x54EA;&#x91CC;&#x6765;&#x7684;&#x4E86;&#xFF0C;&#x5C31;&#x5728;&#x4E0A;&#x9762;&#x7684;generateName()&#x65B9;&#x6CD5;&#x91CC;&#x3002;&#x5BF9;&#x672C;&#x6587;&#x5F00;&#x5934;&#x7684;&#x4F8B;&#x5B50;&#x7684;A.foo()&#xFF0C;&#x751F;&#x6210;&#x7684;Java&#x7248;MethodAccessor&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A; </p>
<p> <img src="http://taojinke.github.io/img/20150702/f48ac7c.gif" alt=""></p>
<pre><code><span class="keyword">package</span> sun.reflect;
public <span class="class"><span class="keyword">class</span> <span class="title">GeneratedMethodAccessor1</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">MethodAccessorImpl</span> {</span>    
    public <span class="type">GeneratedMethodAccessor1</span>() {
        <span class="keyword">super</span>();
    }
    public <span class="type">Object</span> invoke(<span class="type">Object</span> obj, <span class="type">Object</span>[] args)   
        <span class="keyword">throws</span> <span class="type">IllegalArgumentException</span>, <span class="type">InvocationTargetException</span> {
        <span class="comment">// prepare the target and parameters</span>
        <span class="keyword">if</span> (obj == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">NullPointerException</span>();
        <span class="keyword">try</span> {
            <span class="type">A</span> target = (<span class="type">A</span>) obj;
            <span class="keyword">if</span> (args.length != <span class="number">1</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>();
            <span class="type">String</span> arg0 = (<span class="type">String</span>) args[<span class="number">0</span>];
        } <span class="keyword">catch</span> (<span class="type">ClassCastException</span> e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(e.toString());
        } <span class="keyword">catch</span> (<span class="type">NullPointerException</span> e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(e.toString());
        }
        <span class="comment">// make the invocation</span>
        <span class="keyword">try</span> {
            target.foo(arg0);
        } <span class="keyword">catch</span> (<span class="type">Throwable</span> t) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">InvocationTargetException</span>(t);
        }
    }
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48aeed.gif" alt=""></p>
<p>&#x5C31;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x4E2A;invoke()&#x65B9;&#x6CD5;&#x975E;&#x5E38;&#x5E72;&#x51C0;&#xFF08;&#x7136;&#x800C;&#x5C31;&#x201C;&#x6B63;&#x5E38;&#x8C03;&#x7528;&#x201D;&#x800C;&#x8A00;&#x8FD9;&#x989D;&#x5916;&#x5F00;&#x9500;&#x8FD8;&#x662F;&#x660E;&#x663E;&#x7684;&#xFF09;&#x3002;&#x6CE8;&#x610F;&#x5230;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#x88AB;&#x62C6;&#x5F00;&#x4E86;&#xFF0C;&#x628A;&#x6BCF;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x6062;&#x590D;&#x5230;&#x539F;&#x672C;&#x6CA1;&#x6709;&#x88AB;Object[]&#x5305;&#x88C5;&#x524D;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#x505A;&#x6B63;&#x5E38;&#x7684;invokevirtual&#x8C03;&#x7528;&#x3002;&#x7531;&#x4E8E;&#x5728;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x65F6;&#x5DF2;&#x7ECF;&#x5FAA;&#x73AF;&#x904D;&#x5386;&#x8FC7;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x751F;&#x6210;&#x51FA;&#x6765;&#x7684;&#x4EE3;&#x7801;&#x91CC;&#x5C31;&#x4E0D;&#x518D;&#x5305;&#x542B;&#x5FAA;&#x73AF;&#x4E86;&#x3002;</p>
<p>&#x81F3;&#x6B64;&#x627E;&#x5230;&#x6211;&#x7684;&#x7B54;&#x6848;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;MethodAccessor&#x4F1A;&#x505A;&#x5F3A;&#x5236;&#x7C7B;&#x578B;&#xFFFD;&#xFFFD;&#xFFFD;&#x6362;&#x518D;&#x8FDB;&#x884C;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#xFF0C;&#x4F46;&#x7236;&#x7C7B;&#x5F3A;&#x5236;&#x8F6C;&#x5316;&#x6210;&#x5B50;&#x7C7B;&#x7684;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#x7C7B;&#x578B;&#x4E0D;&#x5339;&#x914D;&#x9519;&#x8BEF;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x53D8;&#x91CF;&#x7684;&#x5F15;&#x7528;&#x58F0;&#x660E;&#x662F;&#x7236;&#x4F46;&#x5B9E;&#x9645;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5B50;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x79CD;&#x8C03;&#x7528;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>
<p>—————————————————————————————&#x9898;&#x5916;&#x8BDD;—————————————————————</p>
<p>&#x5F53;&#x8BE5;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x6210;&#x4E3A;&#x70ED;&#x70B9;&#x65F6;&#xFF0C;&#x5B83;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x88AB;&#x5185;&#x8054;&#x5230;&#x9760;&#x8FD1;Method.invoke()&#x7684;&#x4E00;&#x4FA7;&#xFF0C;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x4E86;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x7684;&#x5F00;&#x9500;&#x3002;&#x800C;native&#x7248;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x5219;&#x65E0;&#x6CD5;&#x88AB;&#x6709;&#x6548;&#x5185;&#x8054;&#xFF0C;&#x56E0;&#x800C;&#x8C03;&#x7528;&#x5F00;&#x9500;&#x65E0;&#x6CD5;&#x968F;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x800C;&#x964D;&#x4F4E;&#x3002;&#xA0;</p>
<p>&#x867D;&#x8BF4;Sun&#x7684;JDK&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x4F7F;&#x5F97;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x6210;&#x672C;&#x6BD4;&#x4EE5;&#x524D;&#x964D;&#x4F4E;&#x4E86;&#x5F88;&#x591A;&#xFF0C;&#x4F46;Method.invoke()&#x672C;&#x8EAB;&#x8981;&#x7528;&#x6570;&#x7EC4;&#x5305;&#x88C5;&#x53C2;&#x6570;&#xFF1B;&#x800C;&#x4E14;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x90FD;&#x5FC5;&#x987B;&#x68C0;&#x67E5;&#x65B9;&#x6CD5;&#x7684;&#x53EF;&#x89C1;&#x6027;&#xFF08;&#x5728;Method.invoke()&#x91CC;&#xFF09;&#xFF0C;&#x4E5F;&#x5FC5;&#x987B;&#x68C0;&#x67E5;&#x6BCF;&#x4E2A;&#x5B9E;&#x9645;&#x53C2;&#x6570;&#x4E0E;&#x5F62;&#x5F0F;&#x53C2;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x5339;&#x914D;&#x6027;&#xFF08;&#x5728;NativeMethodAccessorImpl.invoke0()&#x91CC;&#x6216;&#x8005;&#x751F;&#x6210;&#x7684;Java&#x7248;MethodAccessor.invoke()&#x91CC;&#xFF09;&#xFF1B;&#x800C;&#x4E14;Method.invoke()&#x5C31;&#x50CF;&#x662F;&#x4E2A;&#x72EC;&#x6728;&#x6865;&#x4E00;&#x6837;&#xFF0C;&#x5404;&#x5904;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x90FD;&#x8981;&#x6324;&#x8FC7;&#x53BB;&#xFF0C;&#x5728;&#x8C03;&#x7528;&#x70B9;&#x4E0A;&#x6536;&#x96C6;&#x5230;&#x7684;&#x7C7B;&#x578B;&#x4FE1;&#x606F;&#x5C31;&#x4F1A;&#x5F88;&#x4E71;&#xFF0C;&#x5F71;&#x54CD;&#x5185;&#x8054;&#x7A0B;&#x5E8F;&#x7684;&#x5224;&#x65AD;&#xFF0C;&#x4F7F;&#x5F97;Method.invoke()&#x81EA;&#x8EAB;&#x96BE;&#x4EE5;&#x88AB;&#x5185;&#x8054;&#x5230;&#x8C03;&#x7528;&#x65B9;&#x3002;&#xA0;</p>
<p>&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;JDK7&#x91CC;&#x65B0;&#x7684;MethodHandler&#x5219;&#x66F4;&#x6709;&#x6F5C;&#x529B;&#xFF0C;&#x5728;&#x5176;&#x529F;&#x80FD;&#x5B8C;&#x5168;&#x5B9E;&#x73B0;&#x540E;&#x80FD;&#x8FBE;&#x5230;&#x6BD4;&#x666E;&#x901A;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x66F4;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5728;&#x4F7F;&#x7528;MethodHandle&#x6765;&#x505A;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65F6;&#xFF0C;MethodHandle.invoke()&#x7684;&#x5F62;&#x5F0F;&#x53C2;&#x6570;&#x4E0E;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x90FD;&#x662F;&#x51C6;&#x786E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x9700;&#x8981;&#x5728;&#x94FE;&#x63A5;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#x624D;&#x9700;&#x8981;&#x68C0;&#x67E5;&#x7C7B;&#x578B;&#x7684;&#x5339;&#x914D;&#x6027;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#xFFFD;&#xFFFD;&#xFFFD;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x90FD;&#x68C0;&#x67E5;&#x3002;&#x800C;&#x4E14;MethodHandle&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x503C;&#xFF0C;&#x5728;&#x521B;&#x5EFA;&#x540E;&#x5176;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x5C31;&#x4E0D;&#x4F1A;&#x518D;&#x6539;&#x53D8;&#x4E86;&#xFF1B;JVM&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x77E5;&#x8BC6;&#x800C;&#x653E;&#x5FC3;&#x7684;&#x5BF9;&#x5B83;&#x505A;&#x6FC0;&#x8FDB;&#x4F18;&#x5316;&#xFF0C;&#x4F8B;&#x5982;&#x5C06;&#x5B9E;&#x9645;&#x7684;&#x8C03;&#x7528;&#x76EE;&#x6807;&#x5185;&#x8054;&#x5230;&#x505A;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x7684;&#x4E00;&#x4FA7;&#x3002;&#xA0;</p>
<p>&#x672C;&#x6765;Java&#x7684;&#x5B89;&#x5168;&#x673A;&#x5236;&#x4F7F;&#x5F97;&#x4E0D;&#x540C;&#x7C7B;&#x4E4B;&#x95F4;&#x4E0D;&#x662F;&#x4EFB;&#x610F;&#x4FE1;&#x606F;&#x90FD;&#x53EF;&#x89C1;&#xFF0C;&#x4F46;Sun&#x7684;JDK&#x91CC;&#x5F00;&#x4E86;&#x4E2A;&#x53E3;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x6807;&#x8BB0;&#x7C7B;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x5F00;&#x540E;&#x95E8;&#xFF1A;</p>
<p> <img src="http://taojinke.github.io/img/20150702/f48aeed.gif" alt=""></p>
<pre><code>package sun.reflect;
/** &amp;lt;P&amp;gt; MagicAccessorImpl (named <span class="keyword">for</span> parity <span class="keyword">with</span> FieldAccessorImpl <span class="keyword">and</span>
    others, <span class="keyword">not</span> because <span class="keyword">it</span> actually implements an interface) <span class="keyword">is</span> a
    marker <span class="type">class</span> <span class="keyword">in</span> <span class="keyword">the</span> hierarchy. All subclasses <span class="keyword">of</span> this <span class="type">class</span> are
    &amp;quot;magically&amp;quot; granted access <span class="keyword">by</span> <span class="keyword">the</span> VM <span class="keyword">to</span> otherwise inaccessible
    fields <span class="keyword">and</span> methods <span class="keyword">of</span> other classes. It <span class="keyword">is</span> used <span class="keyword">to</span> hold <span class="keyword">the</span> code
    <span class="keyword">for</span> dynamically-generated FieldAccessorImpl <span class="keyword">and</span> MethodAccessorImpl
    subclasses. (Use <span class="keyword">of</span> <span class="keyword">the</span> <span class="property">word</span> &amp;quot;unsafe&amp;quot; was avoided <span class="keyword">in</span> this <span class="type">class</span>&amp;apos;s
    <span class="property">name</span> <span class="keyword">to</span> avoid confusion <span class="keyword">with</span> {@link sun.misc.Unsafe}.) &amp;lt;/P&amp;gt;
    &amp;lt;P&amp;gt; The bug fix <span class="keyword">for</span> <span class="number">4486457</span> also necessitated disabling
    verification <span class="keyword">for</span> this <span class="type">class</span> <span class="keyword">and</span> all subclasses, <span class="keyword">as</span> opposed <span class="keyword">to</span> just
    SerializationConstructorAccessorImpl <span class="keyword">and</span> subclasses, <span class="keyword">to</span> avoid
    having <span class="keyword">to</span> indicate <span class="keyword">to</span> <span class="keyword">the</span> VM which <span class="keyword">of</span> these dynamically-generated
    stub classes were known <span class="keyword">to</span> be able <span class="keyword">to</span> pass <span class="keyword">the</span> verifier. &amp;lt;/P&amp;gt;
    &amp;lt;P&amp;gt; Do <span class="keyword">not</span> change <span class="keyword">the</span> <span class="property">name</span> <span class="keyword">of</span> this <span class="type">class</span> <span class="keyword">without</span> also changing <span class="keyword">the</span>
    VM&amp;apos;s code. &amp;lt;/P&amp;gt; */
<span class="type">class</span> MagicAccessorImpl {
}
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48b15e.gif" alt=""></p>
<p>&#x90A3;&#x4E2A;&quot;<strong>JVM_DefineClass</strong>&quot;&#x7684;&#x6765;&#x6E90;&#x662F;&#x8FD9;&#x91CC;&#xFF1A;src/share/vm/prims/jvm.cpp&#xA0; </p>
<p> <img src="http://taojinke.github.io/img/20150702/f48b15e.gif" alt=""></p>
<pre><code><span class="comment">// common code for JVM_DefineClass() and JVM_DefineClassWithSource()</span>
<span class="comment">// and JVM_DefineClassWithSourceCond()</span>
<span class="keyword">static</span> <span class="function">jclass <span class="title">jvm_define_class_common</span><span class="params">(JNIEnv *env, <span class="keyword">const</span> <span class="keyword">char</span> *name,
                                      jobject loader, <span class="keyword">const</span> jbyte *buf,
                                      jsize len, jobject pd, <span class="keyword">const</span> <span class="keyword">char</span> *source,
                                      jboolean verify, TRAPS)</span> </span>{
  <span class="keyword">if</span> (source == NULL)  source = &amp;quot;__JVM_DefineClass__&amp;quot;;
</code></pre><p> <img src="http://taojinke.github.io/img/20150702/f48b3cf.gif" alt=""></p>
<p>P.S. log&#x91CC;&#x7684;&quot;shared objects file&quot;,&#x5176;&#x5B9E;&#x5C31;&#x662F;rt.jar,&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x4E48;&#x663E;&#x793A;&#xFF0C;Stack OverFlow&#x4E0A;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x56DE;&#x7B54;&#xFF1A;</p>
<p>This is Class Data Sharing. When running the Sun/Oracle Client HotSpot and sharing enable (either -Xshare:auto which is the default, or&#xA0; -Xshare:on ), the&#xA0; classes.jsa file is memory mapped. This file contains a number of classes (listed in the&#xA0; classlist file) in internal representation suitable for the exact configuration of the machine running it. The idea is that the classes can be loaded quickly, getting the the JVM up faster. Soon enough a class not covered will be hit, and&#xA0; rt.jar will need to be opened and classes loaded conventionally as required. </p>
<p>&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x5927;&#x6982;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x6240;&#x6709;jvm&#x5171;&#x4EAB;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x52A0;&#x8F7D;&#x91CC;&#x9762;&#x7684;class.&#x6709;&#x82F1;&#x6587;&#x597D;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x4EE5;&#x7559;&#x8A00;&#x5E2E;&#x52A9;&#x4E0B;&#x3002;</p>
<p>P.S java&#x5185;&#x8054;&#x51FD;&#x6570;</p>
<p>C++&#x662F;&#x5426;&#x4E3A;&#x5185;&#x8054;&#x51FD;&#x6570;&#x7531;&#x81EA;&#x5DF1;&#x51B3;&#x5B9A;&#xFF0C;Java&#x7531;&#x7F16;&#x8BD1;&#x5668;&#x51B3;&#x5B9A;&#x3002;&#x5185;&#x8054;&#x51FD;&#x6570;&#x5C31;&#x662F;&#x6307;&#x51FD;&#x6570;&#x5728;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x5730;&#x65B9;&#x76F4;&#x63A5;&#x5C55;&#x5F00;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x5728;&#x8C03;&#x7528;&#x65F6;&#x4E0D;&#x7528;&#x50CF;&#x4E00;&#x822C;&#x51FD;&#x6570;&#x90A3;&#x6837;&#xFF0C;&#x53C2;&#x6570;&#x538B;&#x6808;&#xFF0C;&#x8FD4;&#x56DE;&#x65F6;&#x53C2;&#x6570;&#x51FA;&#x6808;&#x4EE5;&#x53CA;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x7B49;&#xFF0C;&#x8FD9;&#x6837;&#x63D0;&#x9AD8;&#x4E86;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x3002;</p>
<p>Java&#x4E0D;&#x652F;&#x6301;&#x76F4;&#x63A5;&#x58F0;&#x660E;&#x4E3A;&#x5185;&#x8054;&#x51FD;&#x6570;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8BA9;&#x4ED6;&#x5185;&#x8054;&#xFF0C;&#x5219;&#x662F;&#x7531;&#x7F16;&#x8BD1;&#x5668;&#x8BF4;&#x4E86;&#x7B97;&#xFF0C;&#x4F60;&#x53EA;&#x80FD;&#x591F;&#x5411;&#x7F16;&#x8BD1;&#x5668;&#x63D0;&#x51FA;&#x8BF7;&#x6C42;&#x3002;</p>
<p>final&#x9664;&#x4E86;&#x4E0D;&#x80FD;&#x88AB;override&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x80FD;&#x5B9E;&#x73B0;&#x5185;&#x8054;&#x3002;&#x5982;&#x679C;&#x51FD;&#x6570;&#x4E3A;private&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x5185;&#x8054;&#x7684;&#x3002;</p>
<p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x51FD;&#x6570;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x5F53;&#x505A;&#x5185;&#x8054;&#x51FD;&#x6570;&#xFF0C;&#x53EA;&#x6709;&#x58F0;&#x660E;&#x4E86;final&#x540E;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x624D;&#x4F1A;&#x8003;&#x8651;&#x662F;&#x4E0D;&#x662F;&#x8981;&#x628A;&#x4F60;&#x7684;&#x51FD;&#x6570;&#x53D8;&#x6210;&#x5185;&#x8054;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x5185;&#x8054;&#x4E0D;&#x4E00;&#x5B9A;&#x597D;&#xFF0C;&#x5F53;&#x88AB;&#x6307;&#x5B9A;&#x4E3A;&#x5185;&#x8054;&#x7684;&#x65B9;&#x6CD5;&#x4F53;&#x5F88;&#x5927;&#x65F6;&#xFF0C;&#x5C55;&#x5F00;&#x7684;&#x5F00;&#x9500;&#x53EF;&#x80FD;&#x5C31;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7;&#x4E86;&#x666E;&#x901A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5F15;&#x5165;&#x4E86;&#x5185;&#x8054;&#x53CD;&#x800C;&#x964D;&#x4F4E;&#x4E86;&#x6027;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x9009;&#x62E9;&#x8FD9;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x5E94;&#x8BE5;&#x614E;&#x91CD;&#x4E9B;&#xFF0C;&#x4E0D;&#x8FC7;&#xFF0C;&#x5728;&#x4EE5;&#x540E;&#x9AD8;&#x7248;&#x672C;&#x7684;JVM&#x4E2D;&#xFF0C;&#x5728;&#x5904;&#x7406;&#x5185;&#x8054;&#x65F6;&#x505A;&#x51FA;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x65B9;&#x6CD5;&#x7684;&#x89C4;&#x6A21;&#x6765;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x5C55;&#x5F00;&#x8C03;&#x7528;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f46628c/" title="JVM学习笔记 -" itemprop="url">JVM学习笔记 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:29.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x4E00;&#x3001;&#x591A;&#x7EBF;&#x7A0B;JVM&#x5B9E;&#x4F8B;</p>
<p>&#x4E00;&#x4E2A;JVM&#x5B9E;&#x4F8B;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5F88;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x673A;&#x5668;&#x5305;&#x542B;&#x591A;&#x4E2A;JVM&#x5B9E;&#x4F8B;&#xFF0C;&#x7ED1;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x7684;&#x533A;&#x57DF;&#xFF1A;&#x65B9;&#x6CD5;&#x533A;&#xFF0C;&#x5E38;&#x91CF;&#x7F13;&#x51B2;&#x6C60;&#xFF0C;&#x5806;&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x79C1;&#x6709;&#xFF1A;&#x7A0B;&#x5E8F;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x6808;&#xFF0C;&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#x3002;</p>
<p>&#x4E8C;&#x3001;JVM&#x8FD0;&#x884C;&#x673A;&#x5236;</p>
<p>JVM&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<p>1&#xFF09;&#x52A0;&#x8F7D;.class&#x6587;&#x4EF6;&#x3002;</p>
<p>2&#xFF09;&#x7BA1;&#x7406;&#x5E76;&#x5206;&#x914D;&#x5185;&#x5B58;</p>
<p>3&#xFF09;&#x8FDB;&#x884C;GC&#x3002;</p>
<p>JVM&#x7684;&#x4E24;&#x79CD;&#x673A;&#x5236;&#xFF1A;</p>
<p>1&#xFF09;&#x88C5;&#x8F7D;&#x5408;&#x9002;&#x7684;&#x7C7B;&#x6216;&#x63A5;&#x53E3;&#xFF0C;&#x53EB;&#x505A;&#x7C7B;&#x72B6;&#x6001;&#x5B50;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>2&#xFF09;&#x6267;&#x884C;&#x5DF2;&#x7ECF;&#x88C5;&#x8F7D;&#x7684;&#x7C7B;&#x6216;&#x63A5;&#x53E3;&#xFF0C;&#x53EB;&#x505A;&#x8FD0;&#x884C;&#x5F15;&#x64CE;&#x3002;</p>
<p>&#x4E09;&#x3001;&#x8FD0;&#x884C;&#x65F6;&#x6570;&#x636E;&#x533A;&#x57DF;</p>
<p>1&#x3001;JVM&#x5B9E;&#x4F8B;&#x4E2D;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x79C1;&#x6709;</p>
<p>&#x7A0B;&#x5E8F;&#x8BA1;&#x6570;&#x5668;&#xFF1A;&#x5236;&#x5B9A;&#x4E0B;&#x4E00;&#x6761;&#x6267;&#x884C;&#x7684;&#x5B57;&#x8282;&#x7801;&#xFF0C;&#x5305;&#x542B;&#x5206;&#x652F;&#xFF0C;&#x5FAA;&#x73AF;&#xFF0C;&#x8DF3;&#x8F6C;&#xFF0C;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;&#x7EBF;&#x7A0B;&#x6062;&#x590D;&#x7B49;&#x57FA;&#x7840;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x865A;&#x62DF;&#x673A;&#x6808;&#xFF1A;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x8868;&#xFF08;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1A;int&#xFF0C;float&#xFF09;&#xFF0C;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#xFF0C;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#xFF0C;&#x65B9;&#x6CD5;&#x51FA;&#x53E3;&#x7B49;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#xFF1A;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x6808;&#x6267;&#x884C;JAVA&#x65B9;&#x6CD5;&#xFF08;&#x5B57;&#x8282;&#x7801;&#xFF09;&#x670D;&#x52A1;&#xFF0C;&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#x6267;&#x884C;Native&#x65B9;&#x6CD5;&#x670D;&#x52A1;&#x3002;&#xA0;</p>
<p>2&#x3001;JVM&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x516C;&#x7528;</p>
<p>JAVA&#x5806;&#xFF1A;&#x53EA;&#x5B58;&#x653E;&#x5404;&#x79CD;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#xFF0C;gc&#x7684;&#x4E3B;&#x8981;&#x533A;&#x57DF;&#xFF0C;&#x5206;&#x4E3A;Eden&#xFF0C;supervivor*2&#xFF0C;old&#xFF0C;permanent&#x533A;&#x57DF;&#x3002;</p>
<p>&#x65B9;&#x6CD5;&#x533A;&#xFF1A;&#x5B58;&#x653E;&#x865A;&#x62DF;&#x673A;&#x52A0;&#x8F7D;&#x7684;&#x7C7B;&#x4FE1;&#x606F;&#xFF0C;&#x5E38;&#x91CF;&#xFF0C;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x7B49;&#x6570;&#x636E;&#x3002;</p>
<p>&#x5E38;&#x91CF;&#x6C60;&#xFF1A;&#x7C7B;&#x88AB;&#x52A0;&#x8F7D;&#x5230;&#x65B9;&#x6CD5;&#x533A;&#x4E2D;&#x540E;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x653E;&#x5E38;&#x91CF;&#x3002;</p>
<p>3&#x3001;&#x76F4;&#x63A5;&#x5185;&#x5B58;</p>
<p>JDK1.4&#x52A0;&#x5165;&#x4E86;NIO&#x7C7B;&#xFF0C;&#x57FA;&#x4E8E;&#x901A;&#x9053;&#x548C;&#x7F13;&#x51B2;&#x533A;&#x7684;IO&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;Native&#x51FD;&#x6570;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x56DB;&#x3001;&#x5BF9;&#x8C61;&#x548C;OOM&#x95EE;&#x9898;</p>
<p>1&#x3001;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;</p>
<p>new&#x6307;&#x4EE4;&#x540E;&#xFF0C;&#x4F1A;&#x53BB;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x8F7D;&#xFF0C;&#x89E3;&#x6790;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x3002;&#x7136;&#x540E;&#x5C31;&#x5728;Java&#x5806;&#x4E2D;&#x5206;&#x914D;&#x5185;&#x5B58;&#x5B58;&#x653E;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x5BF9;&#x8C61;init&#x540E;&#x653E;&#x5165;&#x5806;&#x4E2D;&#x3002;&#x6240;&#x6709;&#x7684;&#x5173;&#x4E8E;&#x5BF9;&#x8C61;&#x7684;&#x4FE1;&#x606F;&#x90FD;&#x653E;&#x5165;&#x5230;&#x5BF9;&#x8C61;&#x5934;&#x4FE1;&#x606F;&#x4E2D;&#x3002;</p>
<p>Thread Local Allocation Buffer (TLAB) &#x672C;&#x5730;&#x7EBF;&#x7A0B;&#x5206;&#x914D;&#x7F13;&#x51B2;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#xFF0C;&#x5206;&#x914D;&#x5BF9;&#x8C61;&#x4F7F;&#x7528;&#x3002;</p>
<p>2&#x3001;&#x5BF9;&#x8C61;&#x7684;&#x7ED3;&#x6784;</p>
<p>&#x5BF9;&#x8C61;&#x5934;&#xFF08;header&#xFF09;&#xFF1A;&#x4E00;&#x662F;&#x5B58;&#x653E;&#x5BF9;&#x8C61;&#x81EA;&#x8EAB;&#x8FD0;&#x884C;&#x6570;&#x636E;&#xFF08;&#x54C8;&#x5E0C;&#x7801;&#xFF0C;GC&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#xFF0C;&#x9501;&#x72B6;&#x6001;&#x6807;&#x8BC6;&#xFF0C;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x9501;&#xFF0C;&#x504F;&#x5411;&#x7EBF;&#x7A0B;ID&#xFF0C;&#x504F;&#x5411;&#x65F6;&#x95F4;&#x6233;&#xFF09;&#xFF1B;&#x4E8C;&#x662F;&#x5B58;&#x653E;&#x7C7B;&#x5143;&#x6570;&#x636E;&#x6307;&#x9488;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6307;&#x9488;&#x5224;&#x65AD;&#x662F;&#x54EA;&#x4E2A;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x5B9E;&#x4F8B;&#x6570;&#x636E;&#xFF08;Instance Data&#xFF09;&#xFF1A;&#x5B58;&#x653E;&#x771F;&#x6B63;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5BF9;&#x9F50;&#x586B;&#x5145;&#xFF08;Padding&#xFF09;&#xFF1A;&#x53EA;&#x662F;&#x5360;&#x4F4D;&#x7B26;&#xFF0C;&#x53EF;&#x5FFD;&#x7565;&#x3002;</p>
<p>3&#x3001;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;</p>
<p>Java&#x7A0B;&#x5E8F;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x662F;&#x901A;&#x8FC7;&#x6808;&#xFF08;&#x7EBF;&#x7A0B;&#x79C1;&#x6709;&#xFF09;&#x4E0A;&#x7684;reference&#x6570;&#x636E;&#x6765;&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x7684;&#x5177;&#x4F53;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x4E24;&#x79CD;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p>1&#xFF09;&#x4F7F;&#x7528;&#x53E5;&#x67C4;&#x3002;Java&#x5728;&#x5806;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x53E5;&#x67C4;&#x6C60;&#xFF0C;reference&#x4E2D;&#x5B58;&#x653E;&#x7684;&#x662F;&#x5BF9;&#x8C61;&#x7684;&#x53E5;&#x67C4;&#x5730;&#x5740;&#x3002;&#x4F18;&#x70B9;&#xFF1A;&#x5BF9;&#x8C61;&#x88AB;&#x79FB;&#x52A8;&#xFF0C;&#x53EA;&#x6539;&#x53D8;&#x53E5;&#x67C4;&#x6C60;&#x4E2D;&#x6307;&#x9488;&#xFF0C;reference&#x672C;&#x8EAB;&#x4E0D;&#x6539;&#x3002;</p>
<p>2&#xFF09;&#x76F4;&#x63A5;&#x6307;&#x9488;&#x3002;&#x5728;&#x5B9E;&#x4F8B;&#x6570;&#x636E;&#x533A;&#x76F4;&#x63A5;&#x5B58;&#x653E;&#x6307;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x6307;&#x9488;&#x3002;&#x4F18;&#x70B9;&#xFF1A;&#x8282;&#x7701;&#x6307;&#x9488;&#x5B9A;&#x4F4D;&#x7684;&#x65F6;&#x95F4;&#x5F00;&#x9500;&#x3002;&#xA0;</p>
<p>4&#x3001;&#x5E38;&#x89C1;&#x7684;OOM&#x95EE;&#x9898;</p>
<p>OutOfMemoryError &#xA0;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x9020;&#x6210;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x7684;&#x539F;&#x56E0;&#x6709;&#xFF1A;</p>
<p>1&#xFF09;&#x5806;&#x6EA2;&#x51FA;&#x3002;Java Heap space&#x3002;&#x5927;&#x91CF;&#x7684;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x5927;&#x5BF9;&#x8C61;&#x5360;&#x6EE1;&#x5806;&#x5BFC;&#x81F4;&#x3002;</p>
<p>&#x6392;&#x67E5;&#x95EE;&#x9898;&#xFF1A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x6620;&#x50CF;&#x5206;&#x6790;&#x5DE5;&#x5177;&#xFF0C;&#x5C06;dump&#x4E0B;&#x6765;&#x7684;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x539F;&#x56E0;&#xFF1A;&#x6709;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x771F;&#x7684;&#x5806;&#x5185;&#x5B58;&#x592A;&#x5C0F;&#xFF08;Memory overflow&#xFF09;&#xFF0C;&#x4E0D;&#x6EE1;&#x8DB3;&#x751F;&#x4EA7;&#x9700;&#x8981;&#x3002;&#x4E8C;&#x662F;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x4E86;&#xFF08;Memory leak&#xFF09;&#x3002;&#x5982;&#x679C;&#x662F;&#x7B2C;&#x4E00;&#x79CD;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x8C03;&#x6574;&#x5806;&#x7684;&#x5927;&#x5C0F;&#x8BD5;&#x8BD5;&#x770B;&#xFF08;-Xmx&#x548C;-Xms&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x662F;&#x5C0F;&#xFF0C;&#x5C31;&#x8BE5;&#x5347;&#x7EA7;&#x786C;&#x4EF6;&#xFF0C;&#x6216;&#x8005;&#x53D6;&#x6D88;&#x673A;&#x5668;&#x591A;&#x5B9E;&#x4F8B;&#x3002;&#x5982;&#x679C;&#x662F;Memory Leak&#xFF0C;&#x90A3;&#x5C31;&#x662F;develop&#x7684;&#x95EE;&#x9898;&#x4E86;&#x3002;&#xA0;&#xA0;&#xA0;&#xA0;</p>
<p>2&#xFF09;&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#x548C;&#x865A;&#x62DF;&#x673A;&#x6808;&#x6EA2;&#x51FA;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x4F1A;&#x51FA;&#x73B0;&#x4E24;&#x79CD;&#x9519;&#x8BEF;&#xFF0C;&#x4E00;&#x79CD;&#x662F;StackOverflowError&#xFF0C;&#x4E00;&#x79CD;&#x662F;OutOfMemoryError&#x3002;&#x5982;&#x679C;&#x4F60;&#x7533;&#x8BF7;&#x7684;&#x6808;&#x6DF1;&#x5EA6;&#x5927;&#x4E8E;JVM&#x89C4;&#x5B9A;&#x7684;&#x6808;&#x6DF1;&#x5EA6;&#xFF0C;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x79CD;&#x3002;&#x5982;&#x679C;JVM&#x5728;&#x6269;&#x5C55;&#x6808;&#x65F6;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x5185;&#x5B58;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x7B2C;&#x4E8C;&#x79CD;&#x3002;&#x4E00;&#x822C;&#x5355;&#x7EBF;&#x7A0B;&#x7533;&#x8BF7;&#x6808;&#xFF0C;&#x90FD;&#x662F;&#x7B2C;&#x4E00;&#x79CD;&#x3002;&#x521B;&#x5EFA;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x6808;&#xFF0C;&#x5219;&#x662F;&#x7B2C;&#x4E8C;&#x79CD;&#x95EE;&#x9898;&#x3002;&#xA0;</p>
<p>&#x95EE;&#x9898;&#x539F;&#x56E0;&#xFF1A;&#x4E00;&#x662F; -Xss&#x53C2;&#x6570;&#x8C03;&#x6574;&#x6808;&#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x8FC7;&#x5C0F;&#xFF1B;&#x4E8C;&#x662F;&#x5B9A;&#x4E49;&#x4E86;&#x5927;&#x91CF;&#x672C;&#x5730;&#x53D8;&#x91CF;&#xFF1B;&#x4E09;&#x662F;&#x521B;&#x5EFA;&#x8FC7;&#x591A;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5206;&#x914D;&#x6808;&#x7684;&#x65F6;&#x5019;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;jstack&#x67E5;&#x770B;&#x3002;</p>
<p>3&#xFF09; &#x65B9;&#x6CD5;&#x533A;&#x548C;&#x5E38;&#x91CF;&#x6C60;&#x6EA2;&#x51FA;&#x3002;</p>
<p>&#x5728;JDK1.6&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF08;&#x542B;1.6&#xFF09;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x5206;&#x914D;&#x5728;&#x6C38;&#x4E45;&#x4EE3;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53C2;&#x6570; -XX:PermSize &#x548C; -XX:MaxPermSize &#x9650;&#x5236;&#x5927;&#x5C0F;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x539F;&#x56E0;&#xFF1A;&#x4E00;&#x662F;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5927;&#x91CF;&#x4EA7;&#x751F;&#x52A8;&#x6001;&#x7C7B;&#xFF08;&#x7C7B;&#x540D;&#xFF09;&#x6216;&#x8005;&#x5E38;&#x91CF;&#x653E;&#x5165;&#x8FD9;&#x4E2A;&#x7A7A;&#x95F4;&#x3002;&#x4E8C;&#x662F;&#x6B64;&#x533A;&#x57DF;&#x914D;&#x7F6E;&#x7684;&#x592A;&#x5C0F;&#x4E86;&#x3002;</p>
<p>4&#xFF09;&#x672C;&#x673A;&#x76F4;&#x63A5;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x3002;</p>
<p>&#x53EF;&#x901A;&#x8FC7;&#x53C2;&#x6570; -XX:MaxDirectMemorySize &#x914D;&#x7F6E;&#x3002;&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x5185;&#x5B58;&#x7684;&#x7C7B;DirectByteBuffer&#x7C7B;&#x548C;Unsafe&#x7C7B;&#x5206;&#x914D;&#x5185;&#x5B58;&#x8FC7;&#x591A;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x539F;&#x56E0;&#xFF1A;&#x548C;&#x4E0A;&#x9762;&#x601D;&#x8DEF;&#x4E00;&#x6837;&#x3002;</p>
<p>&#x4E94;&#x3001;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;GC&#x548C;&#x5185;&#x5B58;&#x5206;&#x914D;&#xA0;</p>
<p>1&#x3001;&#x5224;&#x65AD;&#x5BF9;&#x8C61;&#x6B7B;&#x4EA1;</p>
<p>1&#xFF09;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x7B97;&#x6CD5;&#xFF1A;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x6709;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x5F53;&#x6709;&#x5730;&#x65B9;&#x5F15;&#x7528;&#x4ED6;&#x5C31;&#x52A0;1&#xFF0C;&#x5F15;&#x7528;&#x5931;&#x6548;&#x5C31;&#x51CF;1&#xFF0C;&#x4E3A;0&#x4EE3;&#x8868;&#x5BF9;&#x8C61;&#x6B7B;&#x4EA1;&#x3002;&#x4F46;&#x662F;&#x4E92;&#x76F8;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x8FD9;&#x6837;&#x5C31;&#x65E0;&#x6CD5;&#x5224;&#x65AD;&#x3002;</p>
<p>2&#xFF09;&#x53EF;&#x8FBE;&#x6027;&#x5206;&#x6790;&#x7B97;&#x6CD5;&#xFF1A;GC Roots&#x4E3A;&#x8D77;&#x59CB;&#x70B9;&#xFF0C;GC Roots&#x5230;&#x5BF9;&#x8C61;&#x4E0D;&#x53EF;&#x8FBE;&#xFF08;&#x6CA1;&#x6709;&#x5F15;&#x7528;&#x94FE;—&#x56FE;&#x8BBA;&#xFF09;&#xFF0C;&#x5219;&#x5224;&#x5B9A;&#x8BE5;&#x5BF9;&#x8C61;&#x7F13;&#x5211;&#xFF08;&#x4E24;&#x6B21;&#x6807;&#x8BB0;&#x4EE3;&#x8868;&#x6B7B;&#x4EA1;&#xFF09;&#xFF0C;&#x5F53;&#x865A;&#x62DF;&#x673A;&#x6267;&#x884C;&#x8FC7;&#x4E86;finalize()&#x6216;&#x8005;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x8986;&#x76D6;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x76EE;&#x524D;&#x8BE5;&#x5BF9;&#x8C61;&#x6D3B;&#x7740;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;JVM&#x8C03;&#x7528;&#xFF0C;&#x5C06;&#x5BF9;&#x8C61;&#x63A8;&#x5411;&#x706B;&#x5751;&#x7684;&#x65B9;&#x6CD5;&#x3002;Jvm&#x8BA4;&#x4E3A;&#x8BE5;&#x5BF9;&#x8C61;&#x6709;&#x5FC5;&#x8981;&#x63A8;&#x5411;&#x706B;&#x5751;&#xFF0C;&#x5C31;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x653E;&#x5230;F-QUEUE&#x961F;&#x5217;&#x4E2D;&#x3002;&#x7B2C;&#x4E8C;&#x6B21;&#x5C31;&#x5B9E;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</p>
<p>&#x8865;&#x5145;&#x8BF4;&#x660E;&#xFF1A;&#x5F15;&#x7528;&#x3002;</p>
<p>1&#xFF09;&#x5F3A;&#x5F15;&#x7528;&#xFF1A;new&#x3002;&#x8FD9;&#x79CD;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x4F1A;&#x56DE;&#x6536;&#x3002;</p>
<p>2&#xFF09;&#x8F6F;&#x5F15;&#x7528;&#xFF1A;&#x6709;&#x7528;&#x975E;&#x5FC5;&#x8981;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5185;&#x5B58;&#x8981;&#x6EA2;&#x51FA;&#x65F6;&#x56DE;&#x6536;&#x3002;&#x5177;&#x4F53;&#x6211;&#x4E0D;&#x662F;&#x5F00;&#x53D1;&#xFF0C;&#x4E5F;&#x4E0D;&#x6E05;&#x695A;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x5BF9;&#x8C61;&#x3002;</p>
<p>3&#xFF09;&#x5F31;&#x5F15;&#x7528;&#xFF1A;&#x975E;&#x5FC5;&#x8981;&#x5BF9;&#x8C61;&#xFF0C;&#x751F;&#x5B58;&#x5230;&#x4E0B;&#x6B21;GC&#x3002;WeakReference&#x7C7B;&#x5B9E;&#x73B0;&#x5F31;&#x5F15;&#x7528;</p>
<p>4&#xFF09;&#x865A;&#x5F15;&#x7528;&#xFF1A;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x865A;&#x5F15;&#x7528;&#x83B7;&#x5F97;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x7684;&#x76EE;&#x7684;&#x53EA;&#x662F;&#x5F53;&#x5B83;&#x88AB;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x901A;&#x77E5;&#x3002;PhantomReference&#x7C7B;&#x5B9E;&#x73B0;&#x3002;&#xA0;</p>
<p> 2&#x3001;&#x5185;&#x5B58;&#x5206;&#x914D;&#x548C;&#x56DE;&#x6536;&#x7B56;&#x7565;&#xFF08;&#x91CD;&#x70B9;&#xFF09;</p>
<p> eden &#xA0;supervivor1 &#xA0;supervivor2 &#xA0; &#xA0;old &#xA0; permanent</p>
<p> young &#xA0; &#xA0; &#xA0; 8:1 &#xA0; &#xA0; &#xA0; old</p>
<p> &#x7B56;&#x7565;&#xFF1A; &#xA0; &#xA0;</p>
<p>  &#xA0; &#xA0; &#xA0;1&#xFF09;minorGC&#xFF1A;&#x65B0;&#x5BF9;&#x8C61;&#x653E;&#x5230;Eden&#x533A;&#x4E2D;&#x3002;&#x5F53;eden&#x6EE1;&#x4E86;&#xFF0C;&#x5F00;&#x59CB;yountGC&#x6216;&#x8005;&#x53EB;minorGC&#x3002; &#x6E05;&#x9664;&#x975E;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;&#x628A;&#x5C1A;&#x4E14;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;&#x79FB;&#x52A8;&#x5230;Survivor&#x533A;&#x3002;&#x7136;&#x540E;&#x6574;&#x7406;Survivor&#x7684;&#x4E24;&#x4E2A;&#x533A;&#x3002;</p>
<p> 2&#xFF09;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x65B0;&#x5BF9;&#x8C61;&#x751F;&#x6210;&#xFF0C;&#x5E76;&#x4E14;&#x5728;Eden&#x7533;&#x8BF7;&#x7A7A;&#x95F4;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x5C31;&#x89E6;&#x53D1;&#x4E86;Scavenge GC&#x3002;</p>
<p> 3&#xFF09;Full GC&#xA0;&#xFF1A;&#x5BF9;&#x6574;&#x4E2A;&#x5806;&#x8FDB;&#x884C;&#x6574;&#x7406;&#xFF0C;&#x5305;&#x62EC;Young&#x3001;Tenured&#x548C;Perm&#x3002;Full GC&#x6BD4;Scavenge GC&#x8981;&#x6162;&#xFF0C;&#x56E0;&#x6B64;&#x5E94;&#x8BE5;&#x5C3D;&#x53EF;&#x80FD;&#x51CF;&#x5C11;Full GC&#x3002;&#x6709;&#x5982;&#x4E0B;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;Full GC&#xFF1A;Tenured&#x88AB;&#x5199;&#x6EE1;&#xFF1B;Perm&#x57DF;&#x88AB;&#x5199;&#x6EE1;&#xFF1B;System.gc()&#x88AB;&#x663E;&#x793A;&#x8C03;&#x7528;&#xFF1B;&#x4E0A;&#x4E00;&#x6B21;GC&#x4E4B;&#x540E;Heap&#x7684;&#x5404;&#x57DF;&#x5206;&#x914D;&#x7B56;&#x7565;&#x52A8;&#x6001;&#x53D8;&#x5316;</p>
<p> 4&#xFF09;&#x5927;&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x8FDB;&#x5165;old&#x4EE3;&#xFF0C;&#x907F;&#x514D;&#x5728;supervivor&#x4E2D;&#x6765;&#x56DE;&#x590D;&#x5236;&#x8017;&#x65F6;&#x95F4;&#x3002;&#x914D;&#x7F6E;&#x53C2;&#x6570; -XX:PretenureSizeThreshold&#x3002;</p>
<p> 5&#xFF09;&#x957F;&#x671F;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;old&#x4EE3;&#x3002;&#x914D;&#x7F6E;&#x53C2;&#x6570; -XX:MaxTenuringThreshold=15&#xFF0C;&#x8868;&#x793A;15&#x6B21;youngGC&#x540E;&#x8FDB;&#x5165;old&#x4EE3;&#xFF0C;&#x4E4B;&#x524D;&#x5219;&#x4E00;&#x76F4;&#x5728;&#x4E24;&#x4E2A;supervivor&#x533A;&#x6765;&#x56DE;&#x590D;&#x5236;&#x3002;&#x9AD8;&#x7EA7;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5E74;&#x9F84;&#x5224;&#x5B9A;&#xFF1A;&#x9AD8;&#x4E8E;&#x5E73;&#x5747;&#x5E74;&#x9F84;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8FDB;&#x5165;old&#x4EE3;&#x3002;</p>
<p>3&#x3001;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;</p>
<p>1&#xFF09;&#x6807;&#x8BB0;-&#x6E05;&#x9664;</p>
<p>2&#xFF09;&#x590D;&#x5236;</p>
<p>3&#xFF09;&#x6807;&#x8BB0;-&#x6574;&#x7406;</p>
<p>4&#xFF09;&#x5206;&#x4EE3;&#x6536;&#x96C6;</p>
<p>hotspot&#x5E94;&#x7528;&#x7B97;&#x6CD5;</p>
<p>1&#xFF09;&#x679A;&#x4E3E;&#x6839;&#x8282;&#x70B9;</p>
<p>2&#xFF09;&#x5B89;&#x5168;&#x70B9;</p>
<p>3&#xFF09;&#x5B89;&#x5168;&#x533A;&#x57DF;</p>
<p>4&#x3001;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;</p>
<p>Serial&#xFF0C;ParNew&#xFF0C;Parallel Scavenge&#xFF0C;Serial Old&#xFF0C;Parallel Old&#xFF0C;CMS&#xFF0C;G1</p>
<p>&#x516D;&#x3001;JVM&#x67E5;&#x770B;&#x6027;&#x80FD;&#x547D;&#x4EE4;</p>
<p>jps</p>
<ul>
<li>&#x67E5;&#x770B;&#x6240;&#x6709;&#x7684;jvm&#x8FDB;&#x7A0B;&#xFF0C;&#x5305;&#x62EC;&#x8FDB;&#x7A0B;ID&#xFF0C;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x7684;&#x8DEF;&#x5F84;&#x7B49;&#x7B49;&#x3002;</li>
<li>&#x6211;&#x81EA;&#x5DF1;&#x4E5F;&#x7528;PS&#xFF0C;&#x5373;&#xFF1A;ps -ef | grep java</li>
</ul>
<p>jstack</p>
<ul>
<li>&#x89C2;&#x5BDF;jvm&#x4E2D;&#x5F53;&#x524D;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x60C5;&#x51B5;&#x548C;&#x7EBF;&#x7A0B;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x4E86;&#xFF1F;&#x5982;&#x679C;java&#x7A0B;&#x5E8F;&#x5D29;&#x6E83;&#x751F;&#x6210;core&#x6587;&#x4EF6;&#xFF0C;jstack&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x83B7;&#x5F97;core&#x6587;&#x4EF6;&#x7684;java stack&#x548C;native stack&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x77E5;&#x9053;java&#x7A0B;&#x5E8F;&#x662F;&#x5982;&#x4F55;&#x5D29;&#x6E83;&#x548C;&#x5728;&#x7A0B;&#x5E8F;&#x4F55;&#x5904;&#x53D1;&#x751F;&#x95EE;&#x9898;&#x3002;</li>
<li>&#x7CFB;&#x7EDF;hung&#x4F4F;&#x4E86;&#xFF1F;jstack&#x5DE5;&#x5177;&#x8FD8;&#x53EF;&#x4EE5;&#x9644;&#x5C5E;&#x5230;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;java&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x770B;&#x5230;&#x5F53;&#x65F6;&#x8FD0;&#x884C;&#x7684;java&#x7A0B;&#x5E8F;&#x7684;java stack&#x548C;native stack&#x7684;&#x4FE1;&#x606F;, &#x5982;&#x679C;&#x73B0;&#x5728;&#x8FD0;&#x884C;&#x7684;java&#x7A0B;&#x5E8F;&#x5448;&#x73B0;hung&#x7684;&#x72B6;&#x6001;&#xFF0C;jstack&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</li>
</ul>
<p>jstat</p>
<ul>
<li>jstat&#x5229;&#x7528;JVM&#x5185;&#x5EFA;&#x7684;&#x6307;&#x4EE4;&#x5BF9;Java&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8D44;&#x6E90;&#x548C;&#x6027;&#x80FD;&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x5305;&#x62EC;&#x4E86;&#x5BF9;&#x8FDB;&#x7A0B;&#x7684;classloader&#xFF0C;compiler&#xFF0C;gc&#x60C5;&#x51B5;&#xFF1B;</li>
<li>&#x7279;&#x522B;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x6781;&#x5F3A;&#x7684;&#x76D1;&#x89C6;&#x5185;&#x5B58;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x76D1;&#x89C6;VM&#x5185;&#x5B58;&#x5185;&#x7684;&#x5404;&#x79CD;&#x5806;&#x548C;&#x975E;&#x5806;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x52A0;&#x8F7D;&#x7C7B;&#x7684;&#x6570;&#x91CF;&#x3002;</li>
</ul>
<p>jmap</p>
<ul>
<li>&#x76D1;&#x89C6;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x4E2D;&#x7684;jvm&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;&#x5360;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x8BE5;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;&#x5185;&#xFF0C;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F8B;&#x5982;&#x4EA7;&#x751F;&#x4E86;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#xFF1B;</li>
<li>&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x4E86;&#xFF1F;jmap &#x53EF;&#x4EE5;&#x4ECE;core&#x6587;&#x4EF6;&#x6216;&#x8FDB;&#x7A0B;&#x4E2D;&#x83B7;&#x5F97;&#x5185;&#x5B58;&#x7684;&#x5177;&#x4F53;&#x5339;&#x914D;&#x60C5;&#x51B5;&#xFF0C;&#x5305;&#x62EC;Heap size, Perm size&#x7B49;&#x7B49;</li>
</ul>
<p>jinfo</p>
<ul>
<li>&#x89C2;&#x5BDF;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x53C2;&#x6570;&#xFF0C;&#x5305;&#x62EC;Java System&#x5C5E;&#x6027;&#x548C;JVM&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;</li>
<li>&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x4E86;&#xFF1F;jinfo&#x53EF;&#x4EE5;&#x4ECE;core&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x77E5;&#x9053;&#x5D29;&#x6E83;&#x7684;Java&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;</li>
</ul>
<p>&#x5907;&#x6CE8;</p>
<ul>
<li>&#x5982;&#x679C;&#x80FD;&#x719F;&#x7EC3;&#x8FD0;&#x7528;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;linux&#x4E0B;&#xFF0C;&#x90A3;&#x4E48;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4EE3;&#x66FF;jprofile&#x7B49;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x3002;</li>
<li>&#x7528;&#x547D;&#x4EE4;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x5E76;&#x4E14;&#x8F85;&#x52A9;&#x4E8E;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#xFF0C;&#x6BD4;&#x5982;grep gawk sed&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x7EC4;&#x88C5;&#x591A;&#x79CD;&#x7B26;&#x5408;&#x81EA;&#x5DF1;&#x9700;&#x6C42;&#x7684;&#x5DE5;&#x5177;&#x3002;</li>
</ul>
<p>&#x4E03;&#x3001;&#x5E38;&#x89C1;&#x95EE;&#x9898;</p>
<p>&#x80FD;&#x5426;&#x5BFC;&#x81F4;&#x7684;&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x901A;&#x5E38;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF1A;</p>
<p>1&#x3001;youngGC&#x9891;&#x7E41;</p>
<p>&#x4E00;&#x662F;&#x670D;&#x52A1;&#x538B;&#x529B;&#x5927;&#xFF0C;&#x7EBF;&#x7A0B;&#x6570;&#x591A;&#xFF0C;&#x5B9A;&#x4E49;&#x7684;&#x65B0;&#x5BF9;&#x8C61;&#x591A;&#xFF0C;&#x5F88;&#x5FEB;&#x5C31;&#x5360;&#x6EE1;Eden&#x3002;&#x4E8C;&#x662F;Eden&#x592A;&#x5C0F;&#x3002;&#xA0;</p>
<p>2&#x3001;youngGC&#x65F6;&#x95F4;&#x957F;</p>
<p>&#x4E00;&#x662F;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x8FC7;&#x5927;&#xFF1B;&#x4E8C;&#x662F;&#x7533;&#x8BF7;&#x5927;&#x5BF9;&#x8C61;&#xFF1B;&#x4E09;&#x662F;&#x5B9A;&#x4E49;&#x6709;&#x7528;&#x5BF9;&#x8C61;&#x8FC7;&#x591A;&#xFF0C;&#x653E;&#x5230;Eden&#x533A;&#x540E;&#xFF0C;&#x5728;&#x4E24;&#x4E2A;supervivor&#x533A;&#x57DF;&#x4E2D;&#x6765;&#x56DE;&#x590D;&#x5236;&#x8017;&#x5185;&#x5B58;&#x5BFC;&#x81F4;&#x3002;&#xA0;</p>
<p>3&#x3001;fullGC&#x9891;&#x7E41;</p>
<p>4&#x3001;fullGC&#x65F6;&#x95F4;&#x957F;&#x3002;</p>
<p>&#x5F80;&#x5F80;&#x662F;&#x5206;&#x914D;&#x7684;&#x5806;&#x8FC7;&#x5927;&#x5BFC;&#x81F4;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;&#x673A;&#x5668;&#x5F88;&#x597D;&#xFF08;64G&#x5185;&#x5B58;&#x4EE5;&#x4E0A;&#xFF1F;&#xFF09;&#xFF0C;&#x5EFA;&#x8BAE;&#x53EF;&#x4EE5;&#x591A;32&#x4F4D;JVM&#x5B9E;&#x4F8B;&#x90E8;&#x7F72;&#x6216;&#x8005;64&#x4F4D;JVM&#x5904;&#x7406;&#x5927;&#x5185;&#x5B58;&#xFF08;&#x540E;&#x8005;&#x6548;&#x679C;&#x4E0D;&#x597D;&#xFF09;&#xFF0C;&#x8FC7;&#x5927;&#x7684;&#x5806;&#xFF0C;&#x5728;&#x8FDB;&#x884C;fullGC&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5360;&#x7528;&#x65F6;&#x95F4;&#x957F;&#xFF0C;&#x670D;&#x52A1;&#x4F53;&#x9A8C;&#x4E0D;&#x597D;&#x3002;</p>
<p>5&#x3001;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x6216;&#x5185;&#x5B58;&#x6CC4;&#x9732;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f3e86d4/" title="JVM如何操作缓冲区 -" itemprop="url">JVM如何操作缓冲区 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:29.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;JVM&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x505A;&#x4E86;&#x5982;&#x4E0B;&#x51E0;&#x4EF6;&#x4E8B;&#xFF1A;</p>
<ol>
<li>JVM&#x786E;&#x4FDD;Heap&#x533A;&#x57DF;&#x5185;&#x7684;&#x7A7A;&#x95F4;&#x8DB3;&#x591F;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x591F;&#x5219;&#x4F7F;&#x7528;&#x89E6;&#x53D1;GC&#x5728;&#x5185;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x7A7A;&#x95F4;;</li>
<li>&#x83B7;&#x5F97;&#x7A7A;&#x95F4;&#x4E4B;&#x540E;&#x4F1A;&#x627E;&#x4E00;&#x7EC4;&#x5806;&#x5185;&#x7684;&#x8FDE;&#x7EED;&#x5730;&#x5740;&#x5206;&#x914D;&#x6570;&#x7EC4;, &#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x7269;&#x7406;&#x5185;&#x5B58;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E9B;&#x5B57;&#x8282;&#x662F;&#x4E0D;&#x4E00;&#x5B9A;&#x8FDE;&#x7EED;&#x7684;;</li>
</ol>
<p>&#x5BF9;&#x4E8E;&#x4E0D;&#x6D89;&#x53CA;&#x5230;IO&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x5904;&#x7406;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x8FDB;&#x884C;IO&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x70B9;&#x6027;&#x80FD;&#x95EE;&#x9898;.</p>
<p>&#x6240;&#x6709;&#x7684;IO&#x64CD;&#x4F5C;&#x90FD;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FDB;&#x5165;&#x5185;&#x6838;&#x6001;&#x624D;&#x884C;&#xFF0C;&#x800C;JVM&#x8FDB;&#x7A0B;&#x5C5E;&#x4E8E;&#x7528;&#x6237;&#x6001;&#x8FDB;&#x7A0B;, &#x5F53;JVM&#x9700;&#x8981;&#x628A;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x5199;&#x5230;&#x67D0;&#x4E2A;Channel&#x6216;Socket&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x5207;&#x6362;&#x5230;&#x5185;&#x6838;&#x6001;.</p>
<p>&#x800C;&#x5185;&#x6838;&#x6001;&#x7531;&#x4E8E;&#x5E76;&#x4E0D;&#x77E5;&#x9053;JVM&#x91CC;&#x9762;&#x8FD9;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x5B58;&#x50A8;&#x5728;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;&#x4EC0;&#x4E48;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E9B;&#x7269;&#x7406;&#x5730;&#x5740;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x8FDE;&#x7EED;&#x7684;(&#x6216;&#x8005;&#x8BF4;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;IO&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x7684;&#x5757;&#x7ED3;&#x6784;)&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5207;&#x6362;&#x4E4B;&#x524D;JVM&#x9700;&#x8981;&#x628A;&#x7F13;&#x51B2;&#x533A;&#x590D;&#x5236;&#x5230;&#x7269;&#x7406;&#x5185;&#x5B58;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x4E0A;, &#x7136;&#x540E;&#x7531;&#x5185;&#x6838;&#x53BB;&#x8BFB;&#x53D6;&#x8FD9;&#x5757;&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x6574;&#x5408;&#x6210;&#x8FDE;&#x7EED;&#x7684;&#x3001;&#x5206;&#x5757;&#x7684;&#x5185;&#x5B58;.</p>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;, Java&#x7684;&#x67D0;&#x4E9B;&#x7248;&#x672C;&#x4F1A;&#x628A;&#x7269;&#x7406;&#x533A;&#x57DF;&#x5206;&#x914D;&#x597D;&#x7684;&#x90E8;&#x5206;&#x5185;&#x5B58;&#x505A;&#x7F13;&#x5B58;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x90FD;&#x5F00;&#x8F9F;&#x4E00;&#x5757;&#x7A7A;&#x95F4;&#xFF0C;&#x4F46;&#x6548;&#x679C;&#x8FD8;&#x4E0D;&#x591F;&#x597D;&#xFF0C;&#x6BD5;&#x7ADF;&#x590D;&#x5236;&#x7684;&#x90E8;&#x5206;&#x662F;&#x5C11;&#x4E0D;&#x4E86;&#x7684;.</p>
<p>JDK1.4&#x4E4B;&#x540E;&#x5F15;&#x5165;&#x4E86;NIO, &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6280;&#x672F;, &#x8BA9;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4ECE;Java&#x4EE3;&#x7801;&#x4E2D;&#x521B;&#x5EFA;DirectBuffer&#xFF0C;&#x8FD9;&#x79CD;Buffer&#x5728;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#x76F4;&#x63A5;&#x5C31;&#x5728;&#x7269;&#x7406;&#x5185;&#x5B58;&#x4E2D;&#x5206;&#x914D;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x5185;&#x5B58;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x590D;&#x5236;&#xFF0C;&#x5185;&#x6838;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5373;&#x53EF;. &#x4F46;&#x7F3A;&#x70B9;&#x4E5F;&#x662F;&#x663E;&#x800C;&#x6613;&#xFFFD;&#xFFFD;&#xFFFD;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x6BCF;&#x6B21;&#x5206;&#x914D;&#x90FD;&#x6BD4;&#x8F83;&#x6602;&#x8D35;&#x4E00;&#x70B9;&#xFF0C;&#x540C;&#x65F6;&#x7531;&#x4E8E;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x4E0D;&#x5728;Java Heap&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x4E0D;&#x4F1A;&#x53D7;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x7684;&#x5806;&#x5927;&#x5C0F;&#x7684;&#x9650;&#x5236;.</p>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5927;&#x91CF;&#x4F7F;&#x7528;IO&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x662F;&#x975E;&#x5E38;&#x503C;&#x5F97;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x753B;&#x7684;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x65B9;&#x4FBF;&#x8BB0;&#x5FC6;:</p>
<p><img src="http://taojinke.github.io/img/20150702/f3e734c.png" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/f414d47/" title="在运行时开启GC日志 -" itemprop="url">在运行时开启GC日志 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-01T23:50:29.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;JVM&#x8FD0;&#x884C;&#x65F6;&#x51FA;&#x9519;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x82E5;&#x80FD;&#x5728;&#x542F;&#x52A8;&#x65F6;&#x52A0;&#x5165;&#x4E00;&#x4E9B;&#x542F;&#x52A8;&#x9009;&#x9879;&#xFF08;startup option&#xFF09;&#xFF0C;&#x4FBF;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x4E0E;bug&#x76F8;&#x5173;&#x7684;&#x91CD;&#x8981;&#x7EBF;&#x7D22;&#xFF0C;&#x4ECE;&#x800C;&#x6709;&#x5E0C;&#x671B;&#x6839;&#x6CBB;&#x5B83;&#x4EEC;&#x3002;&#x4F46;&#x5728;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x662F;&#x5FD8;&#x8BB0;&#x6DFB;&#x52A0; -XX:+HeapDumpOnOutOfMemoryError &#x6216; -XX:+PrintGCDetails &#x8FD9;&#x6837;&#x5FC5;&#x8981;&#x7684;flag&#x3002; </p>
<p>&#x6BCF;&#x5F53;&#x9762;&#x5BF9;&#x5982;&#x6B64;&#x7A98;&#x5883;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x5173;&#x95ED;JVM&#xFF0C;&#x4FEE;&#x6539;&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF08;startup parameter&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x9ED8;&#x9ED8;&#x7948;&#x7977;&#xFF0C;&#x5E0C;&#x671B;&#x95EE;&#x9898;&#x573A;&#x666F;&#xFF08;problematic situation&#xFF09;&#x80FD;&#x5728;&#x91CD;&#x542F;&#x4E4B;&#x540E;&#x5F97;&#x4EE5;&#x91CD;&#x73B0;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5076;&#x5C14;&#x594F;&#x6548;&#xFF0C;&#x5728;&#x573A;&#x666F;&#x91CD;&#x73B0;&#x540E;&#x4F60;&#x6216;&#x8BB8;&#x8FD8;&#x80FD;&#x6536;&#x96C6;&#x5230;&#x8DB3;&#x591F;&#x7684;&#x8BC1;&#x636E;&#xFF0C;&#x4EE5;&#x4FBF;&#x52A8;&#x624B;&#x6839;&#x6CBB;&#x6F5C;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x4E0D;&#x96BE;&#x770B;&#x51FA;&#xFF0C;&#x524D;&#x6587;&#x6240;&#x8FF0;&#x7684;&#x65B9;&#x6CD5;&#x95EE;&#x9898;&#x663E;&#x8457;&#x2014;&#x2014;&#x4F60;&#x5FC5;&#x987B;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x989D;&#x5916;&#x7684;&#x91CD;&#x542F;&#x624D;&#x80FD;&#x52A0;&#x5165;&#x90A3;&#x70E6;&#x4EBA;&#x7684;debug&#x9009;&#x9879;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x501F;&#x52A9;&#x4E2D;&#x65AD;&#xFF08;outage&#xFF09;&#x5B9E;&#x73B0;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;JDK bundle&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x53EF;&#x884C;&#x7684;&#x53D8;&#x901A;&#x65B9;&#x6848;&#xFF0C;&#x5982;&#x679C;&#x5C06;&#x4E4B;&#x6536;&#x5165;&#x9EBE;&#x4E0B;&#xFF0C;&#x5076;&#x5C14;&#x8FD8;&#x80FD;&#x4ECE;&#x4E2D;&#x83B7;&#x76CA;&#x3002;</p>
<h3 id="jinfo">jinfo</h3><p>&#x5728;JDK bundle&#x4E2D;&#x9690;&#x85CF;&#x7740;&#x4E00;&#x4E2A;&#x7CBE;&#x608D;&#x7684;&#x5C0F;&#x5DE5;&#x5177;&#x2014;&#x2014; <a href="http://www.oracle.com/technetwork/java/javase/tooldescr-136044.html#gbdio" target="_blank" rel="external">jinfo</a> &#x3002;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;jinfo&#x7528;&#x4E8E;&#x6536;&#x96C6;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;Java&#x8FDB;&#x7A0B;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;jinfo&#x5438;&#x5F15;&#x773C;&#x7403;&#x7684;&#x5730;&#x65B9;&#x5728;&#x4E8E;&#xFF0C;&#x5B83;&#x80FD;&#x901A;&#x8FC7; -flag &#x9009;&#x9879;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x6307;&#x5B9A;&#x7684;Java&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;JVM flag&#x7684;&#x503C;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x6837;&#x7684;flag&#x6570;&#x91CF;&#x6709;&#x9650;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x5076;&#x5C14;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5230;&#x4F60;&#x3002;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x7684;&#x547D;&#x4EE4;&#x4F60;&#x4FBF;&#x80FD;&#x770B;&#x5230;JVM&#x4E2D;&#x54EA;&#x4E9B;flag&#x53EF;&#x4EE5;&#x88AB;jinfo&#x52A8;&#x6001;&#x4FEE;&#x6539;&#xFF1A; </p>
<pre><code>my-precious me$ java -XX:+PrintFlagsFinal -<span class="keyword">version</span>|grep manageable
     intx CMSAbortablePrecleanWaitMillis            = <span class="number">100</span>                                 {manageable}
     intx CMSWaitDuration                           = <span class="number">2000</span>                                {manageable}
     <span class="built_in">bool</span> HeapDumpAfterFullGC                       = <span class="literal">false</span>                               {manageable}
     <span class="built_in">bool</span> HeapDumpBeforeFullGC                      = <span class="literal">false</span>                               {manageable}
     <span class="built_in">bool</span> HeapDumpOnOutOfMemoryError                = <span class="literal">false</span>                               {manageable}
     ... cut <span class="keyword">for</span> brevity ...
     <span class="built_in">bool</span> PrintGC                                   = <span class="literal">false</span>                               {manageable}
     <span class="built_in">bool</span> PrintGCDateStamps                         = <span class="literal">false</span>                               {manageable}
     <span class="built_in">bool</span> PrintGCDetails                            = <span class="literal">false</span>                               {manageable}
     <span class="built_in">bool</span> PrintGCTimeStamps                         = <span class="literal">false</span>                               {manageable}
</code></pre><p>&#x901A;&#x8FC7;&#x9009;&#x9879; -XX:+PrintFlagsFinal &#x53EF;&#x4EE5;&#x5217;&#x51FA;&#x6240;&#x6709;&#x7684;JVM flag&#xFF0C;&#x800C;&#x5176;&#x4E2D;&#x7684;&#x6807;&#x6CE8;&#x4E3A; manageable &#x7684;flag&#x5219;&#x662F;&#x503C;&#x5F97;&#x6211;&#x4EEC;&#x5173;&#x6CE8;&#x7684;&#x90E8;&#x5206;&#x3002;&#x8FD9;&#x4E9B;flag&#x53EF;&#x901A;&#x8FC7;JDK management interface&#xFF08;-XX:+PrintFlagsFinal&#xFF09;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x3002;&#x867D;&#x7136;&#x5728;JConsole&#x4E2D;&#x4E5F;&#x80FD;&#x67E5;&#x5230;&#x4E0E;&#x5176;&#x5341;&#x5206;&#x76F8;&#x4F3C;&#x7684;MBean&#x3002;&#x4F46;&#x5728;&#x6211;&#x770B;&#x6765;&#xFF0C;&#x4EE5;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x65B9;&#x5F0F;&#x67E5;&#x770B;&#x5B83;&#x4EEC;&#x66F4;&#x52A0;&#x7684;&#x4FBF;&#x6377;&#x3002; </p>
<h3 id="&#x5982;&#x4F55;&#x4F7F;&#x7528;jinfo">&#x5982;&#x4F55;&#x4F7F;&#x7528;jinfo</h3><p>&#x8BA9;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5B9E;&#x6218;&#x6765;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x4F7F;&#x7528;jinfo&#x3002;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;JVM&#x4E2D;&#x52A8;&#x6001;&#x5F00;&#x542F;GC&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#xFF1A;</p>
<pre><code><span class="keyword">my</span>-precious <span class="keyword">me</span>$ jps
<span class="number">12278</span> HighAllocationRate
<span class="number">12279</span> Jps
<span class="number">12269</span> JConsole
<span class="keyword">my</span>-precious <span class="keyword">me</span>$ jinfo -flag +PrintGCDetails <span class="number">12278</span>
<span class="keyword">my</span>-precious <span class="keyword">me</span>$ jinfo -flag +PrintGC <span class="number">12278</span>
<span class="keyword">my</span>-precious <span class="keyword">me</span>$
</code></pre><p>&#x5728;jinfo&#x4E2D;&#x9700;&#x8981;&#x6253;&#x5F00; -XX:+PrintGC &#x548C; -XX:+PrintGCDetails &#x4E24;&#x4E2A;&#x9009;&#x9879;&#x624D;&#x80FD;&#x5F00;&#x542F;GC&#x65E5;&#x5FD7;&#xFF0C;&#x8FD9;&#x4E0E;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x6709;&#x7740;&#x7EC6;&#x5FAE;&#x7684;&#x5DEE;&#x522B;&#x2014;&#x2014;&#x5982;&#x679C;&#x4F60;&#x901A;&#x8FC7;&#x542F;&#x52A8;&#x811A;&#x672C;&#xFF08;startup script&#xFF09;&#x6765;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x4EC5;&#x9700; -XX:+PrintGCDetails &#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x4E3A; -XX:+PrintGC &#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x6253;&#x5F00;&#x3002; </p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x4ECE;standard output&#x7684;&#x7ED3;&#x679C;&#x6765;&#x770B;&#xFF0C;PID&#x4E3A;12278&#x7684;&#x8FDB;&#x7A0B;&#x7684;GC&#x65E5;&#x5FD7;&#x7684;&#x786E;&#x80FD;&#x591F;&#x6EDA;&#x52A8;&#x5730;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF1A;</p>
<pre><code>...
[GC (Allocation Failure) [PSYoungGen: <span class="number">876416</span><span class="keyword">K</span>-&amp;gt;<span class="number">102624</span><span class="keyword">K</span>(<span class="number">909312</span><span class="keyword">K</span>)] <span class="number">1094420</span><span class="keyword">K</span>-&amp;gt;<span class="number">320820</span><span class="keyword">K</span>(<span class="number">1161216</span><span class="keyword">K</span>), <span class="number">0.2173131</span> secs] [<span class="keyword">Times</span>: user=<span class="number">0.74</span> sys=<span class="number">0.00</span>, real=<span class="number">0.22</span> secs] 
...
[GC (Allocation Failure) [PSYoungGen: <span class="number">890304</span><span class="keyword">K</span>-&amp;gt;<span class="number">102240</span><span class="keyword">K</span>(<span class="number">917504</span><span class="keyword">K</span>)] <span class="number">1108924</span><span class="keyword">K</span>-&amp;gt;<span class="number">320956</span><span class="keyword">K</span>(<span class="number">1169408</span><span class="keyword">K</span>), <span class="number">0.2446639</span> secs] [<span class="keyword">Times</span>: user=<span class="number">0.82</span> sys=<span class="number">0.01</span>, real=<span class="number">0.25</span> secs] 
...
</code></pre><p>&#x540C;&#x7406;&#xFF0C;&#x82E5;&#x60F3;&#x5173;&#x95ED;GC&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6267;&#x884C; jinfo -flag -PrintGCDetails 12278 &#x548C; jinfo -flag -PrintGC 12278 &#x547D;&#x4EE4;&#x5373;&#x53EF;&#x3002; </p>
<p>&#x5728;&#x6211;&#x770B;&#x6765;&#xFF0C;&#x5B66;&#x4F1A;&#x4F7F;&#x7528;jinfo&#xFF0C;&#x53EA;&#x80FD;&#x8BA9;&#x4F60;&#x5728;&#x6545;&#x969C;&#x6392;&#x9664;&#x7684;&#x5DE5;&#x4F5C;&#x4E2D;&#x5C11;&#x82B1;&#x4E00;&#x5230;&#x4E24;&#x5929;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x82E5;&#x6253;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x4F7F;&#x7528; <a href="https://plumbr.eu/" target="_blank" rel="external">Plumbr</a> &#x8FD9;&#x7C7B;&#x6027;&#x80FD;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4ECE;&#x672A;&#x6709;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x70E6;&#x607C;&#x3002; </p>
<p>&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A; <a href="http://www.javacodegeeks.com/2015/03/turning-on-gc-logging-at-runtime.html" target="_blank" rel="external">JavaCodeGeeks</a> &#x7FFB;&#x8BD1;&#xFF1A;ImportNew.com -elviskang </p>
<p>&#x8BD1;&#x6587;&#x94FE;&#x63A5;&#xFF1A;[]</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/JVM/">JVM</a><a href="/tags/Linux/">Linux</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/41/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/">40</a><a class="page-number" href="/page/41/">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/">43</a><a class="page-number" href="/page/44/">44</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/43/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>587</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>32</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>23</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/Ubuntu/" title="Ubuntu">Ubuntu<sup>9</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
