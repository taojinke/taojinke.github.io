
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/26/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/03b950d/" title="ZooKeeper （一）概览 -" itemprop="url">ZooKeeper （一）概览 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:44.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x6CE8;&#xFF1A;&#x51FA;&#x4E8E;&#x8BB0;&#x5F55;&#x5BF9; zookeeper &#x7684;&#x5B66;&#x4E60;&#x7814;&#x7A76;&#x6210;&#x679C;&#x76EE;&#x7684;&#xFF0C;&#x5E76;&#x5206;&#x4EAB;&#x7ECF;&#x9A8C;&#xFF0C;&#x6839;&#x636E;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x7FFB;&#x8BD1;&#x6574;&#x7406;&#x800C;&#x6210;&#x672C;&#x6587;&#xFF0C;&#x539F;&#x6587;&#x5730;&#x5740;&#xFF1A; <a href="http://zookeeper.apache.org/doc/trunk/zookeeperOver.html" target="_blank" rel="external">http://zookeeper.apache.org/doc/trunk/zookeeperOver.html</a></p>
<h4 id="ZooKeeper&#xFF1A;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03;&#x670D;&#x52A1;">ZooKeeper&#xFF1A;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03;&#x670D;&#x52A1;</h4><p>Zookeeper &#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x3001;&#x5F00;&#x6E90;&#x7684;&#x534F;&#x8C03;&#x670D;&#x52A1;&#xFF0C;&#x7528;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x3002;&#x5B83;&#x63D0;&#x51FA;&#x4E86;&#x4E00;&#x7EC4;&#x7B80;&#x5355;&#x7684;&#x539F;&#x8BED;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x539F;&#x8BED;&#x4E4B;&#x4E0A;&#x6784;&#x5EFA;&#x66F4;&#x9AD8;&#x5C42;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x670D;&#x52A1;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x3001;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x3001;&#x5206;&#x7EC4;&#x548C;&#x547D;&#x540D;&#x7B49;&#x3002;Zookeeper &#x8BBE;&#x8BA1;&#x7684;&#x5BB9;&#x6613;&#x8FDB;&#x884C;&#x7F16;&#x7A0B;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x4E00;&#x79CD;&#x7C7B;&#x4F3C;&#x4E8E;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x76EE;&#x5F55;&#x6811;&#x7ED3;&#x6784;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#xFF0C;&#x4EE5; java &#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#xFF0C;&#x6709; java &#x548C; c &#x7684;&#x7ED1;&#x5B9A;(binding)&#x3002;</p>
<p>&#x534F;&#x8C03;&#x670D;&#x52A1;&#x603B;&#x6240;&#x5468;&#x77E5;&#x5730;&#x96BE;&#x4E8E;&#x6B63;&#x786E;&#x5B9E;&#x73B0;&#xFF0C;&#x5C24;&#x5176;&#x5BB9;&#x6613;&#x4EA7;&#x751F;&#x8BF8;&#x5982;&#x4E89;&#x7528;&#x6761;&#x4EF6;&#x3001;&#x6B7B;&#x9501;&#x7B49;&#x9519;&#x8BEF;&#x3002;Zookeeper &#x80CC;&#x540E;&#x7684;&#x52A8;&#x673A;&#x5C31;&#x662F;&#x51CF;&#x8F7B;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4ECE;&#x5934;&#x505A;&#x8D77;&#x5B9E;&#x73B0;&#x534F;&#x8C03;&#x670D;&#x52A1;&#x7684;&#x96BE;&#x5EA6;&#x3002;</p>
<h4 id="&#x8BBE;&#x8BA1;&#x76EE;&#x6807;">&#x8BBE;&#x8BA1;&#x76EE;&#x6807;</h4><p>Zookeeper &#x662F;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x5B83;&#x4F7F;&#x5206;&#x5E03;&#x5F0F;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x79CD;&#x7C7B;&#x4F3C;&#x4E8E;&#x6807;&#x51C6;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5171;&#x4EAB;&#x7684;&#x5C42;&#x6B21;&#x5316;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x8FDB;&#x884C;&#x76F8;&#x4E92;&#x534F;&#x8C03;&#x3002;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7531;&#x79F0;&#x4E3A; znode &#x7684;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x7EC4;&#x6210;&#xFF0C;&#x5728; Zookeeper &#x7684;&#x8BED;&#x4E49;&#x91CC;&#xFF0C;znode &#x7C7B;&#x4F3C;&#x4E8E;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x3002;&#x4E0D;&#x540C;&#x4E8E;&#x5178;&#x578B;&#x7684;&#x4E3A;&#x5B58;&#x50A8;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;ZooKeeper &#x7684;&#x6570;&#x636E;&#x662F;&#x4FDD;&#x6301;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x548C;&#x4F4E;&#x5EF6;&#x8FDF;&#x3002; </p>
<p>Zookeeper &#x7684;&#x5B9E;&#x73B0;&#x7740;&#x91CD;&#x4E8E;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x548C;&#x4E25;&#x683C;&#x7684;&#x987A;&#x5E8F;&#x8BBF;&#x95EE;&#x3002;&#x5728;&#x6027;&#x80FD;&#x65B9;&#x9762;&#xFF0C; Zookeeper &#x9002;&#x7528;&#x4E8E;&#x5927;&#x578B;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x3002;&#x5728;&#x53EF;&#x9760;&#x6027;&#x65B9;&#x9762;&#xFF0C;Zookeeper &#x80FD;&#x591F;&#x907F;&#x514D;&#x5355;&#x70B9;&#x5931;&#x6548;&#x3002;&#x4E25;&#x683C;&#x987A;&#x5E8F;&#x610F;&#x5473;&#x7740;&#x53EF;&#x4EE5;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x73B0;&#x590D;&#x6742;&#x7684;&#x540C;&#x6B65;&#x539F;&#x8BED;&#x3002; </p>
<p>Zookeeper &#x662F;&#x590D;&#x5236;&#x7684;&#xFF08;replicated&#xFF09;&#xFF0C;&#x5C31;&#x50CF;&#x5B83;&#x534F;&#x8C03;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x8FDB;&#x7A0B;&#x4E00;&#x6837;&#xFF0C;Zookeeper &#x81EA;&#x8EAB;&#x4E5F;&#x5728;&#x88AB;&#x79F0;&#x4E3A;&#x201C;ensemble&#x201D; &#x7684;&#x4E00;&#x7EC4;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x590D;&#x5236;&#x3002; </p>
<p><img src="http://taojinke.github.io/img/20150703/03b495e.jpg" alt=""></p>
<p>&#x7EC4;&#x6210; Zookeeper &#x670D;&#x52A1;(Service)&#x7684;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;(server)&#x5FC5;&#x987B;&#x76F8;&#x4E92;&#x77E5;&#x9053;&#x5BF9;&#x65B9;&#x3002;&#x5B83;&#x4EEC;&#xFF08;Server&#xFF09;&#x7EF4;&#x62A4;&#x7740;&#x4E00;&#x4EFD;&#x4FDD;&#x6301;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x72B6;&#x6001;&#x955C;&#x50CF;&#xFF0C;&#x4EE5;&#x53CA;&#x6301;&#x4E45;&#x5B58;&#x50A8;&#x7684;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x548C;&#x5FEB;&#x7167;&#x3002;&#x53EA;&#x8981;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7684;&#x5927;&#x591A;&#x6570;&#x662F;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x6574;&#x4E2A; Zookeeper &#x670D;&#x52A1;&#x5C31;&#x662F;&#x53EF;&#x7528;&#x7684;&#x3002;</p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5230;&#x5355;&#x4E2A; Zookeeper Server&#xFF0C;&#x7EF4;&#x6301;&#x7740;&#x4E00;&#x4E2A; TCP &#x8FDE;&#x63A5;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x8FDE;&#x63A5;&#x8FDB;&#x884C;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x56DE;&#x590D;&#xFF0C;&#x83B7;&#x53D6;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4EE5;&#x53CA;&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#x3002;&#x5982;&#x679C;&#x8BE5;TCP&#x8FDE;&#x63A5;&#x4E2D;&#x65AD;&#x4E86;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x8FDE;&#x63A5;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<p>Zookeeper &#x662F;&#x987A;&#x5E8F;&#x7684;&#x3002;Zookeeper &#x7528;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x6807;&#x8BB0;&#x6BCF;&#x4E00;&#x6B21;&#x66F4;&#x65B0;&#xFF0C;&#x4EE5;&#x53CD;&#x6620;&#x6240;&#x6709; Zookeeper &#x4E8B;&#x52A1;&#x7684;&#x987A;&#x5E8F;&#x3002;&#x5E76;&#x53D1;&#x7684;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x8FD9;&#x4E9B;&#x6B21;&#x5E8F;&#x6765;&#x5B9E;&#x73B0;&#x66F4;&#x9AD8;&#x5C42;&#x7684;&#x62BD;&#x8C61;&#xFF0C;&#x6BD4;&#x5982;&#x540C;&#x6B65;&#x539F;&#x8BED;&#x3002; </p>
<p>Zookeeper &#x662F;&#x5FEB;&#x901F;&#x7684;&#x3002;&#x5728;&#x5E94;&#x5BF9;&#x4EE5;&#x201C;&#x8BFB;&#x201D;&#x4E3A;&#x4E3B;&#x7684;&#x8D1F;&#x8F7D;&#x65F6;&#x5C24;&#x5176;&#x5730;&#x5FEB;&#x901F;&#x3002;Zookeeper &#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x5728;&#x6570;&#x4EE5;&#x5343;&#x8BA1;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x4E0A;&#xFF0C;&#x800C;&#x5F53;&#x201C;&#x8BFB;&#x201D;&#x8FDC;&#x591A;&#x4E8E;&#x201C;&#x5199;&#x201D;&#xFF0C;&#x8BFB;&#x5199;&#x6BD4;&#x8FBE;&#x5230; 10 &#x6BD4; 1 &#x5DE6;&#x53F3;&#x65F6;&#xFF0C;&#x8868;&#x73B0;&#x6700;&#x597D;&#x3002;</p>
<h4 id="&#x6570;&#x636E;&#x6A21;&#x578B;&#x548C;&#x5C42;&#x6B21;&#x5316;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;">&#x6570;&#x636E;&#x6A21;&#x578B;&#x548C;&#x5C42;&#x6B21;&#x5316;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;</h4><p>ZooKeeper &#x91C7;&#x7528;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5F88;&#x50CF;&#x6807;&#x51C6;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x4E00;&#x4E2A;&#x540D;&#x79F0;&#x7531;&#x8FDE;&#x7EED;&#x7684;&#x4EE5;&#x659C;&#x7EBF;&quot;/&quot;&#x5206;&#x9694;&#x7684;&#x8DEF;&#x5F84;&#x5143;&#x7D20;&#x7EC4;&#x6210;&#x3002;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x3002;</p>
<p><table><tbody><tr><td> Zookeeper &#x547D;&#x540D;&#x7A7A;&#x95F4; </td></tr><tr><td><img src="http://taojinke.github.io/img/20150703/03b50b1.jpg" alt=""></td></tr></tbody></table></p>
<p> <strong>&#xA0;&#x8282;&#x70B9;&#x548C;&#x77AC;&#x65F6;&#x8282;&#x70B9;&#xFF08;Nodes and&#xA0;ephemeral nodes</strong>  <strong>&#xFF09;</strong></p>
<p>&#x4E0E;&#x6807;&#x51C6;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;Zookeeper &#x547D;&#x540D;&#xFFFD;&#xFFFD;&#xFFFD;&#x95F4;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x53EF;&#x4EE5;&#x65E2;&#x6709;&#x6570;&#x636E;&#x540C;&#x65F6;&#x4E5F;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x3002;&#x5C31;&#x50CF;&#x662F;&#x6709;&#x90A3;&#x6837;&#x4E00;&#x79CD;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x3002;&#xFF08;Zookeeper &#x8BBE;&#x8BA1;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x534F;&#x8C03;&#x6570;&#x636E;&#xFF1A;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3001;&#x914D;&#x7F6E;&#x3001;&#x5730;&#x5740;&#x4FE1;&#x606F;&#x7B49;&#x7B49;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E9B;&#x4FDD;&#x5B58;&#x5728;&#x8282;&#x70B9;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x901A;&#x5E38;&#x90FD;&#x5F88;&#x5C0F;&#xFF0C;&#x5728; Byte &#x5230; KB &#x7684;&#x8303;&#x56F4;&#x3002;&#xFF09;&#x4E3A;&#x4E86;&#x66F4;&#x660E;&#x6670;&#x4E00;&#x4E9B;&#xFF0C;Zookeeper &#x4F7F;&#x7528;&#x201C;znode&#x201D;&#x8FD9;&#x4E00;&#x672F;&#x8BED;&#x6765;&#x8868;&#x793A;&#x6211;&#x4EEC;&#x8C08;&#x8BBA;&#x7684;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x8282;&#x70B9;&#x3002;</p>
<p>Znode &#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x7ED3;&#x6784;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x8868;&#x793A;&#x6570;&#x636E;&#x6539;&#x53D8;&#x3001;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5217;&#x8868;&#xFF08;ACL&#xFF09;&#x6539;&#x53D8;&#x7684;&#x7248;&#x672C;&#x53F7;&#x3001;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x6821;&#x9A8C;&#x3001;&#x534F;&#x8C03;&#x66F4;&#x65B0;&#x3002;&#x6BCF;&#x6B21;&#x4E00;&#x4E2A; znode &#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x7248;&#x672C;&#x53F7;&#x968F;&#x4E4B;&#x9012;&#x589E;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6536;&#x5230;&#x6570;&#x636E;&#x5BF9;&#x5E94;&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;</p>
<p>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A; znode &#x7684;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x5199;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x7684;&#x3002;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;znode&#x5C06;&#x83B7;&#x5F97;&#x5176;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x5199;&#x5165;&#x5219;&#x66FF;&#x6362;&#x5176;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E;&#x3002;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6709;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5217;&#x8868;&#xFF08;Access Control List (ACL)&#xA0;&#xFF09;&#x7528;&#x4E8E;&#x7EA6;&#x675F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x8BBF;&#x95EE;&#x8005;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x54EA;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;</p>
<p>ZooKeeper &#x8FD8;&#x6709;&#x201C;&#x77AC;&#x65F6;&#x8282;&#x70B9;&#x201D;(emphemeral node)&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5F53;&#x521B;&#x5EFA;&#x77AC;&#x65F6;&#x8282;&#x70B9;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x8BDD;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x6D3B;&#x52A8;&#xFF0C;&#x77AC;&#x65F6;&#x8282;&#x70B9;&#x5C31;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#x3002;&#x800C;&#x5F53;&#x4F1A;&#x8BDD;&#x7EC8;&#x7ED3;&#x65F6;&#xFF0C;&#x77AC;&#x65F6;&#x8282;&#x70B9;&#x88AB;&#x5220;&#x9664;&#x3002;</p>
<h4 id="&#x6761;&#x4EF6;&#x66F4;&#x65B0;&#x548C;&#x76D1;&#x89C6;&#xFF08;Conditional_updates_and_watches&#xFF09;">&#x6761;&#x4EF6;&#x66F4;&#x65B0;&#x548C;&#x76D1;&#x89C6;&#xFF08;Conditional updates and watches&#xFF09;</h4><p>ZooKeeper &#x652F;&#x6301;&#x201C;&#x76D1;&#x89C6;&#x201D;(watch)&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x5728; znode &#x4E0A;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x76D1;&#x89C6;(watch)&#x3002;&#x5F53; znode &#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x201C;&#x76D1;&#x89C6;&#x201D;&#x88AB;&#x89E6;&#x53D1;&#x540C;&#x65F6;&#x88AB;&#x79FB;&#x9664;&#x3002;&#x5F53;&#x201C;&#x76D1;&#x89C6;&#x201D;&#x88AB;&#x89E6;&#x53D1;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#x4E86; znode &#x7684;&#x53D8;&#x66F4;&#x7684;&#x6570;&#x636E;&#x5305;&#x3002;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;Zookeeper&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x4F1A;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x901A;&#x77E5;&#x3002;</p>
<h4 id="&#x4FDD;&#x8BC1;&#xFF08;Guarantees&#xFF09;">&#x4FDD;&#x8BC1;&#xFF08;Guarantees&#xFF09;</h4><p>Zookeeper &#x5F88;&#x5FEB;&#x901F;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x7684;&#x76EE;&#x6807;&#x662F;&#x4F5C;&#x4E3A;&#x6784;&#x5EFA;&#x8BF8;&#x5982;&#x201C;&#x540C;&#x6B65;&#x201D;&#x8FD9;&#x7C7B;&#x66F4;&#x590D;&#x6742;&#x670D;&#x52A1;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x7684;&#x4E00;&#x7EC4;&#x4FDD;&#x8BC1;&#xFF1A;</p>
<ul>
<li>&#x987A;&#x5E8F;&#x4E00;&#x81F4;&#x6027; - &#x6765;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x66F4;&#x6539;&#x8BF7;&#x6C42;&#x5C06;&#x4F1A;&#x6309;&#x7167;&#x5B83;&#x4EEC;&#x7684;&#x53D1;&#x9001;&#x7684;&#x987A;&#x5E8F;&#x88AB;&#x5E94;&#x7528;&#x3002;</li>
<li>&#x539F;&#x5B50;&#x6027; - &#x66F4;&#x6539;&#x8981;&#x4E48;&#x6210;&#x529F;&#xFF0C;&#x8981;&#x4E48;&#x5931;&#x8D25;&#xFF0C;&#x4E0D;&#x4F1A;&#x5B58;&#x5728;&#x90E8;&#x5206;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
<li>&#x5355;&#x4E00;&#x7CFB;&#x7EDF;&#x6620;&#x50CF; - &#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x770B;&#x5230; Zookeeper &#x670D;&#x52A1;&#x7684;&#x76F8;&#x540C;&#x7684;&#x89C6;&#x56FE;&#xFF0C;&#x800C;&#x65E0;&#x8BBA;&#x5B83;&#x4EEC;&#x8FDE;&#x5230;&#x5177;&#x4F53;&#x54EA;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;</li>
<li>&#x53EF;&#x9760;&#x6027; - &#x4E00;&#x65E6;&#x4E00;&#x6B21;&#x66F4;&#x6539;&#x8BF7;&#x6C42;&#x88AB;&#x5E94;&#x7528;&#xFF0C;&#x66F4;&#x6539;&#x7684;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x88AB;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x76F4;&#x5230;&#x88AB;&#x4E0B;&#x4E00;&#x6B21;&#x66F4;&#x6539;&#x8986;&#x76D6;&#x3002;</li>
<li>&#x53CA;&#x65F6;&#x6027; - &#x5BA2;&#x6237;&#x7AEF;&#x770B;&#x5230;&#x7684;&#x7CFB;&#x7EDF;&#x89C6;&#x56FE;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x8303;&#x56F4;&#x5185;&#x603B;&#x662F;&#x6700;&#x65B0;&#x7684;&#x3002;</li>
</ul>
<h4 id="&#x7B80;&#x5355;&#x7684;API">&#x7B80;&#x5355;&#x7684;API</h4><p>Zookeeper &#x7684;&#x8BBE;&#x8BA1;&#x76EE;&#x6807;&#x4E4B;&#x4E00;&#x5C31;&#x662F;&#x63D0;&#x4F9B;&#x7B80;&#x5355;&#x7684;&#x7F16;&#x7A0B;&#x63A5;&#x53E3;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x5B83;&#x53EA;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<p>create &#xFF1A; &#x5728;&#xFF08;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF09;&#x6811;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x5730;&#x5740;&#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
<p>delete &#xFF1A; &#x5220;&#x9664;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
<p>exists &#xFF1A; &#x68C0;&#x6D4B;&#x5728;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#x4E0A;&#x662F;&#x5426;&#x5B58;&#x5728;&#x8282;&#x70B9;&#x3002;</p>
<p>get data &#xFF1A; &#x4ECE;&#x8282;&#x70B9;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x3002;</p>
<p>set data &#xFF1A;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x8282;&#x70B9;&#x3002;</p>
<p>get children &#xFF1A;&#x68C0;&#x7D22;&#x5B50;&#x8282;&#x70B9;&#x5217;&#x8868;&#x3002;</p>
<p>sync &#xFF1A; &#x7B49;&#x5F85;&#x6570;&#x636E;&#x4F20;&#x64AD;&#x5B8C;&#x6210;&#x3002;</p>
<h4 id="&#x5B9E;&#x73B0;">&#x5B9E;&#x73B0;</h4><p>Zookeeper &#x7EC4;&#x4EF6;&#x56FE;&#x5C55;&#x793A;&#x4E86; Zookeeper &#x670D;&#x52A1;&#x7684;&#x9AD8;&#x5C42;&#x7EC4;&#x4EF6;&#x3002;&#x9664;&#x4E86;&#x201C;Request Processor&#x201D;&#xFF0C;&#x6784;&#x6210; Zookeeper &#x670D;&#x52A1;&#x7684;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x4F1A;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x8FD9;&#x4E9B;&#x7EC4;&#x4EF6;&#x7684;&#x62F7;&#x8D1D;&#x3002;</p>
<p><table><tbody><tr><td>Zookeeper &#x7EC4;&#x4EF6;</td></tr><tr><td><img src="http://taojinke.github.io/img/20150703/03b5322.jpg" alt=""></td></tr></tbody></table></p>
<p>&#x201C;Replicated Database&#x201D; &#xA0;&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6811;&#x3002;&#x6240;&#x6709;&#x66F4;&#x6539;&#x90FD;&#x4F1A;&#x8BB0;&#x5F55;&#x5230;&#x78C1;&#x76D8;&#x4EE5;&#x4FBF;&#x53EF;&#x6062;&#x590D;&#x3002;&#x6570;&#x636E;&#x5199;&#x5165;&#x5728;&#x5E94;&#x7528;&#x5230;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x524D;&#xFF0C;&#x4F1A;&#x5148;&#x5E8F;&#x5217;&#x5316;&#x5230;&#x78C1;&#x76D8;&#x3002;</p>
<p>&#x6BCF;&#x4E00;&#x4E2A; Zookeeper &#x670D;&#x52A1;&#x5668;&#x90FD;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5230;&#x4E00;&#x4E2A;&#x786E;&#x5207;&#x7684;Zookeeper&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;&#x3002;&#x8BFB;&#x8BF7;&#x6C42;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x5E93;&#x7684;&#x672C;&#x5730;&#x62F7;&#x8D1D;&#x4E2D;&#x83B7;&#x53D6;&#x3002;&#x6539;&#x53D8;Zookeeper&#x670D;&#x52A1;&#x72B6;&#x6001;&#x7684;&#x8BF7;&#x6C42;&#x3001;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x6027;&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x534F;&#x8BAE;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6240;&#x6709;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#x90FD;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x79F0;&#x4E3A; leader&#x3002;&#x800C;&#x5176;&#x4F59;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x88AB;&#x79F0;&#x4E3A; follower&#xFF0C;&#x4ECE;leader&#x63A5;&#x6536;&#x6D88;&#x606F;&#x63D0;&#x6848;&#xFF08;proposal&#xFF09;&#x5E76;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x4EA4;&#x4ED8;&#x53D6;&#x5F97;&#x4E00;&#x81F4;&#x3002;&#x6D88;&#x606F;&#x5C42;&#x7EF4;&#x62A4; leader &#x5931;&#x6548;&#x65F6;&#x7684;&#x66F4;&#x65B0;&#x66FF;&#x6362;&#x4EE5;&#x53CA; leader &#x548C; follower &#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x3002;</p>
<p>Zookeeper &#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x539F;&#x5B50;&#x6D88;&#x606F;&#x534F;&#x8BAE;&#x3002;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x5C42;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;Zookeeper &#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x672C;&#x5730;&#x7684;&#x590D;&#x5236;&#x54C1;&#x4E0D;&#x4F1A;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x5F53; leader &#x6536;&#x5230;&#x4E00;&#x4E2A;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5B83;&#x8BA1;&#x7B97;&#x7CFB;&#x7EDF;&#x6240;&#x5904;&#x7684;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x4F55;&#x65F6;&#x5E94;&#x7528;&#x5199;&#x5165;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x5C06;&#x6B64;&#x8F6C;&#x6362;&#x4E3A;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF0C;&#x5305;&#x542B;&#x65B0;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<h4 id="&#x4F7F;&#x7528;">&#x4F7F;&#x7528;</h4><p>Zookeeper &#x7684;&#x7F16;&#x7A0B;&#x63A5;&#x53E3;&#x7279;&#x610F;&#x5730;&#x5B9A;&#x4E49;&#x5F97;&#x5F88;&#x7B80;&#x5355;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x7F16;&#x7A0B;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x66F4;&#x9AD8;&#x9636;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x540C;&#x6B65;&#x539F;&#x8BED;&#xFF0C;&#x6210;&#x5458;&#x5206;&#x7EC4;&#xFF0C;&#x6240;&#x6709;&#x6743;&#xFF0C;&#x7B49;&#x7B49;&#x3002;</p>
<h4 id="&#x6027;&#x80FD;">&#x6027;&#x80FD;</h4><p>Zookeeper &#x88AB;&#x8BBE;&#x8BA1;&#x4E3A;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x662F;&#x5426;&#x5982;&#x6B64;&#x5462;&#xFF1F;&#x5728;&#x96C5;&#x864E;&#x7814;&#x53D1;&#x4E2D;&#x5FC3;&#x7684; Zookeeper &#x5F00;&#x53D1;&#x56E2;&#x961F;&#x7684;&#x7814;&#x7A76;&#x7ED3;&#x679C;&#x8868;&#x660E;&#x7684;&#x786E;&#x5982;&#x6B64;&#x3002;&#xFF08;&#x53C2;&#x89C1;&#x4E0B;&#x56FE;&#xFF1A;Zookeeper &#x541E;&#x5410;&#x91CF;&#x968F;&#x8BFB;&#x5199;&#x6BD4;&#x7684;&#x53D8;&#x5316;&#xFF09;&#x3002;&#x5728;&#x201C;&#x8BFB;&#x201D;&#x591A;&#x4E8E;&#x201C;&#x5199;&#x201D;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x5C24;&#x5176;&#x5730;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x201C;&#x5199;&#x201D;&#x4F1A;&#x5BFC;&#x81F4;&#x5728;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x5668;&#x95F4;&#x540C;&#x6B65;&#x72B6;&#x6001;&#x3002;&#xFF08;&#x201C;&#x8BFB;&#x201D;&#x591A;&#x4E8E;&#x201C;&#x5199;&#x201D;&#x662F;&#x534F;&#x8C03;&#x670D;&#x52A1;&#x7684;&#x5178;&#x578B;&#x573A;&#x666F;&#x3002;&#xFF09;</p>
<p><table><tbody><tr><td>Zookeeper &#x541E;&#x5410;&#x91CF;&#x968F;&#x8BFB;&#x5199;&#x6BD4;&#x7684;&#x53D8;&#x5316;</td></tr><tr><td><img src="http://taojinke.github.io/img/20150703/03b5a75.jpg" alt=""></td></tr></tbody></table></p>
<p>&#x56FE;&#x201C;Zookeeper &#x541E;&#x5410;&#x91CF;&#x968F;&#x8BFB;&#x5199;&#x6BD4;&#x7684;&#x53D8;&#x5316;&#x201D; &#x662F; Zookeeper3.2 &#x7248;&#x672C;&#x8FD0;&#x884C;&#x4E8E; Dual 2Gh&#xA0;Xeon + 2 &#x4E2A; 15K RPM &#x7684; SATA &#x786C;&#x76D8;&#x9A71;&#x52A8;&#x5668;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x4E00;&#x4E2A;&#x9A71;&#x52A8;&#x5668;&#x7528;&#x4F5C; Zookeeper &#x4E13;&#x7528;&#x7684;&#x65E5;&#x5FD7;&#x8BBE;&#x5907;&#x3002;&#x5FEB;&#x7167;&#x5199;&#x5230;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x9A71;&#x52A8;&#x5668;&#x3002;&#x5199;&#x8BF7;&#x6C42;&#x662F; 1K &#x6570;&#x636E;&#x7684;&#x5199;&#x5165;&#x800C;&#x8BFB;&#x8BF7;&#x6C42;&#x662F; 1K &#x7684;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x3002;&#x201C;Servers&#x201D;&#x6807;&#x51FA;&#x4E86; Zookeeper Ensemble &#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5373;&#x7EC4;&#x6210; Zookeeper &#x670D;&#x52A1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x91CF;&#x3002;&#x5927;&#x7EA6;30&#x53F0;&#x5176;&#x5B83;&#x7684;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x7528;&#x4F5C;&#x6A21;&#x62DF;&#x5BA2;&#x6237;&#x7AEF;&#x3002;Zookeeper Ensemble &#x88AB;&#xFFFD;&#xFFFD;&#xFFFD;&#x7F6E;&#x4E3A;&#x4E0D;&#x5141;&#x8BB8;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5230; Leader &#x3002;</p>
<p>&#x6CE8;&#xFF1A;3.2&#x7248;&#x672C;&#x7684;&#x8BFB;/&#x5199;&#x6027;&#x80FD;&#x76F8;&#x5BF9;&#x4E8E;3.1&#x7248;&#x672C;&#x4EE5;&#x524D;&#x6709;&#x6700;&#x591A;&#x8FBE;2&#x500D;&#x7684;&#x63D0;&#x5347;&#x3002;</p>
<p>&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;&#x4E5F;&#x8868;&#x660E;&#x4E86; Zookeeper &#x7684;&#x53EF;&#x9760;&#x6027;&#x3002;&#x56FE;&#x201C;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x53EF;&#x9760;&#x6027;&#x201D;&#x5C55;&#x793A;&#x4E86; Zookeeper &#x662F;&#x5982;&#x4F55;&#x5E94;&#x5BF9;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x5931;&#x6548;&#x7684;&#x3002;&#x56FE;&#x4E2D;&#x6807;&#x6CE8;&#x7684;&#x4E8B;&#x4EF6;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>1&#x3001;&#x4E00;&#x4E2A; Follower &#x5931;&#x6548;&#x7136;&#x540E;&#x6062;&#x590D;&#x3002;</p>
<p>2&#x3001;&#x53E6;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684; Follower &#x5931;&#x6548;&#x7136;&#x540E;&#x6062;&#x590D;&#x3002;</p>
<p>3&#x3001;Leader &#x5931;&#x6548;&#x3002;</p>
<p>4&#x3001;&#x4E24;&#x4E2A; Follower &#x5931;&#x6548;&#x7136;&#x540E;&#x6062;&#x590D;&#x3002;</p>
<p>5&#x3001;&#x53E6;&#x4E00;&#x4E2A; Leader &#x5931;&#x6548;&#x3002;</p>
<p><table><tbody><tr><td>&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x53EF;&#x9760;&#x6027;&#xFF08;Reliability in the Presence of Errors&#xFF09;</td></tr><tr><td><img src="http://taojinke.github.io/img/20150703/03b5ce6.jpg" alt=""></td></tr></tbody></table></p>
<p>&#x4ECE;&#x8FD9;&#x5F20;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x51E0;&#x70B9;&#x91CD;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x5982;&#x679C; follower &#x5931;&#x6548;&#x5E76;&#x5FEB;&#x901F;&#x6062;&#x590D;&#xFF0C;Zookeeper &#x80FD;&#x591F;&#x7EF4;&#x6301;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x5C3D;&#x7BA1;&#x5B58;&#x5728;&#x5931;&#x6548;&#x3002;&#x4F46;&#x4E5F;&#x8BB8;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;leader &#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x4F7F;&#x7CFB;&#x7EDF;&#x8DB3;&#x591F;&#x5FEB;&#x5730;&#x6062;&#x590D;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x541E;&#x5410;&#x91CF;&#x7684;&#x603B;&#x4F53;&#x4E0B;&#x964D;&#x3002;&#x4ECE;&#x89C2;&#x5BDF;&#x7ED3;&#x679C;&#x6765;&#x770B;&#xFF0C;Zookeeper &#x82B1;&#x4E86;&#x4E0D;&#x5230; 200 &#x6BEB;&#x79D2;&#x7684;&#x65F6;&#x95F4;&#x9009;&#x4E3E;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684; leader&#x3002;&#x7B2C;&#x4E09;&#xFF0C;&#x53EA;&#x8981; follower &#x6062;&#x590D;&#xFF0C;Zookeeper &#x7684;&#x541E;&#x5410;&#x91CF;&#x80FD;&#x591F;&#x518D;&#x6B21;&#x4E0A;&#x5347;&#x5230;&#x521A;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x65F6;&#x7684;&#x6C34;&#x5E73;&#x3002;</p>
<h3 id="&#x5173;&#x4E8E;ZooKeeper&#x9879;&#x76EE;">&#x5173;&#x4E8E;ZooKeeper&#x9879;&#x76EE;</h3><p>Zookeeper &#x5DF2;&#x7ECF;&#x88AB;&#x6210;&#x529F;&#x5730;&#x7528;&#x5728;&#x8BB8;&#x591A;&#x5DE5;&#x4E1A;&#x7EA7;&#x7684;&#x5E94;&#x7528;&#x3002;&#x5728;&#x96C5;&#x864E;&#xFF0C;Zookeeper &#x88AB;&#x7528;&#x4F5C;&#x96C5;&#x864E;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x534F;&#x8C03;&#x548C;&#x5931;&#x6548;&#x6062;&#x590D;&#x670D;&#x52A1;&#xFF0C;&#x8BE5;&#x7CFB;&#x7EDF;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x4F38;&#x7F29;&#x6027;&#x7684;&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x7CFB;&#x7EDF;&#xFF0C;&#x7BA1;&#x7406;&#x7740;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x7684;&#x4E3B;&#x9898;&#x590D;&#x5236;&#x548C;&#x6570;&#x636E;&#x5206;&#x53D1;&#x3002;Zookeeper &#x8FD8;&#x88AB;&#x7528;&#x5728;&#x96C5;&#x864E;&#x722C;&#x866B;&#x7684;&#x6293;&#x53D6;&#x670D;&#x52A1;&#x4E0A;&#xFF0C;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x5931;&#x6548;&#x6062;&#x590D;&#x3002;&#x8BB8;&#x591A;&#x96C5;&#x864E;&#x7684;&#x5E7F;&#x544A;&#x7CFB;&#x7EDF;&#x4E5F;&#x7528; Zookeeper &#x5B9E;&#x73B0;&#x53EF;&#x9760;&#x7684;&#x670D;&#x52A1;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x9F13;&#x52B1;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x548C;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x52A0;&#x5165;&#x793E;&#x533A;&#xFF0C;&#x5E76;&#x8D21;&#x732E;&#x4ED6;&#x4EEC;&#x7684;&#x4E13;&#x4E1A;&#x77E5;&#x8BC6;&#x3002;&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x8BF7;&#x53C2;&#x89C1; <a href="http://zookeeper.apache.org/" target="_blank" rel="external">Zookeeper Project on Apache</a> &#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Nosql/">Nosql</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/03ac7f9/" title="HBase0.98 + Hadoop2.6 Fully Distributed 完全分布式环境搭建 -" itemprop="url">HBase0.98 + Hadoop2.6 Fully Distributed 完全分布式环境搭建 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:44.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> 1&#x3001; <strong>&#xA0;Distributed Cluster Demo Architecture</strong></p>
<p>In reality, you need a fully-distributed configuration to fully test HBase and to use it in real-world scenarios. In a distributed configuration, the cluster contains multiple nodes, each of which runs one or more HBase daemon. These include primary and backup Master instances, multiple Zookeeper nodes, and multiple RegionServer nodes.</p>
<p><table><thead><tr>Node NameMasterZooKeeperRegionServer</tr></thead><tbody><tr><td>SY-0134</td></tr></tbody></table></p>
<p><td>yes</td></p>
<p><td>yes</td></p>
<p><td>no</td></p>
<p><tr><td>SY-0133</td></tr></p>
<p><td>backup</td></p>
<p><td>yes</td></p>
<p><td>yes</td></p>
<p><tr><td>SY-0132</td></tr></p>
<p><td>no</td></p>
<p><td>yes</td></p>
<p><td>yes</td></p>
<p><tr><td>SY-0131</td></tr></p>
<p><td>no</td></p>
<p><td>yes</td></p>
<p><td>yes</td></p>
<p><tr><td>SY-0130</td></tr></p>
<p><td>no</td></p>
<p><td>yes</td></p>
<p><td>yes</td></p>
<p>#### 2&#x3001;&#x5404;&#x8282;&#x70B9;&#x95F4;&#x914D;&#x7F6E;SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;</p>
<h4 id="3&#x3001;SY-0134_Master&#x8282;&#x70B9;&#x914D;&#x7F6E;">3&#x3001;SY-0134 Master&#x8282;&#x70B9;&#x914D;&#x7F6E;</h4><p>SY-0134will run your primary master and ZooKeeper processes, but no RegionServers. . </p>
<ol>
<li>Edit <em>conf/regionservers</em> and remove the line which contains&#xA0; localhost . Add lines with the hostnames or IP addresses for&#xA0; <strong>SY-0133,<em>**</em></strong> SY-0132, <strong><strong> SY-0131, </strong></strong>SY-0130<strong>.</strong></li>
<li>Configure HBase to use <strong><em>**</em></strong>SY-0131<strong>&#xA0;as a&#xA0;backup master.</strong></li>
</ol>
<p>Create a new file in <em>conf/</em> called&#xA0; <em>backup-masters</em> , and add a new line to it with the hostname for&#xA0; <strong>**</strong>SY-0131<strong> . In this demonstration, the hostname is&#xA0; <strong>**</strong></strong>SY-0131<strong>.</strong></p>
<ol>
<li>Configure ZooKeeper</li>
</ol>
<p>In reality, you should carefully consider your ZooKeeper configuration.</p>
<p>Zookeeper&#x73AF;&#x5883;&#x5728; <a href="http://www.cnblogs.com/xiejin/p/4213082.html" target="_blank" rel="external">&#x300A;Spark1.2&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x642D;&#x5EFA;(Standalone+HA) 4G&#x5185;&#x5B58;5&#x4E2A;&#x8282;&#x70B9;&#x4E5F;&#x662F;&#x86EE;&#x62FC;&#x7684;&#x300B;</a> &#x6709;&#x4ECB;&#x7ECD;&#x3002; </p>
<p>Hadoop&#x73AF;&#x5883;&#x5728; <a href="http://www.cnblogs.com/xiejin/p/4208741.html" target="_blank" rel="external">&#x300A;Hadoop2.6&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x642D;&#x5EFA;&#xFF08;HDFS HA+YARN&#xFF09;&#x539F;&#x6765;4G&#x5185;&#x5B58;&#x4E5F;&#x80FD;&#x4EFB;&#x6027;&#x4E00;&#x6B21;.&#x300B;</a> &#x6709;&#x4ECB;&#x7ECD;&#x3002; </p>
<p>On <strong>SY-0134</strong> , edit&#xA0; <em>conf/hbase-site.xml</em> and add the following properties. </p>
<pre><code><span class="subst">&amp;</span><span class="literal">lt</span>;configuration<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;property<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;name<span class="subst">&amp;</span><span class="literal">gt</span>;hbase<span class="built_in">.</span>rootdir<span class="subst">&amp;</span><span class="literal">lt</span>;/name<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;value<span class="subst">&amp;</span><span class="literal">gt</span>;hdfs:<span class="comment">//SY-0130:8020/hbase&amp;lt;/value&amp;gt;</span>
  <span class="subst">&amp;</span><span class="literal">lt</span>;/property<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;property<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;name<span class="subst">&amp;</span><span class="literal">gt</span>;hbase<span class="built_in">.</span>zookeeper<span class="built_in">.</span>quorum<span class="subst">&amp;</span><span class="literal">lt</span>;/name<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;value<span class="subst">&amp;</span><span class="literal">gt</span>;SY<span class="subst">-</span><span class="number">0134</span>,SY<span class="subst">-</span><span class="number">0133</span>,SY<span class="subst">-</span><span class="number">0132</span>,SY<span class="subst">-</span><span class="number">0131</span>,SY<span class="subst">-</span><span class="number">0130</span><span class="subst">&amp;</span><span class="literal">lt</span>;/value<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;/property<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;property<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;name<span class="subst">&amp;</span><span class="literal">gt</span>;hbase<span class="built_in">.</span>zookeeper<span class="built_in">.</span>property<span class="built_in">.</span>dataDir<span class="subst">&amp;</span><span class="literal">lt</span>;/name<span class="subst">&amp;</span><span class="literal">gt</span>; 
  <span class="subst">&amp;</span><span class="literal">lt</span>;value<span class="subst">&amp;</span><span class="literal">gt</span>;/home/hadoop/labsp/zookeeper<span class="subst">-</span><span class="number">3.4</span><span class="built_in">.6</span>/<span class="built_in">data</span><span class="subst">&amp;</span><span class="literal">lt</span>;/value<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;/property<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;property<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;name<span class="subst">&amp;</span><span class="literal">gt</span>;hbase<span class="built_in">.</span>cluster<span class="built_in">.</span>distributed<span class="subst">&amp;</span><span class="literal">lt</span>;/name<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;value<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="literal">true</span><span class="subst">&amp;</span><span class="literal">lt</span>;/value<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;/property<span class="subst">&amp;</span><span class="literal">gt</span>; 
<span class="subst">&amp;</span><span class="literal">lt</span>;/configuration<span class="subst">&amp;</span><span class="literal">gt</span>;

hbase<span class="built_in">.</span>rootdir :<span class="subst">&amp;</span><span class="variable">#x8BBE</span>;<span class="subst">&amp;</span><span class="variable">#x7F6E</span>;hbase<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x5E93</span>;<span class="subst">&amp;</span><span class="variable">#x5B58</span>;<span class="subst">&amp;</span><span class="variable">#x653E</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x636E</span>;<span class="subst">&amp;</span><span class="variable">#x7684</span>;<span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x5F55</span>;
hbase<span class="built_in">.</span>zookeeper<span class="built_in">.</span>quorum :<span class="subst">&amp;</span><span class="variable">#x6307</span>;<span class="subst">&amp;</span><span class="variable">#x5B9A</span>;zookeeper<span class="subst">&amp;</span><span class="variable">#x96C6</span>;<span class="subst">&amp;</span><span class="variable">#x7FA4</span>;<span class="subst">&amp;</span><span class="variable">#x8282</span>;<span class="subst">&amp;</span><span class="variable">#x70B9</span>;<span class="subst">&amp;</span><span class="variable">#x540D</span>;
hbase<span class="built_in">.</span>zookeeper<span class="built_in">.</span>property<span class="built_in">.</span>dataDir :<span class="subst">&amp;</span><span class="variable">#x6307</span>;zookeeper<span class="subst">&amp;</span><span class="variable">#x96C6</span>;<span class="subst">&amp;</span><span class="variable">#x7FA4</span>;<span class="built_in">data</span><span class="subst">&amp;</span><span class="variable">#x76EE</span>;<span class="subst">&amp;</span><span class="variable">#x5F55</span>;
hbase<span class="built_in">.</span>cluster<span class="built_in">.</span>distributed :<span class="subst">&amp;</span><span class="variable">#x6253</span>;<span class="subst">&amp;</span><span class="variable">#x5F00</span>;hbase<span class="subst">&amp;</span><span class="variable">#x5206</span>;<span class="subst">&amp;</span><span class="variable">#x5E03</span>;<span class="subst">&amp;</span><span class="variable">#x6A21</span>;<span class="subst">&amp;</span><span class="variable">#x5F0F</span>;
</code></pre><h2 id="Using_existing_ZooKeeper_ensemble">Using existing ZooKeeper ensemble</h2><p>&#x8BBE;&#x7F6E;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#x7684;Zookeeper&#x96C6;&#x7FA4;&#xFF0C;&#x4FEE;&#x6539;&#x914D;&#x7F6E; conf/hbase-env.sh</p>
<h4 id="config1:">config1:</h4><p> &#xA0;export JAVA_HOME=/lab/jdk1.7/</p>
<h4 id="config2:">config2:</h4><pre><code>To point HBase <span class="keyword">at</span> an existing ZooKeeper cluster, one <span class="keyword">that</span> <span class="keyword">is</span> <span class="keyword">not</span> managed <span class="keyword">by</span> HBase, <span class="keyword">set</span> HBASE_MANAGES_ZK <span class="keyword">in</span> conf/hbase-env.sh <span class="keyword">to</span> <span class="constant">false</span>

  ...
  <span class="comment"># Tell HBase whether it should manage its own instance of Zookeeper or not.</span>
  export HBASE_MANAGES_ZK=<span class="constant">false</span>
</code></pre><p>Note that you can use HBase in this manner to spin up a ZooKeeper cluster, unrelated to HBase. Just make sure to set HBASE_MANAGES_ZK to&#xA0; false if you want it to stay up across HBase restarts so that when HBase shuts down, it doesn&#x2019;t take ZooKeeper down with it.</p>
<p>4&#x3001;SY-0130, <strong><strong> SY-0131, **</strong></strong> SY-0132, <strong>**</strong>SY-0133&#x914D;&#x7F6E;</p>
<p>&#x5C06;SY-0134&#x76EE;&#x5F55;&#x4E2D;&#x7684;hbase0.98&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528;scp&#x547D;&#x4EE4;&#x8FDC;&#x7A0B;&#x590D;&#x5236;&#x5230;sy-0130,sy-0131,sy-0132,sy-0133&#x5BF9;&#x5E94;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x3002;</p>
<p>[hadoop@SY-0134 hbase0.98]$ pwd</p>
<p>/lab/hbase0.98</p>
<h4 id="5&#x3001;&#x542F;&#x52A8;&#x4E0E;&#x6D4B;&#x8BD5;&#x96C6;&#x7FA4;">5&#x3001;&#x542F;&#x52A8;&#x4E0E;&#x6D4B;&#x8BD5;&#x96C6;&#x7FA4;</h4><p>&#x9996;&#x5148;&#x8981;&#x4FDD;&#x8BC1;Hadoop&#x96C6;&#x7FA4;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#xFF0C;&#x5404;&#x8282;&#x70B9;zookeeper&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#x3002;&#x5176;&#x6B21;&#xA0;Be sure HBase is not running on any node. </p>
<p>If you forgot to stop HBase from previous testing, you will have errors. Check to see whether HBase is running on any of your nodes by using the jps command. Look for the processes HMaster ,&#xA0; HRegionServer , and HQuorumPeer . If they exist, kill them. </p>
<p>Start the cluster.&#x542F;&#x52A8;Hbase&#x96C6;&#x7FA4; </p>
<p>On&#xA0;SY-0134, issue the start-hbase.sh command. Your output will be similar to that below.</p>
<pre><code>[hadoop@SY-0134 hbase0.98]$ bin/<span class="operator"><span class="keyword">start</span>-hbase.sh
<span class="keyword">starting</span> <span class="keyword">master</span>, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-<span class="keyword">master</span>-SY-<span class="number">0134.</span>out
SY-<span class="number">0130</span>: <span class="keyword">starting</span> regionserver, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-regionserver-SY-<span class="number">0130.</span>out
SY-<span class="number">0132</span>: <span class="keyword">starting</span> regionserver, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-regionserver-SY-<span class="number">0132.</span>out
SY-<span class="number">0133</span>: <span class="keyword">starting</span> regionserver, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-regionserver-SY-<span class="number">0133.</span>out
SY-<span class="number">0131</span>: <span class="keyword">starting</span> regionserver, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-regionserver-SY-<span class="number">0131.</span>out
SY-<span class="number">0131</span>: <span class="keyword">starting</span> <span class="keyword">master</span>, logging <span class="keyword">to</span> /lab/hbase0.98/<span class="keyword">bin</span>/../<span class="keyword">logs</span>/hbase-hadoop-<span class="keyword">master</span>-SY-<span class="number">0131.</span>out</span>
</code></pre><p>ZooKeeper starts first, followed by the master, then the RegionServers, and finally the backup masters </p>
<h4 id="Verify_that_the_processes_are_running-">Verify that the processes are running.</h4><p>On each node of the cluster, run the jps command and verify that the correct processes are running on each server. You may see additional Java processes running on your servers as well, if they are used for other purposes.</p>
<p>SY-0134 JPS &#x8F93;&#x51FA; &#xFF1A;</p>
<pre><code>[hadoop<span class="variable">@SY</span>-<span class="number">0134</span> hbase<span class="number">0</span>.<span class="number">98</span>]<span class="variable">$ </span>jps
<span class="number">7240</span> <span class="constant">HMaster</span>
<span class="number">6340</span> <span class="constant">QuorumPeerMain</span>
<span class="number">7509</span> <span class="constant">Jps</span>
</code></pre><p>SY-0133 JPS &#x8F93;&#x51FA; &#xFF1A;</p>
<pre><code>[hadoop<span class="variable">@SY</span>-<span class="number">0133</span> bin]<span class="variable">$ </span>jps
<span class="number">6128</span> <span class="constant">Jps</span>
<span class="number">5317</span> <span class="constant">QuorumPeerMain</span>
<span class="number">5849</span> <span class="constant">HRegionServer</span>
<span class="number">5088</span> <span class="constant">DataNode</span>
<span class="number">4990</span> <span class="constant">JournalNode</span>
</code></pre><p>SY-0132 JPS &#x8F93;&#x51FA; &#xFF1A;</p>
<pre><code>[hadoop<span class="variable">@SY</span>-<span class="number">0132</span> ~]<span class="variable">$ </span>jps
<span class="number">2543</span> <span class="constant">DataNode</span>
<span class="number">3218</span> <span class="constant">HRegionServer</span>
<span class="number">3479</span> <span class="constant">Jps</span>
<span class="number">2435</span> <span class="constant">JournalNode</span>
<span class="number">2738</span> <span class="constant">QuorumPeerMain</span>
</code></pre><p>SY-0131 JPS &#x8F93;&#x51FA; &#xFF1A;</p>
<pre><code>[hadoop<span class="variable">@SY</span>-<span class="number">0131</span> zookeeper-<span class="number">3.4</span>.<span class="number">6</span>]<span class="variable">$ </span>jps
<span class="number">8860</span> <span class="constant">NameNode</span>
<span class="number">8755</span> <span class="constant">JournalNode</span>
<span class="number">10859</span> <span class="constant">HRegionServer</span>
<span class="number">9020</span> <span class="constant">DataNode</span>
<span class="number">9933</span> <span class="constant">QuorumPeerMain</span>
<span class="number">11526</span> <span class="constant">Jps</span>
<span class="number">10948</span> <span class="constant">HMaster</span>
</code></pre><p>SY-0130 JPS &#x8F93;&#x51FA; &#xFF1A;</p>
<pre><code>[hadoop<span class="variable">@SY</span>-<span class="number">0130</span> conf]<span class="variable">$ </span>jps
<span class="number">6636</span> <span class="constant">NameNode</span>
<span class="number">7803</span> <span class="constant">HRegionServer</span>
<span class="number">7292</span> <span class="constant">QuorumPeerMain</span>
<span class="number">8165</span> <span class="constant">Jps</span>
<span class="number">6562</span> <span class="constant">JournalNode </span> 
</code></pre><p>Hbase&#x96C6;&#x7FA4;&#x542F;&#x52A8;&#x540E;&#xFF0C;Hdfs&#x4E2D;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x4E86;&#x5BF9;&#x5E94;hbase&#x76EE;&#x5F55;</p>
<p><img src="http://taojinke.github.io/img/20150703/03aa0e9.jpg" alt=""></p>
<h4 id="6&#x3001;Browse_to_the_Web_UI-&#xA0;">6&#x3001;Browse to the Web UI.&#xA0;</h4><p>If everything is set up correctly, you should be able to connect to the UI for the Master&#xA0; <a href="http://192.168.249.134:60010/" target="_blank" rel="external">http://192.168.249.134:60010/</a> or the secondary master at&#xA0; <a href="http://192.168.249.131:60010/" target="_blank" rel="external">http://192.168.249.131:60010</a> for the secondary master, using a web browser. </p>
<p><em>In HBase newer than 0.98.x, the HTTP ports used by the HBase Web UI changed from 60010 for the Master and 60030 for each RegionServer to 16610 for the Master and 16030 for the RegionServer.</em></p>
<p>0.98.x&#x7684;&#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;0.98.x&#xFF0C;&#x8BBF;&#x95EE;&#x7AEF;&#x53E3;&#x6709;&#x53D8;&#x66F4;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/HBase/">HBase</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/036c424/" title="Apache Kafka 集群环境搭建 -" itemprop="url">Apache Kafka 集群环境搭建 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Apache Kafka &#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#xFF0C;&#x7531;LinkedIn&#x5F00;&#x6E90;&#x3002;&#x5F15;&#x7528;&#x5B98;&#x7F51;&#x5BF9;kafka&#x7684;&#x4ECB;&#x7ECD;&#xFF1A;&#x201C;Apache Kafka is publish-subscribe messaging rethought as a distributed commit log.&#x201D; &#xA0;&#x201C;publish-subscribe&#x201D;&#x662F;kafka&#x8BBE;&#x8BA1;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#xFF0C;&#x4E5F;&#x662F;kafka&#x6700;&#x5177;&#x7279;&#x8272;&#x7684;&#x5730;&#x65B9;&#x3002;publish&#x5728;kakfa&#x4E2D;&#x662F;&#x4E00;&#x4E2A;producer&#x7684;&#x89D2;&#x8272;&#xFF0C;subscribe&#x662F;consumer&#xFF0C;&#x5C31;&#x50CF;&#x6211;&#x4EEC;&#x751F;&#x6D3B;&#x4E2D;&#x7684;&#x4E00;&#x6837;&#xFF0C;&#x751F;&#x4EA7;&#x5546;&#x751F;&#x4EA7;&#x51FA;&#x6765;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x4E00;&#x822C;&#x4E0D;&#x80FD;&#x591F;&#x76F4;&#x63A5;&#x53BB;&#x5DE5;&#x5382;&#x8D2D;&#x4E70;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x7ECF;&#x9500;&#x5546;&#xFF0C;&#x6240;&#x4EE5;&#x540C;&#x6837;&#x7684;&#x5728;kafka&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;broker&#x7684;&#x89D2;&#x8272;&#x3002;&#x6240;&#x4EE5;kafka&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x5927;&#x81F4;&#x53EF;&#x4EE5;&#x8868;&#x8FF0;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&quot;producer&#x2014;&#x2014;&gt;broker&lt;&#x2014;&#x2014;consumer&quot;</p>
<p>&#x5927;&#x81F4;&#x7684;&#x4ECB;&#x7ECD;&#x5C31;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x79FB;&#x6B65;&#x5B98;&#x7F51;&#xFF1A; <a href="http://kafka.apache.org/" target="_blank" rel="external">http://kafka.apache.org/&#xA0;</a></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x8001;&#x751F;&#x5E38;&#x8C08;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;kafka&#xFF1F;kafka&#x9002;&#x7528;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x573A;&#x666F;&#xFF1F;&#x6211;&#x5148;&#x548C;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x518D;&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x603B;&#x7ED3;&#xFF0C;&#x6709;&#x5176;&#x4ED6;&#x60F3;&#x6CD5;&#x7684;&#x540C;&#x5B66;&#x6B22;&#x8FCE;&#x8865;&#x5145;&#xFF1A;</p>
<h4 id="&#x4F7F;&#x7528;kafka&#x7684;&#x7406;&#x7531;&#xFF1A;">&#x4F7F;&#x7528;kafka&#x7684;&#x7406;&#x7531;&#xFF1A;</h4><p>1.&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x901F;&#x5EA6;&#x5FEB;&#xFF08;kafka&#x662F;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x78C1;&#x76D8;&#x5B58;&#x50A8;&#xFF0C;&#x7EBF;&#x6027;&#x8BFB;&#x5199;&#xFF0C;&#x901F;&#x5EA6;&#x5FEB;&#xFF1A;&#x907F;&#x514D;&#x4E86;&#x6570;&#x636E;&#x5728;JVM&#x5185;&#x5B58;&#x548C;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x4E4B;&#x95F4;&#x7684;&#x590D;&#x5236;&#xFF0C;&#x51CF;&#x5C11;&#x8017;&#x6027;&#x80FD;&#x7684;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF09;</p>
<p>2.&#x540C;&#x65F6;&#x652F;&#x6301;&#x5B9E;&#x65F6;&#x548C;&#x79BB;&#x7EBF;&#x4E24;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF08;&#x76F8;&#x4FE1;&#x5F88;&#x591A;&#x9879;&#x76EE;&#x90FD;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;Linkedin&#x7684;&#x5B98;&#x65B9;&#x67B6;&#x6784;&#xFF0C;&#x6211;&#x4EEC;&#xFFFD;&#xFFFD;&#xFFFD;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x901A;&#x8FC7;storm&#x505A;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x5904;&#x7406;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x5230;hadoop&#x505A;&#x79BB;&#x7EBF;&#x5206;&#x6790;&#xFF09;&#x3002;</p>
<p>3.open source (open source &#x8C01;&#x4E0D;&#x559C;&#x6B22;&#x5462;)</p>
<p>4.&#x6E90;&#x7801;&#x7531;scala&#x7F16;&#x5199;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;JVM&#x4E0A;&#xFF08;&#x7B14;&#x8005;&#x5BF9;scala&#x5F88;&#x6709;&#x597D;&#x611F;&#xFF0C;&#x51FD;&#x6570;&#x5F0F;&#x8BED;&#x8A00;&#x4E00;&#x76F4;&#x90FD;&#x633A;&#x5E05;&#x7684;&#xFF0C;spark&#x4E5F;&#x662F;&#x7531;scala&#x5199;&#x7684;&#xFF0C;&#x770B;&#x6765;&#x4EE5;&#x540E;&#x6709;&#x7A7A;&#x5F97;&#x5237;&#x5237;scala&#xFF09;</p>
<h4 id="&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;">&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;</h4><p>&#x7B14;&#x8005;&#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x505A;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x7CFB;&#x7EDF;&#xFF0C;&#x5176;&#x5B9E;Linkedin&#x4E5F;&#x662F;&#x8FD9;&#x4E48;&#x7528;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;kafka&#x5BF9;&#x53EF;&#x9760;&#x6027;&#x8981;&#x6C42;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x9AD8;&#xFF0C;&#x9664;&#x4E86;&#x65E5;&#x5FD7;&#xFF0C;&#x7F51;&#x7AD9;&#x7684;&#x4E00;&#x4E9B;&#x6D4F;&#x89C8;&#x6570;&#x636E;&#x5E94;&#x8BE5;&#x4E5F;&#x9002;&#x7528;&#x3002;&#xFF08;&#x53EA;&#x8981;&#x539F;&#x59CB;&#x6570;&#x636E;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x5B58;DB&#x7684;&#x90FD;&#x53EF;&#x4EE5;&#xFF09;</p>
<p>&#x4E0B;&#x9762;&#x5C31;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;kafka&#x96C6;&#x7FA4;&#x7684;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p>&#x51C6;&#x5907;&#x73AF;&#x5883;&#xFF1A;&#x81F3;&#x5C11;3&#x53F0;&#x7684;linux server&#xFF08;&#x7B14;&#x8005;&#x662F;&#x51C6;&#x5907;&#x4E86;5&#x53F0;redhat&#x7248;&#x672C;&#x7684;cloud server&#xFF09;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;:&#x5B89;&#x88C5;JDK/JRE </p>
<p>&#x7B2C;&#x4E8C;&#x6B65;:&#x5B89;&#x88C5;Zookeeper&#xFF08;kafka&#x81EA;&#x5E26;&#x6709;zookeeper&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x662F;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#x6700;&#x597D;&#x5355;&#x72EC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;zookeeper&#x96C6;&#x7FA4;&#xFF0C;&#x53EF;&#x4EE5;&#x548C;&#x5176;&#x4ED6;&#x5E94;&#x7528;&#x5171;&#x4EAB;&#xFF0C;&#x4E5F;&#x4FBF;&#x4E8E;&#x7BA1;&#x7406;&#xFF09; </p>
<p>zookeeper&#x7684;&#x5B89;&#x88C5;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x7684;&#x53E6;&#x4E00;&#x7BC7;&#x535A;&#x6587;&#xFF1A; <a href="http://bigcat2013.iteye.com/blog/2175538" target="_blank" rel="external">http://bigcat2013.iteye.com/blog/2175538</a></p>
<p>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x4E0B;&#x8F7D;kafka &#xFF1A; <a href="http://kafka.apache.org/downloads.html" target="_blank" rel="external">http://kafka.apache.org/downloads.html</a> &#xFF08;&#x6700;&#x597D;&#x4E0B;&#x8F7D;scala&#x9884;&#x7F16;&#x8BD1;&#x597D;&#x7684;package&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4E0B;&#x7684;&#x662F;kafka_2.10-0.8.1.1.tgz&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x7528;scala 2.10&#x9884;&#x7F16;&#x8BD1;&#x597D;&#x7684;0.8.1.1&#x7248;&#x672C;&#xFF09; </p>
<p>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x4E0A;&#x4F20;&#x5B89;&#x88C5;&#x5305;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;WinSCP&#x7B49;&#xFF09; </p>
<p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x4F7F;&#x7528; &quot; <strong>tar -xzvf &#xA0;kafka_2.10-0.8.1.1.tgz</strong> &quot;&#x6765; &#x89E3;&#x538B;&#x5B89;&#x88C5;&#x5305; &#xFF1A; </p>
<p>&#x89E3;&#x538B;&#x540E;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/03695c1.png" alt=""></p>
<p><strong>&#xA0;&#x7B2C;&#x516D;&#x6B65;</strong> &#xFF1A;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6; </p>
<p>&#x7B80;&#x7B54;&#x914D;&#x7F6E;&#x7684;&#x8BDD;&#x4FEE;&#x6539;/config/server.properties &#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
<p>&#x9700;&#x8981;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;&#x6709;&#xFF1A;broker.id(&#x6807;&#x793A;&#x5F53;&#x524D;server&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;id&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;)&#xFF0C;port&#xFF0C;host.name(&#x5F53;&#x524D;&#x7684;server host name)&#xFF0C;zookeeper.connect(&#x8FDE;&#x63A5;&#x7684;zookeeper&#x96C6;&#x7FA4;)&#xFF0C;log.dirs(log&#x7684;&#xFFFD;&#xFFFD;&#xFFFD;&#x50A8;&#x76EE;&#x5F55;&#xFF0C;&#x8BB0;&#x5F97;&#x5BF9;&#x5E94;&#x7684;&#x53BB;&#x5EFA;&#x7ACB;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;)&#x7B49;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x770B;&#x76F8;&#x5E94;&#x7684;&#x6CE8;&#x91CA;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/0369aa3.png" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150703/0369f85.png" alt=""></p>
<p>&#xA0;&#x7B2C;&#x4E03;&#x6B65;&#xFF1A;&#x901A;&#x8FC7;&#x201C;scp -r&#xA0;&#x201D;&#x628A;&#x914D;&#x7F6E;&#x597D;&#x7684;kafka&#x76EE;&#x5F55;copy&#x5230;&#x5176;&#x4ED6;&#x51E0;&#x53F0;server&#x4E0A;&#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150703/036a1f6.png" alt=""></p>
<p>&#x7B2C;&#x516B;&#x6B65;&#xFF1A;&#x4FEE;&#x6539;&#x6BCF;&#x53F0;server&#x5BF9;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4FEE;&#x6539;&#x5176;&#x4E2D;&#x7684;broker.id &#x548C; host.name &#x5C5E;&#x6027;&#xFF1A; </p>
<p>broker.id&#x4ECE;0&#x5F00;&#x59CB;&#x9012;&#x589E;&#xFF0C;&#x6BCF;&#x53F0;server&#x5FC5;&#x987B;&#x552F;&#x4E00;</p>
<p><img src="http://taojinke.github.io/img/20150703/036ae2b.png" alt=""></p>
<p>&#x7B2C;&#x4E5D;&#x6B65;&#xFF1A; &#x5148;&#x542F;&#x52A8;zookeeper&#x96C6;&#x7FA4;&#xFF0C;&#x518D;&#x542F;&#x52A8;kakfa&#x96C6;&#x7FA4; </p>
<p>kafka&#x542F;&#x52A8;&#x547D;&#x4EE4;&#xFF1A; sudo nohup ./bin/kafka-server-start.sh config/server.properties &amp;</p>
<p>&#x7B2C;&#x5341;&#x6B65;&#xFF1A;&#x96C6;&#x7FA4;&#x542F;&#x52A8;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x8BD5;&#x7740;&#x521B;&#x5EFA;topic&#xFF0C;&#x5728;&#x4E00;&#x53F0;server&#x4E0A;&#x521B;&#x5EFA;producer&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x521B;&#x5EFA;consumer&#xFF0C;&#x4ECE;producer&#x4E0A;&#x53D1;&#x9001;&#x4FE1;&#x606F;&#xFF0C;&#x770B;consumer&#x662F;&#x5426;&#x80FD;&#x63A5;&#x6536;&#x5230;&#xFF0C;&#x4EE5;&#x9A8C;&#x8BC1;&#x96C6;&#x7FA4;&#x5BF9;&#x5426;&#x6210;&#x529F;&#x3002; </p>
<p>&#xA0;&#x521B;&#x5EFA;topic&#xFF1A;&#xA0; sudo ./bin/kafka-topics.sh -zookeeper server1:2181,server2:2181,server3:2181 -topic test -replication-factor 2 -partitions 5 -create </p>
<p>&#xA0;&#x67E5;&#x770B;topic&#xFF1A;sudo ./bin/kafka-topics.sh -zookeeper server1:2181,server2:2181,server3:2181 -list </p>
<p>&#xA0;&#x521B;&#x5EFA;producer&#xFF1A;sudo ./bin/kafka-console-producer.sh -broker-list kafkaServer1:9092,kafkaServer2:9092,kafkaServer3:9092 -topic test </p>
<p>&#xA0;&#x521B;&#x5EFA;consumer&#xFF1A;sudo ./bin/kafka-console-consumer.sh -zookeeper&#xA0;server1:2181,server2:2181,server3:2181 - from-begining -topic test </p>
<p>&#x901A;&#x8FC7;&#x5728;&#x521B;&#x5EFA;&#x597D;&#x7684;producer&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x5165;&#x4FE1;&#x606F;&#xFF0C;&#x5728;consumer&#x7684;&#x63A7;&#x5236;&#x53F0;&#x68C0;&#x6D4B;&#x8F93;&#x51FA;&#x6765;&#x6D4B;&#x8BD5;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x63A5;&#x53D7;&#x5230;&#x4FE1;&#x606F;&#x5C31;&#x8BF4;&#x660E;&#x7B80;&#x5355;&#x7684;kakfa &#x96C6;&#x7FA4;&#x642D;&#x597D;&#x4E86;&#xFF0C;&#x53E6;&#x5916;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9879;&#x76EE;&#x7684;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x8FDB;&#x4E00;&#x6B65;&#x505A;&#x914D;&#x7F6E;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Kafka/">Kafka</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/032686b/" title="python使用etcd来实现配置共享及集群服务发现 【上】 -" itemprop="url">python使用etcd来实现配置共享及集群服务发现 【上】 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x8FD9;&#x4E24;&#x5929;&#x62BD;&#x4E86;&#x70B9;&#x65F6;&#x95F4;&#x7814;&#x7A76;&#x4E86;&#x4E0B;&#x73B0;&#x5728;&#x6BD4;&#x8F83;&#x706B;&#x8FA3;&#x7684;etcd&#xFF0C;&#x7F51;&#x4E0A;&#x5F88;&#x591A;&#x7684;&#x6587;&#x7AE0;&#x90FD;&#x662F;&#x5199;etcd&#x548C;docker&#x7684;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x3002; &#xA0;&#x4E0D;&#x8BF4;docker&#xFF0C;&#x54B1;&#x4EEC;&#x5355;&#x72EC;&#x5C31;etcd&#x8FD9;&#x4E2A;&#x9AD8;&#x53EF;&#x7528;&#x952E;&#x503C;&#x6765;&#x804A;&#x804A;&#x5427;&#x3002;&#xA0;</p>
<p>etcd&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x53EF;&#x7528;&#x7684;&#x952E;&#x503C;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5171;&#x4EAB;&#x914D;&#x7F6E;&#x548C;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;etcd&#x662F;&#x7531;CoreOS&#x5F00;&#x53D1;&#x5E76;&#x7EF4;&#x62A4;&#x7684;&#xFF0C;&#x7075;&#x611F;&#x6765;&#x81EA;&#x4E8E; ZooKeeper &#x548C; Doozer&#xFF0C;&#x5B83;&#x4F7F;&#x7528;Go&#x8BED;&#x8A00;&#x7F16;&#x5199;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;Raft&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x65E5;&#x5FD7;&#x590D;&#x5236;&#x4EE5;&#x4FDD;&#x8BC1;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x3002;Raft&#x662F;&#x4E00;&#x4E2A;&#x6765;&#x81EA;Stanford&#x7684;&#x65B0;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x65E5;&#x5FD7;&#x590D;&#x5236;&#xFF0C;Raft&#x901A;&#x8FC7;&#x9009;&#x4E3E;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5728;Raft&#x4E2D;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x80FD;&#x6210;&#x4E3A;Leader&#x3002;</p>
<p>Google&#x7684;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;Kubernetes&#x3001;&#x5F00;&#x6E90;PaaS&#x5E73;&#x53F0;Cloud Foundry&#x548C;CoreOS&#x7684;Fleet&#x90FD;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x4E86;etcd&#x3002;</p>
<p> &#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5982;&#x4F55;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x4E00;&#x76F4;&#x662F;&#x4E00;&#x4E2A;&#x96BE;&#x9898;&#xFF0C;etcd&#x50CF;&#x662F;&#x4E13;&#x95E8;&#x4E3A;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x7684;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x548C;&#x6CE8;&#x518C;&#x800C;&#x8BBE;&#x8BA1;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x6570;&#x636E;TTL&#x5931;&#x6548;&#x3001;&#x6570;&#x636E;&#x6539;&#x53D8;&#x76D1;&#x89C6;&#x3001;&#x591A;&#x503C;&#x3001;&#x76EE;&#x5F55;&#x76D1;&#x542C;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x8DDF;&#x8E2A;&#x5E76;&#x7BA1;&#x7406;&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#x3002;etcd&#x76EE;&#x524D;&#x7684;&#x7248;&#x672C;&#x662F;0.4.5&#xFF0C;&#x867D;&#x7136;&#x672A;&#x53D1;&#x5E03;1.0&#x7248;&#x672C;&#xFF08;&#x4ECA;&#x5E74;&#x4F1A;&#x53D1;&#x5E03;&#xFF09;&#xFF0C;&#x4F46;&#x5176;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;&#x5728;&#x591A;&#x4E2A;&#x751F;&#x4EA7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x53EF;&#x89C1;&#x5176;&#x706B;&#x70ED;&#x7A0B;&#x5EA6;&#x3002;etcd&#x7684;&#x7279;&#x6027;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x7B80;&#x5355;: curl&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x7684;API&#xFF08;HTTP+JSON&#xFF09;</p>
<p>&#x5B89;&#x5168;: &#x53EF;&#x9009;&#x7684;SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;</p>
<p>&#x5FEB;&#x901F;: &#x5355;&#x5B9E;&#x4F8B;&#x6BCF;&#x79D2; 1000 &#x6B21;&#x5199;&#x64CD;&#x4F5C;</p>
<p>&#x53EF;&#x9760;: &#x4F7F;&#x7528;Raft&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x6027;</p>
<p>&#x76EE;&#x524D;&#x6709;&#x5F88;&#x591A;&#x652F;&#x6301;etcd&#x7684;&#x5E93;&#x548C;&#x5DE5;&#x5177;&#xFF0C;&#x6BD4;&#x5982;&#x547D;&#x4EE4;&#x884C;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;etcdctl&#x3001;Go&#x5BA2;&#x6237;&#x7AEF;go-etcd&#x3001;Java&#x5BA2;&#x6237;&#x7AEF;jetcd&#x3002;</p>
<p>&#x90A3;&#x4E48;zookeeper&#x548C;etcd&#x7684;&#x533A;&#x522B;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x9762; &#xFF1F;&#xA0;</p>
<p>&#x5728;&#x539F;&#x751F;&#x63A5;&#x53E3;&#x548C;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x65B9;&#x5F0F;&#x65B9;&#x9762;&#xFF0C;etcd&#x66F4;&#x9002;&#x5408;&#x4F5C;&#x4E3A;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x5927;&#x91CF;&#x6570;&#x636E;&#x3002;&#x65B9;&#x4FBF;&#x7684;REST&#x63A5;&#x53E3;&#x4E5F;&#x53EF;&#x4EE5;&#x8BA9;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x5728;&#x4F7F;&#x7528;Key/Value&#x670D;&#x52A1;&#x65F6;&#x83B7;&#x53D6;&#x65B9;&#x4FBF;&#x3002;ZooKeeper&#x5219;&#x66F4;&#x52A0;&#x7684;&#x9002;&#x5408;&#x4E8E;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03;&#x670D;&#x52A1;&#xFF0C;&#x4ED6;&#x5728;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6A21;&#x578B;&#x65B9;&#x9762;&#x8F83;etcd&#x8981;&#x7B80;&#x5355;&#x7684;&#x591A;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E2D;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x6765;&#x9009;&#x62E9;&#x76F8;&#x5E94;&#x7684;&#x670D;&#x52A1;&#x3002; </p>
<p> <a href="http://xiaorui.cc" target="_blank" rel="external">xiaorui.cc</a></p>
<p><a href="http://xiaorui.cc/" target="_blank" rel="external">xiaorui.cc</a></p>
<p><a href="http://xiaorui.cc/" target="_blank" rel="external">xiaorui.cc</a></p>
<p><a href="http://xiaorui.cc/" target="_blank" rel="external">xiaorui.cc</a></p>
<p> <img src="http://taojinke.github.io/img/20150703/0325272.jpg" alt=""></p>
<p>&#x6211;&#x8FD9;&#x91CC;&#x7167;&#x7740;&#x5B98;&#x7F51;&#x7684;&#x4F8B;&#x5B50;&#x63CD;&#x4E00;&#x904D;&#xFF0C; &#x600E;&#x4E48;&#x7528;&#x90FD;&#x611F;&#x89C9;&#x5728;&#x7528;zookeeper&#x7684;kazoo&#x4F3C;&#x7684;&#x3002;&#xA0;</p>
<p>Python</p>
<pre><code><span class="type">In</span> [<span class="number">1</span>]: <span class="keyword">import</span> etcd

<span class="type">In</span> [<span class="number">2</span>]: client = etcd.<span class="type">Client</span>(host=&amp;apos;<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>&amp;apos;, port=<span class="number">4001</span>)

<span class="type">In</span> [<span class="number">3</span>]: client.write(&amp;apos;/nodes/n1&amp;apos;, <span class="number">1</span>)
<span class="type">Out</span>[<span class="number">3</span>]: &amp;lt;class &amp;apos;etcd.<span class="type">EtcdResult</span>&amp;apos;&amp;gt;({&amp;apos;newKey&amp;apos;: <span class="type">False</span>, &amp;apos;_prev_node&amp;apos;: &amp;lt;class &amp;apos;etcd.<span class="type">EtcdResult</span>&amp;apos;&amp;gt;({&amp;apos;newKey&amp;apos;: <span class="type">False</span>, &amp;apos;_children&amp;apos;: [], &amp;apos;createdIndex&amp;apos;: <span class="number">3</span>, &amp;apos;modifiedIndex&amp;apos;: <span class="number">3</span>, &amp;apos;value&amp;apos;: u&amp;apos;<span class="number">1</span>&amp;apos;, &amp;apos;expiration&amp;apos;: <span class="type">None</span>, &amp;apos;key&amp;apos;: u&amp;apos;/nodes/n1&amp;apos;, &amp;apos;ttl&amp;apos;: <span class="type">None</span>, &amp;apos;action&amp;apos;: <span class="type">None</span>, &amp;apos;dir&amp;apos;: <span class="type">False</span>}), &amp;apos;raft_index&amp;apos;: <span class="number">168</span>, &amp;apos;_children&amp;apos;: [], &amp;apos;createdIndex&amp;apos;: <span class="number">4</span>, &amp;apos;modifiedIndex&amp;apos;: <span class="number">4</span>, &amp;apos;value&amp;apos;: u&amp;apos;<span class="number">1</span>&amp;apos;, &amp;apos;etcd_index&amp;apos;: <span class="number">4</span>, &amp;apos;expiration&amp;apos;: <span class="type">None</span>, &amp;apos;key&amp;apos;: u&amp;apos;/nodes/n1&amp;apos;, &amp;apos;ttl&amp;apos;: <span class="type">None</span>, &amp;apos;action&amp;apos;: u&amp;apos;<span class="type">set</span>&amp;apos;, &amp;apos;dir&amp;apos;: <span class="type">False</span>})

<span class="type">In</span> [<span class="number">4</span>]: <span class="literal">result</span> = client.read(&amp;apos;/nodes/n1&amp;apos;)

<span class="type">In</span> [<span class="number">5</span>]: <span class="literal">result</span>.
<span class="literal">result</span>.action         <span class="literal">result</span>.createdIndex   <span class="literal">result</span>.etcd_index     <span class="literal">result</span>.get_subtree    <span class="literal">result</span>.leaves         <span class="literal">result</span>.newKey         <span class="literal">result</span>.raft_index     <span class="literal">result</span>.value
<span class="literal">result</span>.children       <span class="literal">result</span>.dir            <span class="literal">result</span>.expiration     <span class="literal">result</span>.key            <span class="literal">result</span>.modifiedIndex  <span class="literal">result</span>.parse_headers  <span class="literal">result</span>.ttl

<span class="type">In</span> [<span class="number">5</span>]: <span class="literal">result</span>.value
<span class="type">Out</span>[<span class="number">5</span>]: u&amp;apos;<span class="number">1</span>&amp;apos;
</code></pre><p>&#x65E2;&#x7136;&#x6211;&#x4EEC;&#x8BF4;etcd &#x548C; ZooKeeper&#x5F88;&#x50CF;&#xFF0C;&#x90A3;&#x4E5F;&#x662F;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x505A;&#x6210;&#x5168;&#x5C40;&#x7F51;&#x7EDC;&#x9501;&#x7684;&#x3002; </p>
<p>Python</p>
<pre><code>client = etcd.Client()
<span class="operator"><span class="keyword">lock</span> = client.<span class="keyword">get_lock</span>(&amp;apos;</span>/customer1&amp;apos;, ttl=60)

# <span class="operator"><span class="keyword">Use</span> the <span class="keyword">lock</span> object:
<span class="keyword">lock</span>.acquire()
<span class="keyword">lock</span>.is_locked()  # <span class="literal">True</span>
<span class="keyword">lock</span>.renew(<span class="number">60</span>)
<span class="keyword">lock</span>.<span class="keyword">release</span>()
<span class="keyword">lock</span>.is_locked()  # <span class="literal">False</span>

# The <span class="keyword">lock</span> object may also be used <span class="keyword">as</span> a context manager:
client = etcd.Client()
<span class="keyword">lock</span> = client.<span class="keyword">get_lock</span>(&amp;apos;</span>/customer1&amp;apos;, ttl=60)
with <span class="operator"><span class="keyword">lock</span> <span class="keyword">as</span> my_lock:
    do_stuff()
    <span class="keyword">lock</span>.is_locked()  # <span class="literal">True</span>
    <span class="keyword">lock</span>.renew(<span class="number">60</span>)
<span class="keyword">lock</span>.is_locked()  # <span class="literal">False</span></span>
</code></pre><p>&#x8FD9;&#x91CC;&#x518D;&#x628A;etcd&#x7684;python api&#x518D;&#x6765;&#x8BE6;&#x7EC6;&#x7684;&#x63CF;&#x8FF0;&#x4E0B;</p>
<p>&#x521B;&#x5EFA;etcd&#x7684;&#x8FDE;&#x63A5;&#x5BF9;&#x8C61; client = etcd.Client(host=&#x2019;127.0.0.1&#x2032;, port=4001) &#xA0;&#x5565;&#x7AEF;&#x53E3;&#xFF0C;&#x5565;&#x4E3B;&#x673A;&#xFF0C;&#x4F60;&#x81EA;&#x5DF1;&#x641E;&#x5B9A;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x65F6;&#xFF0C;allow_redirect=True &#xA0;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5F53;&#x65AD;&#x94FE;&#x7684;&#x65F6;&#x5019;&#xFF0C;etcd&#x4F1A;&#x518D;&#x6B21;&#x590D;&#x7528;connect&#x521B;&#x5EFA;&#x53EF;&#x7528;&#x7684;&#x8FDE;&#x63A5;</p>
<p>Python</p>
<pre><code>[root@slave1 etcd-v0.<span class="number">4.6</span>-linux-amd64]# ./etcd
[etcd] Jan <span class="number">23</span> <span class="number">14</span>:<span class="number">34</span>:<span class="number">00.703</span> WARNING   | <span class="keyword">Using</span> the directory slave1.etcd <span class="keyword">as</span> the etcd curation directory because a directory was <span class="keyword">not</span> specified.
[etcd] Jan <span class="number">23</span> <span class="number">14</span>:<span class="number">34</span>:<span class="number">00.703</span> INFO      | slave1 <span class="keyword">is</span> starting a <span class="keyword">new</span> cluster
[etcd] Jan <span class="number">23</span> <span class="number">14</span>:<span class="number">34</span>:<span class="number">00.707</span> INFO      | etcd server [name slave1, listen <span class="keyword">on</span> :<span class="number">4001</span>, advertised url http:<span class="comment">//127.0.0.1:4001]</span>
[etcd] Jan <span class="number">23</span> <span class="number">14</span>:<span class="number">34</span>:<span class="number">00.707</span> INFO      | peer server [name slave1, listen <span class="keyword">on</span> :<span class="number">7001</span>, advertised url http:<span class="comment">//127.0.0.1:7001]</span>


client = etcd.Client(
             host=&amp;apos;<span class="number">127.0</span>.<span class="number">0.1</span>&amp;apos;,
             port=<span class="number">4003</span>,
             allow_reconnect=<span class="keyword">True</span>,
             protocol=&amp;apos;https&amp;apos;,)
</code></pre><p>&#x4E0B;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x548C;zookeeper&#x5F88;&#x50CF;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x90A3;&#x79CD;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x4F53;&#x3002;</p>
<p>Python</p>
<pre><code>client.write(&amp;apos;/nodes/n1&amp;apos;, <span class="number">1</span>)
<span class="array"># with ttl </span>&amp;<span class="array">#x</span>8BBE;&amp;<span class="array">#x</span>7F6E;&amp;<span class="array">#x</span>51E0;&amp;<span class="array">#x</span>79D2;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>51E0;&amp;<span class="array">#x</span>79D2;&amp;<span class="array">#x</span>540E;&amp;<span class="array">#x</span>8FD9;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>5C31;&amp;<span class="array">#x</span>6CA1;&amp;<span class="array">#x</span>4E86;
client.write(&amp;apos;/nodes/n2&amp;apos;, <span class="number">2</span>, ttl=<span class="number">4</span>)  <span class="array"># sets the ttl to </span><span class="number">4</span> seconds
<span class="array"># create only</span>
client.write(&amp;apos;/nodes/n3&amp;apos;, &amp;apos;test&amp;apos;, prevExist=False)   prevExist &amp;<span class="array">#x</span>5982;&amp;<span class="array">#x</span>679C;&amp;<span class="array">#x</span>6570;&amp;<span class="array">#x</span>636E;&amp;<span class="array">#x</span>6709;&amp;<span class="array">#x</span>7684;&amp;<span class="array">#x</span>8BDD;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>5C31;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>518D;&amp;<span class="array">#x</span>63D2;&amp;<span class="array">#x</span>5165;&amp;<span class="array">#x</span>4E86;&amp;<span class="array">#x</span>3002; 

client.write(&amp;apos;/nodes/n3&amp;apos;, &amp;apos;test2&amp;apos;, prevValue=&amp;apos;test1&amp;apos;) &amp;<span class="array">#x</span>4FDD;&amp;<span class="array">#x</span>8BC1;value&amp;<span class="array">#x</span>4EE5;&amp;<span class="array">#x</span>524D;&amp;<span class="array">#x</span>662F;test1 

<span class="array"># mkdir</span>
client.write(&amp;apos;/nodes/queue&amp;apos;, dir=True)   &amp;<span class="array">#x</span>65B0;&amp;<span class="array">#x</span>7248;&amp;<span class="array">#x</span>672C;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>7528;&amp;<span class="array">#x</span>8FD9;&amp;<span class="array">#x</span>4E2A;&amp;<span class="array">#x</span>4E5F;&amp;<span class="array">#x</span>884C;&amp;<span class="array">#xFF</span>0C;&amp;<span class="array">#x</span>6700;&amp;<span class="array">#x</span>5C11;&amp;<span class="array">#x</span>6211;&amp;<span class="array">#x</span>4E0D;&amp;<span class="array">#x</span>7528;&amp;<span class="array">#x</span>6307;&amp;<span class="array">#x</span>660E;dir   &amp;<span class="array">#x</span>4E5F;&amp;<span class="array">#x</span>662F;&amp;<span class="array">#x</span>53EF;&amp;<span class="array">#x</span>4EE5;&amp;<span class="array">#x</span>521B;&amp;<span class="array">#x</span>5EFA;mkdir&amp;<span class="array">#x</span>7684;
<span class="array"># Append a value to a queue dir</span>
client.write(&amp;apos;/nodes/queue&amp;apos;, &amp;apos;test&amp;apos;, append=True) <span class="array">#will write i.e. </span>/nodes/queue/<span class="number">11</span>
client.write(&amp;apos;/nodes/queue&amp;apos;, &amp;apos;test2&amp;apos;, append=True) <span class="array">#will write i.e. </span>/nodes/queue/<span class="number">12</span>
</code></pre><p> &#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x4FEE;&#x6539;&#x4E5F;&#x53EF;&#x4EE5;&#x7528; update</p>
<p>Python</p>
<pre><code><span class="literal">result</span> = client.read(&amp;apos;/foo&amp;apos;)
print(<span class="literal">result</span>.value) <span class="comment"># bar</span>
<span class="literal">result</span>.value += u&amp;apos;bar&amp;apos;
updated = client.update(<span class="literal">result</span>)  
print(updated.value)
</code></pre><p>&#x7528;read()&#x65B9;&#x6CD5; &#x4ECE;etcd&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x6570;&#x636E;</p>
<p>Python</p>
<pre><code>client.<span class="built_in">read</span>(&amp;apos;/nodes/n2&amp;apos;).<span class="built_in">value</span>

<span class="comment">#recursive&amp;#x9012;&amp;#x5F52;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;  </span>
<span class="comment">#sorted &amp;#x6392;&amp;#x5E8F;</span>
r = client.<span class="built_in">read</span>(&amp;apos;/nodes&amp;apos;, recursive=True, sorted=True)
<span class="keyword">for</span> child <span class="operator">in</span> r.children:
    print(&amp;quot;%s: %s&amp;quot; % (child.key,child.<span class="built_in">value</span>))

<span class="comment">#&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;zookeeper&amp;#x7684;watch&amp;#x76D1;&amp;#x542C;</span>
client.<span class="built_in">read</span>(&amp;apos;/nodes/n2&amp;apos;, <span class="built_in">wait</span>=True) <span class="comment">#Waits for a change in value in the key before returning.</span>
client.<span class="built_in">read</span>(&amp;apos;/nodes/n2&amp;apos;, <span class="built_in">wait</span>=True, waitIndex=<span class="number">10</span>)
</code></pre><p>&#x8FC7;&#x4E24;&#x5929;&#x518D;&#x5199;&#x4E00;&#x7BC7;&#xFF0C;&#x5173;&#x4E8E;etcd &#x548C; docker&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x5E94;&#x7528;&#x65B9;&#x6848;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Nosql/">Nosql</a><a href="/tags/Python/">Python</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/030e43c/" title="架构师之dubbo-------dubbo+spring+zookeeper整合之最小系统 -" itemprop="url">架构师之dubbo-------dubbo+spring+zookeeper整合之最小系统 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> 1.&#x524D;&#x8A00;. </p>
<p>&#x5982;&#x9898;,&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x5176;&#x5B9E;&#x81EA;&#x5DF1;&#x4E5F;&#x53EF;&#x4EE5;&#x5199;.&#x81EA;&#x5DF1;&#x4E5F;&#x53EF;&#x4EE5;&#x5C01;&#x88C5;netty.</p>
<p>2.&#x6574;&#x5408;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;. </p>
<p>(1)&#x6240;&#x6709;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x5728;csdn&#x4E86;,&#x770B;&#x5B98;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x4E0B;&#x8F7D;.&#x5730;&#x5740;&#x4E3A;:</p>
<p><a href="http://download.csdn.net/detail/gushenwuzhao57/8426251" target="_blank" rel="external">http://download.csdn.net/detail/gushenwuzhao57/8426251</a></p>
<p>3.&#x6574;&#x5408;&#x6B65;&#x9AA4;. </p>
<p>1.dubbo+spring+zookeer&#x5728;windows&#x5B8C;&#x5168;&#x80FD;&#x7528;.</p>
<p>(1)&#x4E0B;&#x8F7D;zookeeper3.4.6.&#x76F4;&#x63A5;&#x89E3;&#x538B;,&#x5C06;zoo-sample.cfg&#x4FEE;&#x6539;&#x540D;&#x5B57;&#x4E3A;conf/zoo.cfg,&#x5E76;&#x4FEE;&#x6539;&#x91CC;&#x9762;&#x7684;&#x4E00;&#x53E5;&#x8BDD;—&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;,&#x5982;&#x6211;&#x8FD9;&#x91CC;&#x662F;:</p>
<p>dataDir=E:/zookeeper-3.4.6/data/tmp/zookeeper</p>
<p>(2)bin/zkServer.cmd&#x542F;&#x52A8;zookeeper.</p>
<p>(3)&#x76F4;&#x63A5;&#x8FD0;&#x884C;dubboC2&#x91CC;&#x9762;&#x7684;zkServer.cmd&#x7684;main&#x65B9;&#x6CD5;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7C7B;.&#x6253;&#x5370;&#x51FA;:Press any key to exit.&#x4E3A;&#x6210;&#x529F;.</p>
<p>(4)&#x76F4;&#x63A5;&#x8FD0;&#x884C;dubboC2&#x91CC;&#x9762;&#x7684;zkServer.cmd&#x7684;main&#x65B9;&#x6CD5;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7C7B;.&#x6253;&#x5370;&#x51FA;:&#x6253;&#x5370;&#x7ED3;&#x679C; ,&#x540C;&#x65F6;C2&#x90A3;&#x8FB9;&#x6253;&#x5370;&#x51FA;&quot;&#x6211;&#x6253;&#x5370;&quot;&#x4E3A;&#x6210;&#x529F;.</p>
<p>4.&#x6CE8;&#x610F;&#x4E8B;&#x9879;. </p>
<p>&#x542F;&#x52A8;dubboC2&#x7684;&#x670D;&#x52A1;&#x540E;,zookeeper&#x62A5;&#x9519;:</p>
<p>Error Path:/dubbo/com.jinbin.service.customer.CustomerService Error:KeeperErrorCode = NodeExists for /dubbo/com.jinbin.service.customer.CustomerService</p>
<p>&#x8FD9;&#x4E0D;&#x662F;&#x9519;&#x8BEF;,&#x8FD9;&#x4E2A;&#x662F;&#x6210;&#x529F;&#x7684;&#x610F;&#x601D;..&#x5BF9;&#x4E8E;zookeeper&#x8FD9;&#x79CD;&#x884C;&#x4E3A;,&#x6211;&#x53EA;&#x60F3;&#x8BF4;:&#x6CA1;&#x6709;&#x6700;&#x5751;,&#x53EA;&#x6709;&#x66F4;&#x5751;!</p>
<p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x601D;&#x8DEF;&#x6765;&#x81EA;:<a href="http://www.tuicool.com/articles/QjaArm&#x8FD9;&#x4F4D;&#x5927;&#x725B;&#x7684;&#x539F;&#x521B;!!" target="_blank" rel="external">http://www.tuicool.com/articles/QjaArm&#x8FD9;&#x4F4D;&#x5927;&#x725B;&#x7684;&#x539F;&#x521B;!!</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Dubbo/">Dubbo</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/032c04f/" title="ZooKeeper API简单调用 -" itemprop="url">ZooKeeper API简单调用 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <pre><code>package zk.test;

import org.apache.zookeeper.<span class="class">CreateMode</span>;
import org.apache.zookeeper.<span class="class">WatchedEvent</span>;
import org.apache.zookeeper.<span class="class">Watcher</span>;
import org.apache.zookeeper.<span class="class">ZooDefs</span>.<span class="class">Ids</span>;
import org.apache.zookeeper.<span class="class">ZooKeeper</span>;

public class <span class="class">ZkTest</span> {
    private static final int <span class="class">SESSION_TIMEOUT</span> = <span class="number">30000</span>;  

    public static void main(<span class="class">String</span>[] args) throws <span class="class">Exception</span>{
        <span class="class">ZooKeeper</span> zk = new <span class="class">ZooKeeper</span>(&amp;quot;<span class="method">localhost:</span><span class="number">2181</span>&amp;quot;, 
                <span class="class">SESSION_TIMEOUT</span>, new <span class="class">Watcher</span>() { 
                    // &amp;<span class="symbol">#x76D1</span>;&amp;<span class="symbol">#x63A7</span>;&amp;<span class="symbol">#x6240</span>;&amp;<span class="symbol">#x6709</span>;&amp;<span class="symbol">#x88AB</span>;&amp;<span class="symbol">#x89E6</span>;&amp;<span class="symbol">#x53D1</span>;&amp;<span class="symbol">#x7684</span>;&amp;<span class="symbol">#x4E8B</span>;&amp;<span class="symbol">#x4EF6</span>;
                    @<span class="class">Override</span>
                    public void process(<span class="class">WatchedEvent</span> event) { 
                        <span class="class">System</span>.out.println(&amp;quot;&amp;<span class="symbol">#x5DF2</span>;&amp;<span class="symbol">#x7ECF</span>;&amp;<span class="symbol">#x89E6</span>;&amp;<span class="symbol">#x53D1</span>;&amp;<span class="symbol">#x4E86</span>;&amp;quot; + event.getType() + &amp;quot;&amp;<span class="symbol">#x4E8B</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#xFF01</span>;&amp;quot;); 
                    } 
                }); 

        zk.create(&amp;quot;/testRootA&amp;quot;, &amp;quot;testRoot_data&amp;quot;.getBytes(), <span class="class">Ids</span>.<span class="class">OPEN_ACL_UNSAFE</span>, <span class="class">CreateMode</span>.<span class="class">PERSISTENT</span>);
        //&amp;<span class="symbol">#x521B</span>;&amp;<span class="symbol">#x5EFA</span>;&amp;<span class="symbol">#x5B50</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x70B9</span>;<span class="number">1</span>
        zk.create(&amp;quot;/testRootA/testChild_1&amp;quot;, &amp;quot;testChild_data&amp;quot;.getBytes(), <span class="class">Ids</span>.<span class="class">OPEN_ACL_UNSAFE</span>, <span class="class">CreateMode</span>.<span class="class">PERSISTENT</span>);


        <span class="class">System</span>.out.println(new <span class="class">String</span>(zk.getData(&amp;quot;/testRootA&amp;quot;, <span class="keyword">false</span>, null)));
        <span class="class">System</span>.out.println((zk.getChildren(&amp;quot;/testRootA/testChild_1&amp;quot;, <span class="keyword">true</span>)));

        //&amp;<span class="symbol">#x4FEE</span>;&amp;<span class="symbol">#x6539</span>;
        zk.setData(&amp;quot;/testRootA/testChild_1&amp;quot;, &amp;quot;modifyTestChildOne&amp;quot;.getBytes(), -<span class="number">1</span>);
        <span class="class">System</span>.out.println(&amp;quot;&amp;<span class="symbol">#x76EE</span>;&amp;<span class="symbol">#x5F55</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x70B9</span>;&amp;<span class="symbol">#x72B6</span>;&amp;<span class="symbol">#x6001</span>;:&amp;quot; + zk.exists(&amp;quot;/testRootA&amp;quot;, <span class="keyword">true</span>));

        //&amp;<span class="symbol">#x521B</span>;&amp;<span class="symbol">#x5EFA</span>;&amp;<span class="symbol">#x5B50</span>;&amp;<span class="symbol">#x8282</span>;&amp;<span class="symbol">#x70B9</span>;<span class="number">2</span>
        zk.create(&amp;quot;/testRootA/testChild_2&amp;quot;, &amp;quot;testChild_2_data&amp;quot;.getBytes(), <span class="class">Ids</span>.<span class="class">OPEN_ACL_UNSAFE</span>, <span class="class">CreateMode</span>.<span class="class">PERSISTENT</span>);
        <span class="class">System</span>.out.println((zk.getChildren(&amp;quot;/testRootA/testChild_2&amp;quot;, <span class="keyword">true</span>)));

        //&amp;<span class="symbol">#x5220</span>;&amp;<span class="symbol">#x9664</span>;&amp;<span class="symbol">#x7ED3</span>;&amp;<span class="symbol">#x70B9</span>;
        zk.delete(&amp;quot;/testRootA/testChild_1&amp;quot;, -<span class="number">1</span>);
        zk.delete(&amp;quot;/testRootA/testChild_2&amp;quot;, -<span class="number">1</span>);

        zk.delete(&amp;quot;/testRootA&amp;quot;, -<span class="number">1</span>);

        zk.close();

    }
}
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/0331aa4/" title="HBase和Zookeeper的安装和部署 -" itemprop="url">HBase和Zookeeper的安装和部署 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="1-&#x6982;&#x8981;">1.&#x6982;&#x8981;</h2><h3 id="1-1HBase&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;">1.1HBase&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;</h3><p>&#xF06C; &#x5927;&#x6570;&#x636E;&#x91CF; &#xFF08;100s TB&#x7EA7;&#x6570;&#x636E;&#xFF09; &#x4E14;&#x6709;&#x5FEB;&#x901F;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x7684;&#x9700;&#x6C42;&#x3002;</p>
<p>&#xF06C; &#x4F8B;&#x5982;&#x6DD8;&#x5B9D;&#x7684;&#x4EA4;&#x6613;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x3002;&#x6570;&#x636E;&#x91CF;&#x5DE8;&#x5927;&#x65E0;&#x5BB9;&#x7F6E;&#x7591;&#xFF0C;&#x9762;&#x5411;&#x666E;&#x901A;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x5FC5;&#x7136;&#x8981;&#x5373;&#x65F6;&#x54CD;&#x5E94;&#x3002;</p>
<p>&#xF06C; &#x5BB9;&#x91CF;&#x7684;&#x4F18;&#x96C5;&#x6269;&#x5C55;&#x3002;</p>
<p>&#xF06C; &#x5927;&#x6570;&#x636E;&#x7684;&#x9A71;&#x4F7F;&#xFF0C;&#x52A8;&#x6001;&#x6269;&#x5C55;&#x7CFB;&#x7EDF;&#x5BB9;&#x91CF;&#x7684;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x4F8B;&#x5982;&#xFF1A;webPage DB&#x3002;</p>
<p>&#xF06C; &#x4E1A;&#x52A1;&#x573A;&#x666F;&#x7B80;&#x5355;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5F88;&#x591A;&#x7279;&#x6027;&#xFF08;&#x4F8B;&#x5982;&#x4EA4;&#x53C9;&#x5217;&#x3001;&#x4EA4;&#x53C9;&#x8868;&#xFF0C;&#x4E8B;&#x52A1;&#xFF0C;&#x8FDE;&#x63A5;&#x7B49;&#x7B49;&#xFF09;&#x3002;</p>
<p>&#xF06C; &#x4F18;&#x5316;&#x65B9;&#x9762;&#xFF1A;&#x5408;&#x7406;&#x8BBE;&#x8BA1;rowkey&#x3002;&#x56E0;&#x4E3A;hbase&#x7684;&#x67E5;&#x8BE2;&#x7528;rowkey&#x662F;&#x6700;&#x9AD8;&#x6548;&#x7684;&#xFF0C;&#x4E5F;&#x51E0;&#x4E4E;&#x7684;&#x552F;&#x4E00;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x53EF;&#x884C;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x6240;&#x4EE5;&#x628A;&#x4F60;&#x7684;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x8F6C;&#x6362;&#x4E3A;&#x67E5;&#x8BE2;rowkey&#x7684;&#x8BF7;&#x6C42;&#x5427;&#x3002;</p>
<h3 id="1-2&#x8F6F;&#x4EF6;&#x51C6;&#x5907;">1.2&#x8F6F;&#x4EF6;&#x51C6;&#x5907;</h3><p>hbase-0.98.8 &#x3010; <a href="http://mirrors.hust.edu.cn/apache/hbase/hbase-0.98.9/hbase-0.98.9-hadoop2-bin.tar.gz" target="_blank" rel="external">&#x4E0B;&#x8F7D;&#x5730;&#x5740;</a> &#x3011; </p>
<p>zookeeper-3.4.6 &#x3010; <a href="http://mirrors.hust.edu.cn/apache/zookeeper/stable/zookeeper-3.4.6.tar.gz" target="_blank" rel="external">&#x4E0B;&#x8F7D;&#x5730;&#x5740;</a> &#x3011; </p>
<h2 id="2-&#x914D;&#x7F6E;">2.&#x914D;&#x7F6E;</h2><pre><code>sudo vi /etc/profile
HBASE_HOME=/home/[<span class="link_label">Hadoop</span>][<span class="link_reference">2</span>]/source/hbase-0.98.8
ZK_HOME=/home/hadoop/source/zookeeper-3.4.6
PATH=$HBASE<span class="emphasis">_HOME/bin:$ZK_</span>HOME/bin
export HBASE<span class="emphasis">_HOME ZK_</span>HOME
</code></pre><p>hbase-env.sh</p>
<pre><code><span class="keyword">export</span> JAVA_HOME=<span class="regexp">/usr/</span>jdk1.7
</code></pre><p>&#x542F;&#x52A8;shell&#xFF1A;</p>
<pre><code>hbase <span class="built_in">shell</span>
</code></pre><p>&#x542F;&#x52A8;hbase&#xFF1A;</p>
<pre><code><span class="tag">start-hbase</span><span class="class">.sh</span>
</code></pre><h2 id="3-ZK">3.ZK</h2><h3 id="3-1&#x6982;&#x8981;">3.1&#x6982;&#x8981;</h3><p>zk&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5728;zk&#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x4E8B;&#x52A1;&#x6027;&#x4E00;&#x81F4;&#xFF0C;&#x5982;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/033023a.png" alt=""></p>
<p>&#x5220;&#x9664;Server1&#x4E2D;&#x7684;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x5176;&#x4ED6;&#x96C6;&#x7FA4;&#x7684;Server&#x4F1A;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x5220;&#x9664;&#x4E4B;&#x540E;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h3 id="3-2&#x5B89;&#x88C5;">3.2&#x5B89;&#x88C5;</h3><ol>
<li>&#x96C6;&#x7FA4;&#x7684;&#x89C4;&#x6A21;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;3&#xFF0C;&#x5404;&#x4E2A;&#x96C6;&#x7FA4;&#x7684;&#x7CFB;&#x7EDF;&#x65F6;&#x95F4;&#x5FC5;&#x987B;&#x4E00;&#x81F4;&#x3002;</li>
<li>&#x5B89;&#x88C5;</li>
</ol>
<p>&#xFF08;1&#xFF09;&#x89E3;&#x538B;zk&#x7684;&#x538B;&#x7F29;&#x5305;&#x5230;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#xFF08;2&#xFF09;&#x4FEE;&#x6539;conf&#x6587;&#x4EF6;&#xFF0C;cp zoo_sample.cfg zoo.cfg</p>
<p>&#xFF08;3&#xFF09;&#x7F16;&#x8F91;zoo.cfg &#x4FEE;&#x6539;dataDir=/home/zk/data &#x65B0;&#x589E; server.0=hadoop0:2888:3888 server.1=hadoop1:2888:3888 server.2=hadoop2:2888:3888</p>
<p>&#xFF08;4&#xFF09;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5939; mkdir /home/zk/data &#x5728;data&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x521B;&#x5EFA;&#x6587;&#x4EF6;myid&#xFF0C;&#x503C;&#x4E3A;0</p>
<p>&#xFF08;5&#xFF09;&#x7528;scp&#x547D;&#x4EE4;&#x5206;&#x53D1;zk&#x6587;&#x4EF6;&#x5939;&#x5230;&#x96C6;&#x7FA4;</p>
<h3 id="3-3&#x542F;&#x52A8;/&#x9A8C;&#x8BC1;">3.3&#x542F;&#x52A8;/&#x9A8C;&#x8BC1;</h3><p>&#x542F;&#x52A8;zk&#x7684;&#x670D;&#x52A1;&#xFF1A;zkServer.sh start</p>
<p>&#x9A8C;&#x8BC1;zk&#x7684;&#x542F;&#x52A8;&#x72B6;&#x6001;&#xFF1A;zkServer.sh status</p>
<h2 id="4&#x5947;&#x6570;&#x9009;&#x4E3E;">4&#x5947;&#x6570;&#x9009;&#x4E3E;</h2><p>zookeeper&#x7684;&#x96C6;&#x7FA4;&#x6570;&#x63A8;&#x8350;&#x914D;&#x7F6E;&#x5947;&#x6570;&#xFF0C;Leader&#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x91C7;&#x7528;&#x4E86;Paxos&#x534F;&#x8BAE;&#xFF0C;&#x8BE5;&#x534F;&#x8BAE;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x5F53;&#x591A;&#x6570;Server&#x5199;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x5219;&#x4EFB;&#x52A1;&#x6570;&#x636E;&#x5199;&#x6210;&#x529F;&#xFF0C;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x6709;3&#x4E2A;Server&#xFF0C;&#x5219;&#x4E24;&#x4E2A;&#x5199;&#x6210;&#x529F;&#x5373;&#x53EF;&#xFF1B;</li>
<li>&#x6709;4&#x6216;5&#x4E2A;Server&#xFF0C;&#x5219;&#x4E09;&#x4E2A;&#x5199;&#x6210;&#x529F;&#x5373;&#x53EF;&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x6709;3&#x4E2A;Server&#xFF0C;&#x5219;&#x6700;&#x591A;&#x8FD0;&#x884C;1&#x4E2A;Server&#x6302;&#x6389;</li>
<li>&#x5982;&#x679C;&#x6709;4&#x4E2A;Server&#xFF0C;&#x5219;&#x540C;&#x6837;&#x6700;&#x591A;&#x8FD0;&#x884C;1&#x4E2A;Server&#x6302;&#x6389;</li>
</ul>
<p>&#x7531;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;3&#x53F0;&#x670D;&#x52A1;&#x5668;&#x548C;4&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5BB9;&#x707E;&#x80FD;&#x529B;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x8282;&#x7EA6;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#xFF0C;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x5947;&#x6570;&#x4E2A;&#x6570;&#xFF0C;&#x4F5C;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x4E2A;&#x6570;&#x3002;</p>
<p>Hadoop+ZooKeeper+HBase&#x96C6;&#x7FA4;&#x914D;&#x7F6E; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2013-06/86347.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-06/86347.htm</a></p>
<p>Hadoop&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&amp;HBase&#x5B9E;&#x9A8C;&#x73AF;&#x5883;&#x642D;&#x5EFA; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2013-04/83560.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-04/83560.htm</a></p>
<p>&#x57FA;&#x4E8E;Hadoop&#x96C6;&#x7FA4;&#x7684;HBase&#x96C6;&#x7FA4;&#x7684;&#x914D;&#x7F6E; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2013-03/80815.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-03/80815.htm</a> &#x2018; </p>
<p>Hadoop&#x5B89;&#x88C5;&#x90E8;&#x7F72;&#x7B14;&#x8BB0;&#x4E4B;-HBase&#x5B8C;&#x5168;&#x5206;&#x5E03;&#x6A21;&#x5F0F;&#x5B89;&#x88C5; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2012-12/76947.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-12/76947.htm</a></p>
<p>&#x5355;&#x673A;&#x7248;&#x642D;&#x5EFA;HBase&#x73AF;&#x5883;&#x56FE;&#x6587;&#x6559;&#x7A0B;&#x8BE6;&#x89E3; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2012-10/72959.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-10/72959.htm</a></p>
<p> <strong>HBase &#x7684;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</strong> &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p> <strong>HBase &#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740;</strong> &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p>&#x672C;&#x6587;&#x6C38;&#x4E45;&#x66F4;&#x65B0;&#x94FE;&#x63A5;&#x5730;&#x5740;&#xFF1A; <a href="http://www.linuxidc.com/Linux/2015-02/../../Linux/2015-02/114047.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2015-02/114047.htm</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/HBase/">HBase</a><a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/033ccdd/" title="Apache Zookeeper 集群环境搭建 -" itemprop="url">Apache Zookeeper 集群环境搭建 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Zookeeper &#x662F; &#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x3002;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x534F;&#x8C03;&#x670D;&#x52A1;&#xFF0C;&#x662F;Google Chubby&#x7684;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5B9E;&#x73B0;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x90FD;&#x9700;&#x8981;Zookeeper&#x7684;&#x652F;&#x6301;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5148;&#x7B80;&#x5355;&#x7684;&#x548C;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x5982;&#x4F55;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;zookeeper&#x96C6;&#x7FA4;&#x3002;&#xFF08;&#x7B14;&#x8005;&#x6CE8;&#xFF1A;Chubby&#x662F;&#x4E00;&#x4E2A;lock service&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;lock service&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x5206;&#x5E03;&#x5F0F;&#x4E2D;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#x3002;&#x4E3A;&#x8FD9;&#x4E2A;lock service&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF09;&#x3002;</p>
<p>&#x51C6;&#x5907;&#x73AF;&#x5883;&#xFF1A; &#x81F3;&#x5C11;3 &#x53F0; linux server&#xFF08;&#x7B14;&#x8005;&#x7684;&#x662F;redhat&#x7248;&#x672C;&#x7684;cloud server&#xFF09;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A; &#x5B89;&#x88C5; JDK/JRE</p>
<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4E0B;&#x8F7D;zookeeper &#xFF1A; <a href="http://zookeeper.apache.org/releases.html" target="_blank" rel="external">http://zookeeper.apache.org/releases.html</a></p>
<p>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x4E0A;&#x4F20;&#x5B89;&#x88C5;&#x5305;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;WinSCP&#x7B49;&#xFF09;</p>
<p>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x4F7F;&#x7528; &quot; <strong>tar -xzvf &#xA0;zookeeper-3.4.6.tar.gz</strong> &quot;&#x6765; &#x89E3;&#x538B;&#x5B89;&#x88C5;&#x5305; &#xFF1A; </p>
<p>&#x89E3;&#x538B;&#x540E;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/033b473.png" alt=""></p>
<p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x4FEE;&#x6539;zookeeper&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x96C6;&#x7FA4;&#x548C;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x7684;&#x914D;&#x7F6E;&#xFF09;</p>
<p>&#x4F7F;&#x7528;&#x201C; <strong>cp zoo_sample.cfg &#xA0;zoo.cfg</strong> &#x201D;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;zookeeper&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;zoo.cfg&#x4E2D;&#x914D;&#x7F6E;syncLimit,dataDir&#xFF0C;clientPort,autopurge.purgeInterval,&#x4EE5;&#x53CA;&#x96C6;&#x7FA4;&#x7684;server list&#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150703/033b6e4.png" alt=""></p>
<p>&#x7B2C;&#x516D;&#x6B65;&#xFF1A;&#x901A;&#x8FC7;&#x201C; <strong>scp -r</strong> &#x201D;&#x628A;&#x914D;&#x7F6E;&#x597D;&#x7684;zookeeper&#x76EE;&#x5F55;copy&#x5230;&#x5176;&#x4ED6;&#x4E24;&#x53F0;server&#x4E0A;&#xFF1A; </p>
<p><img src="http://taojinke.github.io/img/20150703/033b6e4.png" alt=""></p>
<p>&#x7B2C;&#x4E03;&#x6B65;&#xFF1A;&#x5728;&#x914D;&#x7F6E;&#x96C6;&#x7FA4;&#x7684;server&#x4E2D;&#xFF0C;&#x5206;&#x522B;&#x627E;&#x5230;zoo.cfg&#x914D;&#x7F6E;&#x7684;dataDir&#x76EE;&#x5F55;&#xFF0C;&#x5728;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x201C;myid&#x201D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x628A;zoo.cfg&#x914D;&#x7F6E;&#x7684;server list&#x4E2D;&#x7684;id&#x503C;&#x5199;&#x5165;&#x5E76;&#x4FDD;&#x5B58;&#xFF1A;</p>
<p><img src="http://taojinke.github.io/img/20150703/033b955.png" alt=""></p>
<p><img src="http://taojinke.github.io/img/20150703/033b955.png" alt=""></p>
<p>&#x7B2C;&#x516B;&#x6B65;&#xFF1A;&#x5206;&#x522B;&#x542F;&#x52A8;&#x4E09;&#x53F0;zookeeper&#xFF0C;&#x5E76;&#x68C0;&#x67E5;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#xFF1A;</p>
<p>&#x4F7F;&#x7528;&#x201C;sudo ./bin/zkServer.sh start&#x201D; &#x542F;&#x52A8;zookeeper&#xFF0C; &#x4F7F;&#x7528;&#x201C;sudo ./bin/zkServer.sh status&#x201D;&#x68C0;&#x67E5;&#x96C6;&#x7FA4;&#x72B6;&#x6001;</p>
<p>server1:</p>
<p><img src="http://taojinke.github.io/img/20150703/033bbc6.png" alt=""></p>
<p>server2:</p>
<p><img src="http://taojinke.github.io/img/20150703/033be37.png" alt=""></p>
<p>server3:</p>
<p><img src="http://taojinke.github.io/img/20150703/033c0a8.png" alt=""></p>
<p>mode&#x663E;&#x793A;&#x4E86;&#x6240;&#x5728;server&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x6240;&#x626E;&#x6F14;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x6BCF;&#x4E2A;server&#x7684;&#x89D2;&#x8272;&#x4E0D;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;leader&#x662F;&#x901A;&#x8FC7;zookeeper&#x7684;Fast Leader &#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x4EA7;&#x751F;&#xFF0C;&#x4E09;&#x53F0;zookeeper&#x96C6;&#x7FA4;&#x5C31;&#x8FD9;&#x4E48;&#x642D;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x5B9E;&#x9645;&#x7684;&#x9879;&#x76EE;&#x9700;&#x8981;&#x518D;&#x505A;&#x4E00;&#x4E9B;&#x8BE6;&#x7EC6;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/03430f6/" title="实时计算框架Storm集群搭建 -" itemprop="url">实时计算框架Storm集群搭建 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="&#x9996;&#x5148;&#x5BF9;&#x4E09;&#x53F0;ubuntu14-04&#x8FDB;&#x884C;&#x4EFB;&#x52A1;&#x5206;&#x914D;:">&#x9996;&#x5148;&#x5BF9;&#x4E09;&#x53F0;ubuntu14.04&#x8FDB;&#x884C;&#x4EFB;&#x52A1;&#x5206;&#x914D;:</h3><p><img src="http://taojinke.github.io/img/20150703/03413aa.jpg" alt=""></p>
<ul>
<li>nimbus&#xFF1A; ip&#xFF1A;192.168.56.102</li>
<li>zookeeper&#xFF1A; ip&#xFF1A;192.168.56.102&#xFF1B;192.168.56.103&#xFF1B;192.168.56.104</li>
<li>supervisor&#xFF1A; ip&#xFF1A;192.168.56.103 192.168.56.104</li>
</ul>
<p>&#x6B64;&#x4E09;&#x53F0;&#x865A;&#x62DF;&#x673A;&#x5206;&#x522B;&#x7528;&#x4F5C;Storm&#x96C6;&#x7FA4;&#x4E2D;&#x7684; nimbus &#x8282;&#x70B9;&#x3001; Zookeeper &#x96C6;&#x7FA4;&#xFF08;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5F00;&#x591A;&#x4E2A;zookeeper&#x8FDB;&#x7A0B;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x591A;&#x53F0;&#x673A;&#x5668;&#xFF09;&#x3001; supervisor &#x8282;&#x70B9;&#x3002; </p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4E3A;&#x65B9;&#x4FBF;&#x8D77;&#x89C1; &#x76F4;&#x63A5;&#x4ECE;&#x5355;&#x673A;&#x5B89;&#x88C5;&#x7684;virtualbox&#x865A;&#x62DF;&#x673A;clone&#x4E86;&#x4E09;&#x53F0;&#x4E00;&#x6837;&#x7684;&#x673A;&#x5668;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#xFF0C;&#x6BCF;&#x53F0;&#x4E0A;&#x7684;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x89C1; <a href="http://chih.me/Setting-up-a-Storm-Cluster.html" target="_blank" rel="external">&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x6846;&#x67B6;Storm&#x672C;&#x5730;&#x6A21;&#x5F0F;&#x642D;&#x5EFA;</a></p>
<h3 id="&#x4E0B;&#x9762;&#x9488;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5177;&#x4F53;&#x7684;&#x914D;&#x7F6E;">&#x4E0B;&#x9762;&#x9488;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5177;&#x4F53;&#x7684;&#x914D;&#x7F6E;</h3><p><img src="http://taojinke.github.io/img/20150703/034161b.png" alt=""></p>
<h4 id="&#x642D;&#x5EFA;&#x4E00;&#x4E2A;Zookeeper&#x96C6;&#x7FA4;">&#x642D;&#x5EFA;&#x4E00;&#x4E2A;Zookeeper&#x96C6;&#x7FA4;</h4><p>&#x4E09;&#x53F0;&#x673A;&#x5668;&#x540C;&#x65F6;&#x4F5C;&#x4E3A; zookeeper &#x96C6;&#x7FA4;&#x3002; </p>
<p>&#x5BF9;&#x673A;&#x5668;&#x5747;&#x4FEE;&#x6539; conf/zoo.cfg &#xFF08;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;zoo_sample.cfg&#x91CD;&#x547D;&#x540D;&#x4E3A;zoo.cfg&#xFF09; </p>
<pre><code><span class="comment"># The number of milliseconds of each tick</span>
<span class="constant">tickTime</span>=2000
<span class="comment"># The number of ticks that the initial</span>
<span class="comment"># synchronization phase can take</span>
<span class="constant">initLimit</span>=10
<span class="comment"># The number of ticks that can pass between</span>
<span class="comment"># sending a request and getting an acknowledgement</span>
<span class="constant">syncLimit</span>=5
<span class="comment"># the directory where the snapshot is stored.</span>
<span class="comment"># do not use /tmp for storage, /tmp here is just</span>
<span class="comment"># example sakes.</span>
<span class="constant">dataDir</span>=/var/zookeeper
<span class="comment"># the port at which the clients will connect</span>
<span class="constant">clientPort</span>=2181
server.1=192.168.56.102:2888:3888
server.2=192.168.56.103:2888:3888
server.3=192.168.56.104:2888:3888
</code></pre><p>&#x6700;&#x540E;&#x4E09;&#x884C;&#x662F;ip:port:port&#x7684;&#x5F62;&#x5F0F;&#xFF0C; Zookeeper &#x9700;&#x8981;2&#x4E2A;&#x7AEF;&#x53E3;&#x901A;&#x4FE1;&#x3002;&#x6709;&#x591A;&#x5C11;&#x53F0;&#x673A;&#x5668;&#x5C31;&#x5199;&#x591A;&#x5C11;&#x4E2A;server.X=ip:port:port&#x3002;X&#x4ECE;1&#x5230;255&#x3002; </p>
<p><img src="http://taojinke.github.io/img/20150703/034188c.png" alt=""></p>
<h4 id="&#x63A5;&#x4E0B;&#x6765;&#x8BBE;&#x7F6E;myid">&#x63A5;&#x4E0B;&#x6765;&#x8BBE;&#x7F6E;myid</h4><p>&#x5728;&#x8BBE;&#x7F6E;&#x7684; dataDir &#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;myid&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x4E0A;&#x9762;&#x8BBE;&#x7F6E;&#x7684;/var/zookeeper&#x76EE;&#x5F55;&#x4E0B;&#x3002; myid&#x6587;&#x4EF6;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x884C;&#x6570;&#x5B57;&#xFF0C;&#x5373;&#x4E0E;zoo.cfg&#x8BBE;&#x7F6E;&#x7684;&#x4E3B;&#x673A;&#x4E0E;id&#x5BF9;&#x5E94;&#x7684;id&#xFF0C; (&#x9ED8;&#x8BA4;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x901A;&#x8FC7; sudo -s &#x8FDB;&#x5165;root&#x73AF;&#x5883;&#xFF0C; &#x7F3A;&#x5931;&#x7684;&#x76EE;&#x5F55;&#x901A;&#x8FC7; mkdir &#x8865;&#x5168;) </p>
<p>&#x5728; 192.168.56.102 &#x4E0A;&#x6267;&#x884C;&#xFF1A;</p>
<pre><code><span class="title"># echo 1</span> &amp;<span class="keyword">gt</span>;/var/zookeeper/myid
</code></pre><p>&#x5728; 192.168.56.103 &#x4E0A;&#x6267;&#x884C;&#xFF1A;</p>
<pre><code><span class="title"># echo 2</span> &amp;<span class="keyword">gt</span>; /var/zookeeper/myid
</code></pre><p>&#x5728; 192.168.56.104 &#x4E0A;&#x6267;&#x884C;&#xFF1A;</p>
<pre><code><span class="title"># echo 3</span> &amp;<span class="keyword">gt</span>; /var/zookeeper/myid
</code></pre><p>&#x6700;&#x540E;&#x542F;&#x52A8;&#x96C6;&#x7FA4;&#x7684;ZooKeeper</p>
<p>&#x5BF9;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x5747;&#x6267;&#x884C;</p>
<pre><code><span class="variable">$ </span>bin/zkServer start
<span class="variable">$ </span>zkServer.sh status
</code></pre><p>&#x67E5;&#x770B;&#x72B6;&#x6001;</p>
<p><img src="http://taojinke.github.io/img/20150703/0341afd.png" alt=""></p>
<p>&#x4FDD;&#x8BC1;server&#x8282;&#x70B9;&#x7684;zookeeper&#x670D;&#x52A1;&#x5168;&#x90E8;&#x542F;&#x52A8;&#x597D;</p>
<p><img src="http://taojinke.github.io/img/20150703/0341d6e.png" alt=""></p>
<h4 id="&#x5728;nimbus&#x3001;supervisor&#x8282;&#x70B9;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;&#xFF08;jdk&#xFF0C;python&#xFF09;">&#x5728;nimbus&#x3001;supervisor&#x8282;&#x70B9;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;&#xFF08;jdk&#xFF0C;python&#xFF09;</h4><h4 id="&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Storm&#x5230;nimbus&#x3001;supervisor&#x8282;&#x70B9;">&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Storm&#x5230;nimbus&#x3001;supervisor&#x8282;&#x70B9;</h4><h4 id="&#x4FEE;&#x6539;nimbus&#x3001;supervisor&#x8282;&#x70B9;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;storm-yaml&#xFF09;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x76F8;&#x540C;&#x914D;&#x7F6E;&#x3002;">&#x4FEE;&#x6539;nimbus&#x3001;supervisor&#x8282;&#x70B9;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;storm.yaml&#xFF09;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x76F8;&#x540C;&#x914D;&#x7F6E;&#x3002;</h4><p>Storm&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E;storm&#x4E3B;&#x76EE;&#x5F55;&#x4E0B;&#x7684; conf/storm.yaml &#x3002; </p>
<p>storm.zookeeper.servers &#xFF1A;&#x6307;&#x5B9A;zookeeper&#x96C6;&#x7FA4;&#xFFFD;&#xFFFD;&#xFFFD;&#x7684;&#x4E3B;&#x673A;&#x5217;&#x8868;&#x3002; </p>
<p>nimbus.host :&#x6307;&#x5B9A;nimbus&#x8282;&#x70B9;&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x673A;&#x3002; &#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A; </p>
<pre><code><span class="rule"><span class="attribute">storm.zookeeper.servers</span>:<span class="value">
      - &amp;quot</span></span>;192<span class="class">.168</span><span class="class">.56</span><span class="class">.102</span>&amp;<span class="tag">quot</span>;
      <span class="tag">-</span> &amp;<span class="tag">quot</span>;192<span class="class">.168</span><span class="class">.56</span><span class="class">.103</span>&amp;<span class="tag">quot</span>;
      <span class="tag">-</span> &amp;<span class="tag">quot</span>;192<span class="class">.168</span><span class="class">.56</span><span class="class">.104</span>&amp;<span class="tag">quot</span>;

<span class="rule"><span class="attribute">nimbus.host</span>:<span class="value"> &amp;quot</span></span>;192<span class="class">.168</span><span class="class">.56</span><span class="class">.102</span>&amp;<span class="tag">quot</span>;
</code></pre><p><img src="http://taojinke.github.io/img/20150703/0341d6e.png" alt=""></p>
<p>supervisor.slots.ports :&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;supervisor&#x8282;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E9B;&#x7AEF;&#x53E3;&#xFF0C;&#x6765;&#x8FD0;&#x884C;&#x76F8;&#x5E94;&#x6570;&#x76EE;&#x7684;JVM&#x8FDB;&#x7A0B;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x5F00;&#x53D1;&#x4E86;&#x56DB;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x5373;&#x5728;supervisor&#x8282;&#x70B9;&#x4E0A;&#x8FD0;&#x884C;&#x4E86;&#x56DB;&#x4E2A;JVM&#x8FDB;&#x7A0B;&#xFF08;4&#x4E2A;worker&#x3001;&#x6B64;&#x5904;&#x6D89;&#x53CA;&#x5230;Storm&#x4E2D;&#x7684;&#x5E76;&#x884C;&#x5316;&#x673A;&#x5236;&#xFF09;&#x3002; </p>
<pre><code>supervisor.slots.ports:

-<span class="ruby"> <span class="number">6700</span>
</span>
-<span class="ruby"> <span class="number">6701</span>
</span>
-<span class="ruby"> <span class="number">6702</span>
</span>
-<span class="ruby"> <span class="number">6703</span></span>
</code></pre><p>&#x6CE8;&#xFF1A;nimbus&#x8282;&#x70B9;&#x548C;supervisor&#x8282;&#x70B9;&#x4E0A;&#x7684;storm.yaml&#x5747;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x3002;</p>
<h4 id="&#x4F7F;&#x7528;storm&#x811A;&#x672C;&#x542F;&#x52A8;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF08;&#x5305;&#x62EC;nimbus&#x3001;supervisor&#x3001;ui&#xFF09;">&#x4F7F;&#x7528;storm&#x811A;&#x672C;&#x542F;&#x52A8;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF08;&#x5305;&#x62EC;nimbus&#x3001;supervisor&#x3001;ui&#xFF09;</h4><ul>
<li>nimbus&#xFF1A;&#x5728;nimbus&#x8282;&#x70B9;&#x4E0A;&#x8FD0;&#x884C; storm nimbus &#x547D;&#x4EE4; 192.168.56.102</li>
<li>supervisor&#xFF1A;&#x5728;supervisor&#x8282;&#x70B9;&#x4E0A;&#x8FD0;&#x884C; storm supervisor &#x547D;&#x4EE4; 103 104</li>
<li>ui&#xFF1A;&#x5728;nimbus&#x4E0A;&#x91CD;&#x65B0;&#x5F00;&#x4E2A;console&#xFF0C;&#x8FD0;&#x884C; storm ui &#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x8BBF;&#x95EE; <a href="http://192.168.56.102:8088" target="_blank" rel="external">http://192.168.56.102:8088</a> &#xFF0C;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x754C;&#x9762;&#x5219;&#x8868;&#x660E;&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF1A;</li>
</ul>
<p><img src="http://taojinke.github.io/img/20150703/0341fdf.png" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/实时计算/">实时计算</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/03/034cac5/" title="Git@OSC 项目推荐 —— ZooKeeper 管理工具 -" itemprop="url">Git@OSC 项目推荐 —— ZooKeeper 管理工具 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-03T02:08:43.000Z" itemprop="datePublished"> 发表于 2015-07-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="zookeeper-web_-_&#x5728;&#x7EBF;_zookeeper&#x7BA1;&#x7406;&#x5DE5;&#x5177;">zookeeper-web - &#x5728;&#x7EBF; zookeeper&#x7BA1;&#x7406;&#x5DE5;&#x5177;</h2><pre><code><span class="tag">zookeeper-web</span>&amp;<span class="id">#x662F</span>;&amp;<span class="id">#x4E00</span>;&amp;<span class="id">#x4E2A</span>;&amp;<span class="id">#x7B80</span>;&amp;<span class="id">#x5355</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x3001</span>;&amp;<span class="id">#x65B9</span>;&amp;<span class="id">#x4FBF</span>;&amp;<span class="id">#x7684</span>;<span class="tag">zookeeper</span>&amp;<span class="id">#x7BA1</span>;&amp;<span class="id">#x7406</span>;&amp;<span class="id">#x5DE5</span>;&amp;<span class="id">#x5177</span>;&amp;<span class="id">#x3002</span>;&amp;<span class="id">#x6211</span>;&amp;<span class="id">#x538C</span>;&amp;<span class="id">#x70E6</span>;&amp;<span class="id">#x4E86</span>;&amp;<span class="id">#x901A</span>;&amp;<span class="id">#x8FC7</span>;&amp;<span class="id">#x547D</span>;&amp;<span class="id">#x4EE4</span>;&amp;<span class="id">#x884C</span>;&amp;<span class="id">#x6765</span>;&amp;<span class="id">#x7BA1</span>;&amp;<span class="id">#x7406</span>;<span class="tag">zookeeper</span>&amp;<span class="id">#xFF0C</span>;&amp;<span class="id">#x540C</span>;&amp;<span class="id">#x65F6</span>;&amp;<span class="id">#x9700</span>;&amp;<span class="id">#x8981</span>;&amp;<span class="id">#x4E00</span>;&amp;<span class="id">#x4E2A</span>;&amp;<span class="id">#x6211</span>;&amp;<span class="id">#x719F</span>;&amp;<span class="id">#x6089</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x6846</span>;&amp;<span class="id">#x67B6</span>;&amp;<span class="id">#x6765</span>;&amp;<span class="id">#x5F00</span>;&amp;<span class="id">#x53D1</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x5DE5</span>;&amp;<span class="id">#x5177</span>;&amp;<span class="id">#x3002</span>;&amp;<span class="id">#x501F</span>;&amp;<span class="id">#x9274</span>;&amp;<span class="id">#x4E86</span>;<span class="tag">github</span>&amp;<span class="id">#x4E0A</span>;&amp;<span class="id">#x4E00</span>;&amp;<span class="id">#x4E2A</span>;&amp;<span class="id">#x7528</span>;<span class="tag">python</span>&amp;<span class="id">#x5199</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x7BA1</span>;&amp;<span class="id">#x7406</span>;&amp;<span class="id">#x5DE5</span>;&amp;<span class="id">#x5177</span>;&amp;<span class="id">#xFF08</span>;&amp;<span class="id">#x62B1</span>;&amp;<span class="id">#x6B49</span>;&amp;<span class="id">#xFF0C</span>;&amp;<span class="id">#x6211</span>;&amp;<span class="id">#x540E</span>;&amp;<span class="id">#x6765</span>;&amp;<span class="id">#x6CA1</span>;&amp;<span class="id">#x6709</span>;&amp;<span class="id">#x627E</span>;&amp;<span class="id">#x5230</span>;&amp;<span class="id">#x8FD9</span>;&amp;<span class="id">#x4E2A</span>;&amp;<span class="id">#x9879</span>;&amp;<span class="id">#x76EE</span>;&amp;<span class="id">#x7684</span>;&amp;<span class="id">#x5730</span>;&amp;<span class="id">#x5740</span>;&amp;<span class="id">#xFF09</span>;&amp;<span class="id">#x3002</span>;
&amp;<span class="id">#x4F7F</span>;&amp;<span class="id">#x7528</span>;&amp;<span class="id">#x4E3B</span>;&amp;<span class="id">#x6D41</span>;&amp;<span class="id">#x7684</span>;<span class="tag">springmvc</span>&amp;<span class="id">#x3001</span>;<span class="tag">freemarker</span>&amp;<span class="id">#x3001</span>;<span class="tag">bootstrap</span>&amp;<span class="id">#x548C</span>;<span class="tag">zkclient</span>&amp;<span class="id">#x6765</span>;&amp;<span class="id">#x5F00</span>;&amp;<span class="id">#x53D1</span>;&amp;<span class="id">#x3002</span>;
</code></pre><p>&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x77ED;&#xFF0C;&#x5728;&#x4E09;&#x5929;&#x7684;&#x65F6;&#x95F4;&#x91CC;&#xFF0C;&#x5229;&#x7528;&#x96F6;&#x96F6;&#x788E;&#x788E;&#x7684;&#x65F6;&#x95F4;&#x628A;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x641E;&#x5B9A;&#x3002;&#x671F;&#x671B;&#x4E0D;&#x8981;&#x592A;&#x9AD8;&#x3002;</p>
<h4 id="&#x7B80;&#x5355;&#x4E00;&#x70B9;_&#x65B9;&#x4FBF;&#x4E00;&#x70B9;">&#x7B80;&#x5355;&#x4E00;&#x70B9; &#x65B9;&#x4FBF;&#x4E00;&#x70B9;</h4><h2 id="&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;_zookeeper_web&#xFF1A;">&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; zookeeper web&#xFF1A;</h2><ul>
<li>&#x65B9;&#x4FBF;&#x7684;&#x67E5;&#x770B;zookeeper&#x7684;&#x8282;&#x70B9;&#x548C;&#x8282;&#x70B9;&#x6570;&#x636E;</li>
<li>&#x5FEB;&#x6377;&#x7684;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x548C;&#x7EA7;&#x8054;&#x5220;&#x9664;&#x8282;&#x70B9;</li>
<li>&#x5FEB;&#x6377;&#x7684;&#x7F16;&#x8F91;&#x8282;&#x70B9;&#x6570;&#x636E;&#xFF0C;&#x76EE;&#x524D;&#x53EA;&#x652F;&#x6301;&#x6587;&#x672C;&#x6570;&#x636E;</li>
<li>&#x7B80;&#x5355;&#x7684;&#x6743;&#x9650;&#x63A7;&#x5236;&#xFF0C;&#x672A;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x67E5;&#x770B;</li>
</ul>
<h2 id="Quick_Start">Quick Start</h2><p>&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x6E90;&#x7801;&#x6709;&#x5174;&#x8DA3;&#x8BF7;&#x4ECE;oscgit&#x4E0B;&#x8F7D;&#x6E90;&#x7801;&#x6784;&#x5EFA;.</p>
<p>&#x6E90;&#x7801;&#x5730;&#x5740;:</p>
<p>oscgit</p>
<pre><code>git clone <span class="string">https:</span><span class="comment">//git.oschina.net/crystony/zookeeper-web.git</span>
</code></pre><p>&#x5982;&#x679C;&#x4F60;&#x662F;gradle&#x7528;&#x6237;(2.0&#x4EE5;&#x4E0A;),&#x8BF7;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x9879;&#x76EE;&#xFF1A;</p>
<pre><code><span class="title">gradle</span> jettyRun
</code></pre><p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x4F7F;&#x7528;gralde,&#x6267;&#x884C;&#x9879;&#x76EE;&#x8DDF;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x811A;&#x672C;,linux/windows&#x7528;&#x6237;&#x6267;&#x884C;</p>
<pre><code>gradlew/gradlew<span class="class">.bat</span> jettyRun
</code></pre><p>&#x81EA;&#x52A8;&#x4E0B;&#x8F7D;gralde&#x5B8C;&#x6210;&#x540E;,&#x4F1A;&#x81EA;&#x52A8;&#x4F7F;&#x7528;jetty&#x542F;&#x52A8;&#x9879;&#x76EE;</p>
<p>&#x5982;&#x679C;&#x60F3;&#x5C06;&#x9879;&#x76EE;&#x5BFC;&#x5165;IDE&#x8C03;&#x8BD5;,eclipse&#x7528;&#x6237;&#x6267;&#x884C;</p>
<pre><code>gradlew/gradlew<span class="class">.bat</span> eclipse
</code></pre><p>idea&#x7528;&#x6237;&#x6267;&#x884C;</p>
<pre><code>gradlew/gradlew<span class="class">.bat</span> idea
</code></pre><p>&#x9879;&#x76EE;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x8BBF;&#x95EE; <a href="http://localhost:8080/zookeeper-web" target="_blank" rel="external">http://localhost:8080/zookeeper-web</a> &#xFF0C;&#x663E;&#x793A;&#x5982;&#x4E0B; </p>
<p><img src="http://taojinke.github.io/img/20150703/034b9ae.jpg" alt=""></p>
<h2 id="&#x95EE;&#x9898;&#x548C;&#x5EFA;&#x8BAE;">&#x95EE;&#x9898;&#x548C;&#x5EFA;&#x8BAE;</h2><p><a href="mailto:hh.suse@gmail.com" target="_blank" rel="external">hh.suse@gmail.com</a></p>
<p>&#x4F5C;&#x8005;@&#x82B1;&#x82B1; </p>
<p>2015-01-10</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ZooKeeper/">ZooKeeper</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/25/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" href="/page/27/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>587</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>32</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>23</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>9</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
