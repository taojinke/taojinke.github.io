
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="1XvvwQ7Apt" />
  
    <title>dianzi blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="edwin">
    

    
    <meta name="description" content="edwin jin dianzi blog">
<meta property="og:type" content="website">
<meta property="og:title" content="dianzi blog">
<meta property="og:url" content="http://taojinke.github.io/page/37/index.html">
<meta property="og:site_name" content="dianzi blog">
<meta property="og:description" content="edwin jin dianzi blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dianzi blog">
<meta name="twitter:description" content="edwin jin dianzi blog">

    
    <link rel="alternative" href="/atom.xml" title="dianzi blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?345f95aea4ada2935d6f9ea4177b51ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="dianzi blog" title="dianzi blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="dianzi blog">dianzi blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
						<a href="/music/index.html" target="_blank">Music</a>
					</li>
					<li>
 					
						<form class="search" action="http://taojinke.github.io/" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9fbcab2/" title="2015年最佳的15个 Node.js 开发工具 -" itemprop="url">2015年最佳的15个 Node.js 开发工具 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:23.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> Node.js &#x8D8A;&#x6765;&#x6708;&#x6D41;&#x884C;&#xFF0C;&#x8FD9;&#x4E2A;&#x57FA;&#x4E8E; Google V8 &#x5F15;&#x64CE;&#x5EFA;&#x7ACB;&#x7684;&#x5E73;&#x53F0;&#xFF0C; &#x7528;&#x4E8E;&#x65B9;&#x4FBF;&#x5730;&#x642D;&#x5EFA;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x5FEB;&#x3001;&#x6613;&#x4E8E;&#x6269;&#x5C55;&#x7684;&#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x3002;&#x5728;&#x672C;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5217;&#x51FA;&#x4E86;2015&#x5E74;&#x6700;&#x4F73;&#x7684;15&#x4E2A; Node.js &#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x3002;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x5BF9;&#x4E8E;&#x521A;&#x521A;&#x5F00;&#x59CB;&#x5B66;&#x4E60; <a href="http://www.cnblogs.com/lhb25/category/527838.html" target="_blank" rel="external"><strong>Node.js</strong></a> &#x7684;&#x65B0;&#x624B;&#x5F00;&#x53D1;&#x8005;&#x975E;&#x5E38;&#x6709;&#x5E2E;&#x52A9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x77E5;&#x9053;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6709;&#x7528;&#x7684; Node.js &#x8D44;&#x6E90;&#xFF0C;&#x8BF7;&#x8BA9;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x3002; </p>
<p>&#x60A8;&#x53EF;&#x80FD;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x76F8;&#x5173;&#x6587;&#x7AE0;</p>
<ul>
<li><a href="http://www.cnblogs.com/lhb25/p/must-read-links-for-web-designers-and-developers-volume-12.html" target="_blank" rel="external">Web &#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x548C;&#x8BBE;&#x8BA1;&#x5E08;&#x5FC5;&#x8BFB;&#x7CBE;&#x534E;&#x6587;&#x7AE0;&#x63A8;&#x8350;</a></li>
<li><a href="http://www.cnblogs.com/lhb25/archive/2012/08/08/ajax-jquery-pagination-plugin-tutorial.html" target="_blank" rel="external">&#x7CBE;&#x5FC3;&#x6311;&#x9009;&#x7684;&#x4F18;&#x79C0;jQuery Ajax&#x5206;&#x9875;&#x63D2;&#x4EF6;&#x548C;&#x6559;&#x7A0B;</a></li>
<li><a href="http://www.yyyweb.com/271.html" target="_blank" rel="external">12&#x4E2A;&#x8BA9;&#x4EBA;&#x60CA;&#x53F9;&#x7684;&#x7684;&#x521B;&#x610F;&#x7684; 404 &#x9519;&#x8BEF;&#x9875;&#x9762;&#x8BBE;&#x8BA1;</a></li>
<li><a href="http://www.cnblogs.com/lhb25/p/12-jquery-animation-plugins.html" target="_blank" rel="external">&#x8BA9;&#x7F51;&#x7AD9;&#x52A8;&#x8D77;&#x6765;&#xFF01;12&#x6B3E;&#x4F18;&#x79C0;&#x7684; jQuery &#x52A8;&#x753B;&#x63D2;&#x4EF6;</a></li>
<li><a href="http://www.yyyweb.com/377.html" target="_blank" rel="external">8&#x4E2A;&#x524D;&#x6CBF; HTML5 &amp; CSS3 &#x6548;&#x679C;&#x3010;&#x9644;&#x6E90;&#x7801;&#x4E0B;&#x8F7D;&#x3011;</a></li>
</ul>
<h2 id="1-_IO-js">1. IO.js</h2><p><img src="http://taojinke.github.io/img/20150702/9fb7a21.jpg" alt=""></p>
<p>JavaScript I/O is an npm compatible platform that was originally based on Node.js and built on Chrome&#x2019;s V8 Runtime. It aims to provide faster and predictable release cycles.</p>
<h2 id="2-_Math-js">2. Math.js</h2><p><img src="http://taojinke.github.io/img/20150702/9fb7c92.jpg" alt=""></p>
<p>Math.js is an extensive math library for JavaScript and Node.js. It features a flexible expression parser and offers an integrated solution to work with numbers, big numbers, complex numbers, units, and matrices. Powerful and easy to use. It supports chained operations. It&#x2019;s easily extensible.</p>
<h2 id="3-_Cyclon-js">3. Cyclon.js</h2><p><img src="http://taojinke.github.io/img/20150702/9fb83e5.jpg" alt=""></p>
<p>Cylon.js is a JavaScript framework for robotics and physical computing built on top of Node.js. It provides a simple, but powerful way to create solutions that incorporate multiple, different hardware devices concurrently. Cylon uses the Gort Command Line Interface (CLI) so you can access important features right from the command line. You can scan, connect, update device firmware, and more. Cylon also has its own CLI to generate new robots, adaptors, and drivers.</p>
<h2 id="4-_Migrat">4. Migrat</h2><p><img src="http://taojinke.github.io/img/20150702/9fb8656.jpg" alt=""></p>
<p>Migrat is a pluggable Node.js migration tool that is not tied any particular database engine and supports multi-node environments. It&#x2019;s designed for diverse stacks and processes, and allows migrations to be run once globally or once per server.</p>
<h2 id="5-_Eskimo">5. Eskimo</h2><p><img src="http://taojinke.github.io/img/20150702/9fb88c7.jpg" alt=""></p>
<p>Eskimo makes it easier to rapidly build Node.js apps, online stores, APIs, and more. It&#x2019;s built with open-source packages, and can be used for everything from coming soon pages to referral systems to CDN-hosted assets.</p>
<h2 id="6-_Taunus">6. Taunus</h2><p><img src="http://taojinke.github.io/img/20150702/9fb8b38.jpg" alt=""></p>
<p>Taunus is a micro isomorphic MVC engine for Node,js that focuses on delivering a progressively enhanced experience to the user. It focuses on usability and performance, as well.</p>
<h2 id="7-_PencilBlue">7. PencilBlue</h2><p><img src="http://taojinke.github.io/img/20150702/9fb8b38.jpg" alt=""></p>
<p>PencilBlue is an open source Node.js content management system that&#x2019;s fully responsive and completely scalable. It&#x2019;s extendable, easy to use, and is great for more than just blogs.</p>
<h2 id="8-_PaperClip">8. PaperClip</h2><p><img src="http://taojinke.github.io/img/20150702/9fb8da9.jpg" alt=""></p>
<p>Paperclip.js is a powerful template engine that&#x2019;s built for extensibility and speed. It creates compiled templates for the browser and Node.js.</p>
<h2 id="9-_Set">9. Set</h2><p><img src="http://taojinke.github.io/img/20150702/9fb901a.jpg" alt=""></p>
<p>Set is an unobtrusive, dry template engine for Node.js and browsers that gives you 100% valid HTML5 templates. It&#x2019;s visual, so you can design in your favorite visual editor and even use mock data in your templates.</p>
<h2 id="10-_Passwordless">10. Passwordless</h2><p><img src="http://taojinke.github.io/img/20150702/9fb928b.jpg" alt=""></p>
<p>Passwordless is a token-based password authentication middleware for Express and Node.js. It&#x2019;s faster to deploy, with just a single form and text field, with no need for separate registration, login, and lost password pages.</p>
<h2 id="11-_Broccoli">11. Broccoli</h2><p><img src="http://taojinke.github.io/img/20150702/9fb976d.jpg" alt=""></p>
<p>Broccoli is a new backend-agnostic, Node.js build tool, comparable to the Rails asset pipeline in scope. It offers chainable plugins, fast rebuilds, and a few plugins ready to go.</p>
<h2 id="12-_Sails-js">12. Sails.js</h2><p><img src="http://taojinke.github.io/img/20150702/9fb9ec0.jpg" alt=""></p>
<p>Sails.js is designed to resemble the MVC architecture from frameworks like Ruby on Rails but for creating enterprise-grade Node.js apps. It has support for more modern, data-oriented web app development, particularly useful for creating realtime things like chat functions.</p>
<h2 id="13-_NodeOS">13. NodeOS</h2><p><img src="http://taojinke.github.io/img/20150702/9fb9ec0.jpg" alt=""></p>
<p>Node OS is the first operating system powered by npm. It&#x2019;s built on top of the Linux kernel, with a node.js runtime.</p>
<h2 id="14-_Express">14. Express</h2><p><img src="http://taojinke.github.io/img/20150702/9fba131.jpg" alt=""></p>
<p>Express is a high performance and minimal web development framework for Node.js. The Express philosophy is to provide small, robust tooling for HTTP servers. Making it a great solution for single page applications, web sites, hybrids, or public HTTP APIs.Built on Connect you can use only what you need, and nothing more, applications can be as big or as small as you like, even a single file.</p>
<h2 id="15-_Flatiron">15. Flatiron</h2><p><img src="http://taojinke.github.io/img/20150702/9fba613.jpg" alt=""></p>
<p>Flatiron is an unobtrusive framework initiative for node.js. It promotes code organization and sustainability by clearly separating development concerns. Each component works elegantly with or without its counterparts. Many of the components work the same in the browser as they do on the server.&#xA0;It is an initiative to build a collection of decoupled tools with the same standard of quality and performance that you would expect from anything built by nodejitsu (intelligent &amp; scalable Node.js).</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a><a href="/tags/开发工具/">开发工具</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9fb5cd5/" title="前端 | 重构 gulpfile.js -" itemprop="url">前端 | 重构 gulpfile.js -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:23.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="&#x80CC;&#x666F;">&#x80CC;&#x666F;</h2><p>&#x524D;&#x7AEF;&#x4EFB;&#x52A1;&#x6253;&#x5305;&#x5DE5;&#x5177;&#x9009;&#x7528;&#x7684;&#x662F; gulp , &#x5F53;&#x65F6;&#x9009;&#x7528; gulp &#x4E5F;&#x662F;&#x5076;&#x7136;&#xFF0C;&#x5728;&#x4F7F;&#x7528; grunt &#x521D;&#x671F;&#xFF0C;&#x7FFB;&#x9605; dailyjs.com &#x65F6;&#x53D1;&#x73B0;&#x4E00;&#x7247;&#x6587;&#x7AE0;&#x7740;&#x91CD;&#x4ECB;&#x7ECD;&#x4E86; gulp , &#x751A;&#x81F3;&#x8FD8;&#x9884;&#x8A00;&#x662F; grunt &#x7684;&#x52B2;&#x654C;&#xFF0C;&#x597D;&#x5947;&#x5FC3;&#x9A71;&#x4F7F;&#xFF0C;&#x786E;&#x5B9E;&#x53D1;&#x73B0;&#xFF0C; gulp &#x7684;&#x6D41;&#x7684;&#x6982;&#x5FF5;&#x66F4;&#x4EBA;&#x6027;&#x5316;&#xFF0C;&#x770B;&#x7740;&#x5F53;&#x65F6;&#x5199;&#x7684; grunt &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x5FCD;&#x76F4;&#x89C6; </p>
<p>&#x7531;&#x4E8E;&#x9879;&#x76EE;&#x7684;&#x4E0D;&#x65AD;&#x8FED;&#x4EE3;&#xFF0C;&#x524D;&#x7AEF;&#x7684;&#x4EFB;&#x52A1;&#x4E5F;&#x5728;&#x4E0D;&#x65AD;&#x7684;&#x8FED;&#x4EE3;&#xFF0C;&#x4EFB;&#x52A1;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x6CA1;&#x6709;&#x4F18;&#x5316;&#x524D;&#xFF0C;&#x5168;&#x90E8;&#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684; gulpfile.js &#x4E2D;&#xFF0C;&#x540E;&#x6765;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x79FB;&#xFF0C;&#x53D1;&#x73B0;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x65F6;&#xFF0C;&#x67E5;&#x8BE2;&#x597D;&#x9EBB;&#x70E6;&#xFF0C;&#x4E94;&#x767E;&#x884C;&#x5DE6;&#x53F3;&#x7684;&#x4EE3;&#x7801;&#x8BA9;&#x4EBA;&#x70E6;&#x8E81;&#xFF0C;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x548C; <a href="https://github.com/gulpjs/gulp/blob/master/docs/recipes/using-multiple-sources-in-one-task.md" target="_blank" rel="external">https://github.com/gulpjs/gulp/blob/master/docs/recipes/using-multiple…</a> &#x5982;&#x51FA;&#x4E00;&#x8F99; </p>
<p>&#x91CD;&#x6784; gulpfile.js &#x5FC5;&#x987B;&#x8981;&#x8FDB;&#x884C; </p>
<h2 id="&#x91CD;&#x6784;&#x8FED;&#x4EE3;1">&#x91CD;&#x6784;&#x8FED;&#x4EE3;1</h2><p>&#x6700;&#x5148;&#x662F;&#x6309;&#x7167; <a href="https://github.com/gulpjs/gulp/blob/master/docs/recipes/split-tasks-across-multiple-files.md" target="_blank" rel="external">https://github.com/gulpjs/gulp/blob/master/docs/recipes/split-tasks-ac…</a> &#x6B64;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x67B6;&#x6784;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#x7684; </p>
<h3 id="&#x6587;&#x4EF6;&#x7ED3;&#x6784;">&#x6587;&#x4EF6;&#x7ED3;&#x6784;</h3><pre><code>gulpfile.js
tasks/
&amp;<span class="title">#x251</span>C;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; xxxx.js
&amp;<span class="title">#x251</span>C;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; xxxx.js
&amp;<span class="title">#x2514</span>;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; image.js
</code></pre><h3 id="image-js">image.js</h3><pre><code><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(&amp;apos;gulp-imagemin&amp;apos;);
gulp.task(&amp;apos;img&amp;apos;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
    <span class="keyword">return</span> gulp.src(&amp;apos;./images<span class="comment">/**/</span>*.*&amp;apos;)
        .pipe($.imagemin({
            optimizationLevel: <span class="number">2</span>,
            progressive: <span class="literal">true</span>
        }))
        .pipe(gulp.dest(&amp;apos;./imagemini&amp;apos;))
});
</code></pre><h3 id="gulpfile-js">gulpfile.js</h3><pre><code><span class="reserved">var</span> requireDir = <span class="built_in">require</span>(&amp;apos;<span class="built_in">require</span>-dir&amp;apos;)
  , tasks = requireDir(&amp;apos;./tasks&amp;apos;)
  ;
</code></pre><p>&#x8FD9;&#x79CD;&#x6587;&#x4EF6;&#x67B6;&#x6784;&#x8BA9;&#x4EFB;&#x52A1;&#x6309;&#x7167;&#x7C7B;&#x578B;&#x5206;&#x6210;&#x5B50;&#x4EFB;&#x52A1;&#x653E;&#x5728;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x987F;&#x65F6;&#x611F;&#x89C9;&#x5E72;&#x51C0;&#x4E86;&#x5F88;&#x591A;&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x7684;&#x6DFB;&#x52A0;&#x5B50;&#x4EFB;&#x52A1;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x7BA1; gulpfile.js , &#x6B64;&#x65F6;&#x5B50;&#x4EFB;&#x52A1;&#x597D;&#x6BD4;&#x63D2;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x5C31;&#x6DFB;&#x52A0;&#xFF0C;&#x6CA1;&#x7528;&#x5C31;&#x5220;&#x9664;&#xFF0C;&#x76F8;&#x5F53;&#x65B9;&#x4FBF; </p>
<h2 id="&#x91CD;&#x6784;&#x8FED;&#x4EE3;2">&#x91CD;&#x6784;&#x8FED;&#x4EE3;2</h2><p>&#x968F;&#x7740;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x79FB;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x79CD;&#x7EC4;&#x7EC7;&#x67B6;&#x6784;&#x8FD8;&#x662F;&#x6709;&#x4E9B;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x4E0D;&#x65B9;&#x4FBF;&#x5728;&#x54EA;&#x91CC;&#x5462;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6211;&#x90FD;&#x8981;&#x5199; var xxx = require(&apos;xxx&apos;) , &#x5982;&#x679C;&#x4F60;&#x662F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x67B6;&#x6784;&#xFF0C;&#x4EFB;&#x52A1;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F30;&#x8BA1;&#x4E5F;&#x4F1A;&#x6293;&#x72C2;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x4F1A;&#x53D1;&#x73B0; &#x63D2;&#x4EF6;&#x548C;&#x6A21;&#x5757;&#x4F9D;&#x8D56;&#x88AB;&#x91CD;&#x590D;&#x7684;&#x5F15;&#x5165;&#x8FDB;&#x6765; &#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x63D0;&#x9AD8;&#x4E86;&#x6210;&#x672C; </p>
<p>&#x6211;&#x4E0D;&#x60F3;&#x5728;&#x5B50;&#x4EFB;&#x52A1;&#x6587;&#x4EF6;&#x4E2D;&#x91CD;&#x590D;&#x7684;&#x5F15;&#x5165; &#x63D2;&#x4EF6;&#x6216;&#x6A21;&#x5757;&#x4F9D;&#x8D56; &#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x4E0A;&#x9762;&#x597D;&#x65B9;&#x6CD5;&#xFF0C; stackoverflow &#x662F;&#x4E2A;&#x597D;&#x8001;&#x5E08;&#xFF0C;&#x8001;&#x5E08;&#x544A;&#x77E5;&#xFF1A; </p>
<ul>
<li>&#x4F7F;&#x7528; gulp-load-plugins &#x63D2;&#x4EF6;<br>&#x5730;&#x5740;&#xFF1A; <a href="https://www.npmjs.com/package/gulp-load-plugins" target="_blank" rel="external">https://www.npmjs.com/package/gulp-load-plugins</a></li>
<li>&#x628A;&#x5B50;&#x4EFB;&#x52A1;&#x5C01;&#x88C5;&#x6210;&#x6A21;&#x5757;</li>
</ul>
<p>&#x73B0;&#x5728;&#x4EE3;&#x7801;&#x7ED3;&#x6784;</p>
<pre><code>gulpfile.js
tasks/
&amp;<span class="title">#x251</span>C;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; xxxx.js
&amp;<span class="title">#x251</span>C;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; xxxx.js
&amp;<span class="title">#x2514</span>;&amp;<span class="title">#x2500</span>;&amp;<span class="title">#x2500</span>; image.js
</code></pre><h3 id="gulpfile-js-1">gulpfile.js</h3><pre><code>var gulp = require(&amp;apos;gulp&amp;apos;)
  , gulpLoadPlugins = require(&amp;apos;gulp-load-plugins&amp;apos;)
  ;

// &amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x8BF7</span>;&amp;<span class="symbol">#x67E5</span>;&amp;<span class="symbol">#x770B</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x6863</span>;
gulpLoadPlugins.imagemin = require(&amp;apos;gulp-imagemin&amp;apos;);

require(&amp;apos;./tasks/image&amp;apos;)(gulp, gulpLoadPlugins);
</code></pre><h3 id="image-js-1">image.js</h3><pre><code><span class="function"><span class="keyword">module</span>.<span class="title">exports</span> =</span> <span class="function"><span class="keyword">function</span> <span class="params">(gulp, Plugin)</span> {</span>
    gulp.task<span class="params">(&amp;apos;img&amp;apos;, function<span class="params">()</span> {
        return gulp.src<span class="params">(&amp;apos;./images/**/*.*&amp;apos;)</span>
            .pipe<span class="params">(Plugin.imagemin<span class="params">({
                optimizationLevel: <span class="number">2</span>,
                progressive: <span class="literal">true</span>
            })</span>)</span>
            .pipe<span class="params">(gulp.dest<span class="params">(&amp;apos;./imagemini&amp;apos;)</span>)</span>
    })</span>;
};
</code></pre><p>&#x8FD0;&#x884C;&#x4EFB;&#x52A1; &#x4E00;&#x5207;&#x6B63;&#x5E38;&#xFF0C;&#x6B64;&#x65F6;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x5DF2;&#x7ECF;ok</p>
<p>&#x4F46;&#x662F; ./tasks &#x4E0B;&#x9762;&#x662F;&#x6709;&#x5F88;&#x591A;&#x7684;&#x5B50;&#x4EFB;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x8FED;&#x4EE3;&#x52A0;&#x8F7D;&#xFF0C;&#x4FEE;&#x6539; gulpfile.js &#x5982;&#x4E0B; </p>
<pre><code>var gulp = require(&amp;apos;gulp&amp;apos;)
  , gulpLoadPlugins = require(&amp;apos;gulp-load-plugins&amp;apos;)
  // &amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x83B7</span>;&amp;<span class="symbol">#x53D6</span>;&amp;<span class="symbol">#x5B50</span>;&amp;<span class="symbol">#x4EFB</span>;&amp;<span class="symbol">#x52A1</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x4EF6</span>;&amp;<span class="symbol">#x5217</span>;&amp;<span class="symbol">#x8868</span>; &amp;<span class="symbol">#x4F7F</span>;&amp;<span class="symbol">#x7528</span>;&amp;<span class="symbol">#x4E86</span>; fs &amp;<span class="symbol">#x6A21</span>;&amp;<span class="symbol">#x5757</span>;
  , gulpTaskList = require(&amp;apos;fs&amp;apos;).readdirSync(&amp;apos;./tasks/&amp;apos;)
  ;

// &amp;<span class="symbol">#x8FD9</span>;&amp;<span class="symbol">#x91CC</span>;&amp;<span class="symbol">#x8BF7</span>;&amp;<span class="symbol">#x67E5</span>;&amp;<span class="symbol">#x770B</span>;&amp;<span class="symbol">#x6587</span>;&amp;<span class="symbol">#x6863</span>;
gulpLoadPlugins.imagemin = require(&amp;apos;gulp-imagemin&amp;apos;);

gulpTaskList.forEach(function(taskfile) {
    require(&amp;apos;./tasks/&amp;apos; + taskfile)(gulp, gulpLoadPlugins);
});
</code></pre><p>&#x8FD9;&#x4E00;&#x6B21;&#x8FED;&#x4EE3;&#x907F;&#x514D;&#x4E86; &#x91CD;&#x590D;&#x4F9D;&#x8D56; &#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4F9D;&#x8D56;&#x90FD;&#x58F0;&#x660E;&#x5728; gulpTaskList &#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F9D;&#x8D56;&#x5F88;&#x591A;&#x63D2;&#x4EF6;&#x6216;&#x6A21;&#x5757;&#xFF0C; gulpfile.js &#x4E5F;&#x662F;&#x76F8;&#x5F53;&#x957F;&#xFF0C;&#x9C7C;&#x548C;&#x718A;&#x638C;&#x4E0D;&#x53EF;&#x517C;&#x5F97;&#xFF0C;&#x5728;&#x73B0;&#x5728;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EA;&#x80FD;&#x5BFB;&#x627E;&#x6700;&#x4F73;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848; </p>
<h2 id="&#x91CD;&#x6784;&#x8FED;&#x4EE3;3">&#x91CD;&#x6784;&#x8FED;&#x4EE3;3</h2><p>&#x5176;&#x5B9E;&#x7B2C;&#x4E8C;&#x90E8;&#x8FED;&#x4EE3;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x5927;&#x90E8;&#x5206;&#x9700;&#x6C42;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x6709;&#x5C0F;&#x4F19;&#x4F34;&#x62B1;&#x6028;&#xFF0C;&#x6709;&#x4E9B;&#x5B50;&#x4EFB;&#x52A1;&#x6709;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x80FD;&#x4E0D;&#x80FD;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;so &#x7EE7;&#x7EED;&#x7FFB;&#x9605;&#x6587;&#x6863;</p>
<p>&#x53C2;&#x8003;&#x6587;&#x6863; <a href="https://github.com/gulpjs/gulp/blob/master/docs/recipes/using-external-config-file.md" target="_blank" rel="external">https://github.com/gulpjs/gulp/blob/master/docs/recipes/using-external…</a></p>
<h3 id="&#x4EE3;&#x7801;&#x7ED3;&#x6784;">&#x4EE3;&#x7801;&#x7ED3;&#x6784;</h3><pre><code>gulpfile<span class="built_in">.</span>js
gulp
<span class="subst">&amp;</span><span class="variable">#x251C</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>; config<span class="built_in">.</span>json  
<span class="subst">&amp;</span><span class="variable">#x251C</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>; tasks<span class="subst">/</span>
    <span class="subst">&amp;</span><span class="variable">#x251C</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>; xxxx<span class="built_in">.</span>js
    <span class="subst">&amp;</span><span class="variable">#x251C</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>; xxxx<span class="built_in">.</span>js
    <span class="subst">&amp;</span><span class="variable">#x2514</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>;<span class="subst">&amp;</span><span class="variable">#x2500</span>; image<span class="built_in">.</span>js
</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x6587;&#x4EF6;&#x5939;&#x5C42;&#x6B21;&#x53D8;&#x4E86;</p>
<h3 id="config-json">config.json</h3><pre><code><span class="collection">{
    &amp;quot;pnglevel&amp;quot;: <span class="number">2</span>
}</span>
</code></pre><h3 id="gulpfile-js-2">gulpfile.js</h3><pre><code><span class="keyword">var</span> gulp = <span class="keyword">require</span>(&amp;apos;gulp&amp;apos;)
  , config = <span class="keyword">require</span>(&amp;apos;./gulp/config.json&amp;apos;);
  , gulpLoadPlugins = <span class="keyword">require</span>(&amp;apos;gulp-load-plugins&amp;apos;)
  , gulpTaskList = <span class="keyword">require</span>(&amp;apos;fs&amp;apos;).readdirSync(&amp;apos;./gulp/tasks/&amp;apos;)
  ;

gulpLoadPlugins.imagemin = <span class="keyword">require</span>(&amp;apos;gulp-imagemin&amp;apos;);

gulpTaskList.<span class="keyword">forEach</span>(<span class="function"><span class="keyword">function</span><span class="params">(taskfile)</span> </span>{
    <span class="keyword">require</span>(&amp;apos;./gulp/tasks/&amp;apos; + taskfile)(gulp, gulpLoadPlugins, config);
});
</code></pre><h3 id="image-js-2">image.js</h3><pre><code><span class="function"><span class="keyword">module</span>.<span class="title">exports</span> =</span> <span class="function"><span class="keyword">function</span> <span class="params">(gulp, Plugin, config)</span> {</span>
    gulp.task<span class="params">(&amp;apos;img&amp;apos;, function<span class="params">()</span> {
        return gulp.src<span class="params">(&amp;apos;./images/**/*.*&amp;apos;)</span>
            .pipe<span class="params">(Plugin.imagemin<span class="params">({
                optimizationLevel: config.pnglevel,
                progressive: <span class="literal">true</span>
            })</span>)</span>
            .pipe<span class="params">(gulp.dest<span class="params">(&amp;apos;./imagemini&amp;apos;)</span>)</span>
    })</span>;
};
</code></pre><p>&#x6B64;&#x6B21;&#x8FED;&#x4EE3;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x6211;&#x628A;&#x5B50;&#x4EFB;&#x52A1;&#x4E2D;&#x901A;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x90FD;&#x5199;&#x5230; ./gulp/config.json &#x4E2D;&#xFF0C;&#x5168;&#x5C40;&#x914D;&#x7F6E; </p>
<h2 id="&#x91CD;&#x6784;&#x8FED;&#x4EE3;4">&#x91CD;&#x6784;&#x8FED;&#x4EE3;4</h2><p>&#x6B64;&#x6B21;&#x8FED;&#x4EE3;&#x7D27;&#x8DDF;&#x8FED;&#x4EE3;3&#xFF0C; json &#x4E0D;&#x591F;&#x5B8C;&#x7F8E;&#xFF0C;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x53BB;&#x5199; &quot;&quot; , &#x8FD9;&#x91CC;&#x6211;&#x628A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x6A21;&#x5757; </p>
<p>&#x5373;&#x8FED;&#x4EE3;3 &#x4E2D;&#x7684; config.json &#x53D8;&#x6210;&#x4E86; config.js</p>
<h3 id="config-js">config.js</h3><pre><code><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
  <span class="keyword">var</span> config = {
      pnglevel: <span class="number">2</span>
  };
  <span class="keyword">return</span> config;
};
</code></pre><h3 id="gulpfile-js_&#x52A0;&#x8F7D;">gulpfile.js &#x52A0;&#x8F7D;</h3><pre><code><span class="reserved">var</span> config = <span class="built_in">require</span>(&amp;apos;./gulp/gulp.config&amp;apos;)();
</code></pre><p>&#x5176;&#x4ED6;&#x4E0D;&#x53D8;&#xFF0C;&#x5F53;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x5C31;&#x53D1;&#x73B0;&#x597D;&#x5904;&#x591A;&#x591A;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6A21;&#x5757;&#x4E2D;&#x6DFB;&#x52A0;&#x51FD;&#x6570;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x628A;&#x914D;&#x7F6E;&#x62C6;&#x5206;&#xFF0C;&#x6839;&#x636E;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x8981;&#xFF0C;&#x81EA;&#x7531;&#x8C03;&#x6574;</p>
<h2 id="&#x540E;&#x8BB0;">&#x540E;&#x8BB0;</h2><p>&#x901A;&#x8FC7;4&#x6B65;&#x7684;&#x8FED;&#x4EE3;&#xFF0C;&#x6574;&#x4E2A;&#x4EE3;&#x7801;&#x7EC4;&#x7EC7;&#x67B6;&#x6784;&#x5C31;&#x6E05;&#x6670;&#x591A;&#x4E86;&#xFF0C;&#x5F88;&#x611F;&#x8C22;&#x8FD9;&#x4E48;&#x591A;&#x70ED;&#x7231;&#x5F00;&#x6E90;&#xFF0C;&#x4E50;&#x4E8E;&#x52A9;&#x4EBA;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x8C22;&#x8C22;</p>
<p>&#x6CE8;&#x610F;&#xFF1A; &#x5B50;&#x4EFB;&#x52A1;&#x4E2D;&#x6CE8;&#x610F;&#x6587;&#x4EF6;&#x5939;&#x7684;&#x5C42;&#x6B21;&#xFF0C;&#x5B50;&#x4EFB;&#x52A1;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x662F;&#x4EE5; gulpfile.js &#x4E3A;&#x57FA;&#x51C6;&#xFF0C;&#x56E0;&#x4E3A; gulpfile.js &#x628A;&#x5B50;&#x4EFB;&#x52A1;&#x90FD;&#x5305;&#x542B;&#x8FDB;&#x6765;&#x4E86; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9fab460/" title="Gulp前端代码构建工具 -" itemprop="url">Gulp前端代码构建工具 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:23.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x6700;&#x8FD1;&#x5728;&#x5B66;&#x4E60;nodejs express&#x5F00;&#x53D1;&#x7F51;&#x7AD9;&#xFF0C;&#x63A5;&#x89E6;&#x5230;&#x5F88;&#x591A;&#x65B0;&#x4E1C;&#x897F;&#xFF0C;Gulp&#x5C31;&#x662F;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#xFF1B;</p>
<p>Gulp&#x662F;&#x4E00;&#x4E2A;&#x6784;&#x5EFA;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x5728;&#x7F51;&#x7AD9;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x81EA;&#x52A8;&#x6267;&#x884C;&#x5E38;&#x89C1;&#x4EFB;&#x52A1;&#x3002;</p>
<p>Gulp&#x662F;&#x57FA;&#x4E8E;Node.js&#x6784;&#x5EFA;&#x7684;&#xFF0C;&#x56E0;&#x6B64;Gulp&#x6E90;&#x6587;&#x4EF6;&#x548C;&#x4F60;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x4EFB;&#x52A1;&#x7684;Gulp&#x6587;&#x4EF6;&#x90FD;&#x88AB;&#x5199;&#x8FDB;&#x4E86;JavaScript&#xFF08;&#x6216;&#x8005;CoffeeScript&#xFF09;&#x91CC;&#x3002;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x81EA;&#x5DF1;&#x719F;&#x6089;&#x7684;&#x8BED;&#x8A00;&#x6765;&#x7F16;&#x5199;&#x4EFB;&#x52A1;&#x53BB;lint JavaScript&#x548C;CSS&#x3001;&#x89E3;&#x6790;&#x6A21;&#x677F;&#x4EE5;&#x53CA;&#x5728;&#x6587;&#x4EF6;&#x53D8;&#x52A8;&#x65F6;&#x7F16;&#x8BD1;LESS&#x6587;&#x4EF6;&#xFF08;&#x5F53;&#x7136;&#x8FD9;&#x4E9B;&#x53EA;&#x662F;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x4F8B;&#x5B50;&#xFF09;&#x3002; </p>
<p>Gulp&#x672C;&#x8EAB;&#x867D;&#x7136;&#x4E0D;&#x80FD;&#x5B8C;&#x6210;&#x5F88;&#x591A;&#x4EFB;&#x52A1;&#xFF0C;&#x4F46;&#x5B83;&#x6709;&#x5927;&#x91CF;&#x63D2;&#x4EF6;&#x53EF;&#x7528;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x63D2;&#x4EF6;&#x9875;&#x9762;&#x6216;&#x8005;&#x5728;npm&#x641C;&#x7D22;gulpplugin&#x5C31;&#x80FD;&#x770B;&#x5230;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6709;&#x4E9B;&#x63D2;&#x4EF6;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6267;&#x884C;JSHint&#x3001;&#x7F16;&#x8BD1;CoffeeScript&#xFF0C;&#x6267;&#x884C;Mocha&#x6D4B;&#x8BD5;&#xFF0C;&#x751A;&#x81F3;&#x66F4;&#x65B0;&#x7248;&#x672C;&#x53F7;&#x3002; </p>
<h2 id="1&#x3001;Gulp&#x5B89;&#x88C5;">1&#x3001;Gulp&#x5B89;&#x88C5;</h2><p>Gulp&#x662F;&#x57FA;&#x4E8E; Node.js&#x7684;&#xFF0C;&#x6545;&#x8981;&#x9996;&#x5148;&#x5B89;&#x88C5; Node.js</p>
<pre><code>$ npm <span class="keyword">install</span> -g gulp  
</code></pre><p>$ npm install &#x2014;-save-dev gulp</p>
<h2 id="2&#x3001;Gulp&#x4F7F;&#x7528;">2&#x3001;Gulp&#x4F7F;&#x7528;</h2><p>Gulp&#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x662F;&#x4EE5;&#x63D2;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#xFF0C;&#x672C;&#x6B21;&#x793A;&#x4F8B;&#x4EE5; gulp-jshint &#x4E3A;&#x4F8B;&#xFF0C;&#x5C55;&#x793A;Gulp&#x7684;&#x5E38;&#x89C4;&#x7528;&#x6CD5;&#x3002;</p>
<h4 id="&#x5B89;&#x88C5;_gulp-jshint">&#x5B89;&#x88C5; gulp-jshint</h4><pre><code>$ npm <span class="keyword">install</span> gulp-jshint &amp;<span class="comment">#x2013;save-dev</span>
</code></pre><h4 id="&#x521B;&#x5EFA;_gulpfile-js">&#x521B;&#x5EFA; gulpfile.js</h4><p>gulp&#x9879;&#x76EE;&#x9875; &#x6709;&#x4E00;&#x4E2A; Sample gulpfile&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4F1A;&#x5199;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x53C2;&#x8003;&#x4E00;&#x4E0B;&#x5C31;OK&#x4E86;&#x3002;</p>
<pre><code><span class="reserved">var</span> gulp = <span class="built_in">require</span>(&amp;apos;gulp&amp;apos;);  
</code></pre><p>var jshint = require(&apos;gulp-jshint&apos;);<br>var paths = {<br>    scripts: &apos;js/<em>*/</em>.js&apos;,<br>};<br>gulp.task(&apos;lint&apos;, function() {<br>  return gulp.src(paths.scripts)<br>      .pipe(jshint())<br>    .pipe(jshint.reporter(&apos;default&apos;));<br>});</p>
<h4 id="&#x7136;&#x540E;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x884C;">&#x7136;&#x540E;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x884C;</h4><pre><code><span class="variable">$ </span>gulp lint
</code></pre><p>&#x672C;&#x6587;&#x51FA;&#x5904;&#xFF1A; <a href="http://chenyc.gitcafe.io/2015/06/05/gulp-study/" target="_blank" rel="external">http://chenyc.gitcafe.io/2015/06/05/gulp-study/</a></p>
<p>&#x8F6C;&#x8F7D;&#x8BF7;&#x5728;&#x5F00;&#x5934;&#x6CE8;&#x660E;&#x672C;&#x6587;&#x51FA;&#x5904;&#x3002;</p>
<p>&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5206;&#x4EAB;Swift&#x5F00;&#x53D1;&#xFF0C;Android &#x5F00;&#x53D1;&#x548C;&#x4E92;&#x8054;&#x7F51;&#x5185;&#x5BB9;</p>
<p>&#x5FAE;&#x4FE1;&#x53F7;&#xFF1A; <a href="http://weixin.sogou.com/gzh?openid=oIWsFt8OmZE0Gy3LRolV8JNGNWyw" target="_blank" rel="external">Swift&#x5F00;&#x53D1;</a></p>
<p><img src="http://taojinke.github.io/img/20150702/9faa0d8.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9fa48f4/" title="给已有的gulp工程里增加webpack -" itemprop="url">给已有的gulp工程里增加webpack -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:23.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x5728;&#x5DF2;&#x6709;&#x7684;gulp&#x5DE5;&#x7A0B;&#x91CC;&#x4F7F;&#x7528;webpack&#x6253;&#x5305;js </p>
<p>&#x601D;&#x8DEF;&#xFF1A;&#x628A;webpack&#x7684;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;&#x539F;&#x6765;gulp&#x91CC;js&#x7684;&#x8F93;&#x5165;&#x3002; </p>
<ul>
<li>yo gulp-webapp</li>
<li><p>&#x589E;&#x52A0;webpack.config.js</p>
<p>  var path = require(&quot;path&quot;);<br>  module.exports = {</p>
<pre><code><span class="string">entry:</span> &amp;quot;.<span class="regexp">/app/</span>src<span class="regexp">/js/</span>entry.js&amp;quot;,
<span class="string">output:</span> {
<span class="label">    path:</span> path.join(__dirname, &amp;quot;app/scripts&amp;quot;),
<span class="label">    filename:</span> &amp;quot;main.js&amp;quot;
},
<span class="string">module:</span> {
<span class="label">    loaders:</span> [
        { <span class="string">test:</span> <span class="regexp">/\.css$/</span>, <span class="string">loader:</span> &amp;quot;style!css&amp;quot; },
        <span class="comment">// required for react jsx</span>
        { <span class="string">test:</span> <span class="regexp">/\.js$/</span>,    <span class="string">loader:</span> &amp;quot;jsx-loader&amp;quot; }
    ]
}
</code></pre><p>  };</p>
</li>
<li><p>&#x5728;gulpfile.js&#x4E2D;&#x589E;&#x52A0;</p>
<p>  var gutil = require(&quot;gulp-util&quot;);<br>  var webpack = require(&quot;webpack&quot;);<br>  var webpackConfig = require(&quot;./webpack.config.js&quot;);<br>  gulp.task(&quot;webpack&quot;, function(callback) {</p>
<pre><code><span class="keyword">var</span> myConfig = Object.create(webpackConfig);
<span class="comment">// run webpack</span>
webpack(
    <span class="comment">// configuration</span>
    myConfig
, <span class="function"><span class="keyword">function</span><span class="params">(err, stats)</span> </span>{
    <span class="comment">// if(err) throw new gutil.PluginError(&amp;quot;webpack&amp;quot;, err);</span>
    <span class="comment">// gutil.log(&amp;quot;[webpack]&amp;quot;, stats.toString({</span>
    <span class="comment">//     // output options</span>
    <span class="comment">// }));</span>
    <span class="keyword">callback</span>();
});
</code></pre><p>  });</p>
</li>
<li><p>&#x5728;serve&#x4EFB;&#x52A1;&#x91CC;,&#x5176;&#x4ED6; gulp.watch(…); &#x540E;&#x9762;&#x589E;&#x52A0; </p>
<p>  gulp.watch(&apos;app/src/<em>*/</em>.js&apos;, [&apos;webpack&apos;]);</p>
</li>
</ul>
<p>&#x5DE5;&#x7A0B;&#x6837;&#x4F8B;&#xFF1A;</p>
<p><a href="https://bitbucket.org/fangj/yo-gulp-webapp-webpack" target="_blank" rel="external">https://bitbucket.org/fangj/yo-gulp-webapp-webpack</a></p>
<p>&#x53C2;&#x8003;:</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a><a href="/tags/Webpack/">Webpack</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9ff917e/" title="NodeJS异常处理uncaughtException篇 -" itemprop="url">NodeJS异常处理uncaughtException篇 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:23.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> &#x5F88;&#x591A; NodeJS &#x7684;&#x5F00;&#x53D1;&#x8005;&#x5728;&#x62B1;&#x6028;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x592A;&#x9EBB;&#x70E6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x5217;&#x535A;&#x5BA2;&#x68B3;&#x7406;&#x4E00;&#x4E0B;NodeJS&#x4E2D;&#x5E38;&#x89C1;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x7684;&#x624B;&#x6BB5;&#x3002; &#x548C;&#x5927;&#x591A;&#x6570;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E00;&#x6837;&#xFF0C;&#x5728; NodeJS &#x91CC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; throw &#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#xFF1A; </p>
<pre><code><span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Error</span>(&amp;apos;<span class="keyword">Catch</span> <span class="keyword">me</span>&amp;apos;);
</code></pre><p>&#x4E3A;&#x4E86;&#x6355;&#x83B7;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x9700;&#x8981;&#x628A;&#x4EE3;&#x7801;&#x5305;&#x5728; Try Catch &#x4E2D;&#xFF1A; </p>
<pre><code><span class="keyword">try</span>{
     <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(&amp;apos;<span class="keyword">Catch</span> me&amp;apos;);
}<span class="keyword">catch</span>(e){
    // <span class="built_in">error</span> captured
}
</code></pre><p>&#x7136;&#x800C;&#xFF0C;&#x7531;&#x4E8E; NodeJS &#x7684;&#x5F02;&#x6B65;&#x7279;&#x6027;&#xFF0C;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x53EA;&#x9700;&#x7A0D;&#x52A0;&#x6539;&#x9020;&#x5C31;&#x4F1A;&#x5931;&#x6548;&#xFF1A;</p>
<pre><code><span class="keyword">try</span>{
    process.nextTick(<span class="function"><span class="keyword">function</span> <span class="title">my_app</span>(<span class="params"></span>)</span>{
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(&amp;apos;Catch me&amp;apos;);
    })
}<span class="keyword">catch</span>(e){
    <span class="comment">// never called</span>
}
</code></pre><p>&#x5728;&#x73B0;&#x5B9E;&#x4E16;&#x754C;&#x91CC;&#xFF0C;&#x5F02;&#x5E38;&#x603B;&#x662F;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x67D0;&#x4E2A;&#x6A21;&#x5757;&#x4E2D;&#x3002;&#x6240;&#x8C13;&#x6A21;&#x5757;&#x5C31;&#x662F;&#x80FD;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x5355;&#x5143;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x51FD;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x88AB;&#x770B;&#x505A;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x3002;&#x968F;&#x7740;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#x884C;&#x6570;&#x589E;&#x591A;&#xFF0C;&#x5F02;&#x6B65;&#x5D4C;&#x5957;&#x7684;&#x590D;&#x6742;&#x6027;&#x52A0;&#x5F3A;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x5F02;&#x5E38;&#x6CA1;&#x6355;&#x83B7;&#x7684;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x3002;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x5F88;&#x5F3A;&#x5065;&#x58EE;&#x6027;&#x7684; NodeJS &#x5E94;&#x7528;&#xFF0C;&#x4F1A;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x672A;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x5C31;&#x6574;&#x4E2A;&#x6302;&#x6389;&#xFF0C;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#x3002;&#x8981;&#x6539;&#x53D8;&#x5927;&#x5BB6;&#x89C9;&#x5F97;NodeJS&#x662F;&#x8106;&#x5F31;&#x7684;&#x8FD9;&#x4E2A;&#x8BA4;&#x8BC6;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x52A0;&#x6DF1;&#x5BF9;&#x8FD9;&#x95E8;&#x8BED;&#x8A00;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x673A;&#x5236;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>
<h2 id="uncaughtException">uncaughtException</h2><p>uncaughtException &#x5176;&#x5B9E;&#x662F; NodeJS &#x8FDB;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x8FDB;&#x7A0B;&#x91CC;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x800C;&#x6CA1;&#x6709;&#x88AB;&#x4EFB;&#x4F55; Try Catch &#x6355;&#x83B7;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5148;&#x770B;&#x770B;&#x540C;&#x6B65;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x4F8B;&#x5B50;&#x3002; </p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">external</span><span class="params">()</span> </span>{
    <span class="keyword">throw</span> <span class="keyword">new</span> Error(&amp;apos;Catch me&amp;apos;);
}
<span class="function"><span class="keyword">function</span> <span class="title">internal</span><span class="params">()</span> </span>{
    external();
}
<span class="keyword">internal</span>(); <span class="comment">//error will be thrown</span>
</code></pre><p>&#x5728;&#x547D;&#x4EE4;&#x884C;&#x91CC;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x811A;&#x672C;&#x4F1A;&#x5728;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x90A3;&#x4E00;&#x884C;&#x4E2D;&#x65AD;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x7531;&#x4E8E;&#x6CA1;&#x6709; Try Catch &#xFF0C;&#x5F02;&#x5E38;&#x4F1A;&#x4E00;&#x76F4;&#x5192;&#x6CE1;&#x76F4;&#x5230;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x4E3A;&#x6B62;&#xFF0C;&#x800C;NodeJS&#x5BF9;&#x5F02;&#x5E38;&#x7684;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x5904;&#x7406;&#x7684;&#x4EE3;&#x7801; <em>&#x7C7B;&#x4F3C;</em> &#x4E8E;&#xFF1A; </p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">_MyFatalException</span><span class="params">(err)</span>{</span>
    <span class="keyword">if</span><span class="params">(!process.emit<span class="params">(&amp;apos;uncaughtException&amp;apos;,err)</span>)</span>{
        console.error<span class="params">(err.stack)</span>;
        process.emit<span class="params">(&amp;apos;exit&amp;apos;,<span class="number">1</span>)</span>;
    }
}
</code></pre><p>NodeJS&#x5BF9;&#x4E8E;&#x672A;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x7684;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x662F;&#xFF1A; - &#x89E6;&#x53D1; uncaughtException &#x4E8B;&#x4EF6; - &#x5982;&#x679C; uncaughtException &#x6CA1;&#x6709;&#x88AB;&#x76D1;&#x542C;&#xFF0C;&#x90A3;&#x4E48; - &#x6253;&#x5370;&#x5F02;&#x5E38;&#x7684;&#x5806;&#x6808;&#x4FE1;&#x606F; - &#x89E6;&#x53D1;&#x8FDB;&#x7A0B;&#x7684; exit &#x4E8B;&#x4EF6; </p>
<p>&#x5982;&#x679C;&#x4F60;&#x6B63;&#x5728;&#x7528; NodeJS &#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x80AF;&#x5B9A;&#x4E0D;&#x5E0C;&#x671B;&#x5076;&#x7136;&#x7684;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x8BA9;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x6302;&#x6389;&#x3002;&#x90A3;&#x4E48;&#x662F;&#x4E0D;&#x662F;&#x53EA;&#x8981;&#x76D1;&#x542C;&#x4E86; uncaughtException &#x5C31;&#x53EF;&#x4EE5;&#x963B;&#x6B62;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x5462;&#xFF1F; &#x7B54;&#x6848;&#x662F;&#x53EF;&#x4EE5;&#xFF0C; <strong>&#x4F46;&#x662F;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF01;</strong> &#x3002;&#x770B;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A; </p>
<pre><code><span class="keyword">var</span> express = require(&amp;apos;express&amp;apos;);
<span class="function"><span class="keyword">function</span> <span class="title">external</span><span class="params">(cb)</span> </span>{
    process.nextTick(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{
    <span class="keyword">throw</span> <span class="keyword">new</span> Error();
    cb.call(<span class="literal">null</span>, &amp;apos;sunny&amp;apos;);
})
}
<span class="keyword">var</span> app = express();
app.<span class="keyword">get</span>(&amp;apos;/weather&amp;apos;, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>{
    external(<span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>{
        res.end(&amp;apos;Weather of Beijing <span class="keyword">is</span> &amp;apos; + data);
    }) 
})
app.listen(<span class="number">8018</span>);
<span class="function"><span class="keyword">function</span> <span class="title">noop</span><span class="params">()</span></span>{}
process.on(&amp;apos;uncaughtException&amp;apos;, noop)
</code></pre><p>&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5047;&#x8BBE;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x7AD9;&#x70B9;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5F53;&#x5730;&#x7684;&#x5929;&#x6C14;&#xFF0C;&#x6211;&#x4EEC;&#x7528; apache2-utils &#x6765;&#x6A21;&#x62DF;&#x8BF7;&#x6C42; </p>
<pre><code>&amp;gt; ab -n <span class="number">1000</span> -c <span class="number">20</span> <span class="string">http:</span><span class="comment">//localhost:8018/weather</span>
</code></pre><p>&#x7CDF;&#x7CD5;&#xFF01;&#x8BF7;&#x6C42;&#x4E00;&#x76F4;&#x5728;&#x7B49;&#x5F85;&#xFF0C;&#x5185;&#x5B58;&#x4E0A;&#x6DA8;&#x3002;&#x539F;&#x56E0;&#x5728;&#x4E8E; res.end &#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x73B0;&#x6709;&#x7684; I/O &#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5DF2;&#x7ECF;&#x5F00;&#x8F9F;&#x7684;&#x8D44;&#x6E90;&#x4E0D;&#x4EC5;&#x4E0D;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#xFF0C;&#x800C;&#x4E14;&#x670D;&#x52A1;&#x5668;&#x8FD8;&#x5728;&#x4E0D;&#x77E5;&#x75B2;&#x5026;&#x5730;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x3002; </p>
<p>&#x5728; NodeJS &#x4E2D;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x662F;&#x4EE3;&#x4EF7;&#x9AD8;&#x6602;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x4E0D;&#x5C0F;&#x5FC3;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x548C;&#x8BA9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5904;&#x4E8E;&#x4E0D;&#x7A33;&#x5B9A;&#x7684;&#x72B6;&#x6001;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x5065;&#x58EE;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528; Cluster &#x6A21;&#x5F0F;&#xFF0C;&#x7531;&#x4E4B;&#x800C;&#x6765;&#x7684;&#x63A8;&#x8350;&#x505A;&#x6CD5;&#x662F;&#xFF1A; - &#x9488;&#x5BF9;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x7684;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x4EE3;&#x7801; - &#x51FA;&#x9519;&#x7684;Worker&#x4E0D;&#x518D;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x8BF7;&#x6C42; - &#x9000;&#x51FA;&#x5173;&#x95ED;Worker&#x8FDB;&#x7A0B; </p>
<p>&#x672C;&#x6587;&#x7CFB; <a href="http://oneapm.com/index.html?utm_source=Common&amp;utm_medium=Articles&amp;utm_campaign=TechnicalArticles&amp;from=matefijuno" target="_blank" rel="external">OneAPM</a> &#x5DE5;&#x7A0B;&#x5E08;&#x7F16;&#x8BD1;&#x6574;&#x7406;&#x3002;OneAPM&#x662F;&#x4E2D;&#x56FD;&#x57FA;&#x7840;&#x8F6F;&#x4EF6;&#x9886;&#x57DF;&#x7684;&#x65B0;&#x5174;&#x9886;&#x519B;&#x4F01;&#x4E1A;&#xFF0C;&#x80FD;&#x5E2E;&#x52A9;&#x4F01;&#x4E1A;&#x7528;&#x6237;&#x548C;&#x5F00;&#x53D1;&#x8005;&#x8F7B;&#x677E;&#x5B9E;&#x73B0;&#xFF1A;&#x7F13;&#x6162;&#x7684;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x548C;SQL&#x8BED;&#x53E5;&#x7684;&#x5B9E;&#x65F6;&#x6293;&#x53D6;&#x3002;&#x60F3;&#x9605;&#x8BFB;&#x66F4;&#x591A;&#x6280;&#x672F;&#x6587;&#x7AE0;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;OneAPM <a href="http://code.oneapm.com/?hmsr=media&amp;hmmd=&amp;hmpl=&amp;hmkw=&amp;hmci=" target="_blank" rel="external">&#x5B98;&#x65B9;&#x6280;&#x672F;&#x535A;&#x5BA2;</a> &#x3002; </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9aeab0b/" title="通过Anuglar Material串串学客户端开发 -" itemprop="url">通过Anuglar Material串串学客户端开发 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="https://github.com/angular/material" target="_blank" rel="external">Angular Material</a> &#x4E0D;&#x4EC5;&#x4EC5;&#x6709;&#x672C;&#x8EAB;&#x6846;&#x67B6;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x8FD8;&#x6709;&#x5728;&#x8FD9;&#x4E2A;&#x6846;&#x67B6;&#x4E0A;&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x5E94;&#x7528; <a href="https://github.com/angular/material/tree/master/docs" target="_blank" rel="external">docs</a> &#x3002;&#x66F4;&#x4E3A;&#x5F3A;&#x5927;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x662F;&#x771F;&#x6B63;&#x7684;&#x4EA7;&#x54C1;&#x7F51;&#x7AD9;&#xFF1A;&#x5C31;&#x662F;&#x5B83;&#x7684; <a href="https://material.angularjs.org/latest/#/" target="_blank" rel="external">&#x5B98;&#x7F51;</a> &#x3002;&#x6211;&#x6709;&#x7406;&#x7531;&#x76F8;&#x4FE1;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F51;&#x7AD9;&#x662F;&#x4ECE;&#x6E90;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x53D1;&#x5E03;&#x7684;&#xFF0C;&#x4ECE;&#x7F51;&#x5740;&#x7684;&#x6700;&#x540E;&#x90A3;&#x4E2A; /latest ,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x7AEF;&#x502A;&#x3002; </p>
<p>&#x4ECE;&#x8FD9;&#x4E2A;&#x4EA7;&#x54C1;&#x672C;&#x8EAB;&#x5165;&#x624B;&#x4E0D;&#x5931;&#x4E3A;&#x5B66;&#x4E60;&#x7684;&#x6377;&#x5F84;&#x3002;</p>
<h2 id="&#x5165;&#x53E3;gulpfile-js">&#x5165;&#x53E3;gulpfile.js</h2><p>C/C#&#x547D;&#x4EE4;&#x884C;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5BFB;&#x627E; Main() &#x65B9;&#x6CD5;&#xFF1B;C#&#x7684;Web&#x5E94;&#x7528;&#x6211;&#x4EEC;&#x4F1A;&#x627E; Global.asax &#xFF1B;&#x90A3;&#x4E48;&#x4E00;&#x4E2A;NodeJS&#x5E94;&#x7528;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x627E; gulpfile.js &#x3002; </p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x4EE5;&#x524D;&#x7684;&#x5F88;&#x591A;&#x9879;&#x76EE;&#x90FD;&#x662F;&#x7528;gruntjs&#xFF0C;&#x800C;&#x8FD1;&#x671F;&#x8D8B;&#x52BF;&#x662F;&#x8F6C;&#x5411;gulpjs,&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x611F;&#x89C9;&#x4E5F;&#x662F;gulpjs&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x6027;&#x80FD;&#x4E5F;&#x4E0D;&#x9519;&#x3002;</p>
<p>&#x548C;&#x524D;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;gulp.js&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x5E94;&#x7528;&#x8FD0;&#x884C;&#x7684;&#x5165;&#x53E3;&#xFF0C;&#x800C;&#x662F;&#x9879;&#x76EE;&#x7F16;&#x8BD1;&#x7684;&#x5165;&#x53E3;&#x3002;gulp&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x5FAE;&#x8F6F;&#x7684;MSBuild&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x7F16;&#x8BD1;&#x4EFB;&#x52A1;&#x3002;</p>
<h2 id="Javascript&#x4E5F;&#x6709;&#x7F16;&#x8BD1;">Javascript&#x4E5F;&#x6709;&#x7F16;&#x8BD1;</h2><p>&#x7F16;&#x8BD1;&#xFF0C;JS&#x6587;&#x4EF6;&#x8FD8;&#x8981;&#x7F16;&#x8BD1;&#xFF1F;&#x662F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x7528;&#x7684;&#x5370;&#x8C61;&#x8FD8;&#x505C;&#x7559;&#x5728;html&#x6587;&#x4EF6;&#x4E2D;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#xFFFD;&#xFFFD;&#xFFFD;&#x5199;&#x7684;JS&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x5C31;&#x5DF2;&#x7ECF;&#x5927;&#x5927;&#x843D;&#x4F0D;&#x4E86;&#x3002;&#x81F3;&#x5C11;&#xFF0C;&#x5F88;&#x591A;&#x7684;javascript&#x7684;&#x6846;&#x67B6;&#x9879;&#x76EE;&#xFF0C;&#x5982;jQuery, AngularJS&#x7B49;&#x7B49;&#xFF0C;&#x90FD;&#x6709;&#x7F16;&#x8BD1;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x867D;&#x7136;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F16;&#x8BD1;&#x548C;&#x6211;&#x4EEC;&#x7F16;&#x8BD1;&#x578B;&#x8BED;&#x8A00;&#xFF08;&#x5982;C&#xFF0C;C#&#x7B49;&#xFF09;&#x7684;&#x7F16;&#x8BD1;&#x6280;&#x672F;&#x6709;&#x4E9B;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x89D2;&#x8272;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF1A;&#x7531;&#x4E8E;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x548C;&#x4EA7;&#x54C1;&#x73AF;&#x5883;&#x9694;&#x79BB;&#xFF0C;&#x8FD9;&#x79CD;&#x9694;&#x79BB;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x89E3;&#x8026;&#x3002;</p>
<h2 id="&#x7F16;&#x8BD1;&#x5373;&#x89E3;&#x8026;">&#x7F16;&#x8BD1;&#x5373;&#x89E3;&#x8026;</h2><p>&#x89E3;&#x8026;&#x5E26;&#x6765;&#x7684;&#x4EF7;&#x503C;&#x5C31;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x5B89;&#x6392;&#x5F00;&#x53D1;&#x65F6;&#x7684;&#x6587;&#x4EF6;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x4E0D;&#x8981;&#x8FC7;&#x591A;&#x8003;&#x8651;&#x4EA7;&#x54C1;&#x6587;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x9700;&#x6C42;&#x3002;&#x6BD4;&#x5982;&#xFF1A;&#x5F00;&#x53D1;&#x65F6;&#x6211;&#x4EEC;&#x66F4;&#x5E0C;&#x671B;&#x6839;&#x636E;&#x6A21;&#x5757;&#x548C;&#x8D23;&#x4EFB;&#x7684;&#x5212;&#x5206;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#xFF08;&#x6587;&#x4EF6;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#xFF09;&#xFF0C;&#x800C;&#x4EA7;&#x54C1;&#x9636;&#x6BB5;&#xFF0C;&#x5219;&#x5E0C;&#x671B;&#x5185;&#x5BB9;&#x96C6;&#x4E2D;&#xFF08;&#x6587;&#x4EF6;&#x8D8A;&#x5C11;&#x8D8A;&#x597D;&#xFF09;&#x3002;&#x5BF9;&#x5E94;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#xFF0C;javascript&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;concatenate(&#x5408;&#x5E76;&#x6587;&#x4EF6;)&#x3002;&#x4ECE;&#x5B9E;&#x73B0;&#x6280;&#x672F;&#x4E0A;&#x770B;&#xFF0C;&#x8FD9;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x795E;&#x5947;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x5B8C;&#x5168;&#x4F53;&#x73B0;&#x4E86;&#x7F16;&#x8BD1;&#x7684;&#x672C;&#x8D28;&#x3002;</p>
<h2 id="&#x4E24;&#x4E2A;gulpfile-js&#x6587;&#x4EF6;">&#x4E24;&#x4E2A;gulpfile.js&#x6587;&#x4EF6;</h2><p>&#x7136;&#x800C;&#xFF0C;&#x7F16;&#x8BD1;&#x4E0D;&#x662F;Gulp&#x7684;&#x5173;&#x952E;&#x8BCD;&#xFF0C;Gulp&#x7684;&#x5173;&#x952E;&#x8BCD;&#x662F;&#x4EFB;&#x52A1;&#xFF08;task&#xFF09;&#xFF0C;&#x66F4;&#x591A;&#x65F6;&#x5019;&#x6211;&#x628A;&#x5B83;&#x548C;Ant/nAnt&#x5BF9;&#x7B49;&#x6765;&#x770B;&#x3002;</p>
<p>&#x56DE;&#x5230; <a href="https://github.com/angular/material" target="_blank" rel="external">Angular Material</a> &#x7684;&#x6E90;&#x4EE3;&#x7801;&#x6765;&#x3002;&#x6211;&#x53D1;&#x73B0;&#x5B83;&#x5C45;&#x7136;&#x6709;&#x4E24;&#x4E2A;Gulp.js&#x6587;&#x4EF6;&#x3002;&#x4E00;&#x4E2A;&#x5728;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A; docs/gulpfile.js &#x3002;&#x4ECE;&#x8FD9;&#x6211;&#x5728;&#x4E86;&#x89E3;&#x5230;&#xFF0C;&#x4ED6;&#x5176;&#x5B9E;&#x662F;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;material&#x6846;&#x67B6;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x662F;&#x5B83;&#x7684;&#x5B98;&#x7F51;&#x3002;&#x5B83;&#x4E24;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x5199;&#x5230;&#x6709;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x5E93;&#xFF0C;&#x800C;&#x4E14;&#x56E0;&#x4E3A;&#x5B83;&#x5B98;&#x7F51;&#x672C;&#x8EAB;&#x4E5F;&#x4F7F;&#x7528;&#x4E86;material&#x6846;&#x67B6;&#xFF0C;&#x751A;&#x81F3;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x90FD;&#x662F;&#x4ECE;&#x6846;&#x67B6;&#x4E2D;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5199;&#x5230;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x5E93;&#x7684;&#x7406;&#x7531;&#x3002; </p>
<p>&#x7136;&#x800C;&#xFF0C;&#x4E24;&#x4E2A;&#x7F16;&#x8BD1;&#x6587;&#x4EF6;&#x66B4;&#x9732;&#x4E86;&#x5B83;&#x662F;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x7684;&#x4E8B;&#x5B9E;&#xFF0C;&#x81F3;&#x5C11;&#x662F;&#x4E24;&#x4E2A;&#x53D1;&#x5E03;&#xFF08;&#x53D1;&#x5E03;&#x548C;&#x9879;&#x76EE;&#x7684;&#x533A;&#x522B;&#xFF1F;&#xFF09;&#x3002; &#x4E24;&#x4E2A;&#x53D1;&#x5E03;&#x5C31;&#x662F;&#x4E24;&#x4E2A;&#x4EA7;&#x54C1;&#xFF0C;&#x53C8;&#x4E00;&#x6B21;&#x5370;&#x8BC1;&#x4E86;&#x7F16;&#x8BD1;&#x662F;&#x5F00;&#x53D1;&#x548C;&#x4EA7;&#x54C1;&#x7684;&#x89E3;&#x8026;&#x5668;&#xFF01;</p>
<h2 id="module-exports">module.exports</h2><p>&#x7136;&#x800C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x7F16;&#x8BD1;&#x6587;&#x4EF6; docs/gulpfile.js &#x4E2D;&#x5374;&#x770B;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x5947;&#x602A;&#x7684;&#x4E1C;&#x897F; module.exports = function(gulp, IS_RELEASE_BUILD) { &#x3002;&#x90A3;&#x4E48; module.exports &#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#x5462;&#xFF1F; </p>
<p>&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#xFF0C;javascript&#x6700;&#x5927;&#x7684;&#x8BDF;&#x75C5;&#x5C31;&#x662F;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x4E5F;&#x6210;&#x4E3A;&#x5927;&#x578B;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;&#x6700;&#x5927;&#x963B;&#x788D;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x4F7F;&#x7528;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x5F0F;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5982;&#x6A21;&#x5757;&#x6A21;&#x5F0F;&#xFF08;Module Pattern), &#x800C;node.js&#x8FD9;&#x5B9E;&#x73B0;&#x4E86;&#x6A21;&#x5757;&#x88C5;&#x8F7D;&#x7CFB;&#x7EDF;&#xFF0C;&#x6765;&#x89E3;&#x51B3;&#x7EC4;&#x4EF6;&#x5B9E;&#x73B0;&#x7684;&#x57FA;&#x672C;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x81EA;&#x4ECE;&#x5F00;&#x59CB;&#x7814;&#x7A76;&#x524D;&#x7AEF;&#xFF0C;&#x6211;&#x4E5F;&#x51E0;&#x4E2A;&#x76F8;&#x5173;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x5728;&#x773C;&#x524D;&#x6643;&#x8361;&#xFF0C; require()exports &#x7B49;&#x7B49;&#x3002;&#x5F53;&#x65F6;&#xFF0C;&#x56E0;&#x4E3A;&#x6CE8;&#x610F;&#x529B;&#x5728;&#x5176;&#x4ED6;&#x65B9;&#x9762;&#xFF0C;&#x4E00;&#x76F4;&#x4E5F;&#x6CA1;&#x4E0B;&#x51B3;&#x5FC3;&#x7814;&#x7A76;&#x6E05;&#x695A;&#x3002; &#x5C31;&#x5982;&#x4E0B;&#x9762; <a href="http://www.sitepoint.com/understanding-module-exports-exports-node-js/" target="_blank" rel="external">&#x6587;&#x7AE0;</a> &#x4E2D;&#x6240;&#x8BB2;&#xFF1A; </p>
<p>&#x4F5C;&#x4E3A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5E38;&#x5E38;&#x9762;&#x4E34;&#x8FD9;&#x6837;&#x7684;&#x56F0;&#x5883;&#xFF1A;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E0D;&#x719F;&#x6089;&#x7684;&#x4EE3;&#x7801;&#xFF08;&#x5E93;&#xFF09;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x7A76;&#x7ADF;&#x8981;&#x82B1;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x6765;&#x7814;&#x7A76;&#x5B83;&#x7684;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x7814;&#x7A76;&#x53C8;&#x8981;&#x6709;&#x591A;&#x6DF1;&#x5462;&#xFF1F;&#x7ECF;&#x5178;&#x7B54;&#x6848;&#x5C31;&#x662F;&#xFF0C;&#x5B66;&#x4E60;&#x5230;&#x8DB3;&#x591F;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5199;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x7B49;&#x5230;&#x65F6;&#x95F4;&#x5BB9;&#x8BB8;&#x5728;&#x8FDB;&#x4E00;&#x6B65;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x73B0;&#x5728;&#x5C31;&#x662F;&#x6DF1;&#x5165;&#x7814;&#x7A76; module.exports &#x7684;&#x65F6;&#x5019;&#x4E86;&#xFF01; </p>
<h2 id="Node-js&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x548C;&#x4F7F;&#x7528;&#x6A21;&#x5757;">Node.js&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x548C;&#x4F7F;&#x7528;&#x6A21;&#x5757;</h2><h3 id="&#x4F20;&#x7EDF;js&#x6587;&#x4EF6;">&#x4F20;&#x7EDF;js&#x6587;&#x4EF6;</h3><p>&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;js&#x6587;&#x4EF6;&#xFF0C; greeting.js ,&#x5B83;&#x7684;&#x529F;&#x80FD;&#x4E00;&#x770B;&#x5C31;&#x660E;&#x767D;&#xFF1A; &#x201C;`js //greetings.js sayHelloInEnglish = function() { return &#x201C;Hello&#x201D;; }; </p>
<p>sayHelloInSpanish = function() { return &#x201C;Hola&#x201D;; }; &#x8FD9;&#x91CC;&#x6709;&#x4E24;&#x51FD;&#x6570;&#x4E5F;&#x5C31;&#x662F;&#x4E24;&#x4E2A;&#x529F;&#x80FD;&#x3002; &#x201C;`</p>
<h3 id="&#x7528;&#x6A21;&#x5757;&#x5C01;&#x88C5;&#x7B80;&#x5355;js&#x6587;&#x4EF6;">&#x7528;&#x6A21;&#x5757;&#x5C01;&#x88C5;&#x7B80;&#x5355;js&#x6587;&#x4EF6;</h3><h4 id="i&gt;_&#x60F3;&#x8C61;&#x8BE5;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x6709;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;&#x662F;&#x7684;&#xFF0C;&#x60F3;&#x8C61;&#xFF09;">i&gt; &#x60F3;&#x8C61;&#x8BE5;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x6709;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;&#x662F;&#x7684;&#xFF0C;&#x60F3;&#x8C61;&#xFF09;</h4><p>js&lt;br /&gt; // var exports = module.exports ={};</p>
<h4 id="ii&gt;_&#x628A;&#x4EFB;&#x4F55;&#x8981;&#x91CD;&#x7528;&#xFF08;&#x5BFC;&#x51FA;&#xFF09;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;exports">ii&gt; &#x628A;&#x4EFB;&#x4F55;&#x8981;&#x91CD;&#x7528;&#xFF08;&#x5BFC;&#x51FA;&#xFF09;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;exports</h4><p>js&lt;br /&gt; exports.sayHelloInEnglish = function() {&lt;br /&gt; return &amp;quot;Hello&amp;quot;;&lt;br /&gt; };&lt;br /&gt; exports.sayHelloInSpanish = function() {&lt;br /&gt; return &amp;quot;Hola&amp;quot;;&lt;br /&gt; };</p>
<h4 id="iii&gt;_&#x4EE5;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x4E8B;&#x60C5;">iii&gt; &#x4EE5;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x4E8B;&#x60C5;</h4><p>&#x201C;`js module.exports = { sayHelloInEnglish = function() { return &#x201C;Hello&#x201D;; };</p>
<pre><code>sayHelloInSpanish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> &amp;quot;Hola&amp;quot;;
};
</code></pre><p>}; &#x201C;`</p>
<p>&#x8FD9;&#x4E2A;&#x65B9;&#x5F0F;&#x770B;&#x4E0A;&#x53BB;&#x6709;&#x70B9;&#x602A;&#x5F02;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x505A;&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x89E3;&#x91CA;&#x3002;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x4EE5;&#x900F;&#x9732;&#x4E00;&#x70B9;&#x5C0F;&#x9053;&#x6D88;&#x606F;&#x3002; Typescript&#x5B9A;&#x4E49;&#x6A21;&#x5757;&#x7684;&#x8BED;&#x6CD5;&#x5C31;&#x611F;&#x89C9;&#x81EA;&#x7136;&#x591A;&#x4E86;: js<br>module namespace {<br>exports function sayHelloInEnglish = function() {<br>return &quot;Hello&quot;;<br>}; &#x800C;&#x7528;tsc&#x8F6C;&#x8BD1;&#x4EE5;&#x540E;&#xFF0C;&#x4ED6;&#x5C31;&#x4F1A;&#x53D8;&#x6210;&#x4E0A;&#x9762;&#x7684;node.js&#x8BED;&#x6CD5;&#x3002; &#x4EC0;&#x4E48;&#x662F;Typescript? OK,&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x6DF1;&#x5165;&#x5427;&#xFF1F; (&#x542C;&#x8D77;&#x6765;&#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x8033;&#x719F;&#xFF1F;&#xFF09; </p>
<h3 id="&#x5BFC;&#x5165;/&#x4F7F;&#x7528;&#x6A21;&#x5757;">&#x5BFC;&#x5165;/&#x4F7F;&#x7528;&#x6A21;&#x5757;</h3><p>&#x6211;&#x4EEC;&#x51C6;&#x5907;&#x5728;main.js&#x4E2D;&#x5BFC;&#x5165;&#x548C;&#x4F7F;&#x7528;greetings.js&#x4E2D;&#x7684;&#x6240;&#x6709;&#x51FD;&#x6570;&#x3002;</p>
<h4 id="i&gt;_&#x5173;&#x952E;&#x8BCD;require">i&gt; &#x5173;&#x952E;&#x8BCD;require</h4><p>require &#x662F;nodejs&#x7528;&#x6765;&#x5BFC;&#x5165;&#x6A21;&#x5757;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;require&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B; &#xFF08;&#x600E;&#x4E48;&#x53C8;&#x662F;&#x60F3;&#x8C61;?) js<br>var require =function(path){<br>//….<br>return module.exports;<br>};</p>
<h4 id="ii&gt;_&#x5BFC;&#x5165;greetings-js">ii&gt; &#x5BFC;&#x5165;greetings.js</h4><p>js<br>//main.js<br>var greetings = require(&quot;./greetings&quot;);<strong>&#x60F3;&#x8C61;</strong> &#x4E00;&#x4E0B;&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x7B49;&#x4EF7;&#x4E8E;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x4E8B;&#x60C5;&#xFF1A; &#x201C;`js //main.js var greetings = { sayHelloInEnglish = function() { return &#x201C;Hello&#x201D;; }; </p>
<pre><code>sayHelloInSpanish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> &amp;quot;Hola&amp;quot;;
};
</code></pre><p>}; &#x201C;`</p>
<h4 id="iii&gt;_&#x73B0;&#x5728;&#x6211;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x7528;greetings-js&#x7684;&#x529F;&#x80FD;&#x4E86;">iii&gt; &#x73B0;&#x5728;&#x6211;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x7528;greetings.js&#x7684;&#x529F;&#x80FD;&#x4E86;</h4><p>&#x201C;`js //&#x201D;Hello&#x201D; greetings.sayHelloInEnglish();</p>
<p>// &#x201C;Hola&#x201D; greetings.sayHelloInSpanish(); &#x201C;`</p>
<p>&#x8B66;&#x544A;&#xFF1A;&#x6B63;&#x56E0;&#x4E3A;nodejs&#x7684;&#x8FD9;&#x79CD;&#x6A21;&#x5757;&#x673A;&#x5236;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5C0F;&#x5FC3;&#x7ED9;module.exports&#x91CD;&#x65B0;&#x8D4B;&#x7ED9;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x53EF;&#x9884;&#x671F;&#x7684;&#x95EE;&#x9898;&#x3002; &#x5982;&#xFF1A; js<br>//greetings.js<br>//var exports=module.exports = {};<br>exports.sayHelloInEnglish = …<br>exports.sayHelloInSpanish = …<br>/<em><br>&#x91CD;&#x65B0;&#x8D4B;&#x503C;module.exports  
</em>/<br>module.exports= &quot;Bonjour&quot;; &#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x5728;main.js&#x4E2D;&#x6211;&#x4EEC;&#x5728;&#x8C03;&#x7528;`greetings.sayHelloInEnglish()&#x2019;&#x5C31;&#x4F1A;&#x51FA;&#x9519;&#x3002; </p>
<h4 id="&#x4E0B;&#x4E00;&#x6B65;&#xFF1A;&#x8FDB;&#x9636;&#x7814;&#x7A76;require()&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;">&#x4E0B;&#x4E00;&#x6B65;&#xFF1A;&#x8FDB;&#x9636;&#x7814;&#x7A76;require()&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;</h4>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9af278e/" title="通过Anuglar Material串串学客户端开发  - NodeJS模块机制之Module.Exports -" itemprop="url">通过Anuglar Material串串学客户端开发  - NodeJS模块机制之Module.Exports -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="module-exports">module.exports</h2><p>&#x524D;&#x6587;&#x8BB2;&#x5230;&#x5728;Angular Material&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x7F16;&#x8BD1;&#x6587;&#x4EF6; docs/gulpfile.js &#x4E2D;&#x5374;&#x770B;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x5947;&#x602A;&#x7684;&#x4E1C;&#x897F; module.exports &#x90A3;&#x4E48; module.exports &#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#x5462;&#xFF1F; </p>
<p>&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#xFF0C;javascript&#x6700;&#x5927;&#x7684;&#x8BDF;&#x75C5;&#x5C31;&#x662F;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x4E5F;&#x6210;&#x4E3A;&#x5927;&#x578B;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;&#x6700;&#x5927;&#x963B;&#x788D;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x4F7F;&#x7528;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x5F0F;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5982;&#x6A21;&#x5757;&#x6A21;&#x5F0F;&#xFF08;Module Pattern), &#x800C;node.js&#x8FD9;&#x5B9E;&#x73B0;&#x4E86;&#x6A21;&#x5757;&#x88C5;&#x8F7D;&#x7CFB;&#x7EDF;&#xFF0C;&#x6765;&#x89E3;&#x51B3;&#x7EC4;&#x4EF6;&#x5B9E;&#x73B0;&#x7684;&#x57FA;&#x672C;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x81EA;&#x4ECE;&#x5F00;&#x59CB;&#x7814;&#x7A76;&#x524D;&#x7AEF;&#xFF0C;&#x6211;&#x4E5F;&#x51E0;&#x4E2A;&#x76F8;&#x5173;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x5728;&#x773C;&#x524D;&#x6643;&#x8361;&#xFF0C; require()exports &#x7B49;&#x7B49;&#x3002;&#x5F53;&#x65F6;&#xFF0C;&#x56E0;&#x4E3A;&#x6CE8;&#x610F;&#x529B;&#x5728;&#x5176;&#x4ED6;&#x65B9;&#x9762;&#xFF0C;&#x4E00;&#x76F4;&#x4E5F;&#x6CA1;&#x4E0B;&#x51B3;&#x5FC3;&#x7814;&#x7A76;&#x6E05;&#x695A;&#x3002; &#x5C31;&#x5982;&#x4E0B;&#x9762; <a href="http://www.sitepoint.com/understanding-module-exports-exports-node-js/" target="_blank" rel="external">&#x6587;&#x7AE0;</a> &#x4E2D;&#x6240;&#x8BB2;&#xFF1A; </p>
<p>&#x4F5C;&#x4E3A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5E38;&#x5E38;&#x9762;&#x4E34;&#x8FD9;&#x6837;&#x7684;&#x56F0;&#x5883;&#xFF1A;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E0D;&#x719F;&#x6089;&#x7684;&#x4EE3;&#x7801;&#xFF08;&#x5E93;&#xFF09;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x7A76;&#x7ADF;&#x8981;&#x82B1;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x6765;&#x7814;&#x7A76;&#x5B83;&#x7684;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x7814;&#x7A76;&#x53C8;&#x8981;&#x6709;&#x591A;&#x6DF1;&#x5462;&#xFF1F;&#x7ECF;&#x5178;&#x7B54;&#x6848;&#x5C31;&#x662F;&#xFF0C;&#x5B66;&#x4E60;&#x5230;&#x8DB3;&#x591F;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5199;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x7B49;&#x5230;&#x65F6;&#x95F4;&#x5BB9;&#x8BB8;&#x5728;&#x8FDB;&#x4E00;&#x6B65;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x73B0;&#x5728;&#x5C31;&#x662F;&#x6DF1;&#x5165;&#x7814;&#x7A76; module.exports &#x7684;&#x65F6;&#x5019;&#x4E86;&#xFF01; </p>
<h2 id="Node-js&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x548C;&#x4F7F;&#x7528;&#x6A21;&#x5757;">Node.js&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x548C;&#x4F7F;&#x7528;&#x6A21;&#x5757;</h2><h3 id="&#x4F20;&#x7EDF;js&#x6587;&#x4EF6;">&#x4F20;&#x7EDF;js&#x6587;&#x4EF6;</h3><p>&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;js&#x6587;&#x4EF6;&#xFF0C; greeting.js ,&#x5B83;&#x7684;&#x529F;&#x80FD;&#x4E00;&#x770B;&#x5C31;&#x660E;&#x767D;&#xFF1A; </p>
<pre><code><span class="comment">//greetings.js</span>
sayHelloInEnglish <span class="subst">=</span> function() {
    <span class="keyword">return</span> <span class="subst">&amp;</span>quot;Hello<span class="subst">&amp;</span>quot;;
};

sayHelloInSpanish <span class="subst">=</span> function() {
    <span class="keyword">return</span> <span class="subst">&amp;</span>quot;Hola<span class="subst">&amp;</span>quot;;
};
<span class="subst">&amp;</span><span class="variable">#x8FD9</span>;<span class="subst">&amp;</span><span class="variable">#x91CC</span>;<span class="subst">&amp;</span><span class="variable">#x6709</span>;<span class="subst">&amp;</span><span class="variable">#x4E24</span>;<span class="subst">&amp;</span><span class="variable">#x51FD</span>;<span class="subst">&amp;</span><span class="variable">#x6570</span>;<span class="subst">&amp;</span><span class="variable">#x4E5F</span>;<span class="subst">&amp;</span><span class="variable">#x5C31</span>;<span class="subst">&amp;</span><span class="variable">#x662F</span>;<span class="subst">&amp;</span><span class="variable">#x4E24</span>;<span class="subst">&amp;</span><span class="variable">#x4E2A</span>;<span class="subst">&amp;</span><span class="variable">#x529F</span>;<span class="subst">&amp;</span><span class="variable">#x80FD</span>;<span class="subst">&amp;</span><span class="variable">#x3002</span>;
</code></pre><h3 id="&#x7528;&#x6A21;&#x5757;&#x5C01;&#x88C5;&#x7B80;&#x5355;js&#x6587;&#x4EF6;">&#x7528;&#x6A21;&#x5757;&#x5C01;&#x88C5;&#x7B80;&#x5355;js&#x6587;&#x4EF6;</h3><h4 id="i&gt;_&#x60F3;&#x8C61;&#x8BE5;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x6709;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;&#x662F;&#x7684;&#xFF0C;&#x60F3;&#x8C61;&#xFF09;">i&gt; &#x60F3;&#x8C61;&#x8BE5;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x884C;&#x6709;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;&#x662F;&#x7684;&#xFF0C;&#x60F3;&#x8C61;&#xFF09;</h4><pre><code><span class="regexp">//</span> <span class="reserved">var</span> exports = <span class="built_in">module</span>.exports ={};
</code></pre><h4 id="ii&gt;_&#x628A;&#x4EFB;&#x4F55;&#x8981;&#x91CD;&#x7528;&#xFF08;&#x5BFC;&#x51FA;&#xFF09;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;exports">ii&gt; &#x628A;&#x4EFB;&#x4F55;&#x8981;&#x91CD;&#x7528;&#xFF08;&#x5BFC;&#x51FA;&#xFF09;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;exports</h4><pre><code>exports.sayHelloInEnglish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> &amp;quot;Hello&amp;quot;;
};
exports.sayHelloInSpanish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> &amp;quot;Hola&amp;quot;;
};
</code></pre><h4 id="iii&gt;_&#x4EE5;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x4E8B;&#x60C5;">iii&gt; &#x4EE5;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x4E8B;&#x60C5;</h4><pre><code><span class="keyword">module</span>.exports = {
    sayHelloInEnglish = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> {
        <span class="keyword">return</span> &amp;quot;Hello&amp;quot;;
    };

    sayHelloInSpanish = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> {
        <span class="keyword">return</span> &amp;quot;Hola&amp;quot;;
    };
};
</code></pre><p>&#x8FD9;&#x4E2A;&#x65B9;&#x5F0F;&#x770B;&#x4E0A;&#x53BB;&#x6709;&#x70B9;&#x602A;&#x5F02;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x505A;&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x89E3;&#x91CA;&#x3002;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x4EE5;&#x900F;&#x9732;&#x4E00;&#x70B9;&#x5C0F;&#x9053;&#x6D88;&#x606F;&#x3002; Typescript&#x5B9A;&#x4E49;&#x6A21;&#x5757;&#x7684;&#x8BED;&#x6CD5;&#x5C31;&#x611F;&#x89C9;&#x81EA;&#x7136;&#x591A;&#x4E86;:</p>
<pre><code><span class="keyword">module</span> namespace {
  exports <span class="function"><span class="keyword">function</span></span> sayHelloInEnglish = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> {
        <span class="keyword">return</span> &amp;quot;Hello&amp;quot;;
    };
</code></pre><p>&#x800C;&#x7528;tsc&#x8F6C;&#x8BD1;&#x4EE5;&#x540E;&#xFF0C;&#x4ED6;&#x5C31;&#x4F1A;&#x53D8;&#x6210;&#x4E0A;&#x9762;&#x7684;node.js&#x8BED;&#x6CD5;&#x3002;&#x4EC0;&#x4E48;&#x662F;Typescript? OK,&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x6DF1;&#x5165;&#x5427;&#xFF1F; (&#x542C;&#x8D77;&#x6765;&#x600E;&#x4E48;&#x8FD9;&#x4E48;&#x8033;&#x719F;&#xFF1F;&#xFF09; </p>
<h3 id="&#x5BFC;&#x5165;/&#x4F7F;&#x7528;&#x6A21;&#x5757;">&#x5BFC;&#x5165;/&#x4F7F;&#x7528;&#x6A21;&#x5757;</h3><p>&#x6211;&#x4EEC;&#x51C6;&#x5907;&#x5728;main.js&#x4E2D;&#x5BFC;&#x5165;&#x548C;&#x4F7F;&#x7528;greetings.js&#x4E2D;&#x7684;&#x6240;&#x6709;&#x51FD;&#x6570;&#x3002;</p>
<h4 id="i&gt;_&#x5173;&#x952E;&#x8BCD;require">i&gt; &#x5173;&#x952E;&#x8BCD;require</h4><p>require &#x662F;nodejs&#x7528;&#x6765;&#x5BFC;&#x5165;&#x6A21;&#x5757;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;require&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B; &#xFF08;&#x600E;&#x4E48;&#x53C8;&#x662F;&#x60F3;&#x8C61;?) </p>
<pre><code><span class="keyword">var</span> <span class="built_in">require</span> =<span class="function"><span class="keyword">function</span>(<span class="params">path</span>)</span>{
    <span class="comment">//....</span>
    <span class="keyword">return</span> <span class="built_in">module</span>.exports;
};
</code></pre><h4 id="ii&gt;_&#x5BFC;&#x5165;greetings-js">ii&gt; &#x5BFC;&#x5165;greetings.js</h4><pre><code><span class="comment">//main.js</span>
<span class="keyword">var</span> greetings = <span class="built_in">require</span>(&amp;quot;./greetings&amp;quot;);
</code></pre><p>&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x7B49;&#x4EF7;&#x4E8E;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x505A;&#x4E86;&#x4EE5;&#x4E0B;&#x4E8B;&#x60C5;&#xFFFD;&#xFFFD;&#xFFFD; </p>
<pre><code><span class="comment">//main.js</span>
<span class="keyword">var</span> greetings = {
    sayHelloInEnglish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
        <span class="keyword">return</span> &amp;quot;Hello&amp;quot;;
    };

    sayHelloInSpanish = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
        <span class="keyword">return</span> &amp;quot;Hola&amp;quot;;
    };
};
</code></pre><h4 id="iii&gt;_&#x73B0;&#x5728;&#x6211;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x7528;greetings-js&#x7684;&#x529F;&#x80FD;&#x4E86;">iii&gt; &#x73B0;&#x5728;&#x6211;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x7528;greetings.js&#x7684;&#x529F;&#x80FD;&#x4E86;</h4><pre><code>//&amp;quot<span class="comment">;Hello&amp;quot;</span>
greetings.sayHelloInEnglish()<span class="comment">;</span>

// &amp;quot<span class="comment">;Hola&amp;quot;</span>
greetings.sayHelloInSpanish()<span class="comment">;</span>
</code></pre><p>&#x8B66;&#x544A;&#xFF1A; </p>
<p>&#x6B63;&#x56E0;&#x4E3A;nodejs&#x7684;&#x8FD9;&#x79CD;&#x6A21;&#x5757;&#x673A;&#x5236;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5C0F;&#x5FC3;&#x7ED9;module.exports&#x91CD;&#x65B0;&#x8D4B;&#x7ED9;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x53EF;&#x9884;&#x671F;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5982;&#xFF1A;</p>
<pre><code>//greetings.js
//var <span class="variable">exports=</span>module.<span class="variable">exports =</span> {};
exports.<span class="variable">sayHelloInEnglish =</span> ...
exports.<span class="variable">sayHelloInSpanish =</span> ...
<span class="comment">/*  
  &amp;#x91CD;&amp;#x65B0;&amp;#x8D4B;&amp;#x503C;module.exports
*/</span>
module.<span class="variable">exports=</span> &amp;quot;Bonjour&amp;quot;;
</code></pre><p>&#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x5728;main.js&#x4E2D;&#x6211;&#x4EEC;&#x5728;&#x8C03;&#x7528;`greetings.sayHelloInEnglish()&apos;&#x5C31;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>
<h4 id="&#x4E0B;&#x4E00;&#x6B65;&#xFF1A;&#x8FDB;&#x9636;&#x7814;&#x7A76;require()&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;">&#x4E0B;&#x4E00;&#x6B65;&#xFF1A;&#x8FDB;&#x9636;&#x7814;&#x7A76;require()&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;</h4>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9abf0cd/" title="gulp插件开发手札 -" itemprop="url">gulp插件开发手札 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>gulp</p>
<p>&#x4E00;&#x4E2A;&#x6BD4;grunt&#x4F7F;&#x7528;&#x66F4;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;Gulp&#x901A;&#x8FC7;&#x6D41;&#x548C;&#x4EE3;&#x7801;&#x4F18;&#x4E8E;&#x914D;&#x7F6E;&#x7B56;&#x7565;&#x6765;&#x5C3D;&#x91CF;&#x7B80;&#x5316;&#x4EFB;&#x52A1;&#x7F16;&#x5199;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x4E0D;&#x5728;&#x8D58;&#x8FF0;gulp&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x6CD5;&#x3002;&#x8BF7;&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank" rel="external">gulp getting-started</a></li>
<li><a href="http://segmentfault.com/a/1190000000711469" target="_blank" rel="external">gulp&#x9AD8;&#x7EA7;&#x6280;&#x5DE7;</a></li>
<li><a href="http://segmentfault.com/a/1190000002491282" target="_blank" rel="external">gulp vs grunt</a></li>
</ul>
<p>&#x9700;&#x6C42;</p>
<p>&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;gulp&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x63D2;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x538B;&#x7F29;&#xFF0C;md5&#x540E;&#x7F00;&#x7B49;&#x7B49;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4EC5;&#x5728;&#x79FB;&#x52A8;&#x7AEF;&#x8FD0;&#x884C;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x6027;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;js&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x538B;&#x7F29;&#x540E;&#x7684;js&#x6587;&#x4EF6;&#x4F53;&#x79EF;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x521B;&#x5EFA;script&#x6807;&#x7B7E;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x7B49;&#x9875;&#x9762;ready&#x4E86;&#x518D;&#x53BB;&#x52A0;&#x8F7D;js&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x4E86;md5&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x6B21;&#x538B;&#x7F29;&#x5B8C;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x90FD;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x800C;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684;&#x811A;&#x672C;&#x9700;&#x8981;&#x77E5;&#x9053;&#x538B;&#x7F29;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x624B;&#x90FD;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x63D2;&#x4EF6;&#x529F;&#x80FD;</p>
<p>&#x6240;&#x4EE5;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x662F;&#xFF0C;&#x5728;js&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x5408;&#x5E76;&#x4EE5;&#x540E;&#xFF0C;&#x5904;&#x7406;&#x9996;&#x9875;html.</p>
<p>&#x9996;&#x5148;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;gulp&#x63D2;&#x4EF6;</p>
<ul>
<li><a href="https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x82F1;&#x6587;)</a></li>
<li><a href="http://www.u396.com/gulp-plugin-guildlines.html" target="_blank" rel="external">gulp&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x89C4;&#x8303;(&#x4E2D;&#x6587;)</a></li>
</ul>
<p>&#x56E0;&#x4E3A;&#x662F;&#x4E2A;&#x5C0F;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x5355;&#x72EC;&#x5C01;&#x88C5;&#x6210;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x662F;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x51FD;&#x6570;&#x65B9;&#x4FBF;&#x4F7F;&#x7528;&#xFF1A;</p>
<p> JavaScript</p>
<pre><code><span class="function"><span class="keyword">function</span></span> asyncLoad() {

  console.<span class="built_in">log</span>(&amp;quot;Starting &amp;apos;async load&amp;apos;...&amp;quot;);

  <span class="keyword">return</span> through.obj(<span class="function"><span class="keyword">function</span><span class="params">(file,enc,cb)</span></span>{

    <span class="keyword">if</span>(<span class="keyword">file</span>.isNull()) {

      cb(null,<span class="keyword">file</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isBuffer()) {

      var <span class="type">data</span> = Buffer.concat([<span class="keyword">file</span>.contents]).toString();

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos;, &amp;apos;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;&amp;apos; + statics + &amp;apos;/&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;img src=&amp;quot;./img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;, &amp;apos;&amp;lt;img src=&amp;quot;&amp;apos; +statics + &amp;apos;/img/icon.png&amp;quot; style=&amp;quot;width:0px&amp;quot; alt=&amp;quot;&amp;quot;/&amp;gt;&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;script src=&amp;quot;js/ionic.<span class="built_in">all</span>&amp;apos;,&amp;apos;&amp;lt;script src=&amp;quot;load.js&amp;quot; id=&amp;quot;asyncLoading&amp;quot; <span class="type">data</span>-asyncLoading=&amp;quot;&amp;apos;+ statics +&amp;apos;/js/ionic.<span class="built_in">all</span>&amp;apos;);

      <span class="type">data</span> = <span class="type">data</span>.replace(&amp;apos;&amp;lt;/head&amp;gt;&amp;apos;, &amp;apos;&amp;lt;script <span class="keyword">type</span>=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://tajs.qq.com/stats?sId=<span class="number">45760313</span>&amp;quot; charset=&amp;quot;UTF-<span class="number">8</span>&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;\n&amp;lt;/head&amp;gt;&amp;apos;);

      <span class="keyword">file</span>.contents = new Buffer(<span class="type">data</span>);

    }

    <span class="keyword">if</span> (<span class="keyword">file</span>.isStream()) {

        console.<span class="built_in">log</span>(&amp;apos;async load error&amp;apos;);

    }

    cb(null, <span class="keyword">file</span>);

  });

}
</code></pre><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>&#x9700;&#x8981;&#x5B89;&#x88C5;through2&#x6A21;&#x5757;&#xFF1A; npm install throuth2 &#x2013;save-dev</li>
<li>Node&#x4E2D;buffer&#x7684;&#x4F7F;&#x7528; <ul>
<li><a href="http://blog.chinaunix.net/uid-26672038-id-4173346.html" target="_blank" rel="external">node&#x7684;buffer&#x4ECB;&#x7ECD;</a></li>
<li><a href="https://cnodejs.org/topic/5189ff4f63e9f8a54207f60c" target="_blank" rel="external">&#x6D45;&#x6790;nodejs&#x7684;buffer&#x7C7B;</a></li>
</ul>
</li>
</ul>
<p>&#x4F7F;&#x7528;</p>
<p>&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x8DDF;&#x666E;&#x901A;&#x7684;gulp&#x63D2;&#x4EF6;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E00;&#x6837;</p>
<p> JavaScript</p>
<pre><code>gulp.task<span class="params">(&amp;apos;usemin&amp;apos;, function<span class="params">(cd)</span> {

  return gulp.src<span class="params">(&amp;apos;./www/index.html&amp;apos;)</span>

    .pipe<span class="params">(usemin<span class="params">({

      css: [minifyCss<span class="params">()</span>, &amp;apos;concat&amp;apos;, rev<span class="params">()</span>],      

      js: [rev<span class="params">()</span>]

    })</span>)</span>

    .pipe<span class="params">(asyncLoad<span class="params">()</span>)</span>

    .pipe<span class="params">(gulp.dest<span class="params">(&amp;apos;./dest/&amp;apos;)</span>)</span>;

})</span>;
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;</p>
<p>&#x529F;&#x80FD;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5F00;&#x53D1;gulp&#x63D2;&#x4EF6;&#xFF0C;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x7136;&#x540E;&#x53C2;&#x770B;&#x4E86;&#x4E00;&#x4E9B;gulp&#x5B98;&#x7F51;&#x4E0A;&#x7684;&#x63D2;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x5199;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5B8C;&#x4E86;&#xFF0C;&#x540C;&#x4E8B;&#x9700;&#x8981;&#x77E5;&#x9053;nodejs&#x5982;&#x4F55;&#x64CD;&#x4F5C;buffer&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Gulp/">Gulp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9ac6fc1/" title="Node.js异常处理uncaughtException篇 -" itemprop="url">Node.js异常处理uncaughtException篇 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5F88;&#x591A; NodeJS &#x7684;&#x5F00;&#x53D1;&#x8005;&#x5728;&#x62B1;&#x6028;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x592A;&#x9EBB;&#x70E6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x5217;&#x535A;&#x5BA2;&#x68B3;&#x7406;&#x4E00;&#x4E0B;NodeJS&#x4E2D;&#x5E38;&#x89C1;&#x7684;&#x5F02;&#xFFFD;&#xFFFD;&#xFFFD;&#x5904;&#x7406;&#x7684;&#x624B;&#x6BB5;&#x3002;</p>
<p>&#x548C;&#x5927;&#x591A;&#x6570;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E00;&#x6837;&#xFF0C;&#x5728; NodeJS &#x91CC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; throw &#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#xFF1A; </p>
<pre><code><span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Error</span>(&amp;apos;<span class="keyword">Catch</span> <span class="keyword">me</span>&amp;apos;);
</code></pre><p>&#x4E3A;&#x4E86;&#x6355;&#x83B7;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x9700;&#x8981;&#x628A;&#x4EE3;&#x7801;&#x5305;&#x5728; Try Catch &#x4E2D;&#xFF1A; </p>
<pre><code><span class="keyword">try</span>{
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(&amp;apos;<span class="keyword">Catch</span> me&amp;apos;);
}<span class="keyword">catch</span>(e){
    // <span class="built_in">error</span> captured
}
</code></pre><p>&#x7136;&#x800C;&#xFF0C;&#x7531;&#x4E8E; NodeJS &#x7684;&#x5F02;&#x6B65;&#x7279;&#x6027;&#xFF0C;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x53EA;&#x9700;&#x7A0D;&#x52A0;&#x6539;&#x9020;&#x5C31;&#x4F1A;&#x5931;&#x6548;&#xFF1A;</p>
<pre><code><span class="keyword">try</span>{
    process.nextTick(<span class="function"><span class="keyword">function</span> <span class="title">my_app</span>(<span class="params"></span>)</span>{
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(&amp;apos;Catch me&amp;apos;);
    })
}<span class="keyword">catch</span>(e){
    <span class="comment">// never called</span>
}
</code></pre><p>&#x5728;&#x73B0;&#x5B9E;&#x4E16;&#x754C;&#x91CC;&#xFF0C;&#x5F02;&#x5E38;&#x603B;&#x662F;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x67D0;&#x4E2A;&#x6A21;&#x5757;&#x4E2D;&#x3002;&#x6240;&#x8C13;&#x6A21;&#x5757;&#x5C31;&#x662F;&#x80FD;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x5355;&#x5143;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x51FD;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x88AB;&#x770B;&#x505A;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x3002;&#x968F;&#x7740;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#x884C;&#x6570;&#x589E;&#x591A;&#xFF0C;&#x5F02;&#x6B65;&#x5D4C;&#x5957;&#x7684;&#x590D;&#x6742;&#x6027;&#x52A0;&#x5F3A;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x5F02;&#x5E38;&#x6CA1;&#x6355;&#x83B7;&#x7684;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x3002;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x5F88;&#x5F3A;&#x5065;&#x58EE;&#x6027;&#x7684; NodeJS &#x5E94;&#x7528;&#xFF0C;&#x4F1A;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x672A;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x5C31;&#x6574;&#x4E2A;&#x6302;&#x6389;&#xFF0C;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#x3002;&#x8981;&#x6539;&#x53D8;&#x5927;&#x5BB6;&#x89C9;&#x5F97;NodeJS&#x662F;&#x8106;&#x5F31;&#x7684;&#x8FD9;&#x4E2A;&#x8BA4;&#x8BC6;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x52A0;&#x6DF1;&#x5BF9;&#x8FD9;&#x95E8;&#x8BED;&#x8A00;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x673A;&#x5236;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>
<h3 id="uncaughtException">uncaughtException</h3><p>uncaughtException &#x5176;&#x5B9E;&#x662F; NodeJS &#x8FDB;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x8FDB;&#x7A0B;&#x91CC;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x800C;&#x6CA1;&#x6709;&#x88AB;&#x4EFB;&#x4F55; Try Catch &#x6355;&#x83B7;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5148;&#x770B;&#x770B;&#x540C;&#x6B65;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x4F8B;&#x5B50;&#x3002; </p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">external</span><span class="params">()</span> </span>{
    <span class="keyword">throw</span> <span class="keyword">new</span> Error(&amp;apos;Catch me&amp;apos;);
}
<span class="function"><span class="keyword">function</span> <span class="title">internal</span><span class="params">()</span> </span>{
    external();
}
<span class="keyword">internal</span>(); <span class="comment">//error will be thrown</span>
</code></pre><p>&#x5728;&#x547D;&#x4EE4;&#x884C;&#x91CC;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x811A;&#x672C;&#x4F1A;&#x5728;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x90A3;&#x4E00;&#x884C;&#x4E2D;&#x65AD;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x7531;&#x4E8E;&#x6CA1;&#x6709; Try Catch &#xFF0C;&#x5F02;&#x5E38;&#x4F1A;&#x4E00;&#x76F4;&#x5192;&#x6CE1;&#x76F4;&#x5230;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x4E3A;&#x6B62;&#xFF0C;&#x800C;NodeJS&#x5BF9;&#x5F02;&#x5E38;&#x7684;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x5904;&#x7406;&#x7684;&#x4EE3;&#x7801; <em>&#x7C7B;&#x4F3C;</em> &#x4E8E;&#xFF1A; </p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">_MyFatalException</span><span class="params">(err)</span>{</span>
    <span class="keyword">if</span><span class="params">(!process.emit<span class="params">(&amp;apos;uncaughtException&amp;apos;,err)</span>)</span>{
        console.error<span class="params">(err.stack)</span>;
        process.emit<span class="params">(&amp;apos;exit&amp;apos;,<span class="number">1</span>)</span>;
    }
}
</code></pre><p>NodeJS&#x5BF9;&#x4E8E;&#x672A;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x7684;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x662F;&#xFF1A; - &#x89E6;&#x53D1; uncaughtException &#x4E8B;&#x4EF6; - &#x5982;&#x679C; uncaughtException &#x6CA1;&#x6709;&#x88AB;&#x76D1;&#x542C;&#xFF0C;&#x90A3;&#x4E48; - &#x6253;&#x5370;&#x5F02;&#x5E38;&#x7684;&#x5806;&#x6808;&#x4FE1;&#x606F; - &#x89E6;&#x53D1;&#x8FDB;&#x7A0B;&#x7684; exit &#x4E8B;&#x4EF6; </p>
<p>&#x5982;&#x679C;&#x4F60;&#x6B63;&#x5728;&#x7528; NodeJS &#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x80AF;&#x5B9A;&#x4E0D;&#x5E0C;&#x671B;&#x5076;&#x7136;&#x7684;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x8BA9;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x6302;&#x6389;&#x3002;&#x90A3;&#x4E48;&#x662F;&#x4E0D;&#x662F;&#x53EA;&#x8981;&#x76D1;&#x542C;&#x4E86; uncaughtException &#x5C31;&#x53EF;&#x4EE5;&#x963B;&#x6B62;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x5462;&#xFF1F; &#x7B54;&#x6848;&#x662F;&#x53EF;&#x4EE5;&#xFF0C; <strong>&#x4F46;&#x662F;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF01;</strong> &#x3002;&#x770B;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A; </p>
<pre><code><span class="keyword">var</span> express = require(&amp;apos;express&amp;apos;);
<span class="function"><span class="keyword">function</span> <span class="title">external</span><span class="params">(cb)</span> </span>{
    process.nextTick(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{
        <span class="keyword">throw</span> <span class="keyword">new</span> Error();
        cb.call(<span class="literal">null</span>, &amp;apos;sunny&amp;apos;);
    })
}
<span class="keyword">var</span> app = express();
app.<span class="keyword">get</span>(&amp;apos;/weather&amp;apos;, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>{
    external(<span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>{
        res.end(&amp;apos;Weather of Beijing <span class="keyword">is</span> &amp;apos; + data);
    })
})
app.listen(<span class="number">8018</span>);
<span class="function"><span class="keyword">function</span> <span class="title">noop</span><span class="params">()</span></span>{}
process.on(&amp;apos;uncaughtException&amp;apos;, noop)
</code></pre><p>&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5047;&#x8BBE;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x7AD9;&#x70B9;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5F53;&#x5730;&#x7684;&#x5929;&#x6C14;&#xFF0C;&#x6211;&#x4EEC;&#x7528; apache2-utils &#x6765;&#x6A21;&#x62DF;&#x8BF7;&#x6C42; </p>
<p>ab -n 1000 -c 20 <a href="http://localhost:8018/weather" target="_blank" rel="external">http://localhost:8018/weather</a></p>
<p>&#x7CDF;&#x7CD5;&#xFF01;&#x8BF7;&#x6C42;&#x4E00;&#x76F4;&#x5728;&#x7B49;&#x5F85;&#xFF0C;&#x5185;&#x5B58;&#x4E0A;&#x6DA8;&#x3002;&#x539F;&#x56E0;&#x5728;&#x4E8E; res.end &#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x73B0;&#x6709;&#x7684; I/O &#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5DF2;&#x7ECF;&#x5F00;&#x8F9F;&#x7684;&#x8D44;&#x6E90;&#x4E0D;&#x4EC5;&#x4E0D;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#xFF0C;&#x800C;&#x4E14;&#x670D;&#x52A1;&#x5668;&#x8FD8;&#x5728;&#x4E0D;&#x77E5;&#x75B2;&#x5026;&#x5730;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x3002; </p>
<p>&#x5728; NodeJS &#x4E2D;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x662F;&#x4EE3;&#x4EF7;&#x9AD8;&#x6602;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x4E0D;&#x5C0F;&#x5FC3;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x548C;&#x8BA9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5904;&#x4E8E;&#x4E0D;&#x7A33;&#x5B9A;&#x7684;&#x72B6;&#x6001;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x5065;&#x58EE;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528; Cluster &#x6A21;&#x5F0F;&#xFF0C;&#x7531;&#x4E4B;&#x800C;&#x6765;&#x7684;&#x63A8;&#x8350;&#x505A;&#x6CD5;&#x662F;&#xFF1A; - &#x9488;&#x5BF9;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x7684;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x4EE3;&#x7801; - &#x51FA;&#x9519;&#x7684;Worker&#x4E0D;&#x518D;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x8BF7;&#x6C42; - &#x9000;&#x51FA;&#x5173;&#x95ED;Worker&#x8FDB;&#x7A0B; </p>
<p>CentOS&#x7F16;&#x8BD1;&#x5B89;&#x88C5;MongoDB <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2012-02/53834.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-02/53834.htm</a></p>
<p>CentOS &#x7F16;&#x8BD1;&#x5B89;&#x88C5; MongoDB&#x4E0E;mongoDB&#x7684;php&#x6269;&#x5C55; <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2012-02/53833.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-02/53833.htm</a></p>
<p>CentOS 6 &#x4F7F;&#x7528; yum &#x5B89;&#x88C5;MongoDB&#x53CA;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x914D;&#x7F6E; <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2012-08/68196.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-08/68196.htm</a></p>
<p>Ubuntu 13.04&#x4E0B;&#x5B89;&#x88C5;MongoDB2.4.3 <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2013-05/84227.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-05/84227.htm</a></p>
<p>MongoDB&#x5165;&#x95E8;&#x5FC5;&#x8BFB;(&#x6982;&#x5FF5;&#x4E0E;&#x5B9E;&#x6218;&#x5E76;&#x91CD;) <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2013-07/87105.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2013-07/87105.htm</a></p>
<p>Ubunu 14.04&#x4E0B;MongoDB&#x7684;&#x5B89;&#x88C5;&#x6307;&#x5357; <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2014-08/105364.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2014-08/105364.htm</a></p>
<p>&#x300A;MongoDB &#x6743;&#x5A01;&#x6307;&#x5357;&#x300B;(MongoDB: The Definitive Guide)&#x82F1;&#x6587;&#x6587;&#x5B57;&#x7248;[PDF] <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2012-07/66735.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2012-07/66735.htm</a></p>
<p>Nagios&#x76D1;&#x63A7;MongoDB&#x5206;&#x7247;&#x96C6;&#x7FA4;&#x670D;&#x52A1;&#x5B9E;&#x6218; <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2014-10/107826.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2014-10/107826.htm</a></p>
<p>&#x57FA;&#x4E8E;CentOS 6.5&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x642D;&#x5EFA;MongoDB&#x670D;&#x52A1;<a href="http://www.lin" target="_blank" rel="external">http://www.lin</a> <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2014-11/108900.htm" target="_blank" rel="external">uxidc.com/Linux/2014-11/108900.htm</a></p>
<p> <strong>MongoDB &#x7684;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</strong> &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p> <strong>MongoDB &#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740;</strong> &#xFF1A;&#x8BF7;&#x70B9;&#x8FD9;&#x91CC; </p>
<p> <strong>&#x672C;&#x6587;&#x6C38;&#x4E45;&#x66F4;&#x65B0;&#x94FE;&#x63A5;&#x5730;&#x5740;</strong> &#xFF1A; <a href="http://www.linuxidc.com/Linux/2015-06/../../Linux/2015-06/118849.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2015-06/118849.htm</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MongoDB/">MongoDB</a><a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/9ad2e2f/" title="node.js与express4.X实战（二）------快速构建一个简单的API接口 -" itemprop="url">node.js与express4.X实战（二）------快速构建一个简单的API接口 -</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="edwin" target="_blank" itemprop="author">edwin</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T03:04:15.000Z" itemprop="datePublished"> 发表于 2015-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5BF9;&#x4E8E;express &#x65B0;&#x624B;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x63A8;&#x8350;&#x4E00;&#x4E2A; express&#x811A;&#x624B;&#x67B6;&#x5DE5;&#x5177;&#x3002;</p>
<pre><code>npm <span class="keyword">install</span> -g express-generator
</code></pre><p><img src="http://taojinke.github.io/img/20150702/9acc7a5.png" alt=""></p>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x547D;&#x4EE4;&#x5B89;&#x88C5;express&#x811A;&#x624B;&#x67B6;&#x5DE5;&#x5177; &#xFF0C;&#x63A5;&#x4E0B;&#x6765;</p>
<pre><code>exress <span class="operator">-e</span> myapp
</code></pre><p>&#x751F;&#x6210;&#x4E00;&#x4E2A;express&#x7684;&#x6846;&#x67B6;&#xFF08;&#x53C2;&#x6570;e&#x4EE3;&#x8868;&#x4F7F;&#x7528;ejs&#x6A21;&#x677F;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;jade&#x6A21;&#x677F;&#xFF09;</p>
<p><img src="http://taojinke.github.io/img/20150702/9ace762.png" alt=""></p>
<p>&#x4ECA;&#x5929;&#x4E3B;&#x8981;&#x7528;&#x505A;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x540C;&#x6E90;&#x7B56;&#x6E90;&#x5141;&#x8BB8;&#x4E0B;&#x7684;&#x60C5;&#x51B5;json&#x5C31;&#x8FD4;&#x56DE;json&#xFF0C;&#x8BF7;&#x6C42;&#x662F;JSONP&#x5C31;&#x8FD4;&#x56DE;JSONP&#x3002;</p>
<p>1.&#x9996;&#x5148;&#x5728;routes&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;api.js&#xFF0C;&#x62F7;&#x8D1D;&#x540C;&#x76EE;&#x5F55;&#x4E0B;index.js&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x5230;api.js&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x540E;&#x9762;&#x5C06;&#x505A;&#x5904;&#x7406;json&#x8FD8;&#x662F;jsonp&#x63A5;&#x53E3;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>2.&#x6253;&#x5F00;app.js&#xFF0C; &#x5728;</p>
<pre><code><span class="reserved">var</span> users = <span class="built_in">require</span>(&amp;apos;./routes/users&amp;apos;);
</code></pre><p>&#x540E;&#x9762;&#x6DFB;&#x52A0;</p>
<pre><code><span class="reserved">var</span> api = <span class="built_in">require</span>(&amp;apos;./routes/api&amp;apos;);
</code></pre><p>&#x5728;</p>
<pre><code>app.<span class="keyword">use</span><span class="params">(&amp;apos;/users&amp;apos;, users)</span>;
</code></pre><p>&#x540E;&#x9762;&#x6DFB;&#x52A0;</p>
<pre><code>app.<span class="keyword">use</span><span class="params">(&amp;apos;/api&amp;apos;, api)</span>;
</code></pre><p>&#x4E0A;&#x9762;&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x52A0;&#x8F7D;&#x4F9D;&#x8D56;&#x6A21;&#x5757;api&#x8DEF;&#x7531;&#x5904;&#x7406;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x67D0;&#x4E2A;&#x8DEF;&#x5F84;&#x5904;&#x7406;&#x3002;</p>
<p>&#x9898;&#x5916;&#x8BDD;&#xFF1A;&#x8FD9;&#x662F;express&#x5B98;&#x65B9;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x91C7;&#x7528;&#x5176;&#x7ECF;&#x5178;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x5904;&#x7406;&#x3002;&#x4F46;&#x6211;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E0D;&#x5229;&#x4E8E;MVC&#xFF0C;&#x6211;&#x5728;&#x771F;&#x5B9E;&#x9879;&#x76EE;&#x4E2D;&#x91C7;&#x7528;&#x4E86;&#x5176;&#x4ED6;&#x7684;&#x505A;&#x6CD5;&#x8BB2;&#x8DEF;&#x7531;&#x548C;&#x63A7;&#x5236;&#x5C42;&#x5206;&#x79BB;&#x3002;</p>
<p>3.&#x63A5;&#x4E0B;&#x6765;&#x5199;api.js</p>
<pre><code>var express = require(&amp;apos;express&amp;apos;);
var router = express.Router();
router.get(&amp;apos;/&amp;apos;, function(req, res) {
    if (req.query &amp;amp;&amp;amp; req.query.callback) {
        <span class="comment">//console.log(params.query.callback);</span>
res.jsonp({status: <span class="number">200</span>, message: &amp;quot;&amp;<span class="label">#x8</span>FD9;&amp;<span class="label">#x662</span>F;&amp;<span class="label">#x4</span>E00;&amp;<span class="label">#x4</span>E2A;JSONP&amp;<span class="label">#x63</span>A5;&amp;<span class="label">#x53</span>E3;&amp;quot;, <span class="keyword">data</span>:[]});
    } else {
        res.json({status: <span class="number">200</span>, message: &amp;quot;&amp;<span class="label">#x8</span>FD9;&amp;<span class="label">#x662</span>F;&amp;<span class="label">#x4</span>E00;&amp;<span class="label">#x4</span>E2A;JSON&amp;<span class="label">#x63</span>A5;&amp;<span class="label">#x53</span>E3;&amp;quot;, <span class="keyword">data</span>:[]});
    }
});
module.exports = router;
</code></pre><p>&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5DF2;&#x7ECF;&#x5B8C;&#x6BD5;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;GET&#x7684;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#xFF0C;req.query&#x662F;URL&#x91CC;&#x9762;&#x7684;&#x53C2;&#x6570;&#x3002;&#x6211;&#x662F;&#x76F4;&#x63A5;&#x91C7;&#x7528;express&#x5B98;&#x65B9;&#x7684;&#x5199;&#x6CD5;&#x6765;&#x5199;&#x7684;&#xFF0C;&#x5B9E;&#x9645;&#x7528;node.js&#x4E5F;&#x6570;&#x884C;&#x4EE3;&#x7801;&#x3002;&#x5355;&#x978B;&#x539F;&#x751F;&#x7684;&#x5BF9;http&#x5934;&#x4F1A;&#x6709;&#x4E00;&#x79CD;&#x65B0;&#x7684;&#x7406;&#x89E3;&#x3002;</p>
<p>4.&#x6253;&#x5F00;&#x5BA2;&#x6237;&#x7AEF;&#x5199;&#x4E0B;&#x6E38;&#x89C8;&#x5668;js&#xFF0C;&#x6253;&#x5F00;view&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#xFF0C; index.ejs&#x6A21;&#x677F;&#x3002;</p>
<pre><code><span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">!</span>DOCTYPE html<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;html<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;head<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;title<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">%=</span> title <span class="subst">%&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/title<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="keyword">link</span> rel<span class="subst">=&amp;</span>apos;stylesheet<span class="subst">&amp;</span>apos; href<span class="subst">=&amp;</span>apos;/stylesheets/style<span class="built_in">.</span>css<span class="subst">&amp;</span>apos; <span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;script src<span class="subst">=&amp;</span>quot;/javascripts/jquery<span class="built_in">.</span>js<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/script<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;/head<span class="subst">&amp;</span><span class="literal">gt</span>;
  <span class="subst">&amp;</span><span class="literal">lt</span>;body<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;h1<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">%=</span> title <span class="subst">%&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/h1<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;p<span class="subst">&amp;</span><span class="literal">gt</span>;Welcome <span class="keyword">to</span> <span class="subst">&amp;</span><span class="literal">lt</span>;<span class="subst">%=</span> title <span class="subst">%&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/p<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;script <span class="keyword">type</span><span class="subst">=&amp;</span>quot;text/javascript<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;
      function get_jsonp() {
        $<span class="built_in">.</span>getJSON(<span class="subst">&amp;</span>quot;http:<span class="comment">//127.0.0.1:3000/api?callback=?&amp;quot;,</span>
                function(<span class="built_in">data</span>) {
                  $(<span class="subst">&amp;</span>apos;<span class="variable">#rjsonp</span><span class="subst">&amp;</span>apos;)<span class="built_in">.</span>val(<span class="subst">&amp;</span>apos;Jsonp info : <span class="subst">&amp;</span>apos; <span class="subst">+</span> <span class="built_in">data</span><span class="built_in">.</span>message);
                });
        }

      function get_json(){
        $<span class="built_in">.</span>getJSON(<span class="subst">&amp;</span>quot;/api<span class="subst">&amp;</span>quot;,
                function(<span class="built_in">data</span>) {
                  $(<span class="subst">&amp;</span>apos;<span class="variable">#rjson</span><span class="subst">&amp;</span>apos;)<span class="built_in">.</span>val(<span class="subst">&amp;</span>apos;Json info : <span class="subst">&amp;</span>apos; <span class="subst">+</span> <span class="built_in">data</span><span class="built_in">.</span>message);
                });
        }
    <span class="subst">&amp;</span><span class="literal">lt</span>;/script<span class="subst">&amp;</span><span class="literal">gt</span>;

    <span class="subst">&amp;</span><span class="literal">lt</span>;a href<span class="subst">=&amp;</span>quot;javascript:get_jsonp();<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;Click me for jsonp<span class="subst">&amp;</span><span class="literal">lt</span>;/a<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;br <span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;textarea id<span class="subst">=&amp;</span>quot;rjsonp<span class="subst">&amp;</span>quot; cols<span class="subst">=&amp;</span>quot;<span class="number">50</span><span class="subst">&amp;</span>quot; <span class="keyword">rows</span><span class="subst">=&amp;</span>quot;<span class="number">3</span><span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/textarea<span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;br <span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;

    <span class="subst">&amp;</span><span class="literal">lt</span>;a href<span class="subst">=&amp;</span>quot;javascript:get_json();<span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;Click me for json<span class="subst">&amp;</span><span class="literal">lt</span>;/a<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;br <span class="subst">/</span><span class="subst">&amp;</span><span class="literal">gt</span>;
    <span class="subst">&amp;</span><span class="literal">lt</span>;textarea id<span class="subst">=&amp;</span>quot;rjson<span class="subst">&amp;</span>quot; cols<span class="subst">=&amp;</span>quot;<span class="number">50</span><span class="subst">&amp;</span>quot; <span class="keyword">rows</span><span class="subst">=&amp;</span>quot;<span class="number">3</span><span class="subst">&amp;</span>quot;<span class="subst">&amp;</span><span class="literal">gt</span>;<span class="subst">&amp;</span><span class="literal">lt</span>;/textarea<span class="subst">&amp;</span><span class="literal">gt</span>;

  <span class="subst">&amp;</span><span class="literal">lt</span>;/body<span class="subst">&amp;</span><span class="literal">gt</span>;
<span class="subst">&amp;</span><span class="literal">lt</span>;/html<span class="subst">&amp;</span><span class="literal">gt</span>;
</code></pre><p>&#x5230;&#x6B64;&#x7ED3;&#x675F;&#x5B8C;&#x6BD5;&#x3002;&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x7A97;&#x53E3;&#xFF0C;</p>
<pre><code>npm <span class="keyword">install</span>
</code></pre><p>&#x5B89;&#x88C5;node.js&#x4F9D;&#x8D56;&#x5305;</p>
<pre><code><span class="title">node</span> bin/www
</code></pre><p>&#x542F;&#x52A8;node&#x7A0B;&#x5E8F;</p>
<p>&#x6253;&#x5F00;&#x6E38;&#x89C8;&#x5668;&#x8BBF;&#x95EE;<a href="http://localhost:3000/" target="_blank" rel="external">http://localhost:3000/</a></p>
<p>&#x7531;&#x4E8E;&#x65F6;&#x95F4;&#x7D27;&#x5F20;&#xFF0C;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x90FD;&#x6709;&#x6CA1;&#x6709;&#x505A;&#x592A;&#x591A;&#x7684;&#x8BB2;&#x89E3;&#x3002;</p>
<p>express&#x6846;&#x67B6;&#x5BF9;&#x4E8E;json&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x5904;&#x7406;</p>
<pre><code>res.json = <span class="function"><span class="keyword">function</span> <span class="title">json</span>(<span class="params">obj</span>) </span>{
  <span class="keyword">var</span> val = obj;

  <span class="comment">// allow status / body</span>
<span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">2</span>) {
    <span class="comment">// res.json(body, status) backwards compat</span>
<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">1</span>] === &amp;apos;<span class="built_in">number</span>&amp;apos;) {
      deprecate(&amp;apos;res.json(obj, status): Use res.status(status).json(obj) instead&amp;apos;);
      <span class="keyword">this</span>.statusCode = <span class="built_in">arguments</span>[<span class="number">1</span>];
    } <span class="keyword">else</span> {
      deprecate(&amp;apos;res.json(status, obj): Use res.status(status).json(obj) instead&amp;apos;);
      <span class="keyword">this</span>.statusCode = <span class="built_in">arguments</span>[<span class="number">0</span>];
      val = <span class="built_in">arguments</span>[<span class="number">1</span>];
    }
  }

  <span class="comment">// settings</span>
<span class="keyword">var</span> app = <span class="keyword">this</span>.app;
  <span class="keyword">var</span> replacer = app.get(&amp;apos;json replacer&amp;apos;);
  <span class="keyword">var</span> spaces = app.get(&amp;apos;json spaces&amp;apos;);
  <span class="keyword">var</span> body = <span class="built_in">JSON</span>.stringify(val, replacer, spaces);

  <span class="comment">// content-type</span>
<span class="keyword">if</span> (!<span class="keyword">this</span>.get(&amp;apos;Content-Type&amp;apos;)) {
    <span class="keyword">this</span>.set(&amp;apos;Content-Type&amp;apos;, &amp;apos;application/json&amp;apos;);
  }

  <span class="keyword">return</span> <span class="keyword">this</span>.send(body);
};


res.send = <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">body</span>) </span>{
  <span class="keyword">var</span> chunk = body;
  <span class="keyword">var</span> encoding;
  <span class="keyword">var</span> len;
  <span class="keyword">var</span> req = <span class="keyword">this</span>.req;
  <span class="keyword">var</span> <span class="keyword">type</span>;

  <span class="comment">// settings</span>
<span class="keyword">var</span> app = <span class="keyword">this</span>.app;

  <span class="comment">// allow status / body</span>
<span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">2</span>) {
    <span class="comment">// res.send(body, status) backwards compat</span>
<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">0</span>] !== &amp;apos;<span class="built_in">number</span>&amp;apos; &amp;amp;&amp;amp; <span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">1</span>] === &amp;apos;<span class="built_in">number</span>&amp;apos;) {
      deprecate(&amp;apos;res.send(body, status): Use res.status(status).send(body) instead&amp;apos;);
      <span class="keyword">this</span>.statusCode = <span class="built_in">arguments</span>[<span class="number">1</span>];
    } <span class="keyword">else</span> {
      deprecate(&amp;apos;res.send(status, body): Use res.status(status).send(body) instead&amp;apos;);
      <span class="keyword">this</span>.statusCode = <span class="built_in">arguments</span>[<span class="number">0</span>];
      chunk = <span class="built_in">arguments</span>[<span class="number">1</span>];
    }
  }

  <span class="comment">// disambiguate res.send(status) and res.send(status, num)</span>
<span class="keyword">if</span> (<span class="keyword">typeof</span> chunk === &amp;apos;<span class="built_in">number</span>&amp;apos; &amp;amp;&amp;amp; <span class="built_in">arguments</span>.length === <span class="number">1</span>) {
    <span class="comment">// res.send(status) will set status message as text string</span>
<span class="keyword">if</span> (!<span class="keyword">this</span>.get(&amp;apos;Content-Type&amp;apos;)) {
      <span class="keyword">this</span>.type(&amp;apos;txt&amp;apos;);
    }

    deprecate(&amp;apos;res.send(status): Use res.status(status).end() instead&amp;apos;);
    <span class="keyword">this</span>.statusCode = chunk;
    chunk = http.STATUS_CODES[chunk];
  }

  <span class="keyword">switch</span> (<span class="keyword">typeof</span> chunk) {
    <span class="comment">// string defaulting to html</span>
<span class="keyword">case</span> &amp;apos;<span class="built_in">string</span>&amp;apos;:
 <span class="keyword">if</span> (!<span class="keyword">this</span>.get(&amp;apos;Content-Type&amp;apos;)) {
        <span class="keyword">this</span>.type(&amp;apos;html&amp;apos;);
      }
      <span class="keyword">break</span>;
    <span class="keyword">case</span> &amp;apos;<span class="built_in">boolean</span>&amp;apos;:
 <span class="keyword">case</span> &amp;apos;<span class="built_in">number</span>&amp;apos;:
 <span class="keyword">case</span> &amp;apos;object&amp;apos;:
 <span class="keyword">if</span> (chunk === <span class="literal">null</span>) {
        chunk = &amp;apos;&amp;apos;;
      } <span class="keyword">else</span> <span class="keyword">if</span> (Buffer.isBuffer(chunk)) {
        <span class="keyword">if</span> (!<span class="keyword">this</span>.get(&amp;apos;Content-Type&amp;apos;)) {
          <span class="keyword">this</span>.type(&amp;apos;bin&amp;apos;);
        }
      } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="keyword">this</span>.json(chunk);
      }
      <span class="keyword">break</span>;
  }

  <span class="comment">// write strings in utf-8</span>
<span class="keyword">if</span> (<span class="keyword">typeof</span> chunk === &amp;apos;<span class="built_in">string</span>&amp;apos;) {
    encoding = &amp;apos;utf8&amp;apos;;
    <span class="keyword">type</span> = <span class="keyword">this</span>.get(&amp;apos;Content-Type&amp;apos;);

    <span class="comment">// reflect this in content-type</span>
<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">type</span> === &amp;apos;<span class="built_in">string</span>&amp;apos;) {
      <span class="keyword">this</span>.set(&amp;apos;Content-Type&amp;apos;, setCharset(<span class="keyword">type</span>, &amp;apos;utf-<span class="number">8</span>&amp;apos;));
    }
  }

  <span class="comment">// populate Content-Length</span>
<span class="keyword">if</span> (chunk !== <span class="literal">undefined</span>) {
    <span class="keyword">if</span> (!Buffer.isBuffer(chunk)) {
      <span class="comment">// convert chunk to Buffer; saves later double conversions</span>
chunk = <span class="keyword">new</span> Buffer(chunk, encoding);
      encoding = <span class="literal">undefined</span>;
    }

    len = chunk.length;
    <span class="keyword">this</span>.set(&amp;apos;Content-Length&amp;apos;, len);
  }

  <span class="comment">// method check</span>
<span class="keyword">var</span> isHead = req.method === &amp;apos;HEAD&amp;apos;;

  <span class="comment">// ETag support</span>
<span class="keyword">if</span> (len !== <span class="literal">undefined</span> &amp;amp;&amp;amp; (isHead || req.method === &amp;apos;GET&amp;apos;)) {
    <span class="keyword">var</span> etag = app.get(&amp;apos;etag fn&amp;apos;);
    <span class="keyword">if</span> (etag &amp;amp;&amp;amp; !<span class="keyword">this</span>.get(&amp;apos;ETag&amp;apos;)) {
      etag = etag(chunk, encoding);
      etag &amp;amp;&amp;amp; <span class="keyword">this</span>.set(&amp;apos;ETag&amp;apos;, etag);
    }
  }

  <span class="comment">// freshness</span>
<span class="keyword">if</span> (req.fresh) <span class="keyword">this</span>.statusCode = <span class="number">304</span>;

  <span class="comment">// strip irrelevant headers</span>
<span class="keyword">if</span> (<span class="number">204</span> == <span class="keyword">this</span>.statusCode || <span class="number">304</span> == <span class="keyword">this</span>.statusCode) {
    <span class="keyword">this</span>.removeHeader(&amp;apos;Content-Type&amp;apos;);
    <span class="keyword">this</span>.removeHeader(&amp;apos;Content-Length&amp;apos;);
    <span class="keyword">this</span>.removeHeader(&amp;apos;Transfer-Encoding&amp;apos;);
    chunk = &amp;apos;&amp;apos;;
  }

  <span class="comment">// skip body for HEAD</span>
<span class="keyword">if</span> (isHead) {
    <span class="keyword">this</span>.end();
  }

  <span class="comment">// respond</span>
<span class="keyword">this</span>.end(chunk, encoding);

  <span class="keyword">return</span> <span class="keyword">this</span>;
};
</code></pre><p>send&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x6570;&#x5BF9;&#x8F93;&#x51FA;&#x6570;&#x636E; &#x5408;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x5316;&#xFF0C;node&#x4E2D;&#x53EA;&#x5141;&#x8BB8;&#x4F20;&#x8F93;Buffer&#x6216;&#x8005;String&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/transcribe/">transcribe</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Html/">Html</a><a href="/tags/JSONP/">JSONP</a><a href="/tags/Node-js/">Node.js</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/36/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="page-number" href="/page/36/">36</a><span class="page-number current">37</span><a class="page-number" href="/page/38/">38</a><a class="page-number" href="/page/39/">39</a><span class="space">&hellip;</span><a class="page-number" href="/page/61/">61</a><a class="extend next" rel="next" href="/page/38/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/transcribe/" title="transcribe">transcribe<sup>606</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志/" title="日志">日志<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>80</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>75</sup></a></li>
			
		
			
				<li><a href="/tags/Memcached/" title="Memcached">Memcached<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/JVM/" title="JVM">JVM<sup>65</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>42</sup></a></li>
			
		
			
				<li><a href="/tags/io-js/" title="io.js">io.js<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Spring-MVC/" title="Spring MVC">Spring MVC<sup>33</sup></a></li>
			
		
			
				<li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/Nosql/" title="Nosql">Nosql<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/程序员/" title="程序员">程序员<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Dubbo/" title="Dubbo">Dubbo<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/源码分析/" title="源码分析">源码分析<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>10</sup></a></li>
			
		
		</ul>
</div>


<div class="weiboshow">
	<p class="asidetitle">新浪微博</p>
	<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1289635200&verifier=e6bef170&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/512316815" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/sblig" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/sblig" target="_blank" title="fblog">fblog</a> © 2015
		
		<a href="/about" target="_blank" title="edwin">edwin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
