<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[dianzi blog]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://taojinke.github.io/"/>
  <updated>2015-07-06T13:31:19.328Z</updated>
  <id>http://taojinke.github.io/</id>
  
  <author>
    <name><![CDATA[edwin]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/48f5ba0/"/>
    <id>http://taojinke.github.io/2015/07/06/48f5ba0/</id>
    <published>2015-07-06T13:31:19.328Z</published>
    <updated>2015-07-06T13:31:19.328Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/48f285b/"/>
    <id>http://taojinke.github.io/2015/07/06/48f285b/</id>
    <published>2015-07-06T13:31:19.308Z</published>
    <updated>2015-07-06T13:31:19.308Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/df4c2a8/"/>
    <id>http://taojinke.github.io/2015/07/06/df4c2a8/</id>
    <published>2015-07-06T13:28:22.072Z</published>
    <updated>2015-07-06T13:28:22.072Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/c07a4dd/"/>
    <id>http://taojinke.github.io/2015/07/06/c07a4dd/</id>
    <published>2015-07-06T13:27:30.349Z</published>
    <updated>2015-07-06T13:27:30.349Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/b0f5116/"/>
    <id>http://taojinke.github.io/2015/07/06/b0f5116/</id>
    <published>2015-07-06T13:27:04.312Z</published>
    <updated>2015-07-06T13:27:04.312Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://taojinke.github.io/2015/07/06/b0f02f6/"/>
    <id>http://taojinke.github.io/2015/07/06/b0f02f6/</id>
    <published>2015-07-06T13:27:04.289Z</published>
    <updated>2015-07-06T13:27:04.289Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用 Varnish 优化移动端站点 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/48ece06/"/>
    <id>http://taojinke.github.io/2015/07/06/48ece06/</id>
    <published>2015-07-06T01:31:19.000Z</published>
    <updated>2015-07-06T13:31:19.329Z</updated>
    <content type="html"><![CDATA[<p>&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x4F60;&#x521A;&#x521A;&#x53D1;&#x5E03;&#x4E86;&#x4E00;&#x7BC7;&#x535A;&#x6587;&#xFF0C;&#x5E76;&#x5206;&#x4EAB;&#x5230;&#x4E86;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6070;&#x5DE7;&#x88AB;&#x5927;V&#x770B;&#x4E2D;&#x518D;&#x6B21;&#x5206;&#x4EAB;&#x4E86;&#x51FA;&#x53BB;&#xFF0C;&#x7ACB;&#x5373;&#x5438;&#x5F15;&#x4E86;&#x6570;&#x767E;&#x7C89;&#x4E1D;&#x7684;&#x76EE;&#x5149;&#xFF0C;&#x5F15;&#x5BFC;&#x4ED6;&#x4EEC;&#x6D8C;&#x5165;&#x4E86;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x3002;&#x770B;&#x5230;&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x8BBF;&#x5BA2;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x7684;&#x8BC4;&#x8BBA;&#xFF0C;&#x4F60;&#x5185;&#x5FC3;&#x6FC0;&#x52A8;&#x4E0D;&#x5DF2;&#x3002;&#x7A81;&#x7136;&#x4E4B;&#x95F4;&#xFF0C;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x5C31;&#x6302;&#x6389;&#x4E86;&#xFF0C;&#x6EE1;&#x5C4F;&#x7684;&#x6570;&#x636E;&#x8FDE;&#x63A5;&#x9519;&#x8BEF;&#x2026;&#x2026;</p>
<p>&#x6216;&#x8005;&#x5047;&#x60F3;&#x53E6;&#x4E00;&#x79CD;&#x60C5;&#x5883;&#xFF0C;&#x4F60;&#x4E00;&#x76F4;&#x5F88;&#x52AA;&#x529B;&#x5730;&#x521B;&#x4E1A;&#x3002;&#x7A81;&#x7136;&#x6709;&#x4E00;&#x5929;&#xFF0C;&#x4E00;&#x4E2A;&#x5927;V&#x5728;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x8868;&#x8FBE;&#x4E86;&#x5BF9;&#x8D35;&#x516C;&#x53F8;&#x7684;&#x559C;&#x7231;&#x4E4B;&#x60C5;&#xFF0C;&#x5B57;&#x91CC;&#x884C;&#x95F4;&#x6EE1;&#x6EE1;&#x7684;&#x8D5E;&#x53F9;&#x3002;&#x5173;&#x6CE8;&#x8FD9;&#x4E2A;&#x5927;V&#x7684;&#x7C89;&#x4E1D;&#x5FC3;&#x52A8;&#x4E86;&#xFF0C;&#x53C8;&#x6D8C;&#x5165;&#x4E86;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x3002;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x70B9;&#x51FB;&#x8FDE;&#x63A5;&#x540E;&#x5374;&#x65E0;&#x6CD5;&#x8FDB;&#x5165;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#xFF0C;&#x6216;&#x8005;&#x8FDB;&#x5165;&#x540E;&#x65E0;&#x6CD5;&#x6CE8;&#x518C;&#x7528;&#x6237;&#xFF0C;&#x751A;&#x81F3;&#x9875;&#x9762;&#x76F8;&#x5E94;&#x8D85;&#x65F6;&#xFF0C;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x4EA7;&#x54C1;&#x7684;&#x5E8F;&#x5217;&#x53F7;&#x3002;&#x5C3D;&#x7BA1;&#x4F60;&#x5728;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x4E0A;&#x5BF9;&#x6B64;&#x975E;&#x5E38;&#x8BDA;&#x6073;&#x7684;&#x8868;&#x8FBE;&#x4E86;&#x6B49;&#x610F;&#xFF0C;&#x4F46;&#x4F17;&#x591A;&#x7684;&#x6D4F;&#x89C8;&#x8005;&#x90FD;&#x4E0D;&#x4F1A;&#x518D;&#x6709;&#x5174;&#x8DA3;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x5047;&#x60F3;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x666E;&#x904D;&#x3002;&#x5728;&#x6211;&#x7684;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x5C31;&#x7ECF;&#x5E38;&#x53D1;&#x73B0;&#xFF0C;&#x5F53;&#x7F51;&#x7AD9;&#x4FE1;&#x606F;&#x5728;&#x793E;&#x4EA4;&#x7F51;&#x7AD9;&#x6D41;&#x4F20;&#x5F00;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x5C31;&#x4F1A;&#x9AA4;&#x589E;&#x3002;&#x8FD9;&#x4E5F;&#x8868;&#x660E;&#xFF0C;&#x5728;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x4EBA;&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F20;&#x7EDF;&#x7684;&#x684C;&#x9762;&#x5E94;&#x7528;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x7684;&#x79FB;&#x52A8;&#x7528;&#x6237;&#x90FD;&#x5728;&#x4F7F;&#x7528;&#x516C;&#x5171; Wi-Fi &#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x4F4E;&#x901F;&#x7F51;&#x7EDC;&#x6765;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5FEB;&#x901F;&#x52A0;&#x8F7D;&#x7F51;&#x7AD9;&#x7684;&#x4EFB;&#x4F55;&#x4F18;&#x5316;&#x63AA;&#x65BD;&#xFF0C;&#x90FD;&#x4F1A;&#x6709;&#x5229;&#x4E8E;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x5728;&#x672C;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4F1A;&#x5411;&#x4F60;&#x4ECB;&#x7ECD;&#xA0;Varnish &#x7F51;&#x9875;&#x5E94;&#x7528;&#x52A0;&#x901F;&#x5668;&#xFF08;Varnish Web application accelerator&#xFF09;&#x2014;&#x2014;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x514D;&#x8D39;&#x3001;&#x7B80;&#x5355;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5927;&#x5927;&#x6539;&#x5584;&#x5927;&#x89C4;&#x6A21;&#x7A81;&#x53D1;&#x6027;&#x8BBF;&#x95EE;&#x72B6;&#x6001;&#x4E0B;&#x7684;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#x3002;</p>
<h2 id="&#x4EAE;&#x70B9;">&#x4EAE;&#x70B9;</h2><p>&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x7684;&#x7F51;&#x7AD9;&#x6765;&#x8BF4;&#xFF0C;&#x4F17;&#x591A;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;&#x7684;&#x6838;&#x5FC3;&#x5185;&#x5BB9;&#x5927;&#x90FD;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x2014;&#x2014;&#x5C24;&#x5176;&#x662F;&#x6BCF;&#x5929;&#x90FD;&#x4F1A;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x7684;&#x95E8;&#x6237;&#x7F51;&#x7AD9;&#x3002;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#x4F60;&#x4E5F;&#x4F1A;&#x7406;&#x89E3;&#xFF0C;&#x56FE;&#x7247;&#x3001;CSS &#x548C; JavaScript&#xFF0C;&#x8FD9;&#x4E9B;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5F80;&#x5F80;&#x6709;&#x8F83;&#x957F;&#x7684;&#x6709;&#x6548;&#x671F;&#xFF08;&#x8BD1;&#x8005;&#x6CE8;&#xFF1A;&#x6709;&#x5229;&#x4E8E;&#x5728;&#x4E0D;&#x540C;&#x9875;&#x9762;&#x95F4;&#x590D;&#x7528;&#xFF09;&#x3002;&#x4F46;&#x4F60;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x8FC7;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x535A;&#x5BA2;&#x5E73;&#x53F0;&#x6216;&#x8005;&#x662F;&#x5185;&#x5BB9;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x6240;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x5185;&#x5BB9;&#xFF0C;&#x5927;&#x591A;&#x4E5F;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</p>
<p>&#x6765;&#x81EA;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x7684;&#x7528;&#x6237;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x535A;&#x5BA2;&#x540E;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x8BF7;&#x6C42;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x9664;&#x4E86;&#x56FE;&#x7247;&#x3001;JavaScript &#x548C; CSS&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x8FD8;&#x5305;&#x62EC; PHP &#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4EE5;&#x53CA;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x5230;&#x7684;&#x6570;&#x636E;&#x3002;&#x8BBF;&#x95EE;&#x535A;&#x5BA2;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x7BC7;&#x535A;&#x6587;&#xFF0C;&#x6240;&#x9700;&#x8981;&#x53D1;&#x9001;&#x7684;&#x6BCF;&#x4E00;&#x6761;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x5728;&#x83B7;&#x53D6;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x914D;&#x5408; PHP &#x811A;&#x672C;&#xFF0C;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x8868;&#x5355;&#x68C0;&#x7D22;&#x7B49;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x91CF;&#x8D8A;&#x591A;&#xFF0C;Apache &#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x4F1A;&#x8D8A;&#x591A;&#xFF0C;&#x800C;&#x603B;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#x662F;&#x7531;&#x9650;&#x5EA6;&#x7684;&#x3002;&#x76F8;&#x5E94;&#x7684;&#xFF0C;&#x8BBF;&#x5BA2;&#x7684;&#x6570;&#x91CF;&#x8D8A;&#x591A;&#xFF0C;&#x670D;&#x52A1;&#x5C31;&#x4F1A;&#x8D8A;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x6323;&#x5230;&#x7684;&#x94B1;&#x5C31;&#x4F1A;&#x8D8A;&#x5C11;&#x3002;</p>
<p>&#x8FD9;&#x5C31;&#x662F;&#x7C7B;&#x4F3C; Varnish &#x7684; HTTP &#x7F13;&#x5B58;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#x7684;&#x5730;&#x65B9;&#x3002;&#x5982;&#x6B64;&#x4E00;&#x6765;&#xFF0C;&#x4ECE;&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x51FA;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x518D;&#x76F4;&#x63A5;&#x5230;&#x8FBE;&#x521B;&#x5EFA;&#x548C;&#x7EF4;&#x62A4;&#x7F51;&#x9875;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x800C;&#x662F;&#x5230;&#x8FBE; HTTP &#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5982;&#x679C;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x5B58;&#x5728;&#x6240;&#x9700;&#x9875;&#x9762;&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5185;&#x5B58;&#x8FD4;&#x56DE;&#x76F8;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x4E0D;&#x518D;&#x52A8;&#x7528; Apache &#x670D;&#x52A1;&#x5668;&#x548C;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5982;&#x679C;&#x6240;&#x9700;&#x9875;&#x9762;&#x4E0D;&#x518D;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x50CF;&#x4F20;&#x7EDF;&#x65B9;&#x5F0F;&#x4E00;&#x6837;&#xFF0C;&#x4F7F;&#x7528; Apache &#x670D;&#x52A1;&#x5668;&#x6765;&#x5904;&#x7406;&#x3002;Apche &#x5904;&#x7406;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x5C06;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x4FDD;&#x5B58;&#x5230; HTTP &#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x7B49;&#x5230;&#x4E0B;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x76F8;&#x540C;&#x9875;&#x9762;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E86;&#x3002;</p>
<p>&#x5C06;&#x9875;&#x9762;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5176;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x8FDC;&#x5FEB;&#x4E8E;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x5728;&#x786C;&#x76D8;&#x4E2D;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5F53;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x4E3A;&#x4E8E; HTTP &#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x65F6;&#xFF0C;&#x5C31;&#x65E0;&#x9700;&#x52A8;&#x7528; PHP &#x6216;&#x8005;&#x6570;&#x636E;&#x5E93;&#x6765;&#x5904;&#x7406;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E5F;&#x8BA9; PHP &#x548C; &#x670D;&#x52A1;&#x5668;&#x80FD;&#x591F;&#x6709;&#x66F4;&#x591A;&#x7684;&#x6027;&#x80FD;&#x6765;&#x5904;&#x7406;&#x66F4;&#x7E41;&#x91CD;&#x7684;&#x8FDB;&#x7A0B;&#x548C;&#x8FDE;&#x63A5;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x88AB;&#x5927; V &#x79F0;&#x8D5E;&#x7684;&#x90A3;&#x5BB6;&#x521D;&#x521B;&#x516C;&#x53F8;&#x9762;&#x4E34;&#x7684;&#x60C5;&#x5883;&#xFF0C;&#x4F17;&#x591A;&#x7C89;&#x4E1D;&#x70B9;&#x51FB;&#x7684;&#x94FE;&#x63A5;&#x5176;&#x5B9E;&#x53EA;&#x662F;&#x7F51;&#x7AD9;&#x4E2D;&#x7684;&#x5C11;&#x6570;&#x51E0;&#x4E2A;&#x9875;&#x9762;&#x2014;&#x2014;&#x800C;&#x8FD9;&#x4E9B;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4FDD;&#x5B58;&#x5728;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x65F6;&#x76F4;&#x63A5;&#x4ECE;&#x5185;&#x5B58;&#x54CD;&#x5E94;&#x8BF7;&#x6C42;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x51C6;&#x5907;&#x6CE8;&#x518C;&#x7684;&#x7528;&#x6237;&#x5C31;&#x4F1A;&#x611F;&#x5230;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x975E;&#x5E38;&#x987A;&#x5229;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x53F0;&#x811A;&#x672C;&#x548C;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#x975E;&#x5E38;&#x5BBD;&#x88D5;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x53D7;&#x7A81;&#x53D1;&#x6027;&#x8BF7;&#x6C42;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<h2 id="&#x539F;&#x7406;">&#x539F;&#x7406;</h2><p>&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x793A;&#x610F;&#x56FE;&#xFF0C;&#x5C55;&#x793A;&#x4E86; Apache &#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x8BF7;&#x6C42;&#x540E;&#x751F;&#x6210;&#x7AD9;&#x70B9;&#x5185;&#x5BB9;&#x7684;&#x57FA;&#x672C;&#x6D41;&#x7A0B;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x8BF7;&#x6C42;&#x76F8;&#x540C;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x4E00;&#x5171;&#x4ECE;&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x9001;&#x4E86;&#x4E94;&#x6761;&#x6307;&#x4EE4;&#x7ED9; Apache&#xFF0C;&#x800C; Apache &#x5F88;&#x5446;&#x677F;&#x7684;&#x5BF9;&#x6BCF;&#x6761;&#x8BF7;&#x6C42;&#x90FD;&#x505A;&#x4E86;&#x8BE6;&#x7EC6;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150706/48ebf60.png" alt="&#x4F7F;&#x7528; Varnish &#x4F18;&#x5316;&#x79FB;&#x52A8;&#x7AEF;&#x7AD9;&#x70B9;"></p>
<p>&#x662F;&#x7684;&#xFF0C;Apache &#x5904;&#x7406;&#x4E86;&#x6BCF;&#x4E00;&#x6761;&#x8BF7;&#x6C42;&#x2014;&#x2014;&#x56FE;&#x50CF;&#xFF0C;CSS&#xFF0C;JavaScript &#x548C; HTML &#x6587;&#x4EF6;&#x3002;&#x5982;&#x679C; PHP &#x4E2D;&#x6709;&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5C31;&#x4F1A;&#x89E3;&#x6790;&#x4E00;&#x6B21;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8981;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x6570;&#x636E;&#x8FDE;&#x63A5;&#xFF0C;&#x8FDB;&#x884C; SQL &#x67E5;&#x8BE2;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x6700;&#x7EC8;&#xFF0C;&#x5728; Apache &#x8FD4;&#x56DE;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x4FE1;&#x606F;&#x4E4B;&#x524D;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x8FD4;&#x56DE;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x7EC4;&#x88C5;&#x6210;&#x5B8C;&#x6210;&#x7684;&#x9875;&#x9762;&#x3002;</p>
<p><strong>[1] &#xA0;[2]&#xA0;[3]&#xA0;[4]&#xA0;&#xA0;&#x4E0B;&#x4E00;&#x9875;</strong></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x4F60;&#x521A;&#x521A;&#x53D1;&#x5E03;&#x4E86;&#x4E00;&#x7BC7;&#x535A;&#x6587;&#xFF0C;&#x5E76;&]]>
    </summary>
    
      <category term="Apache HTTP Server" scheme="http://taojinke.github.io/tags/Apache-HTTP-Server/"/>
    
      <category term="Varnish" scheme="http://taojinke.github.io/tags/Varnish/"/>
    
      <category term="数据库" scheme="http://taojinke.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CentOS服务器给WordPress安装Varnish加速 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/48e89aa/"/>
    <id>http://taojinke.github.io/2015/07/06/48e89aa/</id>
    <published>2015-07-06T01:31:19.000Z</published>
    <updated>2015-07-06T13:31:19.273Z</updated>
    <content type="html"><![CDATA[<p>Varnish&#x662F;&#x4E00;&#x6B3E;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5F00;&#x6E90;HTTP&#x52A0;&#x901F;&#x5668;&#xFF0C;&#x632A;&#x5A01;&#x6700;&#x5927;&#x7684;&#x5728;&#x7EBF;&#x62A5;&#x7EB8;Verdens Gang (<a href="http://www.vg.no" target="_blank" rel="external">http://www.vg.no</a>) &#x4F7F;&#x7528;3&#x53F0;Varnish&#x4EE3;&#x66FF;&#x4E86;&#x539F;&#x6765;&#x7684;12&#x53F0;squid&#xFF0C;&#x6027;&#x80FD;&#x5C45;&#x7136;&#x6BD4;&#x4EE5;&#x524D;&#x66F4;&#x597D;&#x3002;&#x53EF;&#x89C1;Varnish&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x5F3A;&#x5927;&#x7684;&#x52A0;&#x901F;&#x5668;&#x3002;&#x4E0B;&#x9762;&#x7F57;&#x4F0A;&#x7ED9;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5728;CentOS&#x4E0A;&#x5B89;&#x88C5;Varnish&#x6765;&#x7ED9;&#x4F60;&#x7684;WordPress&#x535A;&#x5BA2;&#x52A0;&#x901F;&#x3002;</p>
<p>1&#xFF0C;&#x5B89;&#x88C5;Varnsih&#xA0;</p>
<p>&#x4F7F;&#x7528;SSH&#x767B;&#x5F55;&#x4F60;&#x7684;VPS&#xFF0C;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x5B89;&#x88C5;Varnish&#xFF1A;</p>
<pre><code>yum <span class="keyword">install</span> varnish
</code></pre><p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x542F;&#x52A8;Varnish&#xFF1A;</p>
<pre><code>/etc/init.d/varnish <span class="built_in">start</span>
</code></pre><p>&#x8BBE;&#x7F6E;&#x4E3A;&#x5F00;&#x673A;&#x542F;&#x52A8;&#xFF1A;</p>
<pre><code>chkconfig <span class="subst">&amp;</span><span class="variable">#x2013</span>;level <span class="number">345</span> varnish <span class="keyword">on</span>
</code></pre><p>2&#xFF0C;&#x914D;&#x7F6E;Varnish</p>
<p>&#x6253;&#x5F00;default.vcl&#xFF1A;</p>
<pre><code>nano <span class="regexp">/etc/</span>varnish/<span class="keyword">default</span>.vcl
</code></pre><p>&#x786E;&#x8BA4;&#x9ED8;&#x8BA4;&#x7684;default.vcl&#x548C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x76F8;&#x5339;&#x914D;&#xFF1A;</p>
<pre><code><span class="comment"># Back-End</span>
backend default {
.host = &amp;quot;<span class="number">127.0</span>.0.1&amp;quot;;
.port = &amp;quot;<span class="number">80</span>&amp;quot;;
.connect_timeout = <span class="number">60</span>s;
.first_byte_timeout = <span class="number">10</span>s;
.between_bytes_timeout = <span class="number">10</span>s;
}

<span class="comment"># Custom</span>
sub vcl_recv {
remove req.<span class="keyword">http</span>.X-Forwarded-For;
<span class="keyword">set</span> req.<span class="keyword">http</span>.X-Forwarded-For = client.ip;

<span class="keyword">if</span> (req.url ~ &amp;quot;^/wp-(login|admin)&amp;quot;) {
<span class="keyword">return</span> (pipe);
}

<span class="keyword">if</span> (req.<span class="keyword">http</span>.Cookie ~&amp;quot;(wp-postpass|wordpress_logged_in|comment_author_)&amp;quot;) {
<span class="keyword">return</span> (pipe);
}

<span class="keyword">if</span> (req.request == &amp;quot;POST&amp;quot;) {
<span class="keyword">return</span> (pass);
}

<span class="keyword">if</span> (req.<span class="keyword">http</span>.Cache-Control ~ &amp;quot;no-cache&amp;quot;) {
<span class="keyword">return</span> (pass);
}

<span class="keyword">if</span> (req.<span class="keyword">http</span>.Authorization) {
<span class="keyword">return</span> (pass);
}

<span class="keyword">if</span> (req.url ~ &amp;quot;\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pd f|txt|tar|wav|bmp|rtf|js|flv|swf|htm|html)$&amp;quot;) {
<span class="keyword">unset</span> req.<span class="keyword">http</span>.Cookie;
<span class="keyword">unset</span> req.<span class="keyword">http</span>.Accept-Encoding;
<span class="keyword">unset</span> req.<span class="keyword">http</span>.Vary;
<span class="keyword">return</span> (lookup);
}

<span class="keyword">if</span> (req.<span class="keyword">http</span>.Accept-Encoding) {
<span class="keyword">if</span> (req.url ~ &amp;quot;\.(jpg|png|gif|gz|tgz|bz2|tbz|mp3|ogg)$&amp;quot;) {
remove req.<span class="keyword">http</span>.Accept-Encoding;
} elsif (req.<span class="keyword">http</span>.Accept-Encoding ~ &amp;quot;gzip&amp;quot;) {
<span class="keyword">set</span> req.<span class="keyword">http</span>.Accept-Encoding = &amp;quot;gzip&amp;quot;;
} elsif (req.<span class="keyword">http</span>.Accept-Encoding ~ &amp;quot;deflate&amp;quot;) {
<span class="keyword">set</span> req.<span class="keyword">http</span>.Accept-Encoding = &amp;quot;deflate&amp;quot;;
} else {
remove req.<span class="keyword">http</span>.Accept-Encoding;
}
}

<span class="keyword">if</span> (req.backend.healthy) {
<span class="keyword">set</span> req.grace = <span class="number">30</span>s;
} else {
<span class="keyword">set</span> req.grace = <span class="number">1</span>h;
}

<span class="keyword">unset</span> req.<span class="keyword">http</span>.Cookie;
<span class="keyword">unset</span> req.<span class="keyword">http</span>.Vary;
<span class="keyword">return</span> (lookup);
}

sub vcl_fetch {
<span class="keyword">set</span> beresp.grace = <span class="number">1</span>h;
<span class="keyword">unset</span> beresp.<span class="keyword">http</span>.<span class="keyword">set</span>-cookie;
<span class="keyword">if</span> (req.url ~ &amp;quot;\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pd f|txt|tar|wav|bmp|rtf|js|flv|swf|htm|html)$&amp;quot;) {
<span class="keyword">set</span> beresp.ttl = <span class="number">24</span>h;
} else {
<span class="keyword">set</span> beresp.ttl = <span class="number">5</span>m;
}
<span class="keyword">return</span> (deliver);
}

sub vcl_deliver {
<span class="keyword">if</span>(obj.hits &amp;gt; <span class="number">0</span>) {
<span class="keyword">set</span> resp.<span class="keyword">http</span>.X-Cache = &amp;quot;HIT&amp;quot;;
} else {
<span class="keyword">set</span> resp.<span class="keyword">http</span>.X-Cache = &amp;quot;MISS&amp;quot;;
}
<span class="keyword">set</span> resp.<span class="keyword">http</span>.Cache-Control = &amp;quot;private&amp;quot;;
<span class="keyword">set</span> resp.<span class="keyword">http</span>.Pragma = &amp;quot;private&amp;quot;;
remove resp.<span class="keyword">http</span>.X-Varnish;
remove resp.<span class="keyword">http</span>.Via;
remove resp.<span class="keyword">http</span>.Age;
remove resp.<span class="keyword">http</span>.Server;
remove resp.<span class="keyword">http</span>.X-Powered-By;
}

sub vcl_pipe {
<span class="keyword">set</span> bereq.<span class="keyword">http</span>.connection = &amp;quot;<span class="keyword">close</span>&amp;quot;;
}
</code></pre><p>&#x91CD;&#x542F;Varnish&#x4F7F;&#x5176;&#x751F;&#x6548;&#xFF1A;</p>
<pre><code><span class="regexp">/etc/i</span>nit.d<span class="regexp">/varnish restart</span>
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<p>Varnish&#x662F;&#x4E00;&#x6B3E;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5F00;&#x6E90;HTTP&#x52A0;&#x901F;&#x5668;&#xFF0C;&#x632A;&#x5A01;&#x670]]>
    </summary>
    
      <category term="Centos" scheme="http://taojinke.github.io/tags/Centos/"/>
    
      <category term="Varnish" scheme="http://taojinke.github.io/tags/Varnish/"/>
    
      <category term="WordPress" scheme="http://taojinke.github.io/tags/WordPress/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Varnish模块和其配置语言优化Varnish -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/48e4a30/"/>
    <id>http://taojinke.github.io/2015/07/06/48e4a30/</id>
    <published>2015-07-06T01:31:19.000Z</published>
    <updated>2015-07-06T13:31:19.273Z</updated>
    <content type="html"><![CDATA[<p> &#x8FD9;&#x662F;&#x7531; <a href="https://twitter.com/denisb" target="_blank" rel="external">Denis Br&#xE6;khus</a> &#xA0; &#x548C; &#xA0; <a href="https://github.com/espebra" target="_blank" rel="external">Espen Braastad</a> &#x64B0;&#x5199;&#x7684;&#x5BA2;&#x5EA7;&#x6587;&#x7AE0;,&#xA0;&#x4ED6;&#x4EEC;&#x662F;&#x6765;&#x81EA; <em><a href="https://www.varnish-software.com/" target="_blank" rel="external">Varnish Software</a></em> &#x7684; &#xA0; <a href="https://www.varnish-software.com/product/varnish-api-engine" target="_blank" rel="external">Varnish API Engine</a> &#x7684;&#x5F00;&#x53D1;&#x8005;&#x3002;Varnish&#x957F;&#x671F;&#x7528;&#x4E8E;&#x8BA4;&#x8BC1;&#x540E;&#x7AEF;&#xFF0C;&#x6240;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x4ED6;&#x4EEC;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#x3002; </p>
<p>Varnish Software&#x521A;&#x521A;&#x653E;&#x51FA;Varnish API Engine&#x7684;&#x53D1;&#x5E03;&#x7248;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684; HTTP API&#xA0;&#x7F51;&#x5173;&#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x8BA4;&#x8BC1;&#x3001;&#x6388;&#x6743;&#x548C;&#x6240;&#x6709;&#x57FA;&#x4E8E;Varnish Cache&#x4E4B;&#x4E0A;&#x7684;&#x8C03;&#x8282;&#x3002;Varnish API Engine&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5C42;&#x8F7B;&#x6613;&#x5730;&#x6269;&#x5C55;&#x4F60;&#x76EE;&#x524D;&#x7684;API&#x96C6;&#x3002;&#x8FD9;&#x4E2A;&#x7EDF;&#x4E00;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5C42;&#x5185;&#x7F6E;&#x4E86;&#x9AD8;&#x5BB9;&#x91CF;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x7F13;&#x5B58;&#x80FD;&#x529B;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x5B9E;&#x65F6;&#x5EA6;&#x91CF;&#x3002;</p>
<p>Varnish API Engine&#x4F7F;&#x7528;&#x4E86;&#x4F17;&#x6240;&#x5468;&#x77E5;&#x7684;&#x7EC4;&#x4EF6;&#x5982;memcached&#x3001;SQLite&#x548C;&#x6700;&#x91CD;&#x8981;&#x7684;Varnish Cache&#x3002;&#x7BA1;&#x7406; API&#x662F;&#x7531;Python&#x5199;&#x6210;&#x7684;&#x3002;&#x8BE5;&#x4EA7;&#x54C1;&#x7684;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x5728;Varnish&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x4F7F;&#x7528;VCL (Varnish Configuration Language)&#x7F16;&#x5199;&#x6210;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x5E76;&#x4F7F;&#x7528;VMODs (Varnish Modules)&#x63D0;&#x4F9B;&#x6269;&#x5C55;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x4EE5;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x673A;&#x4F1A;&#x6765;&#x5411;&#x60A8;&#x5C55;&#x793A;&#x600E;&#x6837;&#x5728;VMODs&#x7684;&#x534F;&#x52A9;&#x4E0B;&#x4F7F;&#x7528;VCL&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x60A8;&#x81EA;&#x5DF1;&#x7684;&#x7075;&#x6D3B;&#x4E14;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5E94;&#x7528;&#x3002;</p>
]]></content>
    <summary type="html">
    <![CDATA[<p> &#x8FD9;&#x662F;&#x7531; <a href="https://twitter.com/denisb" target="_blank" rel="external">Denis Br&#xE6;khus</a> &#xA0; &#x548C; &#xA]]>
    </summary>
    
      <category term="Varnish" scheme="http://taojinke.github.io/tags/Varnish/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[varnish学习笔记 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/48dfc10/"/>
    <id>http://taojinke.github.io/2015/07/06/48dfc10/</id>
    <published>2015-07-06T01:31:19.000Z</published>
    <updated>2015-07-06T13:31:19.217Z</updated>
    <content type="html"><![CDATA[<p> varnish cache&#x662F;&#x4E00;&#x6B3E;&#x5F00;&#x6E90;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x3002;&#x548C;&#x8001;&#x724C;&#x7684;Squid&#x5BF9;&#x6BD4;&#x6709;&#x5982;&#x4E0B;&#x4F18;&#x70B9;&#x3002;</p>
<p> 1&#xFF1A;varnish&#x662F;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x6BD4;Squid&#x8981;&#x5FEB;&#x3002;</p>
<p> 2&#xFF1A;varnish&#x652F;&#x6301;&#x66F4;&#x9AD8;&#x7684;&#x5E76;&#x53D1;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x6BD4;Squid&#x66F4;&#x52A0;&#x7A33;&#x5B9A;&#x3002;</p>
<p> 3&#xFF1A;varnish&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7AEF;&#x53E3;&#x7BA1;&#x7406;&#xFF0C;&#x800C;squid&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x3002;</p>
<p> 4: &#xA0; varnish&#x7684;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x5982;&#x679C;&#x670D;&#x52A1;down&#x6389;&#x4E4B;&#x540E;&#xFF0C;&#x5185;&#x5B58;&#x7684;&#x6570;&#x636E;&#x5168;&#x90E8;&#x91CA;&#x653E;&#x3002;</p>
<p> varnish &#x7684;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#xFF0C;&#x9996;&#x5148;varnish&#x6709;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;&#x7BA1;&#x7406;&#x8FDB;&#x7A0B;&#xFF0C;&#x8D1F;&#x8D23;&#x521D;&#x59CB;&#x5316;worker&#x8FDB;&#x7A0B;&#xFF0C;&#x52A0;&#x8F7D;&#x548C;&#x7F16;&#x8BD1;vcl&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002; worker&#x8FDB;&#x7A0B;&#x751F;&#x6210;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF1A;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#xFF0C;&#x8C03;&#x5EA6;&#x7EBF;&#x7A0B;&#xFF0C;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x65F6;&#x95F4;&#x68C0;&#x6D4B;&#x7EBF;&#x7A0B;&#x7B49;&#x3002;&#x4E00;&#x822C;varnish&#x4F1A;&#x652F;&#x6301;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#x6700;&#x5927;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6570;&#x4E3A;500&#xFF0C;&#x6700;&#x5C0F;&#x4E3A;5&#x4E2A;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;1000&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;</p>
<p> varnish&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#x6D41;&#x7A0B;&#x4E3A; &#xA0;vcl_recv &#xA0;vcl_pass vcl_pipe &#xA0;vcl_hash &#xA0;vcl_hit vcl_miss vcl_fetch vcl_deliver</p>
]]></content>
    <summary type="html">
    <![CDATA[<p> varnish cache&#x662F;&#x4E00;&#x6B3E;&#x5F00;&#x6E90;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x]]>
    </summary>
    
      <category term="Varnish" scheme="http://taojinke.github.io/tags/Varnish/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用 varnish + nginx + lua 搭建网站的降级系统 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/48cab26/"/>
    <id>http://taojinke.github.io/2015/07/06/48cab26/</id>
    <published>2015-07-06T01:31:19.000Z</published>
    <updated>2015-07-06T13:31:19.074Z</updated>
    <content type="html"><![CDATA[<h3 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h3><p>&#x901A;&#x5E38;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x6570;&#x636E;&#x5E93;&#x6302;&#x6389;&#x540E;&#xFF0C;&#x540E;&#x679C;&#x5C06;&#x662F;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#x7684;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x57FA;&#x672C;&#x4E0D;&#x53EF;&#x7528;&#x4E86;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x7F51;&#x7AD9;&#x6765;&#x8BF4;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x6302;&#x6389;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x80FD;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x3002;&#x672C;&#x6587;&#x5C06;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528; varnish + nginx + lua &#x642D;&#x5EFA;&#x7F51;&#x7AD9;&#x964D;&#x7EA7;&#x7CFB;&#x7EDF;&#x6765;&#x5B9E;&#x73B0;&#x6574;&#x4E2A;&#x76EE;&#x6807;&#x3002;</p>
<p><img src="http://taojinke.github.io/img/20150706/48c72ff.jpg" alt=""></p>
<h3 id="&#x964D;&#x7EA7;&#x76EE;&#x6807;">&#x964D;&#x7EA7;&#x76EE;&#x6807;</h3><p>&#x964D;&#x7EA7;&#x65B9;&#x6848;&#x7684;&#x76EE;&#x6807;&#x662F;&#xFF0C;&#x5F53;&#x7F51;&#x7AD9;&#x51FA;&#x73B0;&#x81F4;&#x547D;&#x6545;&#x969C;&#x65F6;&#xFF08;&#x5982;&#x51FA;&#x73B0;500&#x9519;&#x8BEF;&#xFF0C;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x7F13;&#x5B58;&#x7684;&#x9875;&#x9762;&#x6570;&#x636E;&#x5C55;&#x73B0;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x4ECE;&#x800C;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;&#x3002;</p>
<ol>
<li>&#x53EA;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x6D4F;&#x89C8;&#x670D;&#x52A1;</li>
<li>&#x6D4F;&#x89C8;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x975E;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x4E0B;&#x7684;&#x6570;&#x636E;</li>
<li>&#x652F;&#x6301;&#x624B;&#x52A8;&#x548C;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x3002;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x662F;&#x5F53;&#x540E;&#x7AEF;&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;&#x6B21;&#x6570;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x8FBE;&#x5230;&#x4E00;&#x5B9A;&#x9608;&#x503C;(&#x4E0D;&#x5305;&#x542B;503)&#x3002;&#x624B;&#x52A8;&#x964D;&#x7EA7;&#x662F;&#x4ECE;&#x63A7;&#x5236;&#x754C;&#x9762;&#x64CD;&#x4F5C;&#x3002;</li>
</ol>
<h3 id="&#x964D;&#x7EA7;&#x65B9;&#x6848;">&#x964D;&#x7EA7;&#x65B9;&#x6848;</h3><h4 id="&#x5B58;&#x50A8;">&#x5B58;&#x50A8;</h4><p>&#x4F7F;&#x7528;varnish&#x4F5C;&#x4E3A;&#x5B58;&#x50A8;&#x3002;&#x6709;&#x6548;&#x7684;&#x8282;&#x7EA6;&#x4E86;&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x5E76;&#x4FDD;&#x6301;&#x4E86;&#x8F83;&#x597D;&#x7684;&#x6027;&#x80FD;&#x3002;</p>
<h4 id="&#x66F4;&#x65B0;">&#x66F4;&#x65B0;</h4><p>&#x4F7F;&#x7528;crond&#x811A;&#x672C;&#x4ECE;nginx&#x7684;access&#x65E5;&#x5FD7;&#x4E2D;&#x5206;&#x6790;&#x51FA;&#x8BF7;&#x6C42;url&#xFF0C;&#x7136;&#x540E;&#x5411;varnish&#x53D1;&#x8BF7;&#x6C42;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x65B0;varnish&#x7684;&#x7F13;&#x5B58;&#x3002;&#x7F13;&#x5B58;&#x7684;&#x5F02;&#x6B65;&#x66F4;&#x65B0;&#xFF0C;&#x51CF;&#x5C11;&#x5BF9;nginx&#x7684;&#x538B;&#xFFFD;&#xFFFD;&#xFFFD;&#x3002;</p>
<h4 id="&#x964D;&#x7EA7;">&#x964D;&#x7EA7;</h4><p>&#x652F;&#x6301;&#x624B;&#x52A8;&#x964D;&#x7EA7;&#x548C;&#x81EA;&#x52A8;&#x964D;&#x7EA7;&#x3002;&#x964D;&#x7EA7;&#x540E;&#xFF0C;nginx&#x81EA;&#x52A8;&#x4ECE;varnish&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#x3002;</p>
<h4 id="&#x6D41;&#x7A0B;&#x56FE;">&#x6D41;&#x7A0B;&#x56FE;</h4><p><img src="http://taojinke.github.io/img/20150706/48c8416.png" alt=""></p>
<h4 id="&#x6D41;&#x7A0B;&#x63CF;&#x8FF0;">&#x6D41;&#x7A0B;&#x63CF;&#x8FF0;</h4><ol>
<li>&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x5230;nginx&#x65F6;&#xFF0C;nginx&#x4F1A;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x662F;&#x5426;&#x662F;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x5C5E;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;varnish&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;&#x975E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x5230;php-fpm&#x3002;</li>
<li>&#x5F53;crond&#x811A;&#x672C;&#x8BF7;&#x6C42;varnish&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;varnish&#x5904;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x4E0D;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x66F4;&#x65B0;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5904;&#x5728;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x5230;nginx&#xFF0C;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;&#x7136;&#x540E;&#x628A;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x5230;varnish&#x4E2D;&#x3002;</li>
<li>varnish&#x4F1A;&#x81EA;&#x52A8;&#x76D1;&#x63A7;&#x540E;&#x7AEF;nginx&#x7684;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x68C0;&#x6D4B;&#x5230;nginx&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF0C;&#x5219;varnish&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x8FDB;&#x5165;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;</li>
</ol>
<h3 id="&#x5B89;&#x88C5;&#x90E8;&#x7F72;">&#x5B89;&#x88C5;&#x90E8;&#x7F72;</h3><p>vanish&#x5B89;&#x88C5;&#x5230;/home/varnish &#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5B89;&#x88C5;libpcre&#x3002;</p>
<pre><code>sudo yum <span class="keyword">install</span> pcre pcre-devel
</code></pre><p>&#x5176;&#x6B21;&#xFF0C;&#x5B89;&#x88C5;varnish&#x3002;</p>
<pre><code>.<span class="regexp">/configure --prefix=/</span>home/varnish
make
sudo -u admin make install
sudo -u admin mkdir -p <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>
sudo chown <span class="string">admin:</span>admin -R <span class="regexp">/home/</span>varnish
sudo -u admin touch <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>varnish_cache.data
sudo chmod <span class="number">777</span> <span class="regexp">/home/</span>varnish<span class="regexp">/vcache/</span>varnish_cache.data
</code></pre><p>&#x518D;&#x6B21;&#xFF0C;&#x4FEE;&#x6539;varnish&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;&#x90E8;&#x7F72;&#x76F8;&#x5173;&#x811A;&#x672C;&#x3002; <a href="http://www.bo56.com/download/pc_downgrade.tar.gz" target="_blank" rel="external">&#x70B9;&#x51FB;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x5305;</a> &#x3002;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x4E3A;default.vcl&#x3002; </p>
<p>&#x6700;&#x540E;&#xFF0C;&#x542F;&#x52A8;varnish&#x3002;&#x542F;&#x52A8;&#x811A;&#x672C;&#x4E5F;&#x5728;&#x538B;&#x7F29;&#x5305;&#x4E2D;&#xFF0C;&#x540D;&#x79F0;&#x4E3A; varnishctl</p>
<pre><code>sudo <span class="regexp">/home/</span>admin<span class="regexp">/varnish/</span>sbin<span class="regexp">/varnishctl start</span>
</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x542F;&#x52A8;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;varnishlog&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x662F;&#x5426;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x5B57;&#x6837;&#xFF0C;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;http&#x7684;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x4E3A;200</p>
<pre><code>$ /home/varnish/bin/varnishlog
0 Backend_health - default Still healthy 4--X-RH <span class="number">4 2 4 0</span>.<span class="number">002698 0</span>.001722 HTTP/<span class="number">1.1 200</span> OK
</code></pre><h3 id="&#x90E8;&#x7F72;lua&#x811A;&#x672C;">&#x90E8;&#x7F72;lua&#x811A;&#x672C;</h3><p>lua&#x811A;&#x672C;&#x5728;/home/admin/nginx/data/lua&#x76EE;&#x5F55;&#x4E0B;&#x3002; &#x786E;&#x4FDD;&#x76EE;&#x5F55;&#x4E0B;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x4E2A;&#x811A;&#x672C;&#x3002;</p>
<pre><code>pc_get_downgrade_data<span class="class">.lua</span>
init<span class="class">.lua</span>
pc_status_stat<span class="class">.lua</span>
pc_get_status<span class="class">.lua</span>
pc_set_satus.lua
</code></pre><p>&#x8FD9;&#x51E0;&#x4E2A;&#x811A;&#x672C;&#x5728;&#x4E0B;&#x8F7D;&#x7684;&#x538B;&#x7F29;&#x5305;&#x4E2D;&#x6709;&#x3002;</p>
<h3 id="&#x4FEE;&#x6539;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x4FEE;&#x6539;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x5728;http&#x57DF;&#x589E;&#x52A0;</p>
<pre><code>init_by_lua_file &amp;apos<span class="comment">;lua/init.lua&amp;apos;;</span>
lua_shared_dict pc_status 1m<span class="comment">;</span>
lua_shared_dict pc_auto_status 1m<span class="comment">;</span>
#varnish config
upstream varnish{
    server <span class="number">127.0.0.1</span>:8080 weight=1 max_fails=2 fail_timeout=5s<span class="comment">;</span>
}
</code></pre><p>&#x6700;&#x540E;&#xFF0C;&#x5728;server&#x57DF;&#x5B8F;&#x589E;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x3002;</p>
<pre><code><span class="title">location</span> <span class="variable">@php</span> {
  <span class="title">include</span> fastcgi_params;
}   
<span class="title">location</span> <span class="variable">@var</span> {
 <span class="title">proxy_pass</span> <span class="url">http://varnish<span class="variable">$str_params</span></span>;
}   
<span class="title">location</span> <span class="regexp">~* ^(.+\.php)(.*)$</span> {
  <span class="comment">#check downgrade status, then get data from varnish</span>
  <span class="title">set</span> <span class="variable">$str_params</span> <span class="variable">$uri</span>;
  <span class="title">content_by_lua_file</span> lua/pc_get_downgrade_data.lua;
}
<span class="title">location</span> /hl_get_auto_status {
           <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
               <span class="title">return</span> <span class="number">403</span>;
           }
           <span class="title">content_by_lua_file</span> lua/pc_get_auto_status.lua;
 }
<span class="title">location</span> /hl_get_status {
     <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
         <span class="title">return</span> <span class="number">403</span>;
     }
     <span class="title">content_by_lua_file</span> lua/pc_get_status.lua;
}
<span class="title">location</span> /hl_set_status {
           <span class="title">if</span> (<span class="variable">$white_ip</span> = <span class="number">0</span>) {
               <span class="title">return</span> <span class="number">403</span>;
           }
           <span class="title">content_by_lua_file</span> lua/pc_set_status.lua;
}
<span class="title">log_by_lua_file</span>  lua/pc_status_stat.lua;
</code></pre><h3 id="&#x90E8;&#x7F72;crond&#x811A;&#x672C;">&#x90E8;&#x7F72;crond&#x811A;&#x672C;</h3><p>&#x811A;&#x672C;varnish_crond.php&#x3002;&#x5728;crond&#x4E2D;&#x589E;&#x52A0;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x3002;&#x6BCF;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<p>&#x6765;&#x81EA;crond&#x7684;&#x8BF7;&#x6C42;&#xFF0C;user-agent&#x6570;&#x636E;&#x4E3A;varnish_crond&#x3002;&#x628A;user-agent&#x4E3A;varnish_crond&#x8BF7;&#x6C42;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x3002;&#x4FDD;&#x8BC1;&#x80FD;&#x6B63;&#x5E38;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x76F8;&#x5173;&#x6570;&#x636E;&#x3002;</p>
<h3 id="&#x964D;&#x7EA7;&#x7BA1;&#x7406;">&#x964D;&#x7EA7;&#x7BA1;&#x7406;</h3><h4 id="varnish&#x964D;&#x7EA7;">varnish&#x964D;&#x7EA7;</h4><p>&#x53EA;&#x8981;&#x8BA9;varnish&#x914D;&#x7F6E;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x76D1;&#x63A7;&#x811A;&#x672C;check.php&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;&#x5373;&#x53EF;&#x3002;varnish&#x76D1;&#x63A7;&#x5230;&#x6307;&#x5B9A;&#x811A;&#x672C;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x81EA;&#x52A8;&#x4F1A;&#x8FDB;&#x5165;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#x3002;&#x5F53;&#x811A;&#x672C;&#x8FD4;&#x56DE;200&#x72B6;&#x6001;&#x540E;&#xFF0C;varnish&#x81EA;&#x52A8;&#x53C8;&#x4F1A;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x3002; </p>
<h4 id="nginx&#x964D;&#x7EA7;">nginx&#x964D;&#x7EA7;</h4><p>&#x8BBE;&#x7F6E;&#x964D;&#x7EA7;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_set_status?status=<span class="number">1</span></span></span>
</code></pre><p>&#x6062;&#x590D;&#x6B63;&#x5E38;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_set_status?status=<span class="number">0</span></span></span>
</code></pre><p>&#x67E5;&#x770B;&#x964D;&#x7EA7;&#x72B6;&#x6001;&#xFF1A;</p>
<pre><code><span class="tag">curl</span> <span class="tag">-H</span> &amp;<span class="tag">quot</span>;<span class="rule"><span class="attribute">Host</span>:<span class="value">demo.bo56.com&amp;quot</span></span>; <span class="tag">-i</span> <span class="rule"><span class="attribute">http</span>:<span class="value">//<span class="number">127.0</span>.<span class="number">0.1</span>/hl_get_status</span></span>
</code></pre><p>&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x4E3A;1&#x8868;&#x793A;&#x964D;&#x7EA7;&#x3002;</p>
<p>&#x6765;&#x6E90;&#xFF1A; <a href="http://www.bo56.com/%E4%BD%BF%E7%94%A8varnish-nginx-lua%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99%E7%9A%84%E9%99%8D%E7%BA%A7%E7%B3%BB%E7%BB%9F/" target="_blank" rel="external">http://www.bo56.com/%E4%BD%BF%E7%94%A8varnish-nginx-lua%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99%E7%9A%84%E9%99%8D%E7%BA%A7%E7%B3%BB%E7%BB%9F/</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h3><p>&#x901A;&#x5E38;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x6570;&#x636E;&#x5E93;&#x6302;&#x6389;&#]]>
    </summary>
    
      <category term="Lua" scheme="http://taojinke.github.io/tags/Lua/"/>
    
      <category term="Nginx" scheme="http://taojinke.github.io/tags/Nginx/"/>
    
      <category term="Varnish" scheme="http://taojinke.github.io/tags/Varnish/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在android上运行io.js -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cdf2cc/"/>
    <id>http://taojinke.github.io/2015/07/06/2cdf2cc/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.323Z</updated>
    <content type="html"><![CDATA[<p>&#x65E0;&#x610F;&#x4E2D;&#x770B;&#x5230;io.js&#x5728;4&#x6708;&#x4EFD;&#x5F00;&#x59CB;&#x5DF2;&#x7ECF;&#x652F;&#x6301;android&#x7F16;&#x8BD1;,&#x679C;&#x65AD;&#x5F04;&#x4E00;&#x4E2A;</p>
<h2 id="&#x73AF;&#x5883;">&#x73AF;&#x5883;</h2><p>opensuse 11.4 x86</p>
<p>android 4.2.2 linux 3.2, &#x5DF2;root</p>
<h2 id="&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;NDK_r10e">&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;NDK r10e</h2><p><a href="http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86.bin" target="_blank" rel="external">http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86.bin</a></p>
<p>&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x633A;&#x6162;&#x7684;,&#x8D70;&#x767E;&#x5EA6;&#x4E91;&#x5C31;&#x5F88;&#x5FEB;</p>
<p>&#x5728;opensuse&#x5207;&#x6362;&#x5230;root,&#x7136;&#x540E;&#x8FD0;&#x884C;</p>
<pre><code><span class="keyword">cd</span> /<span class="keyword">opt</span>
./android-ndk-r10e-linux-x86.bin
</code></pre><p>&#x5373;&#x53EF;&#x81EA;&#x884C;&#x89E3;&#x538B;&#x51FA;ndk</p>
<h2 id="&#x4E0B;&#x8F7D;&#x5E76;&#x7F16;&#x8BD1;io-js">&#x4E0B;&#x8F7D;&#x5E76;&#x7F16;&#x8BD1;io.js</h2><pre><code>cd /opt
<span class="array"># </span>&amp;<span class="array">#x</span>6216;&amp;<span class="array">#x</span>8005;&amp;<span class="array">#x</span>767E;&amp;<span class="array">#x</span>5EA6;&amp;<span class="array">#x</span>4E91;&amp;<span class="array">#x</span>4E0B;&amp;<span class="array">#x</span>8F7D;&amp;<span class="array">#x</span>4E5F;&amp;<span class="array">#x</span>53EF;&amp;<span class="array">#x</span>4EE5;,&amp;<span class="array">#x</span>66F4;&amp;<span class="array">#x</span>5FEB;
wget https:<span class="comment">//iojs.org/dist/v2.1.0/iojs-v2.1.0.tar.gz</span>
tar xf iojs-v2.1.0.tar.gz
cd iojs-v2.1.0
./android-configure /opt/android-ndk-r10e
make -j8
</code></pre><p>&#x65E0;&#x5F02;&#x5E38;,&#x65E0;Error,&#x987A;&#x5229;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;</p>
<h2 id="&#x4F20;&#x8F93;&#x5230;android&#x4E0A;">&#x4F20;&#x8F93;&#x5230;android&#x4E0A;</h2><pre><code>adb remount
adb shell <span class="keyword">mkdir</span> /<span class="keyword">system</span>/iojs
adb <span class="keyword">push</span> out/Release/iojs /<span class="keyword">system</span>/iojs/iojs
adb <span class="keyword">push</span> lib /<span class="keyword">system</span>/iojs/iojs
adb shell <span class="keyword">chmod</span> <span class="number">777</span> /<span class="keyword">system</span>/iojs/iojs
</code></pre><h2 id="&#x5C1D;&#x8BD5;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;">&#x5C1D;&#x8BD5;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;</h2><p>&#x5148;&#x5F04;&#x4E2A;&#x5B98;&#x7F51;demo, &#x5B58;&#x4E3A;example.js</p>
<pre><code>var http = require<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;http&amp;apos;);</span>

http.createServer<span class="list">(<span class="keyword">function</span> <span class="list">(<span class="keyword">request</span>, response)</span> {
  response.writeHead<span class="list">(<span class="number">200</span>, {<span class="keyword">&amp;apos</span><span class="comment">;Content-Type&amp;apos;: &amp;apos;text/plain&amp;apos;});</span>
  response.end<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;Hello World\n&amp;apos;);</span>
})</span>.listen<span class="list">(<span class="number">8124</span>)</span><span class="comment">;</span>

console.log<span class="list">(<span class="keyword">&amp;apos</span><span class="comment">;Server running at http://127.0.0.1:8124/&amp;apos;);</span></span></span></span></span>
</code></pre><p>&#x4F20;&#x5230;android&#x4E0A;</p>
<pre><code>adb shell mkdir <span class="regexp">/sdcard/</span>iojs/
adb push example.js <span class="regexp">/sdcard/</span>iojs/
adb shell <span class="regexp">/system/</span>iojs<span class="regexp">/iojs /</span>sdcard<span class="regexp">/iojs/</span>example.js
</code></pre><p>&#x8BBF;&#x95EE;&#x4E00;&#x4E0B;android&#x8BBE;&#x5907;&#x4E0A;&#x7684;&#x670D;&#x52A1;,&#x54C8;&#x54C8;</p>
<pre><code>curl -v <span class="string">http:</span><span class="comment">//192.168.72.107:8124/</span>
</code></pre><p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#x5185;&#x5BB9;,&#x641E;&#x5B9A;</p>
<pre><code>*   Trying <span class="number">192.168.72.107</span>...
* Connected to <span class="number">192.168.72.107</span> (<span class="number">192.168.72.107</span>) port 8124 (#0)
&amp;gt<span class="comment">; GET / HTTP/1.1</span>
&amp;gt<span class="comment">; Host: 192.168.72.107:8124</span>
&amp;gt<span class="comment">; User-Agent: curl/7.42.1</span>
&amp;gt<span class="comment">; Accept: */*</span>
&amp;gt<span class="comment">; </span>
&amp;lt<span class="comment">; HTTP/1.1 200 OK</span>
&amp;lt<span class="comment">; Content-Type: text/plain</span>
&amp;lt<span class="comment">; Date: Thu, 28 May 2015 02:13:18 GMT</span>
&amp;lt<span class="comment">; Connection: keep-alive</span>
&amp;lt<span class="comment">; Transfer-Encoding: chunked</span>
&amp;lt<span class="comment">; </span>
Hello World
* Connection #0 to host <span class="number">192.168.72.107</span> left intact
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<p>&#x65E0;&#x610F;&#x4E2D;&#x770B;&#x5230;io.js&#x5728;4&#x6708;&#x4EFD;&#x5F00;&#x59CB;&#x5DF2;&#x7ECF;&#x652F;&#x6301;android&#x7F16;&#x8]]>
    </summary>
    
      <category term="Android" scheme="http://taojinke.github.io/tags/Android/"/>
    
      <category term="Linux" scheme="http://taojinke.github.io/tags/Linux/"/>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[IO.js 1.7.1 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2d0fd9b/"/>
    <id>http://taojinke.github.io/2015/07/06/2d0fd9b/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.575Z</updated>
    <content type="html"><![CDATA[<p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x534E;&#x4E3A;&#x5F00;&#x53D1;&#x677F;</a></p>
<p>IO.js 1.7.1 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6539;&#x8FDB;&#x4E86;&#x5BF9; ARM &#x7684;&#x652F;&#x6301;&#xFF0C;&#x73B0;&#x5728; ARM &#x4E0A;&#x9762;&#x6B64;&#x7248;&#x672C;&#x80FD;&#x591F;&#x987A;&#x5229;&#x521B;&#x5EFA;&#x548C;&#x6D4B;&#x8BD5;&#x4E86;&#x3002; </p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A; </p>
<ul>
<li>C++ API: Fedor Indutny contributed a feature to V8 which has been backported to the V8 bundled in io.js. SealHandleScope allows a C++ add-on author to <em>seal</em> a HandleScope to prevent further, unintended allocations within it. Currently only enabled for debug builds of io.js. This feature helped detect the leak in <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a> and is now activated on the root HandleScope in io.js. (Fedor Indutny) <a href="https://github.com/iojs/io.js/pull/1395" target="_blank" rel="external">#1395</a> .</li>
<li><p>ARM: This release includes significant work to improve the state of ARM support for builds and tests. The io.js CI cluster&apos;s ARMv6, ARMv7 and ARMv8 build servers are now all (mostly) reporting passing builds and tests.</p>
<ul>
<li>ARMv8 64-bit (AARCH64) is now properly supported, including a backported fix in libuv that was mistakenly detecting the existence of epoll_wait() . (Ben Noordhuis) <a href="https://github.com/iojs/io.js/pull/1365" target="_blank" rel="external">#1365</a> .</li>
<li>ARMv6: <a href="https://github.com/iojs/io.js/issues/1376" target="_blank" rel="external">#1376</a> reported a problem with Math.exp() on ARMv6 (incl Raspberry Pi). The culprit is erroneous codegen for ARMv6 when using the &quot;fast math&quot; feature of V8. —nofast_math has been turned on for all ARMv6 variants by default to avoid this, fast math can be turned back on with —fast_math . (Ben Noordhuis) <a href="https://github.com/iojs/io.js/pull/1398" target="_blank" rel="external">#1398</a> .</li>
<li>Tests: timeouts have been tuned specifically for slower platforms, detected as ARMv6 and ARMv7. (Roman Reiss) <a href="https://github.com/iojs/io.js/pull/1366" target="_blank" rel="external">#1366</a> .</li>
</ul>
</li>
<li><p>npm: Upgrade npm to 2.7.6. See the <a href="https://github.com/npm/npm/releases/tag/v2.7.6" target="_blank" rel="external">release notes</a> for details. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/b7475936f473f029e6a027ba1b16277523747d0b" target="_blank" rel="external">b747593</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a> Don&apos;t automatically log all git failures as errors. maybeGithub needs to be able to fail without logging to support its fallback logic. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/78005ebb6f4103c20f077669c3929b7ea46a4c0d" target="_blank" rel="external">78005eb</a><a href="https://github.com/npm/npm/issues/7743" target="_blank" rel="external">#7743</a> Always quote arguments passed to npm run-script . This allows build systems and the like to safely escape glob patterns passed as arguments to run-scripts with npm run-script &lt;script&gt; — &lt;arguments&gt; . This is a tricky change to test, and may be reverted or moved to npm@3 if it turns out it breaks things for users. ( <a href="https://github.com/mantoni" target="_blank" rel="external">@mantoni</a> )</li>
<li><a href="https://github.com/npm/npm/commit/da015eee45f6daf384598151d06a9b57ffce136e" target="_blank" rel="external">da015ee</a><a href="https://github.com/npm/npm/issues/7074" target="_blank" rel="external">#7074</a>read-package-json@1.3.3 : read-package-json no longer caches package.json files, which trades a very small performance loss for the elimination of a large class of really annoying race conditions. See <a href="https://github.com/npm/npm/issues/7074" target="_blank" rel="external">#7074</a> for the grisly details. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/releases/tag/v1.7.1" target="_blank" rel="external">https://github.com/iojs/io.js/releases/tag/v1.7.1</a></p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x5]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[io.js 1.6.0 发布，服务器端 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cfffb3/"/>
    <id>http://taojinke.github.io/2015/07/06/2cfffb3/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.531Z</updated>
    <content type="html"><![CDATA[<p>  io.js 1.6.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A;  <a href="https://github.com/iojs/io.js/archive/v1.6.0.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.0.zip</a>  &#x3002;</p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>node</strong> : a new -r or —requirecommand-line option can be used to pre-load modules at start-up (Ali Ijaz Sheikh)  <a href="https://github.com/iojs/io.js/pull/881" target="_blank" rel="external">#881</a>  .</li>
<li><strong>querystring</strong> : parse() and stringify()are now faster (Brian White)  <a href="https://github.com/iojs/io.js/pull/847" target="_blank" rel="external">#847</a>  .</li>
<li><strong>http</strong> : the http.ClientRequest#flush() method has been deprecated and replaced with http.ClientRequest#flushHeaders()to match the same change now in Node.js v0.12 as per  <a href="https://github.com/joyent/node/pull/9048" target="_blank" rel="external">joyent/node#9048</a>  (Yosuke Furukawa)  <a href="https://github.com/iojs/io.js/pull/1156" target="_blank" rel="external">#1156</a>  .</li>
<li><strong>net</strong> : allow server.listen() to accept a String option for port , e.g. { port: &quot;1234&quot; } , to match the same option being accepted in net.connect()as of  <a href="https://github.com/joyent/node/pull/9268" target="_blank" rel="external">joyent/node#9268</a>  (Ben Noordhuis)  <a href="https://github.com/iojs/io.js/pull/1116" target="_blank" rel="external">#1116</a>  .</li>
<li><strong>tls</strong>: further work on the reported memory leak although there appears to be a minor leak remaining for the use-case in question, track progress at  <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a>  .</li>
<li><strong>v8</strong> : backport a fix for an integer overflow when —max_old_space_sizevalues aboveare used (Ben Noordhuis)  <a href="https://github.com/iojs/io.js/pull/1166" target="_blank" rel="external">#1166</a>  .</li>
<li>platforms: the io.js CI system now reports passes onFreeBSDandSmartOS( <em>Solaris</em> ).</li>
<li><strong>npm</strong>: upgrade npm to 2.7.1. See  <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v271-2015-03-05" target="_blank" rel="external">npm CHANGELOG.md</a>  for details. Summary:</li>
</ul>
<ul>
<li><a href="https://github.com/npm/npm/issues/7121" target="_blank" rel="external">#7121</a>  npm install —savefor Git dependencies saves the URL passed in, instead of the temporary directory used to clone the remote repo. Fixes using Git dependencies when shrinkwwapping. In the process, rewrote the Git dependency caching code. Again. No more single-letter variable names, and a much clearer workflow. (  <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a>  )</li>
<li><a href="https://github.com/npm/npm/commit/abdd040da9" target="_blank" rel="external">abdd040</a> read-package-json@1.3.2: Provide more helpful error messages when JSON parse errors are encountered by using a more forgiving JSON parser than JSON.parse. (  <a href="https://github.com/smikes" target="_blank" rel="external">@smikes</a>  )</li>
<li><a href="https://github.com/npm/npm/commit/c56cfcd79c" target="_blank" rel="external">c56cfcd</a><a href="https://github.com/npm/npm/issues/7525" target="_blank" rel="external">#7525</a>  npm dedupehandles scoped packages. (  <a href="https://github.com/KidkArolis" target="_blank" rel="external">@KidkArolis</a>  )</li>
<li><p><a href="https://github.com/npm/npm/commit/4ef1412d00" target="_blank" rel="external">4ef1412</a><a href="https://github.com/npm/npm/issues/7075" target="_blank" rel="external">#7075</a>  If you try to tag a release as a valid semver range, npm publish and npm tagwill error early instead of proceeding. (  <a href="https://github.com/smikes" target="_blank" rel="external">@smikes</a>  )</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B;  <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a>  &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A;  <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a>  &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li>libexecinfo (FreeBSD and OpenBSD only) </li>
</ul>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong> [ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a> ] </p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 1.6.0 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A; <a href="http://www.oschina.net/news/60704/io-js-1-6-0" target="_blank" rel="external">http://www.oschina.net/news/60704/io-js-1-6-0</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>  io.js 1.6.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A;  <a href="https://]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[io.js 1.6.3 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cfb675/"/>
    <id>http://taojinke.github.io/2015/07/06/2cfb675/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.531Z</updated>
    <content type="html"><![CDATA[<p><a href="http://baichuan.taobao.com/?from=oschinabbs" target="_blank" rel="external">&#x963F;&#x91CC;&#x767E;&#x5DDD;&#xFF0C;&#x5F00;&#x542F;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;&#x65B0;&#x7BC7;&#x7AE0;</a></p>
<p>io.js 1.6.3 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>fs: corruption can be caused by fs.writeFileSync() and append-mode fs.writeFile() and fs.writeFileSync() under certain circumstances, reported in <a href="https://github.com/iojs/io.js/issues/1058" target="_blank" rel="external">#1058</a> , fixed in <a href="https://github.com/iojs/io.js/pull/1063" target="_blank" rel="external">#1063</a> (Olov Lassus).</li>
<li>iojs: an &quot;internal modules&quot; API has been introduced to allow core code to share JavaScript modules internally only without having to expose them as a public API, this feature is for core-only <a href="https://github.com/iojs/io.js/pull/848" target="_blank" rel="external">#848</a> (Vladimir Kurchatkin).</li>
<li><p>timers: two minor problems with timers have been fixed:</p>
<ul>
<li>Timer#close() is now properly idempotent <a href="https://github.com/iojs/io.js/issues/1288" target="_blank" rel="external">#1288</a> (Petka Antonov).</li>
<li>setTimeout() will only run the callback once now after an unref() during the callback <a href="https://github.com/iojs/io.js/pull/1231" target="_blank" rel="external">#1231</a> (Roman Reiss).</li>
<li>NOTE: there are still other unresolved concerns with the timers code, such as <a href="https://github.com/iojs/io.js/pull/1152" target="_blank" rel="external">#1152</a> .</li>
</ul>
</li>
<li><p>Windows: a &quot;delay-load hook&quot; has been added for compiled add-ons on Windows that should alleviate some of the problems that Windows users may be experiencing with add-ons in io.js <a href="https://github.com/iojs/io.js/pull/1251" target="_blank" rel="external">#1251</a> (Bert Belder).</p>
</li>
<li>V8: minor bug-fix upgrade for V8 to 4.1.0.27.</li>
<li><p>npm: upgrade npm to 2.7.4. See <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v274-2015-03-20" target="_blank" rel="external">npm CHANGELOG.md</a> for details. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/7641" target="_blank" rel="external">#7641</a> Due to 448efd0, running npm shrinkwrap —dev caused production dependencies to no longer be included in npm-shrinkwrap.json . Whoopsie! ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/fb0ac26eecdd76f6eaa4a96a865b7c6f52ce5aa5" target="_blank" rel="external">fb0ac26</a><a href="https://github.com/npm/npm/issues/7579" target="_blank" rel="external">#7579</a> Only block removing files and links when we&apos;re sure npm isn&apos;t responsible for them. This change is hard to summarize, because if things are working correctly you should never see it, but if you want more context, just <a href="https://github.com/npm/npm/commit/fb0ac26eecdd76f6eaa4a96a865b7c6f52ce5aa5" target="_blank" rel="external">go read the commit message</a> , which lays it all out. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/051c4738486a826300f205b71590781ce7744f01" target="_blank" rel="external">051c473</a><a href="https://github.com/npm/npm/issues/7552" target="_blank" rel="external">#7552</a>bundledDependencies are now properly included in the installation context. This is another fantastically hard-to-summarize bug, and once again, I encourage you to <a href="https://github.com/npm/npm/commit/051c4738486a826300f205b71590781ce7744f01" target="_blank" rel="external">read the commit message</a> if you&apos;re curious about the details. The snappy takeaway is that this unbreaks many use cases for ember-cli . ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/fe1bc387a14475e373557de669e03d9d006d3173" target="_blank" rel="external">fe1bc38</a><a href="https://github.com/npm/npm/issues/7672" target="_blank" rel="external">#7672</a>npm-registry-client@3.1.2 : Fix client-side certificate handling by correcting property name. ( <a href="https://github.com/atamon" target="_blank" rel="external">@atamon</a> )</li>
<li><a href="https://github.com/npm/npm/commit/89ce829a00b526d0518f5cd855c323bffe182af0" target="_blank" rel="external">89ce829</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>hosted-git-info@1.5.3 : Part 3 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/63313eb0c37891c355546fd1093010c8a0c3cd81" target="_blank" rel="external">63313eb</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>realize-package-specifier@2.2.0 : Part 2 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/3ed41bf64a1bb752bb3155c74dd6ffbbd28c89c9" target="_blank" rel="external">3ed41bf</a><a href="https://github.com/npm/npm/issues/7630" target="_blank" rel="external">#7630</a>npm-package-arg@3.1.1 : Part 1 of ensuring that GitHub shorthand is handled consistently. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/archive/v1.6.3.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.3.zip</a> &#x3002; </p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="http://baichuan.taobao.com/?from=oschinabbs" target="_blank" rel="external">&#x963F;&#x91CC;&#x767E;&#x5DDD;&#xFF0C;&#x5F00;&#x5]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[IO.js 1.6.4 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cf0b8f/"/>
    <id>http://taojinke.github.io/2015/07/06/2cf0b8f/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.432Z</updated>
    <content type="html"><![CDATA[<p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x521B;&#x4F1A;&#x5F00;&#x59CB;&#x62A5;&#x540D;&#xFF0C;&#x9001;&#x534E;&#x4E3A;&#x5F00;&#x53D1;&#x677F;</a></p>
<p>io.js 1.6.4 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><p>npm: upgrade npm to 2.7.5. See <a href="https://github.com/npm/npm/blob/master/CHANGELOG.md#v275-2015-03-26" target="_blank" rel="external">npm CHANGELOG.md</a> for details. Includes two important security fixes. Summary:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/300834e91a4e2a95fb7fb59c309e7c3fc91d2312" target="_blank" rel="external">300834e</a>tar@2.0.0 : Normalize symbolic links that point to targets outside the extraction root. This prevents packages containing symbolic links from overwriting targets outside the expected paths for a package. Thanks to <a href="http://gfxmonk.net/" target="_blank" rel="external">Tim Cuthbertson</a> and the team at <a href="https://liftsecurity.io/" target="_blank" rel="external">Lift Security</a> for working with the npm team to identify this issue. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
<li><a href="https://github.com/npm/npm/commit/0dc68757cffd5397c280bc71365d106523a5a052" target="_blank" rel="external">0dc6875</a>semver@4.3.2 : Package versions can be no more than 256 characters long. This prevents a situation in which parsing the version number can use exponentially more time and memory to parse, leading to a potential denial of service. Thanks to Adam Baldwin at Lift Security for bringing this to our attention. &#xA0;( <a href="https://github.com/isaacs" target="_blank" rel="external">@isaacs</a> )</li>
<li><a href="https://github.com/npm/npm/commit/eab618425c51e3aa4416da28dcd8ca4ba63aec41" target="_blank" rel="external">eab6184</a><a href="https://github.com/npm/npm/issues/7766" target="_blank" rel="external">#7766</a> One last tweak to ensure that GitHub shortcuts work with private repositories. ( <a href="https://github.com/iarna" target="_blank" rel="external">@iarna</a> )</li>
<li><a href="https://github.com/npm/npm/commit/a840a13bbf0330157536381ea8e58d0bd93b4c05" target="_blank" rel="external">a840a13</a><a href="https://github.com/npm/npm/issues/7746" target="_blank" rel="external">#7746</a> Only fix up git URL paths when there are paths to fix up. ( <a href="https://github.com/othiym23" target="_blank" rel="external">@othiym23</a> )</li>
</ul>
</li>
<li><p>openssl: preliminary work has been done for an upcoming upgrade to OpenSSL 1.0.2a <a href="https://github.com/iojs/io.js/pull/1325" target="_blank" rel="external">#1325</a> (Shigeki Ohtsu). See <a href="https://github.com/iojs/io.js/issues/589" target="_blank" rel="external">#589</a> for additional details.</p>
</li>
<li>timers: a minor memory leak when timers are unreferenced was fixed, alongside some related timers issues <a href="https://github.com/iojs/io.js/pull/1330" target="_blank" rel="external">#1330</a> (Fedor Indutny). This appears to have fixed the remaining leak reported in <a href="https://github.com/iojs/io.js/issues/1075" target="_blank" rel="external">#1075</a> .</li>
<li>android: it is now possible to compile io.js for Android and related devices <a href="https://github.com/iojs/io.js/pull/1307" target="_blank" rel="external">#1307</a> (Giovanny Andres Gongora Granada).</li>
</ul>
<p>&#x8BE6;&#x7EC6;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002; </p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/iojs/io.js/releases/tag/v1.6.4" target="_blank" rel="external">https://github.com/iojs/io.js/releases/tag/v1.6.4</a></p>
<p>IO.js &#x662F;&#x4E3A;V8 &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><p><code>gcc</code> and <code>g++</code> 4.8 or newer, or</p>
</li>
<li><p><code>clang</code> and <code>clang++</code> 3.3 or newer</p>
</li>
<li><p>Python 2.6 or 2.7</p>
</li>
<li><p>GNU Make 3.81 or newer</p>
</li>
<li><p>libexecinfo (FreeBSD and OpenBSD only)</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="http://www.oschina.net/question/1765084_229440" target="_blank" rel="external">4&#x6708;18&#x65E5; &#x6B66;&#x6C49; &#x6E90;&#x5]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[每日文章精选 2015 05 21 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cc0f66/"/>
    <id>http://taojinke.github.io/2015/07/06/2cc0f66/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.116Z</updated>
    <content type="html"><![CDATA[<p><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf6fc.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150520/160871.html" target="_blank" rel="external">&#x9B45;&#x65CF;&#x5F00;&#x59CB;&#x5411;&#x4E2D;&#x56FD;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x4F9B;Ubuntu MX4</a></td><tr><td>&#x9B45;&#x65CF;&#x5F00;&#x59CB;&#x5411;&#x4E2D;&#x56FD;&#x5F00;&#x53D1;&#x8005; &#x63D0;&#x4F9B;Ubuntu MX4 &#xFF0C; &#x8FD9;&#x6B3E;&#x624B;&#x673A; &#x4E0D;&#x4E45;&#x4E4B;&#x540E;&#x5C06;&#x5411;&#x6B27;&#x6D32;&#x5730;&#x533A;&#x51FA;&#x552E;&#x3002;&#x9B45;&#x65CF;&#x662F;&#x5728;2014&#x5E74;2&#x6708;&#x5BA3;&#x5E03;&#x4E0E;Canonical&#x516C;&#x53F8;&#x5408;&#x4F5C;&#x53D1;&#x552E;&#x642D;&#x8F7D;Ubuntu&#x7CFB;&#x7EDF;&#x7684;&#x667A;&#x80FD;&#x624B;&#x673A;&#x3002;Canonical&#x5728;&#x65B0;&#x95FB;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf96d.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/itnews/20150520/160873.html" target="_blank" rel="external">&#x662F;&#x7F51;&#x7AD9;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x6539;&#x53D8;&#x8FD8;&#x662F;&#x4E2D;&#x56FD;&#x7F51;&#x6C11;&#x9700;&#x8981;&#x6539;&#x53D8;&#xFF1F;</a></td><tr><td>&#x4E00;&#x4F4D;&#x4E2D;&#x56FD;&#x7684;Web&#x5F00;&#x53D1;&#x8005;&#x5728;Reddit&#x4E0A; &#x53D1;&#x5E16; &#xFF0C;&#x5EFA;&#x8BAE;&#x56FD;&#x5916;&#x7684;&#x7F51;&#x7AD9;&#x5F00;&#x53D1;&#x8005;&#x6539;&#x53D8;&#x4E00;&#x4E9B;&#x901A;&#x7528;&#x7684;&#x505A;&#x6CD5;&#xFF1A;&#x7531;&#x4E8E;&#x4E2D;&#x56FD;&#x5BF9;Google&#x548C;Facebook&#x7B49;&#x7F51;&#x7AD9;&#x53CA;&#x5176;&#x670D;&#x52A1;&#x7684;&#x5C4F;&#x853D;&#xFF0C;&#x5728;&#x7F51;&#x9875;&#x4E2D;&#x52A0;&#x8F7D;Youtube&#x3001;Facebook&#x3001;Goog</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf96d.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150521/160879.html" target="_blank" rel="external">&#x5FAE;&#x8F6F;&#x5BA3;&#x5E03; WCF &#x901A;&#x8BAF;&#x57FA;&#x7840;&#x5E93;&#x5F00;&#x6E90;</a></td><tr><td>&#x5FAE;&#x8F6F; &#x5BA3;&#x5E03; &#x5C06; Windows Communication Foundation(WCF) &#x9879;&#x76EE;&#x5F00;&#x6E90;&#x4E86;&#xFF0C;Windows Communication Foundation(WCF)&#x662F;&#x7531;&#x5FAE;&#x8F6F;&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x652F;&#x6301;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#xFF0C;&#x53EF;&#x4EE5;&#x7FFB;&#x8BD1;&#x4E3A;Wi</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfbde.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/news/20150520/160864.html" target="_blank" rel="external">Node.js&#x4E0E;io.js&#x90A3;&#x4E9B;&#x4E8B;&#x513F;</a></td><tr><td>&#x53BB;&#x5E74;12&#x6708;&#xFF0C;&#x591A;&#x4F4D;&#x91CD;&#x91CF;&#x7EA7;Node.js&#x5F00;&#x53D1;&#x8005;&#x4E0D;&#x6EE1;Joyent&#x5BF9;Node.js&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x81EA;&#x7ACB;&#x95E8;&#x6237;&#x521B;&#x5EFA;&#x4E86;io.js&#x3002;io.js&#x7684;&#x53D1;&#x5C55;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x5FEB;&#xFF0C;&#x5148;&#x662F;&#x4E8E;2015&#x5E74;1&#x6708;&#x4EFD;&#x53D1;&#x5E03;&#x4E86;1.0&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x5FEB;&#x5C31;&#x8FBE;&#x5230;&#x4E86;2.0&#x7248;&#x672C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/itnews/20150521/160884.html" target="_blank" rel="external">&#x201C;&#x5954;&#x817E;D&#x201D;&#x53C8;&#x56DE;&#x6765;&#x4E86;&#xFF01;</a></td><tr><td>&#x8FD8;&#x8BB0;&#x5F97;&#x5954;&#x817E;D(Pentium D)&#x5417;&#xFF1F;&#x8FD9;&#x662F;11&#x5E74;&#x524D;&#xFF0C;Intel&#x4E3A;&#x4E86;&#x62A2;&#x5148;&#x8FDB;&#x5165;&#x53CC;&#x6838;&#x65F6;&#x4EE3;&#x800C;&#x63A8;&#x51FA;&#x7684;&#x65B0;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E24;&#x4E2A;&#x5355;&#x6838;&#x5FC3;&#x6574;&#x5408;&#x5C01;&#x88C5;&#x3001;&#x800C;&#x975E;&#x53CC;&#x6838;&#x5FC3;&#x539F;&#x751F;&#x8BBE;&#x8BA1;&#xFF0C;&#x88AB;&#x8BBD;&#x523A;&#x4E3A;&#x80F6;&#x6C34;&#x5927;&#x6CD5;&#xFF0C;&#x8D85;&#x9AD8;&#x7684;&#x529F;&#x8017;&#x548C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160880.html" target="_blank" rel="external">MemSQL 4.0.27 &#x53D1;&#x5E03;&#xFF0C;&#x5305;&#x62EC;&#x5168;&#x65B0;&#x793E;&#x533A;&#x7248;&#x672C;&#xFF01;</a></td><tr><td>MemSQL &#x4ECA;&#x5929;&#x53D1;&#x5E03; MemSQL &#x5168;&#x65B0;&#x793E;&#x533A;&#x7248;&#x672C;&#xFF0C;&#x514D;&#x8D39;&#xFF0C;&#x65E0;&#x9650;&#x5BB9;&#x91CF;&#xFF0C;&#x65E0;&#x9650;&#x89C4;&#x6A21;&#xFF0C;&#x5305;&#x62EC;&#x6240;&#x6709;&#x4E8B;&#x7269;&#x548C;&#x5206;&#x6790;&#x529F;&#x80FD;&#xFF01; &#x7531;&#x524D; Facebook &#x5DE5;&#x7A0B;&#x5E08;&#x521B;&#x529E;&#x7684; MemSQL&#xFF0C;&#x53F7;&#x79F0;&#x4E16;&#x754C;&#x4E0A;&#x6700;&#x5FEB;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;</td></tr><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbfe4f.jpg" alt=""></td></tr></tbody></table></p>
<p><td><a href="http://www.linuxeden.com/html/versionupdate/2015/05/160875.html" target="_blank" rel="external">PhoneGap Desktop App 0.1.7 beta &#x53D1;&#x5E03;</a></td><tr><td>PhoneGap Desktop App 0.1.7 beta &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x662F;&#x4FEE;&#x590D; PhoneGap Desktop App 0.1.6 Beta &#x7684;&#x4E00;&#x4E2A;&#x5173;&#x952E; bug&#x3002; &#x5B89;&#x88C5; &#x4E0B;&#x8F7D;&#x548C;&#x5B89;&#x88C5; PhoneGap Desktop App 0.1.7 Beta&#xFF1A; OS X &#xFF1A; Ph</td></tr>&#x65F6;&#x95F4;: 2015-05-21 21:56 &#x4F5C;&#x8005; :zhangkai &#x539F;&#x6587;&#x94FE;&#x63A5; </p>
]]></content>
    <summary type="html">
    <![CDATA[<p><table><tbody><tr><td><img src="http://taojinke.github.io/img/20150706/2cbf6fc.gif" alt=""></td></tr></tbody></table></p>
<p><td><a href=]]>
    </summary>
    
      <category term="MemSQL" scheme="http://taojinke.github.io/tags/MemSQL/"/>
    
      <category term="PhoneGap" scheme="http://taojinke.github.io/tags/PhoneGap/"/>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[io.js 2.1.0 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2ccda09/"/>
    <id>http://taojinke.github.io/2015/07/06/2ccda09/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.223Z</updated>
    <content type="html"><![CDATA[<p>io.js 2.1.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#xFF1A;</p>
<ul>
<li><strong>crypto</strong> : Diffie-Hellman key exchange (DHE) parameters ( &apos;dhparams&apos;) must now be 1024 bits or longer or an error will be thrown.&#xA0; <a href="https://github.com/nodejs/io.js/pull/1739" target="_blank" rel="external">#1739</a> .</li>
<li><strong>node</strong> : A new —trace-sync-iocommand line flag will print a warning and a stack trace whenever a synchronous API is used.&#xA0; <a href="https://github.com/nodejs/io.js/pull/1707" target="_blank" rel="external">#1707</a> .</li>
<li><strong>node</strong> : To allow for chaining of methods, the setTimeout() , setKeepAlive() , setNoDelay() , ref() and unref() methods used in &apos;net&apos; , &apos;dgram&apos; , &apos;http&apos; , &apos;https&apos; and &apos;tls&apos; now return the current instance instead of undefined(Roman Reiss &amp; Evan Lucas) <a href="https://github.com/nodejs/io.js/pull/1699" target="_blank" rel="external">#1699</a><a href="https://github.com/nodejs/io.js/pull/1768" target="_blank" rel="external">#1768</a><a href="https://github.com/nodejs/io.js/pull/1779" target="_blank" rel="external">#1779</a> .</li>
<li><strong>npm</strong>: Upgraded to v2.10.1, release notes can be found in <a href="https://github.com/npm/npm/releases/tag/v2.10.1" target="_blank" rel="external">https://github.com/npm/npm/releases/tag/v2.10.1</a> and <a href="https://github.com/npm/npm/releases/tag/v2.10.0" target="_blank" rel="external">https://github.com/npm/npm/releases/tag/v2.10.0</a> .</li>
<li><p><strong>util</strong> : A significant speed-up (in the order of 35%) for the common-case of a single string argument to util.format() , used by console.log()(&#x421;&#x43A;&#x43E;&#x432;&#x43E;&#x440;&#x43E;&#x434;&#x430; &#x41D;&#x438;&#x43A;&#x438;&#x442;&#x430; &#x410;&#x43D;&#x434;&#x440;&#x435;&#x435;&#x432;&#x438;&#x447;) <a href="https://github.com/nodejs/io.js/pull/1749" target="_blank" rel="external">#1749</a> .</p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/nodejs/io.js/archive/v2.1.0.zip" target="_blank" rel="external">https://github.com/nodejs/io.js/archive/v2.1.0.zip</a> &#x3002;</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B; <a href="https://github.com/nodejs/io.js/blob/master/CHANGELOG.md" target="_blank" rel="external">&#x66F4;&#x65B0;&#x65E5;&#x5FD7;</a> &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A; <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a> &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 2.1.0 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/62720/io-js-2-1-0" target="_blank" rel="external">http://www.oschina.net/news/62720/io-js-2-1-0</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>io.js 2.1.0 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#xFF1A;</p>
<ul>
<li]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[io.js 2.0.2 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cd0d4e/"/>
    <id>http://taojinke.github.io/2015/07/06/2cd0d4e/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.223Z</updated>
    <content type="html"><![CDATA[<p>io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>win,node-gyp</strong>: the delay-load hook for windows addons has now been correctly enabled by default, it had wrongly defaulted to off in the release version of 2.0.0 (Bert Belder) <a href="https://github.com/iojs/io.js/pull/1433" target="_blank" rel="external">#1433</a></li>
<li><strong>os</strong> : tmpdir()&apos;s trailing slash stripping has been refined to fix an issue when the temp directory is at &apos;/&apos;. Also considers which slash is used by the operating system. (cjihrig) <a href="https://github.com/iojs/io.js/pull/1673" target="_blank" rel="external">#1673</a></li>
<li><strong>tls</strong>: default ciphers have been updated to use gcm and aes128 (Mike MacCana) <a href="https://github.com/iojs/io.js/pull/1660" target="_blank" rel="external">#1660</a></li>
<li><strong>build</strong>: v8 snapshots have been re-enabled by default as suggested by the v8 team, since prior security issues have been resolved. This should give some perf improvements to both startup and vm context creation. (Trevor Norris) <a href="https://github.com/iojs/io.js/pull/1663" target="_blank" rel="external">#1663</a></li>
<li><strong>src</strong> : fixed preload modules not working when other flags were used before —require(Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1694" target="_blank" rel="external">#1694</a></li>
<li><strong>dgram</strong> : fixed send()&apos;s callback not being asynchronous (Yosuke Furukawa) <a href="https://github.com/iojs/io.js/pull/1313" target="_blank" rel="external">#1313</a></li>
<li><strong>readline</strong>: emitKeys now keeps buffering data until it has enough to parse. This fixes an issue with parsing split escapes. (Alex Kocharin) <a href="https://github.com/iojs/io.js/pull/1601" target="_blank" rel="external">#1601</a></li>
<li><strong>cluster</strong> : works now properly emit &apos;disconnect&apos; to cluser.worker(Oleg Elifantiev) <a href="https://github.com/iojs/io.js/pull/1386" target="_blank" rel="external">#1386</a></li>
<li><p><strong>events</strong>: uncaught errors now provide some context (Evan Lucas) <a href="https://github.com/iojs/io.js/pull/1654" target="_blank" rel="external">#1654</a></p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A; <a href="https://github.com/nodejs/io.js/archive/v2.0.2.zip" target="_blank" rel="external">https://github.com/nodejs/io.js/archive/v2.0.2.zip</a> &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A; <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a> &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[ <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/62514/io-js-2-0-2" target="_blank" rel="external">http://www.oschina.net/news/62514/io-js-2-0-2</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>io.js 2.0.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[io.js 1.6.2 发布，服务器 JS 引擎 -]]></title>
    <link href="http://taojinke.github.io/2015/07/06/2cef0b4/"/>
    <id>http://taojinke.github.io/2015/07/06/2cef0b4/</id>
    <published>2015-07-06T01:30:32.000Z</published>
    <updated>2015-07-06T13:30:32.432Z</updated>
    <content type="html"><![CDATA[<p>io.js 1.6.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6539;&#x8FDB;&#x4E86;&#x5BF9; Windows &#x7684;&#x652F;&#x6301;&#xFF0C;&#x4FEE;&#x590D;&#x4E86; FreeBSD &#x53D1;&#x73B0;&#x7684; BUG&#x3002;</p>
<p>&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>Windows&#xFF1A;The ongoing work in improving the state of Windows support has resulted in full test suite passes once again. As noted in the release notes for v1.4.2, CI system and configuration problems prevented it from properly reporting problems with the Windows tests, the problems with the CI and the codebase appear to have been fully resolved.</li>
<li><strong>FreeBSD</strong>: A  <a href="https://lists.freebsd.org/pipermail/freebsd-current/2015-March/055043.html" target="_blank" rel="external">kernel bug</a>  impacting io.js/Node.js was  <a href="https://github.com/joyent/node/issues/9326" target="_blank" rel="external">discovered</a>  and a patch has been introduced to prevent it causing problems for io.js (Fedor Indutny)  <a href="https://github.com/iojs/io.js/pull/1218" target="_blank" rel="external">#1218</a>  .</li>
<li><strong>module</strong> : you can now require(&apos;.&apos;) instead of having to require(&apos;./&apos;), this is considered a bugfix (Micha&#xEB;l Zasso)  <a href="https://github.com/iojs/io.js/pull/1185" target="_blank" rel="external">#1185</a>  .</li>
<li><p>v8: updated to 4.1.0.25 including patches for —max_old_space_size values aboveand Solaris support, both of which are already included in io.js.</p>
<p>&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x8BF7;&#x770B;  <a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md" target="_blank" rel="external">&#x53D1;&#x884C;&#x8BF4;&#x660E;</a>  &#x3002;</p>
<p>&#x6B64;&#x7248;&#x672C;&#x73B0;&#x5DF2;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF1A;  <a href="https://github.com/iojs/io.js/archive/v1.6.2.zip" target="_blank" rel="external">https://github.com/iojs/io.js/archive/v1.6.2.zip</a>  &#x3002;</p>
<p>IO.js &#x662F;&#x4E3A;  <a href="http://www.oschina.net/p/v8" target="_blank" rel="external">V8</a>  &#x5F15;&#x64CE;&#x7F16;&#x5199;&#x7684;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6; IO &#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
</ul>
<p>&#x6784;&#x5EFA;&#x8981;&#x6C42;&#xFF1A;</p>
<ul>
<li><code>gcc</code> and <code>g++</code> 4.8 or newer, or   </li>
<li><code>clang</code> and <code>clang++</code> 3.3 or newer   </li>
<li>Python 2.6 or 2.7   </li>
<li>GNU Make 3.81 or newer   </li>
<li><p>libexecinfo (FreeBSD and OpenBSD only) </p>
<p>&#x6587;&#x7AE0;&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A; <strong>&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x793E;&#x533A;</strong>[  <a href="http://www.oschina.net/" target="_blank" rel="external">http://www.oschina.net</a></p>
</li>
</ul>
<p>]</p>
<p>&#x672C;&#x6587;&#x6807;&#x9898;&#xFF1A;io.js 1.6.2 &#x53D1;&#x5E03;&#xFF0C;&#x670D;&#x52A1;&#x5668; JS &#x5F15;&#x64CE;</p>
<p>&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://www.oschina.net/news/60828/io-js-1-6-2" target="_blank" rel="external">http://www.oschina.net/news/60828/io-js-1-6-2</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>io.js 1.6.2 &#x53D1;&#x5E03;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x6539;&#x8FDB;&#x4E86;&#x5BF9; Windows &#x7684;&#x652F;&#x6301;&#xFF0C;&#x4]]>
    </summary>
    
      <category term="io.js" scheme="http://taojinke.github.io/tags/io-js/"/>
    
      <category term="transcribe" scheme="http://taojinke.github.io/categories/transcribe/"/>
    
  </entry>
  
</feed>